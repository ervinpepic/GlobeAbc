function _callSuper(e,t,n){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],_getPrototypeOf(e).constructor):t.apply(e,n))}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(i=>{var r=(()=>_createClass(function e(t){_classCallCheck(this,e),null!=t&&(this.event_data=[],this.track_name=this.getTrackName(),this.track_id=t.id,this.settings=t.settings,this.data=t.data,this.maybe_fired="",this.init(),this.attach_triggers())},[{key:"getTrackName",value:function(){return""}},{key:"init",value:function(){}},{key:"attach_triggers",value:function(){var e=this;"complete"===document.readyState||"loading"===document.readyState?i(document).ready(function(){try{e.triggers()}catch(e){console.log(e)}}):i(window).on("load",function(){try{e.triggers()}catch(e){console.log(e)}})}},{key:"add_to_cart_event",value:function(){var n=this;i(document.body).on("added_to_cart",function(e,t){try{"object"==_typeof(t)&&t.hasOwnProperty("wffnTracking")&&(wffnTracking.pending_events=t.wffnTracking.pending_events,n.pending_events(!0))}catch(e){console.log(e)}})}},{key:"triggers",value:function(){this.add_to_cart_event();var e,t=this;"1"==t.settings.page_view&&t.load(),i("#wffn_late_event").length?(e=JSON.parse(i("#wffn_late_event").attr("dir")),Array.isArray(e)?e.forEach(function(e){setTimeout(function(){self.maybe_fired="",wffnTracking.pending_events=e,t.pending_events(),void 0!==t.fire_data&&t.fire_data()},200)}):(wffnTracking.pending_events=e,t.pending_events())):t.pending_events(),""!==t.track_name&&wffnTracking[t.track_name].hasOwnProperty("content_data")&&"1"==t.settings.view_content&&t.event_single_product_view_content(wffnTracking[t.track_name].content_data),void 0!==t.fire_data&&t.fire_data()}},{key:"pending_events",value:function(e){var t=this;if(wffnTracking.pending_events.hasOwnProperty(t.track_name))for(var n in wffnTracking.pending_events[t.track_name]){var i="";""!==(i=void 0!==wffnTracking.pending_events[t.track_name][n].event_id?wffnTracking.pending_events[t.track_name][n].event_id:i)&&t.maybe_fired===i||(t.maybe_fired=i,t.handle_pending(wffnTracking.pending_events[t.track_name][n].event,wffnTracking.pending_events[t.track_name][n].data,i))}!0===e&&void 0!==t.fire_data&&t.fire_data()}},{key:"load",value:function(){}},{key:"event_single_product_view_content",value:function(e){}},{key:"handle_pending",value:function(e,t,n){}}],[{key:"enqueue_js",value:function(){}}]))(),C=(()=>{function n(e,t){return _classCallCheck(this,n),(e=_callSuper(this,n,[e])).track_name="pixel",e.eventCount=t,e}return _inherits(n,r),_createClass(n,[{key:"getTrackName",value:function(){return"pixel"}},{key:"fire_data",value:function(){var e;0===this.eventCount&&void 0!==this.event_data&&0!==this.event_data.length&&(wffnTracking.is_ajax_mode?i.ajax({type:"POST",url:wffnTracking.ajax_endpoint,data:{action:"wffn_tracking_events",is_sitewide:!0,events:this.event_data},success:function(){this.event_data=[]},dataType:"application/json"}):(e={events:this.event_data,is_sitewide:!0},fetch(window.wffnTracking.restUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"wffn_tracking_events",data:e})})),this.event_data=[])}},{key:"send_data",value:function(e,t,n,i){this.event_data.push({event:e,data:t,event_id:n}),!0===i&&this.fire_data()}},{key:"handle_pending",value:function(e,t,n){this.fbq(e,t,n,!1)}},{key:"fbq",value:(a=function(e,t,n,i){n=void 0===n?this.get_event_id():n,t="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent(t):t,1==wffnTracking.pixel.conversion_api&&this.send_data(e,t,n,i),fbq("trackSingle",this.track_id,e,t,{eventID:n})},e.toString=function(){return a.toString()},e)},{key:"init",value:function(){wffnTracking.pixel.hasOwnProperty("fb_advanced")&&0!==wffnTracking.pixel.fb_advanced.length?fbq("init",this.track_id,wffnTracking.pixel.fb_advanced):fbq("init",this.track_id)}},{key:"load",value:function(){this.fbq("PageView",{},void 0,!1)}},{key:"event_single_product_view_content",value:function(e){this.fbq("ViewContent",this.maybeDateTime(e),void 0,!1)}},{key:"get_event_id",value:function(){var e=(new Date).getTime();return parseInt(e/1e3)}},{key:"maybeDateTime",value:function(e){var t=new Date;return t.event_time=["00-01","01-02","02-03","03-04","04-05","05-06","06-07","07-08","08-09","09-10","10-11","11-12","12-13","13-14","14-15","15-16","16-17","17-18","18-19","19-20","20-21","21-22","22-23","23-24"][t.getHours()],t.event_day=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],t.event_month=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],e}}],[{key:"enqueue_js",value:function(){var e,t,n;t=window,n=document,t.fbq||(e=t.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},t._fbq||(t._fbq=e),(e.push=e).loaded=!0,e.version="2.0",e.queue=[],(t=n.createElement("script")).defer=!0,t.src="https://connect.facebook.net/en_US/fbevents.js",(n=n.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n))}}]);function e(e,t,n,i){return a.apply(this,arguments)}var a})(),S=(()=>{function t(e){return _classCallCheck(this,t),(e=_callSuper(this,t,[e])).track_name="ga",window.dataLayer=window.dataLayer||[],e.gtag("config",e.track_id,{}),e}return _inherits(t,r),_createClass(t,[{key:"getTrackName",value:function(){return"ga"}},{key:"load",value:function(){"gad"===this.track_name&&"undefined"!==this.settings.page_view&&"1"===this.settings.page_view&&this.gtag("event","page_view",{send_to:this.track_id})}},{key:"gtag",value:function(){dataLayer.push(arguments)}},{key:"handle_pending",value:function(e,t,n){t="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent(t):t,"add_to_cart"===e&&void 0!==this.idlabel&&""!==this.idlabel&&"gad"===this.track_name&&"add_to_cart"===e?(t.send_to=this.idlabel,t.non_interaction=!0):t.send_to=this.track_id,this.gtag("event",e,t)}},{key:"event_single_product_view_content",value:function(e){var t;e.hasOwnProperty("view_item")&&(t=e.view_item,t="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent(t):t,e.view_item.send_to=this.track_id,e.view_item.non_interaction=!0,this.gtag("event","view_item",e.view_item))}}],[{key:"enqueue_js",value:function(e){var t,n;window,t=document,e="//www.googletagmanager.com/gtag/js?id="+e,n=t.createElement("script"),t=t.getElementsByTagName("script")[0],n.defer=1,n.src=e,t.parentNode.insertBefore(n,t),window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){dataLayer.push(arguments)},gtag("js",new Date)}}])})(),j=(()=>{function n(e){var t;return _classCallCheck(this,n),(t=_callSuper(this,n,[e])).track_name="gad",t.idlabel=void 0!==e.idlabel?e.idlabel:"",window.dataLayer=window.dataLayer||[],t}return _inherits(n,S),_createClass(n,[{key:"getTrackName",value:function(){return"gad"}}])})(),N=(()=>{function t(e){return _classCallCheck(this,t),(e=_callSuper(this,t,[e])).track_name="pint",e}return _inherits(t,r),_createClass(t,[{key:"getTrackName",value:function(){return"pint"}},{key:"init",value:function(e){this.track_id.split(",").forEach(function(e){pintrk("load",e)})}},{key:"load",value:function(){pintrk("page")}},{key:"handle_pending",value:function(e,t,n){this.pint(e,t)}},{key:"pint",value:function(e,t){window.pintrk&&(t="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent(t):t,pintrk("track",e,t))}},{key:"event_single_product_view_content",value:function(e){this.pint("PageVisit",e)}}],[{key:"enqueue_js",value:function(){var e,t;window.pintrk||(window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},(e=window.pintrk).queue=[],e.version="3.0",(e=document.createElement("script")).defer=!0,e.src="https://s.pinimg.com/ct/core.js",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t))}}])})(),E=(()=>{function t(e){return _classCallCheck(this,t),(e=_callSuper(this,t,[e])).track_name="tiktok",e}return _inherits(t,r),_createClass(t,[{key:"getTrackName",value:function(){return"tiktok"}},{key:"init",value:function(){"object"===("undefined"==typeof ttq?"undefined":_typeof(ttq))&&(ttq.load(this.track_id),wffnTracking.tiktok.hasOwnProperty("advanced"))&&0!==wffnTracking.tiktok.advanced.length&&ttq.instance(this.track_id).identify(wffnTracking.tiktok.advanced)}},{key:"load",value:function(){ttq.page()}},{key:"ttq",value:(n=function(e,t){var n;"object"===("undefined"==typeof ttq?"undefined":_typeof(ttq))&&(n=this,setTimeout(function(){ttq.instance(n.track_id).track(e,t)},1200))},e.toString=function(){return n.toString()},e)},{key:"handle_pending",value:function(e,t,n){this.ttq(e,t)}},{key:"event_single_product_view_content",value:function(e){e.content_id=e.post_id,e.content_type="product",delete e.user_role,delete e.event_url,delete e.category_name,delete e.content_ids,delete e.product_price,delete e.post_id,delete e.landing_page,delete e.traffic_source,delete e.contents,this.ttq("ViewContent",e)}}],[{key:"enqueue_js",value:function(){var e=window,i=(document,"ttq"),a=(e.TiktokAnalyticsObject=i,e.ttq=e.ttq||[]);a.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],a.setAndDefer=function(e,t){e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}};for(var t=0;t<a.methods.length;t++)a.setAndDefer(a,a.methods[t]);a.instance=function(e){for(var t=a._i[e]||[],n=0;n<a.methods.length;n++)a.setAndDefer(t,a.methods[n]);return t},a.load=function(e,t){var n="https://analytics.tiktok.com/i18n/pixel/events.js",t=(a._i=a._i||{},a._i[e]=[],a._i[e]._u=n,a._t=a._t||{},a._t[e]=+new Date,a._o=a._o||{},a._o[e]=t||{},document.createElement("script")),n=(t.type="text/javascript",t.defer=!0,t.src=n+"?sdkid="+e+"&lib="+i,document.getElementsByTagName("script")[0]);n.parentNode.insertBefore(t,n)}}}]);function e(e,t){return n.apply(this,arguments)}var n})(),A=(()=>{function t(e){return _classCallCheck(this,t),(e=_callSuper(this,t,[e])).track_name="snapchat",e}return _inherits(t,r),_createClass(t,[{key:"getTrackName",value:function(){return"snapchat"}},{key:"init",value:function(){"function"==typeof snaptr&&snaptr("init",this.track_id,{integration:"woocommerce",user_email:this.settings.user_email})}},{key:"load",value:function(){this.snaptr("PAGE_VIEW",{})}},{key:"snaptr",value:(n=function(e,t){"function"==typeof snaptr&&(t="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent(t):t,snaptr("track",e,t))},e.toString=function(){return n.toString()},e)},{key:"handle_pending",value:function(e,t,n){this.snaptr(e,t)}}],[{key:"enqueue_js",value:function(){var e,t,n;e=window,t=document,e.snaptr||((n=e.snaptr=function(){n.handleRequest?n.handleRequest.apply(n,arguments):n.queue.push(arguments)}).queue=[],(e=t.createElement("script")).defer=!0,e.src="https://sc-static.net/scevent.min.js",(t=t.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t))}}]);function e(e,t){return n.apply(this,arguments)}var n})(),e=(()=>_createClass(function e(){_classCallCheck(this,e)},null,[{key:"init",value:function(){var n=this;wffnTracking.hasOwnProperty("is_delay")&&0!==wffnTracking.is_delay?setTimeout(function(){n.fire_events()},wffnTracking.is_delay):"function"!=typeof window.cmplz_enable_category&&n.fire_events();try{void 0!==i&&i.fn&&i.fn.on&&i(document).on("cmplz_enable_category",function(e){try{var t;e&&e.originalEvent&&e.originalEvent.detail?(t=e.originalEvent.detail.category)?"marketing"===t&&n.fire_events():console.log("Missing category in consent data","Consent Handler"):console.log("Invalid consent event data","Consent Handler")}catch(e){console.log(e,"Consent Category Handler")}})}catch(e){console.log(e,"Consent Management Setup")}}},{key:"fire_events",value:function(){var e={},t=!1;if(1==wffnTracking.should_render&&wffnTracking.hasOwnProperty("pixel")&&wffnTracking.pixel.hasOwnProperty("id")&&""!==wffnTracking.pixel.id){C.enqueue_js();var n=wffnTracking.pixel.id.split(",");if(0<n.length){e.facebook={};for(var i=0;i<n.length;i++){var a=n[i],r=JSON.stringify(wffnTracking.pixel);(r=JSON.parse(r)).id=a.trim(),e.facebook[a]=new C(r,i)}}}if(1==wffnTracking.should_render&&wffnTracking.hasOwnProperty("ga")&&wffnTracking.ga.hasOwnProperty("id")&&""!==wffnTracking.ga.id){var o=wffnTracking.ga.id.split(",");if(0<o.length){t||(S.enqueue_js(o[0]),t=!0),e.ga={};for(var c=0;c<o.length;c++){var f=o[c],s=JSON.stringify(wffnTracking.ga);(s=JSON.parse(s)).id=f.trim(),e.ga[f]=new S(s)}}}if(1==wffnTracking.should_render&&wffnTracking.hasOwnProperty("gad")&&wffnTracking.gad.hasOwnProperty("id")&&""!==wffnTracking.gad.id){var d=wffnTracking.gad.id.split(","),u=[];if("string"==typeof wffnTracking.gad.labels&&(u=wffnTracking.gad.labels.split(",")),0<d.length){t||(S.enqueue_js(d[0]),t=!0),e.gad={};for(var l=0;l<d.length;l++){var _=d[l],p=JSON.stringify(wffnTracking.gad);(p=JSON.parse(p)).id=_.trim(),void 0!==u[l]&&""!==u[l]&&(p.idlabel=p.id+"/"+u[l].trim()),e.gad[_]=new j(p)}}}if(1==wffnTracking.should_render&&wffnTracking.hasOwnProperty("pint")&&wffnTracking.pint.hasOwnProperty("id")&&""!==wffnTracking.pint.id){var g=wffnTracking.pint.id.split(",");if(0<g.length){N.enqueue_js(),e.pint={};for(var v=0;v<g.length;v++){var y=g[v],k=JSON.stringify(wffnTracking.pint);(k=JSON.parse(k)).id=y.trim(),e.pint[y]=new N(k)}}}if(1==wffnTracking.should_render&&wffnTracking.hasOwnProperty("tiktok")&&wffnTracking.tiktok.hasOwnProperty("id")&&""!==wffnTracking.tiktok.id){var h=wffnTracking.tiktok.id.split(",");if(0<h.length){E.enqueue_js(),e.tiktok={};for(var w=0;w<h.length;w++){var m=h[w],T=JSON.stringify(wffnTracking.tiktok);(T=JSON.parse(T)).id=m.trim(),e.tiktok[m]=new E(T)}}}if(1==wffnTracking.should_render&&wffnTracking.hasOwnProperty("snapchat")&&wffnTracking.snapchat.hasOwnProperty("id")&&""!==wffnTracking.snapchat.id){var b=wffnTracking.snapchat.id.split(",");if(0<b.length){A.enqueue_js(),e.snapchat={};for(var O=0;O<b.length;O++){var P=b[O],q=JSON.stringify(wffnTracking.snapchat);(q=JSON.parse(q)).id=P.trim(),e.snapchat[P]=new A(q)}}}}}]))();try{e.init()}catch(e){console.log(e)}})(jQuery);