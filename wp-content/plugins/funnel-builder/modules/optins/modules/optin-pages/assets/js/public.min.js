function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}(p=>{({init:function(){var n=this;p(document).ready(function(){n.renderForm(),n.handleSubmit(),n.renderPBPopUps(),n.attachCloseBtn(),n.initPhoneFlag()}),p(document).on("wffn_reload_popups",function(){n.renderPBPopUps()}),p(document).on("wffn_reload_phone_field",function(){n.initPhoneFlag()})},initPhoneFlag:function(){var n,e={initialCountry:window.wfffOptinVars.op_flag_country,separateDialCode:!0,geoIpLookup:function(e){p.get("https://ipinfo.io",function(){},"jsonp").always(function(n){n=n&&n.country?n.country:"us";e(n)})}},t=(void 0!==window.wfffOptinVars.onlyCountries&&0<window.wfffOptinVars.onlyCountries.length&&(e.onlyCountries=window.wfffOptinVars.onlyCountries),document.querySelectorAll(".phone_flag_code input[type='tel']"));for(n in t)"object"===_typeof(t[n])&&void 0!==window.intlTelInput&&window.intlTelInput(t[n],e)},attachCloseBtn:function(){jQuery(document).on("click",".bwf_pp_close",function(n){n.preventDefault(),jQuery(".bwf_pp_overlay").removeClass("show_popup_form"),jQuery("body").css("overflow","")})},renderPBPopUps:function(){jQuery(".wfop_pb_widget_wrap").each(function(){var e=this;jQuery(this).find(".bwf-custom-button a").click(function(n){n.preventDefault(),jQuery(e).find(".bwf_pp_overlay").addClass("show_popup_form"),jQuery("body").css("overflow","hidden")})})},renderForm:function(){0<jQuery(".bwf_pp_overlay").length&&jQuery('a[href*="wfop-popup=yes"]').on("click",function(n){n.preventDefault(),jQuery(".bwf_pp_overlay").addClass("show_popup_form")})},DoValidation:function(f){var r=!0;return jQuery(f).find(".wfop_required").each(function(){var n=jQuery(this),e=null,t=window.wfffOptinVars.op_valid_text,a=window.wfffOptinVars.op_valid_email,o=(""===jQuery.trim(n.val())?e=t:"checkbox"===n.attr("type")?n.prop("checked")||(e=t):"radio"===n.attr("type")&&(o=n.attr("name"),0===jQuery(f).find("input:radio[name="+o+"]:checked").length)&&(e=t),new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i));null!==(e=""===jQuery.trim(n.val())||"wfop_optin_email"!==n.attr("name")||jQuery.trim(n.val()).match(o)?e:a)&&(n.parents(".bwfac_form_sec").addClass("bwfac_error"),0===n.parents(".bwfac_form_sec").find(".error").length&&n.parents(".bwfac_form_sec").append('<span class="error">'+e+"</span>"),r=!1)}),jQuery(f).find(".wfop_phone_validation .wffn-optin-input").each(function(){var n,e=jQuery(this),t=null,a=window.wfffOptinVars.op_valid_phone;null!==(t=""===jQuery.trim(e.val())||"wfop_optin_phone"!==e.attr("name")||void 0===window.intlTelInputGlobals||(n=window.intlTelInputGlobals.getInstance(e.get(0))).isValidNumber()?t:Array.isArray(a)?a[n.getValidationError()]:a)&&(e.parents(".bwfac_form_sec").addClass("bwfac_error"),0===e.parents(".bwfac_form_sec").find(".error").length&&e.parents(".bwfac_form_sec").append('<span class="error">'+t+"</span>"),r=!1)}),window.wffnFormValid=r,jQuery(document).trigger("wffn_custom_optin_form_validate",[f,r]),window.wffnFormValid},setUpClick:function(r){var i=this;jQuery(r).find("#wffn_custom_optin_submit").on("click",function(n){var e=!0,t=(jQuery(this).removeAttr("disabled"),jQuery(this)),a=r,o=(jQuery(a).find(".bwfac_form_sec").removeClass("bwfac_error"),jQuery(a).find(".bwfac_form_sec .error").remove(),jQuery(a).find("input[name=optin_is_admin]").val()),f=jQuery(a).find("input[name=optin_is_ajax]").val(),a=jQuery(a).find("input[name=optin_is_preview]").val();(o||f||a)&&(e=!1),e=i.DoValidation(r),n.preventDefault(),e?(jQuery(this).attr("disabled","disabled"),o=jQuery(this).attr("data-subitting-text"),jQuery(r).find("button.wfop_submit_btn .bwf_heading").html(o),void 0!==window.intlTelInputGlobals&&void 0!==jQuery(r).find('input[name="wfop_optin_phone"]').get(0)&&(f=window.intlTelInputGlobals.getInstance(jQuery(r).find('input[name="wfop_optin_phone"]').get(0)).getSelectedCountryData(),jQuery(r).find('input[name="wfop_optin_phone_dialcode"]').eq(0).val("+"+f.dialCode),jQuery(r).find('input[name="wfop_optin_phone_countrycode"]').eq(0).val(f.iso2)),t.parents(".wffn-custom-optin-from").addClass("wffn-form-overlay"),i.handleLeadEvent(),a="",void 0!==window.wffnPublicVars&&Object.hasOwnProperty.call(window.wffnfunnelData,"hash")&&(a=window.wffnfunnelData.hash),jQuery.ajax({url:window.wffnfunnelVars.ajaxUrl+"?action=wffn_submit_custom_optin_form&lead_event_id="+wffnfunnelVars.op_lead_tracking.fb.event_ID+"&wffn-si="+a,data:jQuery(r).serialize(),dataType:"json",type:"post"}).always(function(n){if(t.parents(".wffn-custom-optin-from").addClass("wffn-form-overlay"),Object.prototype.hasOwnProperty.call(n,"mapped")){for(var e in n.mapped)jQuery(".wfop_integration_form input[name='"+e+"']").val(n.mapped[e]);jQuery(".wfop_integration_form").trigger("submit")}else Object.prototype.hasOwnProperty.call(n,"next_url")&&""!==n.next_url&&(window.location.href=n.next_url)})):console.log("form validation failed")})},handleSubmit:function(){var n=this;jQuery("form.wffn-custom-optin-from").each(function(){n.setUpClick(this)})},handleLeadEvent:function(){var n,e,t,a,o,f,r,i,u;1==wffnfunnelVars.op_should_render&&("object"===_typeof(wffnfunnelVars.op_lead_tracking.fb.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.fb.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.fb.fb_pixels&&("undefined"==typeof fbq&&(a=window,e=document,a.fbq||(n=a.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},a._fbq||(a._fbq=n),(n.push=n).loaded=!0,n.version="2.0",n.queue=[],(a=e.createElement("script")).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(e=e.getElementsByTagName("script")[0]).parentNode.insertBefore(a,e)),a=wffnfunnelVars.op_lead_tracking.fb.fb_pixels.split(","),p(a).each(function(n,e){fbq("init",e)})),e={value:"0.00",currency:wffnfunnelVars.op_lead_tracking.fb.currency||"USD"},e="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent(e):e,fbq("track","Lead",e,{eventID:wffnfunnelVars.op_lead_tracking.fb.event_ID})),"object"===_typeof(wffnfunnelVars.op_lead_tracking.pint.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.pint.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.pint.pixels&&(window.pintrk||(window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},(a=window.pintrk).queue=[],a.version="3.0",(a=document.createElement("script")).async=!0,a.src="https://s.pinimg.com/ct/core.js",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(a,o)),o=wffnfunnelVars.op_lead_tracking.pint.pixels.split(","),t="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},p(o).each(function(n,e){pintrk("load",e,{np:"woofunnels"}),pintrk("track","Lead",t)})),"undefined"!=typeof gtag&&"object"===_typeof(wffnfunnelVars.op_lead_tracking.ga.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.ga.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.ga.ids&&(r=wffnfunnelVars.op_lead_tracking.ga.ids.split(","),f="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},p(r).each(function(n,e){f.send_to=e,gtag("event","Lead",f)})),"undefined"!=typeof gtag)&&"object"===_typeof(wffnfunnelVars.op_lead_tracking.gad.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.gad.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.gad.ids&&(r=wffnfunnelVars.op_lead_tracking.gad.ids.split(","),i=[],"string"==typeof wffnfunnelVars.op_lead_tracking.gad.labels&&(i=wffnfunnelVars.op_lead_tracking.gad.labels.split(",")),u="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},p(r).each(function(n,e){void 0!==i[n]&&""!==i[n]?u.send_to=e+"/"+i[n]:u.send_to=e,gtag("event","Lead",u)}))}}).init()})(jQuery);