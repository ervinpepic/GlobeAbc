(window.webpackJsonp=window.webpackJsonp||[]).push([[25,12,35,38,44],{1170:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(126),a=r(2),i=r(29),c=r(30),l=r(4),u=(r(582),r(20));function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var f=Object(n.lazy)((function(){return Promise.all([r.e(3),r.e(4),r.e(7),r.e(0),r.e(26)]).then(r.bind(null,943))})),b=Object(n.lazy)((function(){return Promise.all([r.e(3),r.e(4),r.e(0),r.e(5),r.e(25)]).then(r.bind(null,832))})),p=Object(n.lazy)((function(){return Promise.all([r.e(3),r.e(4),r.e(0),r.e(5),r.e(25)]).then(r.bind(null,834))})),d=Object(n.lazy)((function(){return Promise.all([r.e(3),r.e(4),r.e(0),r.e(5),r.e(25)]).then(r.bind(null,833))}));t.default=function(e){var t=e.funnelId,r=Object(i.a)().fetch,m=c.a.getFunnelTitle(),y=Object(o.useParams)(),O=Object(u.b)().isProFeatureLocked;return Object(n.useEffect)((function(){var e=t||y.id;O&&e&&Object(a.isEmpty)(m)&&r(e)}),[]),Object(n.createElement)(o.Switch,null,Object(n.createElement)(o.Route,{exact:!0,path:["/funnels/:id/analytics","/funnels/:id/analytics/funnels","/store-checkout/analytics","/store-checkout/analytics/funnels"],render:function(e){return Object(n.createElement)(f,s({},e,{funnelId:t}))}}),Object(n.createElement)(o.Route,{exact:!0,path:["/funnels/:id/analytics/conversion","/store-checkout/analytics/conversion"],render:function(e){return Object(n.createElement)(b,s({},e,{funnelId:t}))}}),Object(n.createElement)(o.Route,{exact:!0,path:["/funnels/:id/analytics/utm-campaigns","/store-checkout/analytics/utm-campaigns"],render:function(e){return Object(n.createElement)(d,s({},e,{funnelId:t}))}}),Object(n.createElement)(o.Route,{exact:!0,path:["/funnels/:id/analytics/referrers","/store-checkout/analytics/referrers"],render:function(e){return Object(n.createElement)(p,s({},e,{funnelId:t}))}}),l.v)}},296:function(e,t,r){},297:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(8),l=r(55),u=(r(304),r(5));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,r=void 0===t?[]:t,o=e.className,b=e.center,p=void 0!==b&&b,d=e.isDismissive,m=void 0!==d&&d,y=e.onDismisal,O=void 0===y?function(){}:y,v=e.isProFeatureLocked;if(Object(i.isEmpty)(r))return!1;return Object(n.createElement)("div",{className:a()("bwf-zero-state",o,{"bwf-block-t-center":p})},m&&Object(n.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return O()},style:{transform:"rotate(45deg)"}},Object(n.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(n.createElement)("div",{className:"bwf-zero-state-wrap"},r.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(n.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(n.createElement)(l.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(n.createElement)(l.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(n.createElement)(l.c,null,Object(n.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(n.createElement)(l.b,{className:"bwf_text_left"},e.heading&&Object(n.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(n.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(n.createElement)("div",{className:"bwf-zero-sec-lock"},Object(n.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(n.createElement)(l.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(n.createElement)(c.Button,f({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:a()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&v&&Object(n.createElement)("span",{className:"bwf-zero-sec-lock"},Object(n.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(n.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},304:function(e,t,r){},309:function(e,t,r){"use strict";var n=r(0),o=r(1),a=r(5);r(333);t.a=function(e){var t=e.onClose,r=e.title,i=e.isDismissible,c=void 0===i||i;return Object(n.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-modal-title"},r),c&&Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(o.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(n.createElement)(a.a,{icon:"close",size:20})))}},314:function(e,t,r){"use strict";var n=r(0),o=(r(8),r(6)),a=r.n(o),i=r(2),c=r(15),l=r.n(c),u=r(5),s=r(45),f=(r(296),r(289)),b=function(e){var t=e.disabled,r=e.value,o=e.onChange,c=e.dateFormat,l=e.label,f=e.describedBy,b=e.error,p=e.onFocus,d=e.onKeyDown,m=e.errorPosition,y=e.placeHolder,O=a()("bwf-calendar-input",{"is-empty":0===r.length,"is-error":b}),v=Object(i.uniqueId)("_woo-dates-input"),j=Object(n.useRef)(null);return Object(n.createElement)("div",{className:O},Object(n.createElement)("input",{type:"text",ref:j,className:"bwf-calendar-input-text",value:r,onChange:o,"aria-label":l,id:v,"aria-describedby":"".concat(v,"-message"),placeholder:Object(i.isEmpty)(y)?c.toLowerCase():y,onFocus:p,onKeyDown:d,disabled:t}),b&&Object(n.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:m},b),Object(n.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){p(),j.current&&j.current.focus()}},Object(n.createElement)(u.a,{icon:"calender"})),Object(n.createElement)("p",{className:"screen-reader-text",id:"".concat(v,"-message")},b||f))};b.propTypes={disabled:l.a.bool,value:l.a.string,onChange:l.a.func.isRequired,dateFormat:l.a.string.isRequired,label:l.a.string.isRequired,describedBy:l.a.string.isRequired,error:l.a.string,errorPosition:l.a.string,onFocus:l.a.func,onKeyDown:l.a.func};var p={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop};t.a=Object(f.a)(b,p)},315:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(0),o=(r(329),r(330),r(1)),a=r(8),i=r(2),c=r(60),l=r(13),u=r.n(l),s=r(15),f=r.n(s),b=r(83),p=r(6),d=r.n(p),m=(r(296),r(314)),y=r(300),O=r(4),v=r(84);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}function _(e,t,r){return t=w(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_(this,t,[e])).onDateChange=r.onDateChange.bind(r),r.onInputChange=r.onInputChange.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(a=[{key:"handleKeyDown",value:function(e,t,r){var n=r.keyCode;c.TAB===n&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var r=this.props,n=r.onUpdate,o=r.dateFormat,a=u()(t);n({date:a,text:t?a.format(o):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,r=this.props.dateFormat,n=Object(b.i)(r,t),o=n?null:b.b.invalid;this.props.onUpdate({date:n,text:t,error:t.length>0?o:null})}},{key:"render",value:function(){var e=this,t=this.props,r=t.date,a=t.disabled,c=t.text,s=t.dateFormat,f=t.error,b=t.isInvalidDate,p=t.placeHolder,y=t.position,O=void 0===y?"bottom center":y,j=t.hasValue,g=void 0!==j&&j,h=t.className,_=(Object(l.isMoment)(r)?r.isValid():u()(r).isValid())?r:"";return Object(n.createElement)("div",{className:d()("bwf-specific-date",{"bwf-has-value":g})},Object(n.createElement)(v.a,{position:O,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(h),renderToggle:function(t){var r=t.isOpen,l=t.onToggle;return Object(n.createElement)(m.a,{disabled:!!r&&a,value:c,onChange:e.onInputChange,dateFormat:s,label:Object(o.__)("Choose a date","funnel-builder"),error:f,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date in format %s","funnel-builder"),s),onFocus:Object(i.partial)(e.handleFocus,r,l),"aria-expanded":r,focusOnMount:!1,onKeyDown:Object(i.partial)(e.handleKeyDown,r,l),errorPosition:"top center",placeHolder:p})},renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(k,{onToggle:r,date:_,isInvalidDate:b,onDateChange:e.onDateChange})}}))}}])&&g(r.prototype,a),s&&g(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(n.Component),k=function(e){var t=e.onToggle,r=e.date,o=e.onDateChange,c=e.isInvalidDate,l=Object(n.useRef)();return Object(O.ub)(l,(function(){return t()})),Object(n.createElement)("div",{ref:l},Object(n.createElement)(y.b,{component:!1},Object(n.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(n.createElement)(a.DatePicker,{currentDate:r,onChange:Object(i.partial)(o,t),isInvalidDate:c}))))};S.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=S},320:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(r(3)),a=c(r(394)),i=c(r(397));function c(e){return e&&e.__esModule?e:{default:e}}var l=void 0;function u(e,t){var r,i,c,s,f,b,p,d,m=[],y={};for(b=0;b<e.length;b++)if("string"!==(f=e[b]).type){if(!t.hasOwnProperty(f.value)||void 0===t[f.value])throw new Error("Invalid interpolation, missing component node: `"+f.value+"`");if("object"!==n(t[f.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+f.value+"`","\n> "+l);if("componentClose"===f.type)throw new Error("Missing opening component token: `"+f.value+"`");if("componentOpen"===f.type){r=t[f.value],c=b;break}m.push(t[f.value])}else m.push(f.value);return r&&(s=function(e,t){var r,n,o=t[e],a=0;for(n=e+1;n<t.length;n++)if((r=t[n]).value===o.value){if("componentOpen"===r.type){a++;continue}if("componentClose"===r.type){if(0===a)return n;a--}}throw new Error("Missing closing component token `"+o.value+"`")}(c,e),p=u(e.slice(c+1,s),t),i=o.default.cloneElement(r,{},p),m.push(i),s<e.length-1&&(d=u(e.slice(s+1),t),m=m.concat(d))),1===m.length?m[0]:(m.forEach((function(e,t){e&&(y["interpolation-child-"+t]=e)})),(0,a.default)(y))}t.default=function(e){var t=e.mixedString,r=e.components,o=e.throwErrors;if(l=t,!r)return t;if("object"!==(void 0===r?"undefined":n(r))){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var a=(0,i.default)(t);try{return u(a,r)}catch(e){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},333:function(e,t,r){},338:function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},341:function(e,t,r){},346:function(e,t,r){"use strict";var n=r(0),o=r(15),a=r.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function u(e,t,r){return t=s(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,t,[e])).scrollTo=r.scrollTo.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,window.location.hash?100:250)}},{key:"scrollTo",value:function(){var e=this.props.offset,t=void 0===e?"0":e,r=window.location.hash?window.location.hash.substring(1):null,n=document.getElementById(r);if(n){var o=n.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:o-parseInt(t,10),behavior:"smooth"})}else this.ref.current?window.scrollTo({top:0,behavior:"smooth"}):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(n.createRef)(),Object(n.createElement)("div",{ref:this.ref},e)}}])&&c(r.prototype,o),a&&c(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);b.propTypes={offset:a.a.string},t.a=b},347:function(e,t,r){"use strict";var n=r(1);t.a={calendarLabel:Object(n.__)("Calendar","funnel-builder"),closeDatePicker:Object(n.__)("Close","funnel-builder"),focusStartDate:Object(n.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(n.__)("Clear Date","funnel-builder"),clearDates:Object(n.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(n.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(n.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(n.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(n.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(n.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(n.__)("page up and page down keys","funnel-builder"),homeEnd:Object(n.__)("Home and end keys","funnel-builder"),escape:Object(n.__)("Escape key","funnel-builder"),questionMark:Object(n.__)("Question mark","funnel-builder"),selectFocusedDate:Object(n.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(n.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(n.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(n.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(n.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(n.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(n.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("Selected. %s","funnel-builder"),t)}}},351:function(e,t,r){"use strict";var n=r(0),o=r(8),a=r(31),i=r(15),c=r.n(i),l=r(6),u=r.n(l),s=(r(368),r(5)),f=["labels","isOpen","showIcon","hasValue"];function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var p=function(e){var t=e.labels,r=e.isOpen,i=e.showIcon,c=e.hasValue,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,f),p=u()("bwf-dropdown-button",{"is-open":r,"is-multi-line":t.length>1,"has-value":c});return Object(n.createElement)(o.Button,b({className:p,"aria-expanded":r},l),Object(n.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(n.createElement)("span",{key:t},Object(a.decodeEntities)(e))})),i&&Object(n.createElement)(s.a,{icon:"calender"})))};p.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=p},358:function(e,t,r){"use strict";var n=r(0);t.a=function(e){var t=e.children,r=e.className,o=void 0===r?"":r;return Object(n.createElement)("div",{className:"bwf-c-container"},Object(n.createElement)("div",{className:"bwf-c-content-inner"},Object(n.createElement)("div",{className:"bwf-c-content-body ".concat(o)},t)))}},359:function(e,t,r){"use strict";r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return d}));var n=r(0),o=r(1),a=r(4),i=r(320),c=r.n(i),l=r(2),u=r(13),s=r.n(u),f=function(e,t){return Object(n.createElement)(n.Fragment,null,e.title,":"," ",c()({mixedString:e.operators?e.readable_text:"{{value /}}",components:{key:Object(n.createElement)(n.Fragment,null,e.title),rule:Object(n.createElement)(n.Fragment,null,b(e,t)),value:Object(n.createElement)("strong",{title:Object(n.renderToString)(p(e,t)),className:"bwf-t-overflow-ellipsis"},p(e,t))}}))},b=function(e,t){var r;if(e.operators)return"number"===e.type?e.operators[t.rule]:"search"===e.type?null===(r=e.operators[t.rule])||void 0===r?void 0:r.replace("Is",""):e.operators[t.rule]},p=function(e,t){if("date-range"===e.type)return t.data.period?d[t.data.period]:s()(t.data.after).format(Object(a.Z)())===s()(t.data.before).format(Object(a.Z)())?"".concat(s()(t.data.after).format(Object(a.Z)())):Object(n.createElement)(n.Fragment,null,"".concat(s()(t.data.after).format(Object(a.Z)())," - ").concat(s()(t.data.before).format(Object(a.Z)())));if("select"===e.type)return e.options[t.data];if("number"===e.type||"text"===e.type)return t.data;if("search"===e.type&&Object(l.isArray)(t.data)&&!Object(l.isEmpty)(t.data))return t.data.map((function(e){return e.label})).join(", ");if("search-select"===e.type)return t.data.label;if("checklist"===e.type){if(Object(l.isArray)(t.data))return Object(l.isEmpty)(t.data)||t.data.length!==Object.keys(e.options).length?t.data.map((function(t){return e.options[t]})).join(", "):"All";if(t.data)return e.options[t.data]}return null},d={today:Object(o.__)("Today","funnel-builder"),yesterday:Object(o.__)(" Yesterday","funnel-builder"),week:Object(o.__)("This Week","funnel-builder"),last_week:Object(o.__)("Last Week","funnel-builder"),month:Object(o.__)("This Month","funnel-builder"),last_month:Object(o.__)("Last Month","funnel-builder"),quarter:Object(o.__)("Quarter to Date","funnel-builder"),last_quarter:Object(o.__)("Last Quarter","funnel-builder"),year:Object(o.__)("Year to Date","funnel-builder"),last_year:Object(o.__)("Last Year","funnel-builder"),specificDate:Object(o.__)("On Specific Date","funnel-builder"),custom:Object(o.__)("Custom Date Range","funnel-builder")}},368:function(e,t,r){},384:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(1),l=r(8),u=r(5),s=r(84),f=(r(420),r(288)),b=r(10),p=r.n(b),d=r(132),m=r(4),y=r(22);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){e.slug;var t=e.api,r=e.setData,o=e.value,l=e.searchHelper,u=void 0===l?{}:l,s=e.default_options,f=e.operators,b=e.val_label,O=u.funnelId,j=_(Object(n.useState)([]),2),h=j[0],w=j[1],E=_(Object(n.useState)(Object(i.size)(s)?s:[{id:"no-result",name:"No data available"}]),2),S=E[0],k=E[1],P=_(Object(n.useState)(!Object(i.size)(s)&&!Object(i.size)(o)),2),C=P[0],T=P[1],D=_(Object(n.useState)(!1),2),x=D[0],A=D[1],N=_(Object(n.useState)(!1),2),I=N[0],F=N[1],M=_(Object(n.useState)(Object(i.isArray)(o)?o.map((function(e){var t;return g(g({},e),{},{id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString()})})):[]),2),R=M[0],L=M[1],Y=Object(n.useRef)(new AbortController),U=function(e){return e.value?Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("span",{className:"bwf-t-overflow-ellipsis bwf-w-180",title:e.label||e.name},e.label||e.name),Object(n.createElement)(y.c,{content:e.value})):e.label||e.name},z=function(e,t){e&&r("",t)},B=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n){Y.current=new AbortController,Object(i.size)(e)?T(!0):T(!!r);var o=t.replace("{{search}}",encodeURIComponent(e))+(O?"&funnel_id=".concat(O):"");p()({path:Object(m.y)(o),signal:Y.current.signal}).then((function(t){if(t&&Object(i.isArray)(t)&&!Object(i.isEmpty)(t)){var n,o,a;A(null===(n=t[0])||void 0===n?void 0:n.hasOwnProperty("steps"));var c=t.map((function(e){return{name:e.name||e.label,id:e.id.toString(),labelText:U(e),steps:null==e?void 0:e.steps}})),l=t.map((function(e){var t;return{name:(null==e?void 0:e.name)||(null==e?void 0:e.label),id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString()}}));Object(i.size)(e)&&null!==(o=t[0])&&void 0!==o&&o.hasOwnProperty("steps")?(w(c),z(r,c)):null!==(a=t[0])&&void 0!==a&&a.hasOwnProperty("steps")?(k(c),z(r,c)):Object(i.size)(e)?(w(l),z(r,l)):(k(l),z(r,l))}else Object(i.isEmpty)(e)?w([{id:"no-result",name:"No data available"}]):w([{id:"no-result",name:'No result found for "'.concat(e,'"')}]),z(r,[{id:"no-result",name:"No data available"}]);T(!1),F(!1)})).catch((function(e){T(!1),console.log(e)}))}};Object(n.useEffect)((function(){Object(i.isEmpty)(s)&&(B("",!!Object(i.isEmpty)(o)),F(!0))}),[]),Object(n.useEffect)((function(){var e;null!==(e=S[0])&&void 0!==e&&e.hasOwnProperty("steps")&&A(!0)}),[S]);var q=Object(i.isArray)(R)?R.map((function(e){return e.id})):[];return Object(n.createElement)(d.a,{conditionLabel:b,values:q,isFirstLoading:I,searchedValue:function(e,t,r){B(e,t,r)},selectedValue:R,onChangeValue:function(){},multiGroup:x,hasDefaultOption:S,onChangeData:function(e){var t=e.map((function(e){var t;return{id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString(),label:e.label||e.name}}));L(v(t)),r(e.map((function(e){return{id:null==e?void 0:e.id,label:e.label||e.name}})))},options:v(h.filter((function(e){return q.findIndex((function(t){return t.id===e.id}))<0}))),defaultOptions:S,className:a()("bwf-filter-search",{"no-operator":Object(i.isEmpty)(f)}),isLoading:C,placeholder:Object(c.__)("Searchâ€¦","funnel-builder"),showInitialList:!1,abortController:Y})},k=r(13),P=r.n(k),C=r(315),T=r(15),D=r.n(T),x=r(385),A=r(351);r(341);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}function M(e,t,r){return t=R(t),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],R(e).constructor):t.apply(e,r))}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M(this,t,[e])).isValidSelection=r.isValidSelection.bind(r),r.popoverRef=Object(n.createRef)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),r=t,(o=[{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,r=e.secondaryDate,n=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||n.push("".concat(Object(c.__)("vs.","funnel-builder")," ").concat(r.label," (").concat(r.range,")")),n}},{key:"isValidSelection",value:function(e){var t=this.state,r=t.compare,n=t.after,o=t.before;return"custom"!==e||r&&n&&o}},{key:"render",value:function(){var e=this,t=this.props,r=t.disablePresets,o=void 0!==r&&r,c=t.hasValue,l=t.showIcon,u=t.onRangeSelect,f=t.dateQuery,b=t.dateRange;return Object(n.createElement)("div",{className:"bwf-range-filter"},Object(n.createElement)("div",{className:a()("bwf-range-filters-container",{"bwf-presets-disable":o})},Object(n.createElement)(s.a,{contentClassName:"bwf-filters-date-content is-from-bottom-only",expandOnMobile:!0,renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return Object(n.createElement)(A.a,{onClick:r,isOpen:t,labels:!Object(i.isEmpty)(b)&&b.hasOwnProperty("after")?["".concat(P()(b.after).format(m.c)," - ").concat(P()(b.before).format(m.c))]:["Start Date ~ End Date"],showIcon:l,hasValue:c})},renderContent:function(t){var r=t.onClose;return Object(n.createElement)(x.a,{hideCompare:e.props.hideCompare,onClose:r,after:b.hasOwnProperty("after")?P()(b.after):null,before:P()(b.before).endOf("day"),isValidSelection:e.isValidSelection,disablePresets:o,value:function(e){return u(e)},dateQuery:f,popoverRef:e.popoverRef})},popoverProps:{ref:this.popoverRef}})))}}])&&I(r.prototype,o),l&&I(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,l}(n.Component);Y.propTypes={onRangeSelect:D.a.func,dateQuery:D.a.shape({period:D.a.string,compare:D.a.string,before:D.a.object,after:D.a.object,primaryDate:D.a.shape({label:D.a.string,range:D.a.string}),secondaryDate:D.a.shape({label:D.a.string,range:D.a.string})})};var U=Y,z=r(83),B=r(12);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=function(e){var t=e.value,r=e.rule,o=e.setData,a=e.returnPeriod,c=Object(n.useRef)(!0),l=Object(B.i)(),u=a&&{period:r};return Object(n.useEffect)((function(){if(Object(i.isEmpty)(r)||"specificDate"===r||"custom"===r)c.current||o("");else{l.period=r;var e=((t=l).compare="previous_year",{primary:Object(z.d)(t).primary}).primary;o(G({before:e.before.format(m.f),after:e.after.format(m.e)},u))}var t;c.current&&(c.current=!1)}),[r]),Object(n.createElement)(n.Fragment,null,"specificDate"!==r&&"custom"!==r&&Object(n.createElement)("div",{style:{marginTop:-16}}),"specificDate"===r&&Object(n.createElement)(C.b,{dateFormat:m.c,onUpdate:function(e){o(G({before:P()(e.date).endOf("day").format(m.f),after:P()(e.date).startOf("day").format(m.e)},u))},text:t&&t.before?P()(t.before).format(m.c):"Select Date",date:t&&t.before?P()(t.before).format(m.c):P()().format(m.c),hasValue:!(!t||!t.before),iconRight:!0,placeHolder:"Select Date",disabled:!0,position:"bottom right",isInvalidDate:function(e){return P()(e).isAfter(P()(),"day")},className:"is-from-bottom-only"}),"custom"===r&&Object(n.createElement)(U,{key:JSON.stringify(l),dateRange:Object(i.size)(t)?t:{before:P()().endOf("day").format(m.c)},hasValue:!Object(i.isEmpty)(t),onRangeSelect:function(e){o(G({before:P()(e.before).format(m.f),after:P()(e.after).format(m.e)},u))},isoDateFormat:m.c,hideCompare:!0,showIcon:!0}))},K=r(359);function W(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e){var t=e.options,r=e.value,o=e.setData,a=(e.remove,e.multiple),c=void 0!==a&&a;return Object(n.createElement)("div",{className:"bwf-filter-checklist"},Object.keys(t).map((function(e,a){return Object(n.createElement)("div",{key:"bwf-filter-check-item-".concat(a),onClick:function(){c?Object(i.isEmpty)(r)?o([e]):r.includes(e)?o(r.filter((function(t){return t!==e}))):o([].concat(W(r),[e])):o(e)}},Object(n.createElement)("span",null,t[e])," ",(c&&Object(i.isArray)(r)&&r.includes(e)||r===e)&&Object(n.createElement)(u.a,{icon:"tick",height:"16",width:"16"}))})))},J=r(55),Z=r(28),ee=function(){return Object(n.createElement)(J.a,{justify:"flex-start"},Object(n.createElement)(J.c,null,Object(n.createElement)(Z.a,{h:24,w:100,br:19})),Object(n.createElement)(J.c,null,Object(n.createElement)(Z.a,{h:24,w:100,br:19})),Object(n.createElement)(J.c,null,Object(n.createElement)(Z.a,{h:24,w:100,br:19})))},te=r(20),re=r(18),ne=r(407),oe=["options"],ae=["options"];function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function le(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function be(){return(be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=function(e){var t=e.label,r=e.icon,o=e.isPrimary,i=void 0!==o&&o,c=e.onClick,l=void 0===c?function(){}:c,s=e.onClear,f=e.isActive,b=e.rule,p=e.isProFeatureLocked,d=e.isLocked,m=e.iconColor;return Object(n.createElement)("div",{className:a()("bwf-filter__tag",{"is-primary":i,"is-active":f,"is-locked":d,"is-pro-locked":(null==b?void 0:b.is_pro)&&p}),onClick:d||p&&null!=b&&b.is_pro?function(){}:l},!f&&(p&&null!=b&&b.is_pro?Object(n.createElement)(y.b,{className:"size-16"}):Object(n.createElement)(u.a,{icon:d?"lock":r,height:"16",width:"16",color:m||re.TEXT_COLOR_2})),Object(n.createElement)("span",null,t),f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,{icon:"angle-down",height:"12",width:"12",color:"#212121"}),Object(n.createElement)("span",{className:"remove-icon",onClick:s},Object(n.createElement)(u.a,{icon:"dismiss-circle",height:"16",width:"16",color:"#353030"}))))},Oe=function(e){var t=e.rule,r=e.filter,o=e.filterData,a=e.remove,u=e.setFilter,f=e.tempFilters,b=e.updateTempRule,p=e.propsToPass,d=void 0===p?{}:p,y=e.isProFeatureLocked,O=e.isLocked,v=function(e,t){return!(!e.required.includes("data")||!Object(i.isEmpty)(t.data))||!(e.hasOwnProperty("operators")||!e.required.includes("data")||!Object(i.isEmpty)(t.data))},j=Object(n.useRef)(),g=Object(n.useRef)();Object(m.ub)(g,(function(){void 0!==j.current&&j.current()}));var h=f.find((function(e){return e.filter===t.slug})),_=o.find((function(e){return(Object(i.isEmpty)(t.required)||(!t.required.includes("data")||Object(i.size)(e.data))&&(!t.required.includes("rule")||Object(i.size)(e.rule)))&&e.filter===t.slug})),w=Object(n.useMemo)((function(){if(t.data_2)return!t.data_2.toggler||h&&h[t.data_2.toggler[0]]===t.data_2.toggler[1]}),[t,h]);return Object(n.createElement)("div",{className:"bwf-filter__sticky"},Object(n.createElement)(s.a,{contentClassName:"bwf-filter-dropdown",placement:"bottom right",expandOnMobile:!0,focusOnMount:!1,ref:g,flip:!1,renderToggle:function(e){var r=e.isOpen,o=e.onToggle;return Object(n.createElement)(ye,{icon:"add-circle",onClick:function(){r&&_&&b(_),o()},label:_?Object(K.b)(t,_):t.title,isActive:_,rule:t,onClear:function(e){e.stopPropagation(),a(h),r&&o()},isProFeatureLocked:y,isLocked:O})},renderContent:function(e){e.onClose;var o=e.onToggle;return j.current=o,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-heading"},t.title),Object(n.createElement)(ge,be({},t,{filter:r,value:h.rule,setRule:function(e){b(de(de({},h),{},{rule:e}))}})),Object(n.createElement)("div",{className:"".concat(!Object(i.isEmpty)(t.operators)&&Object(i.isEmpty)(h.rule)?"bwf-no-operator":"")},Object(n.createElement)(he,be({},t,d,{value:h.data,rule:h.rule,default_options:h.options,setData:function(e,t){Object(i.isEmpty)(t)||b(de(de({},h),{},{options:t})),b(de(de({},h),{},{data:e}))},remove:function(){return a(h)}}))),w&&Object(n.createElement)("div",{className:"bwf-mt-16"},Object(n.createElement)(he,be({},t.data_2,{value:h.data_2,rule:h.rule,default_options:t.data_2.options,setData:function(e,t){Object(i.isEmpty)(t)||b(de(de({},h),{},{options:t})),b(de(de({},h),{},{data_2:e}))},remove:function(){return a(h)}}))),Object(n.createElement)(l.Button,{className:"bwf-filter-apply-btn bwf-no-ripple",isPrimary:!0,onClick:function(){u(h),o()},disabled:v(t,h)},Object(c.__)("Apply","woocommerce")))}}))},ve=function(e){var t=e.rules,r=e.filterData,o=e.setFilter,a=e.tempFilters,f=e.updateTempRule,b=e.propsToPass,p=void 0===b?{}:b,d=e.isProFeatureLocked,y=e.isLocked,O=ue(Object(n.useState)({}),2),v=O[0],j=O[1],g=a.find((function(e){return e.filter===v.slug})),h=Object(n.useRef)(),_=Object(n.useRef)();Object(m.ub)(_,(function(){void 0!==h.current&&h.current()}));var w=function(e){return r.find((function(t){return Object(i.size)(t.data)&&t.filter===e.slug}))};return Object(n.createElement)("div",{className:"bwf-filter__list"},Object(n.createElement)(s.a,{contentClassName:"bwf-filter-dropdown",placement:"bottom right",expandOnMobile:!0,focusOnMount:!1,ref:_,flip:!1,renderToggle:function(e){e.isOpen;var t=e.onToggle;return Object(n.createElement)(ye,{label:Object(c.__)("Add Filter","funnel-builder"),icon:"filter",onClick:function(){t()},isPrimary:!0,isProFeatureLocked:d,iconColor:re.BLUE_BASE})},renderContent:function(e){var a,s,b=e.isOpen,m=(e.onClose,e.onToggle);return h.current=m,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-heading"},Object(c.__)("Filter By","funnel-builder")),Object(i.isEmpty)(v)?Object(n.createElement)("div",{className:"bwf-filter-list-item-wrap"},t.map((function(e,t){return Object(n.createElement)(je,be({},e,{key:"list-filter-item-".concat(t),onClick:function(){return j(e)},isSelected:r.findIndex((function(t){return Object(i.size)(t.data)&&t.filter===e.slug}))>-1,isProFeatureLocked:d,isLocked:y}))}))):Object(n.createElement)("div",{className:"bwf-filter-list-item__inner-wrap"},Object(n.createElement)("div",{className:"bwf-filter-list-item__inner-header"},Object(n.createElement)("span",{onClick:function(){b&&w(v)&&f(w(v)),j({})}},Object(n.createElement)(u.a,{icon:"arrow-left",size:"16"})),Object(n.createElement)("span",null,v.title)),Object(n.createElement)(ge,be({},v,{value:g.rule,setRule:function(e){f(de(de({},g),{},{rule:e}))}})),Object(n.createElement)("div",{className:"".concat(!Object(i.isEmpty)(v.operators)&&Object(i.isEmpty)(g.rule)?"bwf-no-operator":"")},Object(n.createElement)(he,be({},v,{value:g.data,rule:g.rule,default_options:null==g?void 0:g.options,setData:function(e,t){Object(i.isEmpty)(t)||o(g,t,g.filter),f(de(de({},g),{},{data:e}))}},p))),Object(n.createElement)(l.Button,{className:"bwf-filter-apply-btn bwf-no-ripple",isPrimary:!0,disabled:(a=v,s=g,!(!a.required.includes("data")||!Object(i.isEmpty)(s.data))||!(a.hasOwnProperty("operators")||!a.required.includes("data")||!Object(i.isEmpty)(s.data))),onClick:function(){o(g),j({}),m()}},Object(c.__)("Apply","woocommerce"))))}}))},je=function(e){var t=e.title,r=e.isSelected,o=e.onClick,a=e.is_pro,i=e.isProFeatureLocked,c=e.isLocked;return Object(n.createElement)("div",{className:"bwf-filter-list-item",onClick:function(e){c||a&&i||o(e)}},c?Object(n.createElement)(u.a,{icon:"lock",size:"16",color:re.TEXT_COLOR_2}):a&&i?Object(n.createElement)(y.b,{className:"size-16"}):Object(n.createElement)(u.a,{icon:r?"checkmark-circle-filled":"add-circle",width:"16",height:"16",color:r?re.BLUE_BASE:re.TEXT_COLOR_2}),Object(n.createElement)("span",null,t))},ge=function(e){var t=e.setRule,r=e.op_label,o=e.value,a=void 0===o?"":o,c=e.operators,l=void 0===c?{}:c,u=(e.op_default,e.type),s=e.hideFilters;if("date-range"===u){var b=Object(i.cloneDeep)(K.a);s&&Object.keys(K.a).forEach((function(e){s.includes(e)&&delete b[e]})),l=b}if(Object(i.isEmpty)(l))return null;var p=Object.keys(l).map((function(e){return{key:e,label:l[e]}}));return Object(n.createElement)("div",{className:"bwf-filter-operator-wrap"},Object(n.createElement)("label",null,r),Object(n.createElement)(f.b,{className:"bwf-filter-operator",options:p,onChange:function(e){t(e)},selected:a,bottomFixed:!0}))},he=function(e){var t,r,o=e.type,i=e.options,u=e.value,s=e.setData,b=e.val_label,p=e.operators,d=e.op_label,m=(e.default_options,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a()(t,{"no-operator":!p})});if("select"===o&&i){var y=Object.keys(i).map((function(e){return{key:e,label:i[e]}}));return Object(n.createElement)("div",{className:m("bwf-filter-select-wrap")},b&&Object(n.createElement)("label",null,b),Object(n.createElement)(f.b,{options:y,selected:u,onChange:function(e){return s(e)}}))}return"search"===o?Object(n.createElement)(S,be({},e,{className:m()})):"number"===o?Object(n.createElement)("input",{type:"number",value:u,placeholder:Object(c.__)("Enter value","funnel-builder"),onChange:function(e){return s(e.target.value)},className:m("bwf-number-control")}):"text"===o?Object(n.createElement)(l.TextControl,{value:u,label:d,onChange:function(e){return s(e)},className:m()}):"date-range"===o?Object(n.createElement)(H,be({},e,{className:m()})):"checklist"===o?Object(n.createElement)(X,be({},e,{className:m()})):"search-select"===o?Object(n.createElement)("div",{className:m("bwf-filter-checklist-dropdown-wrap")},b&&Object(n.createElement)("label",null,b),Object(n.createElement)(ne.a,{options:i,label:Object(n.createElement)("span",{className:"bwf-t-overflow-ellipsis",title:null!==(t=null==u?void 0:u.label)&&void 0!==t?t:Object(c.__)("Select","funnel-builder")},null!==(r=null==u?void 0:u.label)&&void 0!==r?r:Object(c.__)("Select","funnel-builder")),selected:null==u?void 0:u.value,onSelect:function(e){s(e)},className:m()})):void 0};t.a=function(e){var t=e.filterList,r=void 0===t?[]:t,o=e.filterData,a=e.setFilterData,c=e.propsToPass,l=e.isLoading,u=e.isLocked,s=Object(te.b)().isProFeatureLocked,f=ue(Object(n.useState)([]),2),b=f[0],p=f[1],d=ue(Object(n.useState)([]),2),m=d[0],y=d[1];if(Object(n.useEffect)((function(){if(!Object(i.isEmpty)(r)){var e=[];r.forEach((function(t){e.push.apply(e,le(null==t?void 0:t.rules))})),y(e.map((function(e){var t="";e.hasOwnProperty("operators")&&(t=Object.keys(null==e?void 0:e.operators)[0]);var r=o.find((function(t){return t.filter===e.slug}));return r||{filter:e.slug,rule:t,data:""}})))}}),[r,o]),Object(n.useEffect)((function(){if(!Object(i.isEmpty)(o)){var e,t=[],n=null===(e=r.find((function(e){return"list"===e.type})))||void 0===e?void 0:e.rules;o.forEach((function(e){if(n&&n.findIndex((function(t){return t.slug===e.filter}))>-1&&Object(i.size)(null==e?void 0:e.data)){var o,a=(null===(o=r.find((function(e){return"list"===e.type})))||void 0===o?void 0:o.rules).find((function(t){return t.slug===e.filter}));t.push(a)}})),p(t)}}),[o,r]),!Object(i.size)(r)||l)return Object(n.createElement)(ee,null);var O=function(e,t,r){var n,c=o.find((function(t){return t.filter===e.filter})),l=o;n=(l=Object(i.isEmpty)(l)?[e]:c?l.map((function(t){return t.filter===c.filter?e:t})):[].concat(le(l),[e])).map((function(e){return e.filter===r?de(de({},e),{},{options:t}):e}));var u=l.map((function(e){e.options;return ce(e,oe)})).filter((function(e){return!Object(i.isEmpty)(e.data)}));a(Object(i.isEmpty)(null==e?void 0:e.data)?[]:u,n)},v=function(e){y((function(t){return t.map((function(t){return t.filter===e.filter?e:t}))}))},j=function(e){e.rule="",e.data="",v(e),p((function(t){return t.filter((function(t){return t.slug!==e.filter}))}));var t,r=o.map((function(e){e.options;return ce(e,ae)})).filter((function(t){return t.filter!==e.filter&&!Object(i.isEmpty)(t.data)}));t=o.filter((function(t){return t.filter!==e.filter&&!Object(i.isEmpty)(t.data)})),a(r,t)},g=r.find((function(e){return"sticky"===e.type})),h=r.find((function(e){return"list"===e.type}));return Object(n.createElement)("div",{className:"bwf-filter-wrap"},g&&[].concat(le(null==g?void 0:g.rules),le(b)).map((function(t,r){return Object(n.createElement)(Oe,be({},g,e,{propsToPass:c,rule:t,filterData:o,tempFilters:m,updateTempRule:v,setFilter:O,remove:j,key:"sticky-filter-wrap-".concat(r),isProFeatureLocked:s,isLocked:u}))})),h&&Object(n.createElement)(ve,be({},h,e,{filterData:o,tempFilters:m,updateTempRule:v,setFilter:O,remove:j,propsToPass:c,isProFeatureLocked:s,isLocked:u})))}},385:function(e,t,r){"use strict";var n=r(0),o=r(15),a=r.n(o),i=r(13),c=r.n(i),l=(r(386),r(329),r(330),r(1)),u=r(6),s=r.n(u),f=r(441),b=r(2),p=r(182),d=r(83),m=(r(341),r(8)),y=r(5),O=(r(296),function(e){var t=e.disabled,r=void 0!==t&&t,o=e.value,a=e.onChange,i=e.dateFormat,c=e.label,l=e.describedBy,u=e.error,f=e.onFocus,p=void 0===f?function(){}:f,d=e.onKeyDown,O=void 0===d?b.noop:d,v=e.errorPosition,j=void 0===v?"bottom center":v,g=s()("bwf-calendar-input",{"is-empty":0===o.length,"is-error":u}),h=Object(b.uniqueId)("_woo-dates-input");return Object(n.createElement)("div",{className:g},Object(n.createElement)("div",{className:"bwf-date-range-input"},Object(n.createElement)("input",{type:"text",className:"bwf-calendar-input-text",value:o,onChange:a,"aria-label":c,id:h,"aria-describedby":"".concat(h,"-message"),placeholder:i,onFocus:p,onKeyDown:O,disabled:r}),Object(n.createElement)("div",{className:"bwf-label"},c)),u&&Object(n.createElement)(m.Popover,{className:"bwf-calendar-input-error bwf-tooltip",focusOnMount:!1,position:j},u),Object(n.createElement)("span",{className:"bwf-calender-custom-icon"},Object(n.createElement)(y.a,{icon:"calender-1",width:"16",height:"16"})),Object(n.createElement)("p",{className:"screen-reader-text",id:"".concat(h,"-message")},u||l))});O.propTypes={disabled:a.a.bool,value:a.a.string,onChange:a.a.func,dateFormat:a.a.string,label:a.a.string,describedBy:a.a.string,error:a.a.string,errorPosition:a.a.string,onFocus:a.a.func,onKeyDown:a.a.func};var v=O,j=r(347),g=r(4);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}function S(e,t,r){return t=k(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).state={lastCurrentMonth:c()(),rangeKey:Object(g.w)()},r.onDatesChange=r.onDatesChange.bind(r),r.onFocusChange=r.onFocusChange.bind(r),r.onInputChange=r.onInputChange.bind(r),r.nodeRef=Object(n.createRef)(),r.keepFocusInside=r.keepFocusInside.bind(r),r.handleEndPrevClick=r.handleEndPrevClick.bind(r),r.handleStartPrevClick=r.handleStartPrevClick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,(o=[{key:"onDatesChange",value:function(e){var t=e.startDate,r=e.endDate,n=this.props,o=n.onUpdate;n.shortDateFormat,o({after:t,before:r,afterText:t?t.format("MM/DD/YYYY"):"",beforeText:r?r.format("MM/DD/YYYY"):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var r=t.target.value,n=this.props,o=n.after,a=n.before,i=(n.shortDateFormat,Object(d.j)(e,r,a,o,"MM/DD/YYYY")),l=i.date,u=i.error;this.setState({lastCurrentMonth:c()(l).add(1,"month")}),this.props.onUpdate(_(_(_({},e,l),e+"Text",r),e+"Error",r.length>0?u:null)),"before"!==e||u||this.setState({rangeKey:Object(g.w)()})}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var r=t||c()();return e?r.clone().subtract(1,"month"):r}}},{key:"keepFocusInside",value:function(e,t){var r=this.props.popoverRef;(!t.relatedTarget||!t.relatedTarget.classList.contains("bwf-calendar-input-text")&&null!=r&&r.current&&null!=r&&r.current.contains(t.relatedTarget))&&this.nodeRef.current.querySelector(".DayPicker_focusRegion").focus({preventScroll:!0})}},{key:"handleStartPrevClick",value:function(e){this.setState({lastCurrentMonth:c()(e).add(1,"month")})}},{key:"handleEndPrevClick",value:function(e){this.setState({lastCurrentMonth:c()(e).add(1,"month")})}},{key:"render",value:function(){var e=this,t=this.props,r=t.after,o=t.before,a=t.focusedInput,i=t.afterText,u=t.beforeText,p=t.afterError,d=t.beforeError,O=(t.shortDateFormat,t.isViewportMobile),g=t.isInvalidDate,h=c()().format("MM");return Object(n.createElement)("div",{className:s()("bwf-calendar bwf-date-range-calender",{"is-mobile":O})},Object(n.createElement)("div",{className:"bwf-calendar-inputs"},Object(n.createElement)(v,{value:i,onChange:Object(b.partial)(this.onInputChange,"after"),dateFormat:"MM/DD/YYYY",label:Object(l.__)("Start Date","funnel-builder"),error:p,describedBy:Object(l.sprintf)(Object(l.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),"MM/DD/YYYY"),onFocus:function(){return e.onFocusChange("startDate")}}),Object(n.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(l.__)("to","funnel-builder")),Object(n.createElement)(v,{value:u,onChange:Object(b.partial)(this.onInputChange,"before"),dateFormat:"MM/DD/YYYY",label:Object(l.__)("End Date","funnel-builder"),error:d,describedBy:Object(l.sprintf)(Object(l.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),"MM/DD/YYYY"),onFocus:function(){return e.onFocusChange("endDate")}})),Object(n.createElement)("div",{className:"bwf-date-picker-container bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(b.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(n.createElement)(f.DayPickerRangeController,{onPrevMonthClick:this.handleStartPrevClick,onNextMonthClick:this.handleEndPrevClick,navNext:this.state.lastCurrentMonth.format("MM")===h?Object(n.createElement)("span",{className:"bwf-cursor-text"},Object(n.createElement)(y.a,{height:16,width:16,icon:"angle-right",color:"#9A9898"})):Object(n.createElement)(y.a,{height:16,width:16,icon:"angle-right",color:"#323232"}),navPrev:Object(n.createElement)(y.a,{height:16,width:16,icon:"angle-left",color:"#323232"}),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:r,endDate:o,orientation:"horizontal",numberOfMonths:2,isOutsideRange:function(e){return g&&g(e.toDate())},maxDate:c()().endOf("month"),minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:Object(l.isRTL)(),initialVisibleMonth:this.setTnitialVisibleMonth(!0,o),phrases:j.a,key:this.state.rangeKey})),Object(n.createElement)("div",{className:"bwf-date-picker-actions"},Object(n.createElement)(m.Button,{isPrimary:!0,disabled:Object(b.isEmpty)(i)||Object(b.isEmpty)(u),className:Object(b.isEmpty)(i)||Object(b.isEmpty)(u)?"bwf-no-ripple":"",onClick:function(){var t={after:i,before:u};e.props.value(t),e.props.onClose()}},Object(l.__)("Done","funnel-builder"))))}}])&&w(r.prototype,o),a&&w(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);C.propTypes={after:a.a.object,afterError:a.a.string,afterText:a.a.string,before:a.a.object,beforeError:a.a.string,beforeText:a.a.string,focusedInput:a.a.string,isInvalidDate:a.a.func,onUpdate:a.a.func.isRequired,shortDateFormat:a.a.string.isRequired,losesFocusTo:a.a.instanceOf(Element)};var T=Object(p.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(C);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}function N(e,t,r){return t=I(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=N(this,t,[e])).state=r.getResetState(),r.onTabSelect=r.onTabSelect.bind(r),r.onUpdate=r.onUpdate.bind(r),r.controlsRef=Object(n.createRef)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(t,e),r=t,(o=[{key:"getResetState",value:function(){var e=this.props,t=e.period,r=e.compare,n=e.before,o=e.after;return{period:t,compare:r,before:n,after:o,focusedInput:"startDate",afterText:this.formatDate(o,"MM/DD/YYYY"),beforeText:this.formatDate(n,"MM/DD/YYYY"),afterError:null,beforeError:null}}},{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"onUpdate",value:function(e){this.setState(e)}},{key:"onTabSelect",value:function(e){var t=this.props.period;"period"===e&&"custom"===t&&this.onUpdate({period:"today"})}},{key:"isFutureDate",value:function(e){return c()().isBefore(c()(e),"day")}},{key:"render",value:function(){var e=this.props,t=e.onClose,r=e.value,o=e.popoverRef,a=this.state,i=a.after,c=a.before,l=a.focusedInput,u=a.afterText,s=a.beforeText,f=a.afterError,b=a.beforeError;return Object(n.createElement)(T,{after:i,before:c,onUpdate:this.onUpdate,isInvalidDate:this.isFutureDate,focusedInput:l,afterText:u,beforeText:s,afterError:f,beforeError:b,shortDateFormat:"MM/DD/YYYY",losesFocusTo:this.controlsRef.current,onClose:function(){return t()},value:function(e){return r(e)},popoverRef:o})}}])&&x(r.prototype,o),a&&x(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);M.propTypes={onClose:a.a.func};t.a=M},394:function(e,t,r){"use strict";var n=r(3),o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,a=r(338),i=r(395),c=r(396),l="function"==typeof Symbol&&Symbol.iterator;function u(e,t){return e&&"object"==typeof e&&null!=e.key?(r=e.key,n={"=":"=0",":":"=2"},"$"+(""+r).replace(/[=:]/g,(function(e){return n[e]}))):t.toString(36);var r,n}function s(e,t,r,n){var a,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===o)return r(n,e,""===t?"."+u(e,0):t),1;var f=0,b=""===t?".":t+":";if(Array.isArray(e))for(var p=0;p<e.length;p++)f+=s(a=e[p],b+u(a,p),r,n);else{var d=function(e){var t=e&&(l&&e[l]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(d){0;for(var m,y=d.call(e),O=0;!(m=y.next()).done;)f+=s(a=m.value,b+u(a,O++),r,n)}else if("object"===c){0;var v=""+e;i(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===v?"object with keys {"+Object.keys(e).join(", ")+"}":v,"")}}return f}var f=/\/+/g;function b(e){return(""+e).replace(f,"$&/")}var p,d,m=y,y=function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)},O=function(e){i(e instanceof this,"Trying to release an instance into a pool of a different type."),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)};function v(e,t,r,n){this.result=e,this.keyPrefix=t,this.func=r,this.context=n,this.count=0}function j(e,t,r){var o,i,c=e.result,l=e.keyPrefix,u=e.func,s=e.context,f=u.call(s,t,e.count++);Array.isArray(f)?g(f,c,r,a.thatReturnsArgument):null!=f&&(n.isValidElement(f)&&(o=f,i=l+(!f.key||t&&t.key===f.key?"":b(f.key)+"/")+r,f=n.cloneElement(o,{key:i},void 0!==o.props?o.props.children:void 0)),c.push(f))}function g(e,t,r,n,o){var a="";null!=r&&(a=b(r)+"/");var i=v.getPooled(t,a,n,o);!function(e,t,r){null==e||s(e,"",t,r)}(e,j,i),v.release(i)}v.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p=function(e,t,r,n){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)},(d=v).instancePool=[],d.getPooled=p||m,d.poolSize||(d.poolSize=10),d.release=O;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(n.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;i(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var r in e)g(e[r],t,r,a.thatReturnsArgument);return t}},395:function(e,t,r){"use strict";e.exports=function(e,t,r,n,o,a,i,c){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,a,i,c],s=0;(l=new Error(t.replace(/%s/g,(function(){return u[s++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},396:function(e,t,r){"use strict";var n=r(338);e.exports=n},397:function(e,t,r){"use strict";function n(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(n)}},407:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(5),c=(r(421),r(75)),l=r(131),u=r(65),s=r(2),f=r(1);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=[{key:"",label:Object(f.__)("No result found","funnel-builder"),disabled:!0}];t.a=function(e){var t=e.label,r=e.className,o=e.options,f=e.searchText,p=void 0===f?"":f,m=e.onSearch,y=e.isLoading,O=e.selected,v=void 0===O?{}:O,j=e.onSelect,g=void 0===j?function(){}:j,h=e.title,_=b(Object(n.useState)(p),2),w=_[0],E=_[1],S=Object(n.useCallback)((function(e){var t=e.onToggle,r=o.filter((function(e){var t;return-1!==(null===(t=e.label)||void 0===t?void 0:t.toLowerCase().indexOf(null==w?void 0:w.toLowerCase()))}));return(Object(s.isEmpty)(r)?d:r).map((function(e,r){return Object(n.createElement)(u.a,{key:"funnel-".concat(r),isClickable:!e.disabled,onInvoke:function(){g(e),t()},title:e.label},Object(n.createElement)("span",{className:"bwf-whitespace-wrap"},e.label),e.key===v&&Object(n.createElement)(i.a,{icon:"tick",height:"16",width:"16"}))}))}),[v,o,w]);return Object(n.createElement)(c.a,{label:h,menuPosition:"bottom left",classes:"components-button is-secondary-gray",wrapperClasses:a()("bwf-checklist__dropdown is-from-bottom-only",r),buttonLabel:Object(n.createElement)(n.Fragment,null,t,Object(n.createElement)(i.a,{icon:"angle-down",height:"12",width:"12"})),renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(l.a,{query:{s:null!=p?p:w},setSearchData:function(e){m?m(e):E(e)},showResultCount:!1,isLoading:y}),S({onToggle:t}))}})}},420:function(e,t,r){},421:function(e,t,r){},426:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(8),l=r(1),u=r(14),s=r(359),f=r(309),b=r(5),p=r(10),d=r.n(p),m=r(4),y=(r(461),function(e){var t=e.onclose,r=e.title;return Object(n.createElement)(c.Modal,{className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-fail-modal",isDismissible:!1,onRequestClose:t},Object(n.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Error! ","funnel-builder")+r),Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close"),onClick:function(){return t()}},Object(n.createElement)(b.a,{icon:"close",size:20}))),Object(n.createElement)("div",{className:"bwf-content-1"},Object(l.__)("Following reasons while creating file for export","funnel-builder")),Object(n.createElement)("div",{className:"bwf-content-2"},Object(n.createElement)("span",null,Object(l.__)("Unable to create file","funnel-builder")),Object(n.createElement)("span",null,Object(l.__)("Server not working / unstable network","funnel-builder"))))});function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=e.status,r=e.onRemove,o=e.exportId,i=e.title,c=e.exportPercentage,u=O(Object(n.useState)(!1),2),s=u[0],f=u[1];return Object(n.createElement)(n.Fragment,null,["1","2","3"].includes(t)?Object(n.createElement)("div",{className:a()("bwf-export-status",{"is-danger":"2"===t,"is-success":"3"===t})},Object(n.createElement)(b.a,{icon:"downloading",size:"20"}),Object(n.createElement)("span",{className:"bwf-flex bwf--g16"},Object(n.createElement)("span",{className:"bwf-status-title"},function(){switch(t){case"1":return Object(l.__)("Exporting In Progressâ€¦","funnel-builder");case"2":return Object(l.__)("Exporting Failed","funnel-builder");case"3":return Object(l.__)("File is Ready","funnel-builder")}}()),"1"===t?Object(n.createElement)("span",{className:"bwf-status-title"},c," %"):null,"2"===t&&Object(n.createElement)("span",{className:"bwf-action",onClick:function(){f(!0)}},Object(l.__)("View Details","funnel-builder")),"3"===t&&Object(n.createElement)("span",{className:"bwf-action",onClick:function(){window.open(wffn_contacts_data.admin_url+"/admin-post.php?action=bwf_contact_export_download&id=".concat(o,"&_nonce=").concat(wffn.nonce_contact_export_download),"_blank")}},Object(l.__)("Download","funnel-builder")),Object(n.createElement)("button",{className:"bwf-no-style-button",onClick:function(){r()}},"1"===t?Object(l.__)("Cancel","funnel-builder"):Object(n.createElement)(b.a,{icon:"close",size:16,color:"#FFFFFF"})))):null,s&&Object(n.createElement)(y,{onclose:function(){return f(!1)},title:i}))},g=r(19);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=["state","setStateProp"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(){var e=Object(g.a)("export"),t=e.state,r=e.setStateProp;return E(E({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,_)),{},{setStateProp:r,setExportData:function(e,n){r(e,E(E({},t),n))}})},P=r(26);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var T=["getStateProp"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(){var e=Object(P.a)("export"),t=e.getStateProp;return x(x({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,T)),{},{getExportData:function(e){var r;return null!==(r=t(e))&&void 0!==r?r:{}}})},I=r(20);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.filters,r=e.filterList,o=e.title,p=e.funnelId,y=e.type,O=e.total,v=e.exportType,g=e.totalText,h=e.isDisabled,_=e.search,w=void 0===_?"":_,E=Object(n.useMemo)((function(){return t.filter((function(e){return!Object(i.isEmpty)(e.data)}))}),[t]),S=k().setExportData,P=N().getExportData,C=p?"".concat(y,"_").concat(p):y,T=P(C),D=Object(n.useRef)(new AbortController),x=function(e){return S(C,e)},A=U(Object(n.useState)([]),2),F=A[0],M=A[1],L=U(Object(n.useState)(!1),2),z=L[0],B=L[1],q=U(Object(n.useState)(!1),2),V=q[0],G=q[1],$=U(Object(n.useState)(0),2),H=$[0],K=$[1],W=U(Object(n.useState)(!1),2),Q=W[0],X=W[1],J=Object(n.useRef)(),Z=Object(n.useRef)(),ee=Object(I.c)().showSnackbar,te=function(e){var t=e.rule,r=e.isPrimary,o=void 0!==r&&r,c=null==E?void 0:E.find((function(e){return e.filter===t.slug}));return c&&!Object(i.isEmpty)(c.data)?Object(n.createElement)("div",{className:a()("bwf-filter__tag",{"is-primary":o,"is-active":c})},Object(n.createElement)("span",null,Object(s.b)(t,c))):null};Object(n.useEffect)((function(){if(!Object(i.isEmpty)(E)&&!Object(i.isEmpty)(r)){var e,t=[],n=null==r?void 0:r.find((function(e){return"sticky"===e.type})),o=null==r||null===(e=r.find((function(e){return"list"===e.type})))||void 0===e?void 0:e.rules;E.forEach((function(e){if(o&&o.findIndex((function(t){return t.slug===e.filter}))>-1){var n,a=(null===(n=r.find((function(e){return"list"===e.type})))||void 0===n?void 0:n.rules).find((function(t){return t.slug===e.filter}));t.push(a)}})),M([].concat(Y(null==n?void 0:n.rules),t))}}),[E,r]);var re=function(){D.current=new AbortController,clearTimeout(J.current),d()({method:"GET",path:Object(m.y)("/funnels/export/".concat(T.export_id)),signal:D.current.signal}).then((function(e){if(e.status)if("3"!==e.export.status&&x(e.export),"3"===e.export.status)K(100),Z.current=setTimeout((function(){x(e.export),K(0)}),2e3);else if("1"===e.export.status){J.current=setTimeout((function(){re()}),5e3);var t=Number(e.export.count),r=Number(e.export.offset);K(parseInt(r/t*100))}else K(0);else x({export_id:T.export_id,status:"2"})})).catch((function(e){"AbortError"!==(null==e?void 0:e.name)?x({export_id:T.export_id,status:"2"}):console.log(e)}))};return Object(n.useEffect)((function(){T.export_id&&"1"===T.status&&re()}),[parseInt(T.export_id)]),Object(n.useEffect)((function(){return T.export_id||"3"===T.status||T.notFound||(D.current=new AbortController,d()({method:"GET",path:Object(m.y)("/funnels/export/status?export_type=".concat(v).concat(p?"&funnel_id=".concat(p):"")),signal:D.current.signal}).then((function(e){e.status?x(e.last_export_data):x({notFound:!0})})).catch((function(e){console.log(e)}))),function(){clearTimeout(J.current),clearTimeout(Z.current)}}),[]),Object(n.createElement)(n.Fragment,null,!V&&Object(n.createElement)(j,{status:T.status,exportId:T.export_id,onRemove:function(){return function(){var e;X(!0),null===(e=D.current)||void 0===e||e.abort(),clearTimeout(Z.current),D.current=new AbortController;var t=T;x({}),d()({path:Object(m.y)("/funnels/export/delete/?export_ids=".concat(T.export_id)),method:"DELETE"}).then((function(e){e.status||(x(t),ee(Object(l.__)("Failed to remove export.","funnel-builder"))),X(!1)})).catch((function(e){x(t),ee(Object(l.__)("Failed to remove export.","funnel-builder")),X(!1)}))}()},title:o,exportPercentage:H}),Object(n.createElement)(u.a,{onClick:function(){return B(!0)},className:"is-secondary bwf-btn-gray has-icon bwf-export-icon",isSecondary:!0,isSmall:!0,disabled:Q||h||"1"===T.status,icon:Object(n.createElement)(b.a,{icon:"export",size:16})},Object(l.__)("Export","funnel-builder")),z&&Object(n.createElement)(c.Modal,{className:"bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-alert-modal",isDismissible:!1,onRequestClose:function(){return B(!1)}},Object(n.createElement)(f.a,{title:o,onClose:function(){return B(!1)},isDismissible:!V}),Object(i.isEmpty)(E)?null:Object(n.createElement)("div",{className:"bwf-filter-applied"},Object(n.createElement)(b.a,{icon:"info"}),Object(l.__)("This export has the following filter applied.","funnel-builder")),Object(n.createElement)("div",{className:"bwf-sticky-filters ".concat(Object(i.size)(E)?"bwf-has-filter":"")},F&&F.map((function(e,t){return Object(n.createElement)(te,{rule:e,key:"sticky-filter-wrap-".concat(t)})}))),Object(n.createElement)("div",{className:"bwf-content"},Object(l.sprintf)(Object(l.__)("You have %s in the list.","funnel-builder"),g)),Object(n.createElement)("div",{className:"wf_funnel_right_align bwf-mt-24"},Object(n.createElement)(u.a,{isPrimary:!0,className:"bwf-btn-medium",onClick:function(){0!==O&&(x({status:"1"}),function(){D.current=new AbortController,G(!0);var e=[];Object(i.isEmpty)(E)||e.push.apply(e,Y(E)),Object(i.isEmpty)(w)||e.push({filter:"s",data:w}),d()({path:Object(m.y)("".concat("cart-conversions"!==y?"/funnels":"").concat(p?"/".concat(p):"","/").concat(y,"/export/add")),method:"POST",data:R({},!Object(i.isEmpty)(e)&&{filters:e}),signal:D.current.signal}).then((function(e){e.status&&(x({export_id:e.response.export_id,status:"1"}),B(!1)),G(!1)})).catch((function(e){console.log(e),G(!1)}))}())},disabled:0===O||V,isBusy:V},Object(l.__)("Export","funnel-builder")))))}},431:function(e,t,r){"use strict";var n=r(0),o=r(4);t.a=function(e){var t=e.amount,r=Object(o.A)().formatAmount(null!=t?t:0),a=r.lastIndexOf(o.q),i=0===o.o?r:r.slice(0,a),c=r.slice(a+1);return Object(n.createElement)(n.Fragment,null,i,0!==o.o&&-1!==a&&Object(n.createElement)(n.Fragment,null,o.q,Object(n.createElement)("span",{className:"bwf-analytics__amount-decimal"},c)))}},434:function(e,t,r){"use strict";var n=r(0),o=r(1),a=r(6),i=r.n(a),c=r(22),l=r(86);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.className,r=(e.align,e.title),a=e.proLink,s=e.message,f=s||Object(o.sprintf)(Object(o.__)("Use our sample data to explore %s. See how it summarises metrics across multiple funnels.","funnel-builder"),r),b=u(Object(n.useState)(!1),2),p=b[0],d=b[1];return Object(n.useEffect)((function(){var e=document.querySelector("body:not(.modal-open) #bwf-header-upgrade-pro-cta");if(e){var t=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?d(!1):d(!0)}))}),{root:null,rootMargin:"0px",threshold:.1});return t.observe(e),function(){t.disconnect()}}d(!0)}),[]),Object(n.createElement)("div",{className:i()("bwf-lite-noticebar is-sample-data-notice",t,{"is-btn-visible":p})},Object(n.createElement)("div",{className:"bwf-lite-noticebar__content-wrap"},Object(n.createElement)("div",{className:"bwf-lite-noticebar__title-wrap"},r," ",Object(n.createElement)(c.c,{content:Object(o.__)("Sample Data","funnel-builder"),type:"black"})),Object(n.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(n.createElement)("div",{className:"bwf-noticebar-content"},f))),Object(n.createElement)(l.a,{isPrimary:!0,proLink:a}))}},461:function(e,t,r){},462:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(1),c=r(10),l=r.n(c),u=(r(186),r(4)),s=r(14),f=r(21),b=r(24);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.className,r=e.content,o=void 0===r?Object(i.__)("Access Enhanced Features such as Filters, Export , Search & UTM details by syncing past WooCommerce orders.","funnel-builder"):r,c=e.align,p=Object(f.a)().migrationStatus,y=Object(b.a)().updateMigrationStatus,O=m(Object(n.useState)(!1),2),v=O[0],j=O[1];return[1,2].includes(p)?Object(n.createElement)("div",{className:a()("bwf-lite-noticebar is-database-upgrade-notice",t,d({},"bwf-notice-".concat(c),!!c))},Object(n.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(n.createElement)("div",{className:"bwf-noticebar-content"},o)),1===p&&Object(n.createElement)(s.a,{className:"is-black is-small",onClick:function(){j(!0),l()({path:Object(u.y)("/migrate-conversion"),method:"POST"}).then((function(e){e.success&&y(2),j(!1)})).catch((function(e){console.log(e),j(!1)}))},disabled:v,isBusy:v},Object(i.__)("Sync Now","funnel-builder")),2===p&&Object(n.createElement)("span",{className:"bwf-noticebar-r-text"},Object(i.__)("Sync In progressâ€¦","funnel-builder"))):null}},582:function(e,t,r){},830:function(e,t,r){},831:function(e,t,r){},832:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(25),a=r(126),i=r(2),c=r(1),l=r(83),u=r(8),s=r(358),f=r(55),b=r(6),p=r.n(b),d=r(318),m=r(12),y=r(19),O=r(4),v=r(10),j=r.n(v),g=["setStateProp","fetch"];var h=function(){var e=Object(y.a)("campaign"),t=e.setStateProp,r=e.fetch;!function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}(e,g);return{fetch:function(e,n,o,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s="?after=".concat(n,"&before=").concat(o,"&limit=").concat(i,"&offset=").concat(c,"&utms=").concat(JSON.stringify(a),"&type=").concat(l).concat(u?"&total_count=yes":""),f="/funnel-analytics/"+(e?parseInt(e):"global")+"/conversion/campaign-data/"+s;t("isLoading",!0),r("GET",Object(O.y)(f))}}},_=r(26);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=["getStateProp"];function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(){var e=Object(_.a)("campaign"),t=e.getStateProp;return k(k({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,E)),{},{getCampaignData:function(){return t("data")},getFunnelData:function(){return t("funnelData")},getTotalRecords:function(){return t("total_records")}})},T=r(29),D=r(40),x=r(20);function A(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return F(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.funnelId,r=e.isExport,o=Object(m.i)(),a=N(Object(n.useState)([]),2),u=a[0],s=a[1],f=N(Object(n.useState)(10),2),b=f[0],y=f[1],v=N(Object(n.useState)(0),2),j=v[0],g=v[1],_=N(Object(n.useState)(0),2),w=_[0],E=_[1],S=Object(O.A)(),k=Object(T.a)(),P=k.setFunnelData,I=k.setFunnelStatus,F=k.setFunnelLoading,M=Object(D.a)().setStepFunnelData,L=h().fetch,Y=Object(x.b)().isProFeatureLocked,U=C(),z=U.getCampaignData,B=U.getFunnelData,q=U.getLoading,V=U.getError,G=U.getTotalRecords,$=z(),H=B(),K=parseInt(j)/parseInt(b)+1;Object(i.isEmpty)(H)||(P("funnelTitle",null==H?void 0:H.title),I("status",null==H?void 0:H.status),F(!1),M(H));V();var W=q(),Q=G();Object(n.useEffect)((function(){Q>0&&E(Q)}),[Q]);var X="",J="",Z=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current},ee=Z(o);Z(u);Object(n.useEffect)((function(){var e=!0;if(e=!o.hasOwnProperty("period")||o.hasOwnProperty("period")&&o.hasOwnProperty("after"),!r&&!Y&&e&&!Object(i.isEqual)(ee,o)&&o.hasOwnProperty("filter")){var n,a=Object(l.d)(o,"period=month&compare=previous_year").primary;Object(i.isEmpty)(a.after)||(X=a.after.format("YYYY-MM-DD 00:00:00")),Object(i.isEmpty)(a.before)||(J=a.before.format("YYYY-MM-DD 23:59:59")),L(t,o.hasOwnProperty("after")?o.after:X,o.hasOwnProperty("before")?o.before:J,o.hasOwnProperty("utms")?null==o||null===(n=o.utms)||void 0===n?void 0:n.split(","):[],b,j,o.hasOwnProperty("type")?o.type:"",!0)}}),[o,u]);var te=N(Object(n.useState)(null),2),re=(te[0],te[1],function(e){return Object(n.createElement)(n.Fragment,null,e)}),ne=[{key:"utm_campaign",label:re(Object(c.__)("UTM Campaign","funnel-builder"))},{key:"utm_medium",label:re(Object(c.__)("UTM Medium","funnel-builder"))},{key:"utm_source",label:re(Object(c.__)("UTM Source","funnel-builder"))},{key:"utm_term",label:re(Object(c.__)("UTM Term","funnel-builder"))},{key:"order_id",label:re(Object(c.__)("Orders ID","funnel-builder"))},{key:"total_orders",label:re(Object(c.__)("Orders","funnel-builder"))},{key:"total_revenue",label:re(Object(c.__)("Revenue","funnel-builder"))},{key:"type",label:re(Object(c.__)("Type","funnel-builder"))},{key:"average_revenue",label:re(Object(c.__)("Average Order Value","funnel-builder"))}],oe=(Object(c.__)("UTM Campaign","funnel-builder"),Object(c.__)("UTM Source","funnel-builder"),Object(c.__)("UTM Medium","funnel-builder"),Object(c.__)("UTM Term","funnel-builder"),function(e){return Object(i.isEmpty)(e)?"-":e}),ae=(Y?[].concat(R):A($)).map((function(e){return[].concat(A(u.includes("utm_campaign")?[{display:oe(e.utm_campaign),value:e.utm_campaign}]:[]),A(u.includes("utm_medium")?[{display:oe(e.utm_medium),value:e.utm_medium}]:[]),A(u.includes("utm_source")?[{display:oe(e.utm_source),value:e.utm_source}]:[]),A(u.includes("utm_term")?[{display:oe(e.utm_term),value:e.utm_term}]:[]),A(u.includes("total_orders")?[{display:oe(e.total_orders),value:e.total_orders}]:[]),A(u.includes("order_id")?[{display:Object(n.createElement)("a",{href:"post.php?post=".concat(e.order_id,"&action=edit"),className:"bwf-link",target:"__blank"},e.order_id),value:e.order_id}]:[]),A(u.includes("total_revenue")?[{display:S.formatAmount(e.total_revenue),value:e.total_revenue}]:[]),A(u.includes("type")?[{display:Object(n.createElement)("div",{className:p()("bwf-badge bwf-badge-sm",{"bwf-badge-green":"Customer"===e.type})},e.type),value:e.type}]:[]),A(u.includes("average_revenue")?[{display:S.formatAmount(e.average_revenue),value:e.average_revenue}]:[]))})),ie=function(e){if(e!==b){var r;y(e);var n=Object(l.d)(o,"period=month&compare=previous_year").primary;Object(i.isEmpty)(n.after)||(X=n.after.format("YYYY-MM-DD 00:00:00")),Object(i.isEmpty)(n.before)||(J=n.before.format("YYYY-MM-DD 23:59:59")),L(t,o.hasOwnProperty("after")?o.after:X,o.hasOwnProperty("before")?o.before:J,o.hasOwnProperty("utms")?null==o||null===(r=o.utms)||void 0===r?void 0:r.split(","):[],e,j,o.hasOwnProperty("type")?o.type:"",!0)}},ce=Z(o);return Object(n.useEffect)((function(){if(!Object(i.isEqual)(ce,o)){var e="order"===o.type?["order_id","total_revenue"]:["total_orders","total_revenue","type","average_revenue"];if(o.hasOwnProperty("utms")){var t=o.utms.split(","),r=[].concat(A(t),e);s(r)}else s(e)}}),[o]),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(d.a,{isLoading:W,title:"",rows:ae,headers:ne.filter((function(e){return u.includes(e.key)})),rowHeader:!0,totalRows:w,rowsPerPage:b,showMenu:!1,onPageChange:function(e,r){var n,a=(e-1)*b;g(a);var c=Object(l.d)(o,"period=month&compare=previous_year").primary;Object(i.isEmpty)(c.after)||(X=c.after.format("YYYY-MM-DD 00:00:00")),Object(i.isEmpty)(c.before)||(J=c.before.format("YYYY-MM-DD 23:59:59")),L(t,o.hasOwnProperty("after")?o.after:X,o.hasOwnProperty("before")?o.before:J,o.hasOwnProperty("utms")?null==o||null===(n=o.utms)||void 0===n?void 0:n.split(","):[],b,a,o.hasOwnProperty("type")?o.type:"",!0)},onQueryChange:function(e){return"per_page"!==e?function(){}:ie},query:{paged:K},className:"bwf-analytics-campaign-table"}))},R=[{utm_campaign:"summer_sale",utm_medium:"summer_sale",utm_source:"facebook",utm_term:"summer_sale",total_orders:"24",total_revenue:"12.56",average_revenue:"120.56"},{utm_campaign:"googies_for_christmas",utm_medium:"googies_for_christmas",utm_source:"google",utm_term:"summer_sale",total_orders:"15",total_revenue:"10.56",average_revenue:"109.56"}],L=r(5),Y=r(84),U=function(e){var t=e.items,r=void 0===t?[]:t,o=e.onItemClick,a=e.preferences;return Object(n.createElement)(Y.a,{contentClassName:"bwf-analytics-preferences bwf-analytics-dropdown",position:"bottom left",expandOnMobile:!1,renderToggle:function(e){e.isOpen;var t=e.onToggle;return Object(n.createElement)(u.Button,{isSecondary:!0,className:"is-secondary bwf-flex bwf--g4 bwf-btn-small bwf-btn-gray",onClick:function(){t()}},Object(n.createElement)(L.a,{icon:"filters",color:"#353030",size:16}),Object(n.createElement)("span",{className:""},Object(c.__)("Preferences","funnel-builder")))},renderContent:function(e){e.onClose;return Object(n.createElement)("ul",null,r.map((function(e,t){return Object(n.createElement)("li",{key:"bwf-analytics-preferences-".concat(t),onClick:function(){return o(e.key)}},e.label,a.includes(e.key)&&Object(n.createElement)(L.a,{icon:"tick",size:16}))})))}})},z=r(158),B=["setStateProp","fetch"];var q=function(){var e=Object(y.a)("conversion-analytics"),t=e.setStateProp,r=(e.fetch,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}(e,B),Object(T.a)()),n=r.setFunnelData,o=r.setFunnelStatus,a=r.setFunnelLoading,i=Object(D.a)().setStepFunnelData;return{fetch:function(e,r,c){var l="?after=".concat(r,"&before=").concat(c,"&funnel_id=").concat(e),u="/funnel-analytics/"+(e?parseInt(e):"global")+"/conversion/stats/"+l;j()({path:Object(O.y)(u)}).then((function(e){var r=null;e.hasOwnProperty("code")&&(r=e),t("data",e.state),t("isLoading",!1),t("error",r),e.hasOwnProperty("funnel_data")&&(n("funnelTitle",e.funnel_data.title),i(e.funnel_data),o("status",e.funnel_data.status),a(!1))}))}}};function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=["getStateProp"];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(){var e=Object(_.a)("conversion-analytics"),t=e.getStateProp;return H(H({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,G)),{},{getAnalytics:function(){return t("data")},getError:function(){return t("error")},getLoading:function(){return t("isLoading")}})},Q=r(85);function X(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var te=[{key:"facebook",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"facebook",label2:Object(c.__)("Facebook","funnel-builder")},{key:"google",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"google",label2:Object(c.__)("Google","funnel-builder")},{key:"instagram",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"instagram",label2:Object(c.__)("Instagram","funnel-builder")},{key:"tiktok",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"tiktok",label2:Object(c.__)("Tiktok","funnel-builder")},{key:"youtube",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"youtube",label2:Object(c.__)("Youtube","funnel-builder")},{key:"linkedIn",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"linkedin",label2:Object(c.__)("Linkedin","funnel-builder")},{key:"other",label:Object(c.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"people",label2:Object(c.__)("Other","funnel-builder")}];t.default=function(e){var t=Object(x.b)().isProFeatureLocked,r=location&&location.search?Object(o.parse)(location.search.substring(1)):{},b=r.period,p=r.compare,d=r.interval,m=r.after,y=r.before,v=Object(a.useParams)().id,j=e.funnelId,g=void 0===j?v:j,h=J(Object(n.useState)("checkout"),2),_=(h[0],h[1],J(Object(n.useState)(t),2)),w=_[0],E=_[1],S=J(Object(n.useState)(["facebook","google","instagram","tiktok","youtube","linkedIn","other"]),2),k=S[0],P=S[1],C=(q().fetch,W()),T=C.getAnalytics,D=C.getError,A=C.getLoading,N=(T(),D());A();Object(n.useEffect)((function(){if(!t){var e=Object(l.d)(r,"period=month&compare=previous_year").primary;Object(i.isEmpty)(e.after)||e.after.format("YYYY-MM-DD 00:00:00"),Object(i.isEmpty)(e.before)||e.before.format("YYYY-MM-DD 23:59:59")}}),[b,p,d,m,y]);return N?Object(n.createElement)(Q.a,{errorMessage:N.hasOwnProperty("message")?N.message:Object(c.__)("Unable to load funnels","funnel-builder")}):Object(n.createElement)(s.a,{className:"bwf-analytics__wrap"},Object(n.createElement)(f.a,null,Object(n.createElement)(f.b,null),Object(n.createElement)(f.c,null,Object(n.createElement)(f.a,null,Object(n.createElement)(f.c,null,Object(n.createElement)(u.Button,{isSecondary:!0,className:"is-secondary bwf-flex bwf--g4 bwf-btn-small bwf-btn-gray"},Object(n.createElement)(L.a,{icon:"export",size:16}),Object(c.__)("Export","funnel-builder"))),Object(n.createElement)(f.c,null,Object(n.createElement)(U,{items:te.map((function(e){var t=e.label2;return{key:e.key,label:t}})),preferences:k,onItemClick:function(e){return P((function(t){return t.includes(e)?1===t.length?t:t.filter((function(t){return t!==e})):[].concat(X(t),[e])}))}}))))),Object(n.createElement)(M,{query:r,funnelId:g}),Object(n.createElement)(z.a,{isOpen:w,onRequestClose:function(){return E(!1)},modalContent:{title:Object(c.__)("Conversion Analytics is a Pro feature","funnel-builder"),demoLabel:Object(c.__)("Try Demo","funnel-builder"),feature:Object(c.__)("Conversion Analytics","funnel-builder"),proLink:Object(O.U)(["Conversion","Analytics","Upgrade","Modal"])}}))}},833:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(126),l=r(1),u=r(318),s=r(20),f=r(21),b=r(384),p=r(462),d=r(14),m=r(426),y=r(5),O=r(18),v=r(142),j=r(131),g=r(141),h=r(54),_=r(4),w=r(12),E=r(22),S=r(152),k=r(26);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=["getStateProp"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(){var e=Object(k.a)("utm-campaigns"),t=e.getStateProp;return D(D({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,C)),{},{data:t("data"),pageNo:parseInt(t("pageNo")),perPage:parseInt(t("limit")),total:parseInt(t("total")),isLoading:t("isLoading"),getMessage:function(){return t("message")},getError:function(){return t("error")},getFiltersList:function(){return t("filters_list")},firstTimeLoading:t("firstTimeLoading")})},N=(r(831),r(434)),I=r(127),F=r(93),M=r(92);function R(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Y=[{utm_campaign:"BackToSchoolSale",utm_source:"FacebookAds",utm_medium:"CPC",utm_content:"DiscountCode",orders:10,optins:1,revenue:40},{utm_campaign:"WinterClearance",utm_source:"GoogleAds",utm_medium:"CPC",utm_content:"BannerAd",orders:8,optins:2,revenue:55},{utm_campaign:"SpringSale",utm_source:"InstagramAds",utm_medium:"CPC",utm_content:"CarouselAd",orders:15,optins:3,revenue:100},{utm_campaign:"SummerSavings",utm_source:"LinkedInAds",utm_medium:"CPC",utm_content:"VideoAd",orders:7,optins:1,revenue:70},{utm_campaign:"HolidaySpecial",utm_source:"TwitterAds",utm_medium:"CPC",utm_content:"SponsoredTweet",orders:12,optins:4,revenue:90},{utm_campaign:"NewYearDiscount",utm_source:"BingAds",utm_medium:"CPC",utm_content:"TextAd",orders:5,optins:2,revenue:30},{utm_campaign:"CyberMonday",utm_source:"SnapchatAds",utm_medium:"CPC",utm_content:"SnapAd",orders:20,optins:5,revenue:150},{utm_campaign:"BlackFriday",utm_source:"PinterestAds",utm_medium:"CPC",utm_content:"PinAd",orders:25,optins:6,revenue:200},{utm_campaign:"ValentinesDay",utm_source:"RedditAds",utm_medium:"CPC",utm_content:"SponsoredPost",orders:18,optins:3,revenue:120},{utm_campaign:"EasterDeals",utm_source:"YouTubeAds",utm_medium:"CPC",utm_content:"PreRollAd",orders:14,optins:2,revenue:80}],U=[{type:"icon",data:{content:Object(n.createElement)(y.a,{icon:"no-data",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(l.__)("No UTM Campaigns to show","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(l.__)("UTM Campaigns will began to show once a conversion is recorded.","funnel-builder"),style:{color:"#82838E"}}}],z=function(e){return[{type:"sticky",rules:[{slug:"utm_campaign",title:"UTM Campaign",type:"search",op_label:"UTM Campaign",required:["data"],api:"/funnel-utms/?utm_key=utm_campaign&s={{search}}",readable_text:"{{rule /}} - {{value /}}",default_options:[]},{slug:"utm_source",title:"UTM Source",type:"search",op_label:"UTM Source",required:["data"],api:"/funnel-utms/?utm_key=utm_source&s={{search}}",readable_text:"{{rule /}} - {{value /}}",default_options:[]},{slug:"utm_medium",title:"UTM Medium",type:"search",op_label:"UTM Medium",required:["data"],api:"/funnel-utms/?utm_key=utm_medium&s={{search}}",readable_text:"{{rule /}} - {{value /}}",default_options:[]},{slug:"utm_content",title:"UTM Content",type:"search",op_label:"UTM Content",required:["data"],api:"/funnel-utms/?utm_key=utm_content&s={{search}}",readable_text:"{{rule /}} - {{value /}}",default_options:[]},{slug:"utm_term",title:"UTM Term",type:"search",op_label:"UTM Term",required:["data"],api:"/funnel-utms/?utm_key=utm_term&s={{search}}",readable_text:"{{rule /}} - {{value /}}",default_options:[]}].concat(R(e?[]:[{slug:"funnels",title:"Funnel",type:"search",api:"/funnels/?s={{search}}&search_filter",op_label:"Funnel",required:["data"],readable_text:"{{rule /}} - {{value /}}"}]),[{slug:"conversions",title:"Conversions",type:"select",val_label:"Type",required:["data"],options:{all:"All",orders:"Orders",optins:"Optins"},readable_text:"{{value /}}"}])}]},B=r(297);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t,r=Object(c.useParams)().id,o=e.funnelId,k=void 0===o?r:o,P=k?"funnel_utm_campaigns":"utm_campaigns",C=Object(f.a)().migrationStatus,T=[1,2].includes(C),D=Object(s.b)(),x=D.isProFeatureLocked,R=D.isLite,L=q(Object(n.useState)(!1),2),V=L[0],G=L[1],$=Object(v.a)(),H=$.getFilters,K=$.getSearchValue,W=Object(g.a)(),Q=W.setFilters,X=W.setSearchValue,J=K(P),Z=H(P),ee=Object(F.a)(),te=ee.setOrderLoading,re=ee.setOrdersFirstTimeLoading,ne=Object(M.a)(),oe=ne.setLeadLoading,ae=ne.setLeadsFirstTimeLoading,ie=Object(S.a)(),ce=ie.fetch,le=ie.setLoading,ue=A(),se=ue.isLoading,fe=ue.total,be=ue.perPage,pe=ue.pageNo,de=ue.data,me=(0,ue.getFiltersList)();Object(n.useEffect)((function(){!x&&se?ce(k,J,pe,be,Z):le(!1)}),[]);var ye=Object(_.A)(),Oe=[{key:"utm-campaign",label:Object(l.__)("UTM Campaign","funnel-builder")},{key:"utm-source",label:Object(l.__)("UTM Source","funnel-builder")},{key:"utm-medium",label:Object(l.__)("UTM Medium","funnel-builder")},{key:"utm-content",label:Object(l.__)("UTM Content","funnel-builder")},{key:"utm-term",label:Object(l.__)("UTM Term","funnel-builder")},{key:"orders",label:Object(l.__)("Orders","funnel-builder")},{key:"optins",label:Object(l.__)("Optins","funnel-builder")},{key:"revenue",label:Object(l.__)("Revenue","funnel-builder")}],ve=(x?Y:de).map((function(e){var t=["utm_campaign","utm_medium","utm_source","utm_term","utm_content"].filter((function(t){return!Object(i.isEmpty)(e[t])})).map((function(t){return{filter:t,rule:"",data:[{id:e[t],label:e[t]}]}})),r=function(){Q(k?"funnel_orders":"orders",t,k),Q(k?"funnel_leads":"leads",t,k),te(!0),re(null),oe(!0),ae(null)};return[{display:e.utm_campaign||"-",value:e.utm_campaign},{display:e.utm_source||"-",value:e.utm_source},{display:e.utm_medium||"-",value:e.utm_medium},{display:e.utm_content||"-",value:e.utm_content},{display:e.utm_term||"-",value:e.utm_term},{display:"-"===e.orders?"-":Object(n.createElement)("span",{className:"bwf-link bwf-cursor-pointer",onClick:function(){x||(r(),Object(w.k)({},Object(_.kb)()?"/store-checkout/orders":k?"/funnels/".concat(k,"/orders"):"/analytics/orders"))}},e.orders),value:e.orders},{display:"-"===e.optins?"-":Object(n.createElement)("span",{className:"bwf-link bwf-cursor-pointer",onClick:function(){x||(r(),Object(w.k)({},k?"/funnels/".concat(k,"/orders/optins"):"/analytics/orders/optins"))}},e.optins),value:e.optins},{display:Object(n.createElement)(E.c,{type:"success",content:ye.formatAmount(e.revenue)}),value:e.revenue}]})),je=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(b.a,{filterList:null!==(t=x?z(k):me)&&void 0!==t?t:[],isLoading:se,filterData:Z,setFilterData:function(e,t){Q(P,t),Object(i.isEmpty)(e)||ce(k,J,pe,be,e),Object(i.isEmpty)(e)&&Object(i.isEmpty)(t)&&ce(k,J,pe,be,e)},key:"contact-filter",isLocked:T}),!se&&T&&Object(n.createElement)("div",{style:{flex:1}},Object(n.createElement)(p.a,null))),ge=Object(n.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start",key:"table-action"},Object(n.createElement)("div",{className:"bwf-display-flex gap-12 bwf-export-btn"},x||T?Object(n.createElement)(d.a,{onClick:function(){x&&G(!0)},className:a()("bwf-btn-gray bwf-export-icon",{"is-locked":T}),isSecondary:!0},Object(n.createElement)(y.a,{icon:T?"lock":"king",size:16,color:T?O.TEXT_COLOR_2:O.NOTICE_YELLOW}),Object(l.__)("Export","funnel-builder")):Object(n.createElement)(m.a,{title:Object(l.__)("Export UTM Campaigns","funnel-builder"),type:"utms",exportType:"utms",filters:Z,filterList:me,totalText:(isNaN(fe)?0:fe)+Object(l.__)(" UTM Campaings","funnel-builder"),total:isNaN(fe)?0:fe,isDisabled:se,search:J,funnelId:k}))),he=function(e){e!==be&&ce(k,J,1,e,Z,!0)};return x||Object(i.size)(Z)||null!=de&&de.length||Object(i.size)(J)||se?Object(n.createElement)("div",{className:a()("bwf-utm-campaigns",{"has-notice":R})},!R&&x&&Object(n.createElement)(I.b,{modalContent:{title:Object(l.__)("UTM Campaigns","funnel-builder"),proLink:Object(_.U)(["UTM","Campaigns","Analytics"])},onPage:!0}),Object(n.createElement)(u.a,{isLoading:se,rows:ve,headers:Oe,totalRows:x?Object(i.size)(Y):fe,rowsPerPage:be,rowHeader:!0,showMenu:!1,onPageChange:function(e,t){ce(k,J,e,be,Z)},onQueryChange:function(e){return"per_page"!==e?function(){}:he},query:{paged:pe},className:"bwf-utm-campaigns-table bwf-table-list has-search bwf-choose-filter",actions:[Object(n.createElement)("div",{className:"bwf_w_full",key:"utm-campaigns-actions"},R&&Object(n.createElement)(N.a,{title:Object(l.__)("UTM Campaign Analytics","funnel-builder"),proLink:Object(_.U)(["UTM","Campaign","Analytics","Upgrade","Notice"]),message:k?Object(l.__)("Use our sample data to explore UTM Campaign Analytics. See how it summarises metrics across funnel.","funnel-builder"):Object(l.__)("Use our sample data to explore UTM Campaign Analytics. See how it summarises metrics across multiple funnels.","funnel-builder")}),Object(n.createElement)("div",{className:"bwf-flex bwf--space-between bwf_w_full bwf-mt-1",key:"order-list"},Object(n.createElement)(j.a,{key:"search",searchTerm:J,isLoading:se,totalRows:isNaN(fe)?0:fe,setSearchData:function(e){X(P,e),ce(k,e,pe,be,Z)},isLocked:T}),!se&&ge))],extraSectionBeforefilterCol:je}),V&&Object(n.createElement)(h.a,{isOpen:V,onRequestClose:function(){return G(!1)},modalContent:{title:Object(l.__)("UTM Campaigns Export","funnel-builder"),feature:Object(l.__)("UTM Campaigns Export","funnel-builder"),proLink:Object(_.U)(["UTM","Campaigns","Export","Upgrade","Modal"])}})):Object(n.createElement)(B.a,{data:U})}},834:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(25),a=r(126),i=r(2),c=r(8),l=r(1),u=r(358),s=r(5),f=r(318),b=r(100),p=r(125),d=r(4),m=r(384),y=r(142),O=r(141),v=r(346),j=r(127),g=r(10),h=r.n(g);r(13);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var l=n&&n.prototype instanceof c?n:c,u=Object.create(l.prototype);return C(u,"_invoke",function(r,n,o){var a,c,l,u=0,s=o||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,c=0,l=e,b.n=r,i}};function p(r,n){for(c=r,l=n,t=0;!f&&u&&!o&&t<s.length;t++){var o,a=s[t],p=b.p,d=a[2];r>3?(o=d===n)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(c=0,b.v=n,b.n=a[1]):p<d&&(o=r<3||a[0]>n||n>d)&&(a[4]=r,a[5]=n,b.n=d,c=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),c=s,l=d;(t=c<2?e:l)||!f;){a||(c?c<3?(c>1&&(b.n=-1),p(c,l)):b.n=l:b.v=l);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=b.n<0)?l:r.call(n,b))!==i)break}catch(t){a=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(r,o,a),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(C(t={},n,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,C(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,C(f,"constructor",u),C(u,"constructor",l),l.displayName="GeneratorFunction",C(u,o,"GeneratorFunction"),C(f),C(f,o,"Generator"),C(f,n,(function(){return this})),C(f,"toString",(function(){return"[object Generator]"})),(P=function(){return{w:a,m:b}})()}function C(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(C=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){C(e,t,(function(e){return this._invoke(t,r,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,r,n)}function T(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){T(a,n,o,i,c,"next",e)}function c(e){T(a,n,o,i,c,"throw",e)}i(void 0)}))}}function x(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I={title:Object(l.__)("Referrers","funnel-builder"),content:{benefits:[Object(l.__)("Track sources of the order from platforms like Google Ads, Facebook, Google, Instagram, Pinterest, TikTok, Snapchat, and others.","funnel-builder"),Object(l.__)("Get individual stats of every order","funnel-builder"),Object(l.__)("Get deep analytics of data based on your revenue performance","funnel-builder")]},review:{comment:Object(l.__)("Funnelkit stripe plugins saves my lots of money when other payment plugins get ome updates.","funnel-builder"),name:"Francisco Opazo C",rating:5},proLink:Object(d.U)(["referrer"])},F=[{referrers:"Facebook",total_orders:"24",total_revenue:"12.56",average_revenue:"120.56",total_optins:"150"},{referrers:"X/Twitter",total_orders:"30",total_revenue:"15.75",average_revenue:"110.25",total_optins:"200"},{referrers:"Instagram",total_orders:"18",total_revenue:"9.42",average_revenue:"90.12",total_optins:"100"},{referrers:"LinkedIn",total_orders:"40",total_revenue:"20.00",average_revenue:"150.00",total_optins:"250"},{referrers:"Pinterest",total_orders:"15",total_revenue:"7.84",average_revenue:"112.50",total_optins:"120"},{referrers:"Reddit",total_orders:"28",total_revenue:"14.67",average_revenue:"99.57",total_optins:"180"},{referrers:"YouTube",total_orders:"22",total_revenue:"11.58",average_revenue:"105.37",total_optins:"160"},{referrers:"Twitch",total_orders:"35",total_revenue:"18.24",average_revenue:"130.11",total_optins:"220"},{referrers:"Medium",total_orders:"12",total_revenue:"6.29",average_revenue:"75.46",total_optins:"80"},{referrers:"Quora",total_orders:"25",total_revenue:"13.12",average_revenue:"95.75",total_optins:"140"},{referrers:"StackOverflow",total_orders:"19",total_revenue:"9.96",average_revenue:"85.21",total_optins:"110"},{referrers:"GitHub",total_orders:"32",total_revenue:"16.75",average_revenue:"120.33",total_optins:"200"},{referrers:"Wikipedia",total_orders:"14",total_revenue:"7.35",average_revenue:"105.78",total_optins:"90"},{referrers:"Apple",total_orders:"27",total_revenue:"14.09",average_revenue:"100.20",total_optins:"170"},{referrers:"Microsoft",total_orders:"21",total_revenue:"11.01",average_revenue:"95.87",total_optins:"130"},{referrers:"Netflix",total_orders:"17",total_revenue:"8.90",average_revenue:"88.12",total_optins:"100"},{referrers:"Amazon",total_orders:"33",total_revenue:"17.34",average_revenue:"125.46",total_optins:"210"},{referrers:"Ebay",total_orders:"20",total_revenue:"10.48",average_revenue:"98.75",total_optins:"150"},{referrers:"Snapchat",total_orders:"23",total_revenue:"12.04",average_revenue:"110.25",total_optins:"160"},{referrers:"TikTok",total_orders:"29",total_revenue:"15.21",average_revenue:"105.38",total_optins:"180"},{referrers:Object(l.__)("Others","funnel-builder"),total_orders:"50",total_revenue:"25.00",average_revenue:"50.00",total_optins:"300"},{referrers:Object(l.__)("Direct","funnel-builder"),total_orders:"80",total_revenue:"39.93",average_revenue:"49.92",total_optins:"400"}],M=function(e){return[{type:"sticky",rules:[{slug:"period",title:Object(l.__)("Date Created","funnel-builder"),type:"date-range",op_label:Object(l.__)("Time Period","funnel-builder"),required:["rule","data"],readable_text:"{{value /}}"},{slug:"search",title:Object(l.__)("Referrer","funnel-builder"),type:"checklist",multiple:!0,options:{Google:"Google",Yahoo:"Yahoo",Facebook:"Facebook","X/Twitter":"X/Twitter",Pinterest:"Pinterest",Instagram:"Instagram",Tiktok:"Tiktok",SnapChat:"SnapChat",YouTube:"YouTube",direct:Object(l.__)("Direct","funnel-builder"),others:Object(l.__)("Others","funnel-builder")},op_label:Object(l.__)("Referrer","funnel-builder"),required:["data"],readable_text:"{{rule /}} - {{value /}}"}].concat(x(e?[]:[{slug:"funnels",title:Object(l.__)("Funnel","funnel-builder"),type:"search",api:"/funnels/?s={{search}}&search_filter",op_label:Object(l.__)("Funnel","funnel-builder"),required:["data"],readable_text:"{{rule /}} - {{value /}}"}]))}]},R=function(){var e=D(P().m((function e(t,r,n){var o,a;return P().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,o="/funnel-analytics/"+(t?parseInt(t):"global")+"/referrer-social-stats/"+(Object(i.isEmpty)(r)?"":Object(d.x)({filters:JSON.stringify(r)})),e.n=1,h()({path:Object(d.y)(o),signal:n});case 1:if(a=e.v,!Object(i.isObject)(a)){e.n=2;break}return e.a(2,null!=a?a:{});case 2:throw a;case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n){return e.apply(this,arguments)}}(),L=new AbortController,Y=function(){var e=D(P().m((function e(t,r,n){var o,a,c,l,u,s,f,b,p,m,y;return P().w((function(e){for(;;)switch(e.n){case 0:return L.abort(),L=new AbortController,e.p=1,o={period:"overall",before:"",after:"",compare:"previous_period"},(a=r.find((function(e){return"period"===e.filter})))&&(o={period:a.rule,after:a.data.after,before:a.data.before}),c=Object(d.B)(Object(d.Y)(o)),c.primary,l=c.secondary,u={after:"overall"===o.period?d.g:l.after.format(d.f),before:l.before.endOf("day").format(d.d)},s={},e.n=2,Promise.all([R(t,r,L.signal),R(t,Object(i.isEmpty)(r)?[{filter:"period",rule:"overall",data:E({},u)}]:r.map((function(e){return"period"===e.filter?E(E({},a),{},{data:E({},u)}):e})),L.signal)]);case 2:f=e.v,b=k(f,2),p=b[0],m=b[1],s.filter=o,s.isLoading=!1,s.primary=p,s.secondary=m,s.referrers=Object.keys(p),n(s),e.n=4;break;case 3:e.p=3,y=e.v,console.log(y),n({error:y,isLoading:!1});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,r,n){return e.apply(this,arguments)}}(),U={isLoading:!1,primary:{direct:{ref_key:"direct",referrers:Object(l.__)("Direct","funnel-builder"),percentage_orders:15.93,orders:52,total_revenue:"4123.45",average_revenue:"79.30",optins:24,percentage_optins:21.15},facebook:{ref_key:"facebook",referrers:"Facebook",percentage_orders:23.15,orders:65,total_revenue:"5421.33",average_revenue:"83.40",optins:32,percentage_optins:27.85},google:{ref_key:"google",referrers:"Google",percentage_orders:7.29,orders:47,total_revenue:"1934.72",average_revenue:"41.23",optins:18,percentage_optins:14.68},instagram:{ref_key:"instagram",referrers:"Instagram",percentage_orders:9.38,orders:22,total_revenue:"752.55",average_revenue:"34.20",optins:15,percentage_optins:13.4},youtube:{ref_key:"youtube",referrers:"Youtube",percentage_orders:31.68,orders:73,total_revenue:"3612.68",average_revenue:"49.47",optins:40,percentage_optins:35.92},tiktok:{ref_key:"tiktok",referrers:"Tiktok",percentage_orders:16.43,orders:39,total_revenue:"2200.91",average_revenue:"56.42",optins:17,percentage_optins:15.23},pinterest:{ref_key:"pinterest",referrers:"Pinterest",percentage_orders:12.21,orders:53,total_revenue:"1683.77",average_revenue:"31.78",optins:22,percentage_optins:19.73},snapchat:{ref_key:"snapchat",referrers:"Snapchat",percentage_orders:5.62,orders:15,total_revenue:"318.88",average_revenue:"21.26",optins:8,percentage_optins:7.17},yahoo:{ref_key:"yahoo",referrers:"Yahoo",percentage_orders:8.58,orders:48,total_revenue:"2378.92",average_revenue:"49.56",optins:19,percentage_optins:17.02},"x/twitter":{ref_key:"x/twitter",referrers:"X/twitter",percentage_orders:34.79,orders:97,total_revenue:"12900.34",average_revenue:"133.01",optins:28,percentage_optins:25.08},others:{ref_key:"others",referrers:Object(l.__)("Others","funnel-builder"),percentage_orders:15.34,orders:61,total_revenue:"4822.20",average_revenue:"79.05",optins:30,percentage_optins:26.99}},secondary:{direct:{ref_key:"direct",referrers:Object(l.__)("Direct","funnel-builder"),percentage_orders:10.59,orders:66,total_revenue:"2892.14",average_revenue:"43.83",optins:14,percentage_optins:10.45},facebook:{ref_key:"facebook",referrers:"Facebook",percentage_orders:20.19,orders:52,total_revenue:"1790.99",average_revenue:"34.48",optins:19,percentage_optins:14.2},google:{ref_key:"google",referrers:"Google",percentage_orders:6.85,orders:38,total_revenue:"1352.82",average_revenue:"35.60",optins:10,percentage_optins:7.46},instagram:{ref_key:"instagram",referrers:"Instagram",percentage_orders:11.36,orders:19,total_revenue:"833.24",average_revenue:"43.85",optins:12,percentage_optins:8.94},youtube:{ref_key:"youtube",referrers:"Youtube",percentage_orders:28.51,orders:89,total_revenue:"3989.56",average_revenue:"44.86",optins:35,percentage_optins:26.12},tiktok:{ref_key:"tiktok",referrers:"Tiktok",percentage_orders:15.17,orders:32,total_revenue:"1557.48",average_revenue:"48.67",optins:12,percentage_optins:8.94},pinterest:{ref_key:"pinterest",referrers:"Pinterest",percentage_orders:13.56,orders:55,total_revenue:"1966.43",average_revenue:"35.75",optins:19,percentage_optins:14.18},snapchat:{ref_key:"snapchat",referrers:"Snapchat",percentage_orders:7.09,orders:12,total_revenue:"493.82",average_revenue:"41.15",optins:10,percentage_optins:7.46},yahoo:{ref_key:"yahoo",referrers:"Yahoo",percentage_orders:7.37,orders:44,total_revenue:"1399.37",average_revenue:"31.80",optins:15,percentage_optins:11.19},"x/twitter":{ref_key:"x/twitter",referrers:"X/twitter",percentage_orders:31.52,orders:78,total_revenue:"7489.28",average_revenue:"96.01",optins:30,percentage_optins:22.39},others:{ref_key:"others",referrers:Object(l.__)("Others","funnel-builder"),percentage_orders:14.61,orders:69,total_revenue:"3256.10",average_revenue:"47.16",optins:21,percentage_optins:15.67}},filter:{period:"overall",before:"",after:""},referrers:["direct","facebook","google","instagram","youtube","tiktok","pinterest","snapchat","yahoo","x/twitter","others"]},z={direct:Object(l.__)("Direct","funnel-builder"),facebook:Object(l.__)("Facebook","funnel-builder"),google:Object(l.__)("Google","funnel-builder"),tiktok:Object(l.__)("Tiktok","funnel-builder"),pinterest:Object(l.__)("Pinterest","funnel-builder"),snapchat:Object(l.__)("SnapChat","funnel-builder"),yahoo:Object(l.__)("Yahoo","funnel-builder"),"x/twitter":Object(l.__)("X/Twitter","funnel-builder"),instagram:Object(l.__)("Instagram","funnel-builder"),youtube:Object(l.__)("Youtube","funnel-builder"),others:Object(l.__)("Others","funnel-builder")},B=r(297),q=r(426),V=r(138),G=(r(830),r(20)),$=r(18),H=r(462),K=r(21),W=r(6),Q=r.n(W),X=r(434),J=r(54),Z=r(431);function ee(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t,r,g,h=location&&location.search?Object(o.parse)(location.search.substring(1)):{},_=te(Object(n.useState)(10),2),w=_[0],E=_[1],S=te(Object(n.useState)(0),2),k=S[0],P=S[1],C=te(Object(n.useState)(!1),2),T=C[0],D=C[1],x=Object(d.A)(),A=Object(a.useParams)().id,N=e.funnelId,R=void 0===N?A:N,L=Object(b.a)(),W=L.fetch,re=L.setReferrerLoading,ne=L.setOverviewData,oe=L.clearError,ae=Object(p.a)(),ie=ae.getRefSites,ce=ae.getLoading,le=ae.getTotalRecords,ue=ae.getFilterList,se=ae.getGlobalFilterList,fe=ae.getOverviewData,be=ie(),pe=ce(),de=le(),me=Object(y.a)().getFilters,ye=Object(O.a)().setFilters,Oe=Object(K.a)().migrationStatus,ve=[1,2].includes(Oe),je=fe(),ge=me(R?"funnel_referrers":"referrers",R),he=Object(G.b)(),_e=he.isProFeatureLocked,we=he.isLite,Ee=R?ue():se();r=h,g=Object(n.useRef)(),Object(n.useEffect)((function(){g.current=r})),g.current;Object(n.useEffect)((function(){!_e&&pe?W(R,w,k,!0,ge):re(!1)}),[]),Object(n.useEffect)((function(){return _e?ne(U):pe&&(ne({isLoading:!0}),Y(R,[],(function(e){ne(e)}))),function(){oe()}}),[]);var Se=function(e){return Object(n.createElement)(n.Fragment,null,e)},ke=[{key:"referring_Sites",label:Se(Object(l.__)("Referrers","funnel-builder")),cellClassName:"bwf-word-break"},{key:"optins",label:Se(Object(l.__)("Optins","funnel-builder"))},{key:"orders",label:Se(Object(l.__)("Orders","funnel-builder"))},{key:"gross_sales",label:Se(Object(l.__)("Revenue","funnel-builder"))},{key:"aov",label:Se(Object(l.__)("Average Order Value","funnel-builder"))}],Pe=function(e){return Object(i.isEmpty)(e)?"-":e},Ce=function(e){return Object(n.createElement)("span",{className:"bwf--tag is-success"},x.formatAmount(e))},Te=(_e?F:be).map((function(e){return[{display:Pe(e.referrers),value:e.referrers},{display:Pe(e.total_optins),value:e.total_optins},{display:Pe(e.total_orders),value:e.total_orders},{display:Ce(e.total_revenue),value:e.total_revenue},{display:Ce(e.average_revenue),value:e.average_revenue}]})),De=function(e){e!==w&&(E(e),W(R,e,k,!0))},xe=parseInt(k)/parseInt(w)+1,Ae=Object(n.createElement)(m.a,{filterList:_e?M(R):Ee,isLoading:pe,filterData:ge,propsToPass:{searchHelper:R?{funnelId:R}:{}},setFilterData:function(e,t){ye(R?"funnel_referrers":"referrers",t,R),Object(i.isEmpty)(e)||(W(R,w,k,!0,e),ne({isLoading:!0}),Y(R,e,(function(e){ne(e)}))),Object(i.isEmpty)(e)&&Object(i.isEmpty)(t)&&(W(R,w,k,!0,[]),ne({isLoading:!0}),Y(R,[],(function(e){ne(e)})))},key:"contact-filter",isLocked:ve}),Ne=[{type:"icon",data:{content:Object(n.createElement)(s.a,{icon:"zero-referrers",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(l.__)("No Referrers to show","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(l.__)("Referrers will began to show once a conversion is recorded.","funnel-builder"),style:{color:"#82838E"}}}];if(!(_e||Object(i.size)(ge)||be.length||pe))return Object(n.createElement)(B.a,{data:Ne});var Ie=function(e){return Object(d.n)(parseInt(Object(i.get)(je,"primary.".concat(e,".total_revenue"),0)),parseInt(Object(i.get)(je,"secondary.".concat(e,".total_revenue"),0)))},Fe={period:"overall",before:"",after:"",compare:"previous_period"},Me=ge.find((function(e){return"period"===e.filter}));Me&&(Fe={period:Me.rule,after:Me.data.after,before:Me.data.before});var Re=function(e){var t=x.formatAmount(Object(i.get)(je,"secondary.".concat(e,".total_revenue"),0));return t+=" - "+Object(d.S)(Fe,"previous_period",!1,!0,"overall"===Fe.period)},Le=function(e){return[Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,Object(l.__)("Orders: ","funnel-builder"),Object(n.createElement)("span",null," ",Object(i.get)(je,"primary.".concat(e,".orders"),0))),Object(n.createElement)("span",null,Object(l.__)("Share: ","funnel-builder"),Object(n.createElement)("span",null," ",Object(i.get)(je,"primary.".concat(e,".percentage_orders"),0),"%"))),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",null,Object(l.__)("Optins: ","funnel-builder"),Object(n.createElement)("span",null," ",Object(i.get)(je,"primary.".concat(e,".optins"),0))),Object(n.createElement)("span",null,Object(l.__)("Share: ","funnel-builder"),Object(n.createElement)("span",null," ",Object(i.get)(je,"primary.".concat(e,".percentage_optins"),0),"%")))]},Ye=Object(i.isEmpty)(je.referrers)?ee(new Array(8)):null===(t=je.referrers)||void 0===t?void 0:t.map((function(e){return{key:e,title:z[e],value:(t=e,Object(n.createElement)(Z.a,{amount:Object(i.get)(je,"primary.".concat(t,".total_revenue"),0)})),delta:Ie(e),label:Re(e),icon:"direct"===e?"upsells":"others"===e?"globe":e,tags:Le(e)};var t}));return Object(n.createElement)(u.a,{className:"bwf-analytics__wrap bwf-referrers-wrap"},!we&&_e&&Object(n.createElement)(j.b,{modalContent:I,onPage:!0}),Object(n.createElement)(v.a,null),Object(n.createElement)("div",{className:Q()("bwf-analytics-filters",{"has-notice":we})},we&&Object(n.createElement)(X.a,{title:Object(l.__)("Referrer Analytics","funnel-builder"),proLink:Object(d.U)(["Referrers","Upgrade","Notice"]),message:R?Object(l.__)("Use our sample data to explore Referrer Analytics. See how it summarises metrics across funnel.","funnel-builder"):Object(l.__)("Use our sample data to explore Referrer Analytics. See how it summarises metrics across multiple funnels.","funnel-builder")}),Ae,!pe&&Object(n.createElement)("div",{className:"bwf-flex bwf--g12"},_e||ve?Object(n.createElement)(c.Button,{onClick:function(){D(!0)},className:Q()("is-secondary bwf-btn-medium bwf-btn-gray has-icon bwf-export-icon",{"is-locked":ve})},Object(n.createElement)(s.a,{icon:ve?"lock":"king",size:16,color:ve?$.TEXT_COLOR_2:$.NOTICE_YELLOW}),Object(l.__)("Export","funnel-builder")):Object(n.createElement)(q.a,{title:Object(l.__)("Export Referrers","funnel-builder"),funnelId:R,type:"referrers",exportType:R?"referrers&funnel_id=".concat(R):"referrers",filters:ge,filterList:Ee,totalText:(null!=de?de:0)+Object(l.__)(" referrers","funnel-builder"),total:null!=de?de:0,isDisabled:pe}))),!pe&&ve&&Object(n.createElement)(H.a,{message:Object(l.__)("Use our sample data to explore Referrers that bring maximum revenue and orders.Uncover hidden sources or double down on your efforts based on highest converting sources.Upgrade to PRO","funnel-builder")}),Object(n.createElement)(V.a,{items:Ye,title:Object(l.__)("Overview","funnel-builder"),isLoading:je.isLoading}),Object(n.createElement)(f.a,{isLoading:pe,title:"",rows:Te,headers:ke,rowHeader:!0,totalRows:null!=de?de:0,rowsPerPage:w,showMenu:!1,onPageChange:function(e,t){var r=(e-1)*w;P(r),W(R,w,r,!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:De},query:{paged:xe},className:"bwf-analytics-referring-site-table"}),T&&Object(n.createElement)(J.a,{isOpen:T,onRequestClose:function(){return D(!1)},modalContent:{feature:Object(l.__)("Referrer Export","funnel-builder"),proLink:Object(d.U)(["Referrer","Export","Upgrade","Modal"])}}))}}}]);