(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{288:function(e,t,n){"use strict";n.d(t,"a",(function(){return ae}));var r=n(0),o=n(1),i=n(6),a=n.n(i),c=n(2),s=n(15),l=n.n(s),u=n(8),p=n(43),f=n(60),d=n(31),b=n(45);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}function O(e,t,n){return t=g(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){var e;return h(this,t),(e=O(this,t,arguments)).handleKeyDown=e.handleKeyDown.bind(e),e.select=e.select.bind(e),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>r?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.options,i=t.onSearch,a=t.selectedIndex,c=t.setExpanded;if(0!==o.length)switch(e.keyCode){case f.UP:n(),e.preventDefault(),e.stopPropagation();break;case f.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case f.ENTER:this.select(o[a]),e.preventDefault(),e.stopPropagation();break;case f.LEFT:case f.RIGHT:c(!1);break;case f.ESCAPE:return c(!1),void i(null);case f.TAB:this.select(o[a]),c(!1),i(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.listboxId,i=t.options,s=t.selectedIndex,l=t.staticList,u=t.hoverState,p=t.label,f=t.bottomFixed,y=a()("bwf-select-control__listbox",{"is-static":l,"has-label":!Object(c.isEmpty)(p),"is-bottom-fixed":f});return Object(r.createElement)(b.a,{ref:this.listbox,focusOnMount:!1,id:o,className:y,placement:"bottom"},i.map((function(t,o){return Object(r.createElement)("div",{key:o,onMouseOver:function(){u(o)},className:"".concat(void 0!==t.nameKey?"bwf-select-optgroup-wrap":"")},Object(r.createElement)("div",{className:"bwf-select-optgroup ".concat(null==t.nameKey?"bwf-hide":"")},t.nameKey),Object(r.createElement)("div",{ref:e.getOptionRef(o),key:t.key,id:"bwf-select-control__option-".concat(n,"-").concat(t.key),role:"option","aria-selected":o===s,disabled:t.isDisabled,className:a()("bwf-select-control__option",{"is-selected":o===s}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.icon&&Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:t.icon}}),Object(d.decodeEntities)(t.label),t.meta))})))}}])&&m(n.prototype,o),i&&m(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(r.Component);w.propTypes={instanceId:l.a.number,listboxId:l.a.string,node:l.a.instanceOf(Element).isRequired,onSelect:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,selectedIndex:l.a.number,staticList:l.a.bool};var j=w,E=n(134);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}function P(e,t,n){return t=A(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,t,[e])).removeAll=n.removeAll.bind(n),n.removeResult=n.removeResult.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),n=t,(i=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this.props,n=t.selected,r=t.onChange,o=Object(c.findIndex)(n,{key:e});r([].concat(k(n.slice(0,o)),k(n.slice(o+1))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,i=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control__tags"},n.map((function(t,i){if(!t.label)return null;var a=Object(o.sprintf)(Object(o.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,i+1,n.length);return Object(r.createElement)(E.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:a})}))),i&&Object(r.createElement)(u.Button,{className:"bwf-select-control__clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(u.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Clear all","funnel-builder")))):null}}])&&_(n.prototype,i),a&&_(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(r.Component);R.propTypes={onChange:l.a.func,onSelect:l.a.func,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showClearButton:l.a.bool};var N=R,B=n(5);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}function L(e,t,n){return t=M(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],M(e).constructor):t.apply(e,n))}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=L(this,t,[e])).state={isActive:!1},n.input=Object(r.createRef)(),n.updateSearch=n.updateSearch.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),n=t,(i=[{key:"updateSearch",value:function(e){return function(t){e(t.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,o=n.setExpanded,i=n.showAllOnFocus,a=n.updateSearchOptions,c=n.isExpanded;return function(n){t.setState({isActive:!0}),r&&i?(n.target.select(),a("")):r?e(n.target.value):o(!c)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.selected,i=t.onChange,a=t.query,c=t.setExpanded;f.BACKSPACE===e.keyCode&&!a&&o.length&&i(F(o.slice(0,-1))),f.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),f.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control__control-value"},n[0].label)}},{key:"renderInput",value:function(){var e,t,n=this.props,o=n.activeId,i=n.hasTags,a=n.inlineTags,c=n.instanceId,s=n.isExpanded,l=n.isSearchable,u=n.listboxId,p=n.onSearch,f=n.placeholder,d=n.searchInputType,b=n.disabled,y=n.error,h=this.state.isActive;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-control-container"},Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control__control-input",id:"bwf-select-control-".concat(c,"__control-input"),ref:this.input,type:l?d:"button",value:this.getInputValue(),placeholder:h?f:"",onChange:this.updateSearch(p),onClick:this.onFocus(p),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":s,"aria-haspopup":"true","aria-owns":u,"aria-controls":u,"aria-activedescendant":o,disabled:b,"aria-describedby":i&&a?"search-inline-input-".concat(c):null}),Object(r.createElement)("div",{className:"bwf-select-arrow-icon",onClick:this.onFocus(p)},Object(r.createElement)(B.a,{icon:s?"angle-up":"angle-down",size:12})),(null===(e=this.props.selected[0])||void 0===e?void 0:e.hint)&&Object(r.createElement)("div",{className:"bwf-select-hint"},null===(t=this.props.selected[0])||void 0===t?void 0:t.hint)),y&&Object(r.createElement)("div",{className:"bwf-error-text"},y))}},{key:"getInputValue",value:function(){var e=this.props,t=e.inlineTags,n=e.isFocused,r=e.isSearchable,o=e.multiple,i=e.query,a=e.selected,c=e.placeholder,s=a.length?a[0].label:c||"Select";return o||n||t?r&&n&&i?i:"":s}},{key:"getIcon",value:function(){var e=this.props,t=e.inlineTags,n=e.isFocused,r=e.multiple,o=e.selected,i=!(!o.length||!o[0].icon)&&o[0].icon;return!(r||n||t)&&i}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.className,c=n.hasTags,s=n.help,l=n.inlineTags,u=n.instanceId,p=n.isSearchable,f=n.label,d=n.query;return this.state.isActive,Object(r.createElement)("div",{className:a()("components-base-control","bwf-select-control__control",i,{empty:!d||0===d.length,"has-tags":l&&c,"with-value":null===(e=this.getInputValue())||void 0===e?void 0:e.length,"has-error":!!s}),onClick:function(){t.input.current.focus()}},p&&Object(r.createElement)(B.a,{icon:"search",size:18}),l&&Object(r.createElement)(N,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(u,"__control-input"),className:"bwf-select-controls-label"},f),this.renderInput(),l&&Object(r.createElement)("span",{id:"search-inline-input-".concat(u),className:"screen-reader-text"},Object(o.__)("Move backward for selected items","funnel-builder")),!!s&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(u,"__help"),className:"components-base-control__help"},s)))}}])&&K(n.prototype,i),c&&K(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,c}(r.Component);$.propTypes={hasTags:l.a.bool,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,instanceId:l.a.number,label:l.a.string,listboxId:l.a.string,onBlur:l.a.func,onChange:l.a.func,onSearch:l.a.func,placeholder:l.a.string,query:l.a.string,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showAllOnFocus:l.a.bool};var Q=$,V=(n(523),n(129));function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function J(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function te(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}function ne(e,t,n){return t=re(t),function(e,t){if(t&&("object"==W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],re(e).constructor):t.apply(e,n))}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ie={isExpanded:!1,isFocused:!1,query:""},ae=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ne(this,t,[e])).state=Y(Y({},ie),{},{searchOptions:[],selectedIndex:0}),n.bindNode=n.bindNode.bind(n),n.decrementSelectedIndex=n.decrementSelectedIndex.bind(n),n.incrementSelectedIndex=n.incrementSelectedIndex.bind(n),n.onAutofillChange=n.onAutofillChange.bind(n),n.updateSearchOptions=Object(c.debounce)(n.updateSearchOptions.bind(n),e.searchDebounceTime),n.search=n.search.bind(n),n.selectOption=n.selectOption.bind(n),n.setExpanded=n.setExpanded.bind(n),n.setHoverState=n.setHoverState.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),n=t,(i=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.inlineTags,n=Y({},ie);!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.inlineTags,n=e.selected;return!!t&&(Array.isArray(n)?n.some((function(e){return Boolean(e.label)})):Boolean(n))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return t&&!Array.isArray(r)?Object(c.isEmpty)(r)?[]:[r]:r;var o=n.find((function(e){return e.key===r}));return o?[o]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,o=t.selected,i=this.state.query,a=n?[].concat(J(o),[e]):[e];this.reset(a),n&&Array.isArray(o)?-1===Object(c.findIndex)(o,{key:e.key})&&r(a,i):o!==e.key&&r(e.key,i)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"setHoverState",value:function(e){this.setState({selectedIndex:e})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(o.sprintf)(Object(o._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(o.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=(e.excludeSelectedOptions,this.state.searchOptions);return this.getSelected().map((function(e){return e.key})),t?r:n}},{key:"getOptionsByQuery",value:function(e,t){for(var n=this.props,r=n.getSearchExpression,o=n.maxResults,i=n.onFilter,a=[],s=r(Object(c.escapeRegExp)(t?t.trim():"")),l=s?new RegExp(s,"i"):/^$/,u=0;u<e.length;u++){var p=e[u],f=p.keywords,d=void 0===f?[]:f;if("string"==typeof p.label&&(d=[].concat(J(d),[p.label])),d.some((function(e){return l.test(e)}))&&(a.push(p),o&&a.length===o))break}return i(a,t)}},{key:"setExpanded",value:function(e){var t=this.props,n=t.selected,r=void 0===n?"":n,o=t.options.findIndex((function(e){return"string"==typeof e?e===r:e.key===r}));this.setState({selectedIndex:0<o?o:0}),this.setState({isExpanded:e})}},{key:"search",value:function(e){var t=this,n=this.cacheSearchOptions||[],r=null===e||e.length||this.props.hideBeforeSearch?this.getOptionsByQuery(n,e):n;this.setState({query:e,isFocused:!0,selectedIndex:0,searchOptions:r},(function(){t.setState({isExpanded:Boolean(t.getOptions().length)})})),this.updateSearchOptions(e)}},{key:"updateSearchOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,o=n.options,i=n.onSearch,a=this.activePromise=Promise.resolve(i(o,e)).then((function(n){if(a===t.activePromise){t.cacheSearchOptions=n;var o=null===e||e.length||r?t.getOptionsByQuery(n,e):n;t.setState({selectedIndex:0,searchOptions:o},(function(){t.setState({isExpanded:Boolean(t.getOptions().length)}),t.announce(o)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getOptionsByQuery(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,o=e.className,i=e.controlClassName,c=e.inlineTags,s=e.instanceId,l=e.isSearchable,u=e.options,p=e.multiple,f=e.disabled,d=void 0!==f&&f,b=e.label,y=e.error,h=this.state,m=h.isExpanded,v=h.isFocused,O=h.selectedIndex,g=this.hasTags(),S=(u[O]||{}).key,w=void 0===S?"":S,E=m?"bwf-select-control__listbox-".concat(s):null,x=m?"bwf-select-control__option-".concat(s,"-").concat(w):null;return Object(r.createElement)("div",{className:a()("bwf-select-control bwf-select-control-2",o,{"has-inline-tags":g&&c,"is-focused":v,"is-searchable":l,"is-disabled":d,"no-label":!b,"has-error":y}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control__autofill-input",tabIndex:"-1",disabled:d}),n,Object(r.createElement)(Q,z({},this.props,this.state,{activeId:x,className:i,hasTags:g,isExpanded:m,listboxId:E,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateSearchOptions:this.updateSearchOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,disabled:d})),!c&&p&&Object(r.createElement)(N,z({},this.props,{selected:this.getSelected(),options:this.getOptions()})),m&&Object(r.createElement)(j,z({},this.props,this.state,{activeId:x,listboxId:E,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded,hoverState:this.setHoverState})))}}])&&ee(n.prototype,i),s&&ee(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,s}(r.Component);ae.propTypes={autofill:l.a.string,children:l.a.node,className:l.a.string,controlClassName:l.a.string,excludeSelectedOptions:l.a.bool,onFilter:l.a.func,getSearchExpression:l.a.func,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,label:l.a.string,onChange:l.a.func,onSearch:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,placeholder:l.a.string,searchDebounceTime:l.a.number,selected:l.a.oneOfType([l.a.string,l.a.number,l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string}))]),maxResults:l.a.number,multiple:l.a.bool,showClearButton:l.a.bool,searchInputType:l.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:l.a.bool,showAllOnFocus:l.a.bool,staticList:l.a.bool,disabled:l.a.bool};var ce={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1},se=Object(V.a)(ae,ce);t.b=Object(p.compose)([u.withSpokenMessages,p.withInstanceId,u.withFocusOutside])(se)},289:function(e,t,n){"use strict";var r=n(0),o=n(2);t.a=function(e,t){return function(n){var i=Object(o.defaults)({},n,t);return Object(r.createElement)(e,i)}}},523:function(e,t,n){}}]);