(window.webpackJsonp=window.webpackJsonp||[]).push([[49,6,8],{280:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(126),l=n(371),c=n(425),i=n(399),o=n(593),u=n(12),s=n(4),f=n(133),b=n(21),d=n(20),m=n(127),p=n(1);function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var y=function(e,t,n){return decodeURIComponent(Object(u.f)(e,t,n))};t.default=function(e){var t=e.type,n=void 0===t?"thankyou":t,v=Object(a.useParams)(),j=v.stepId,_=v.stepType,h=void 0===_?"design":_,g=Object(u.i)().funnel_id,w=Object(b.a)().getStoreCheckoutId(),E=Object(s.kb)()?w:g,S=Object(d.b)(),N=S.isProFeatureLocked,k=S.isBasic,C=S.isLite,P=Object(d.b)("ck").isProFeatureLocked,T=k?P:N,x=function(e,t){return{design:{name:Object(p.__)("Design","funnel-builder"),link:y({},"".concat(t,"thankyou/").concat(e,"/design"))},rules:{name:Object(p.__)("Rules","funnel-builder"),link:y({},"".concat(t,"thankyou/").concat(e,"/rules"))},settings:{name:Object(p.__)("Settings","funnel-builder"),link:y({},"".concat(t,"thankyou/").concat(e,"/settings"))}}}(j,Object(s.kb)()?"/store-checkout/":"/funnel-");return Object(l.a)({selected:h,headerData:x,funnelID:E,stepId:j,type:n}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(a.Switch,null,Object(r.createElement)(a.Route,{path:["/funnel-thankyou/:stepId/design","/store-checkout/thankyou/:stepId/design"],render:function(e){return Object(r.createElement)(c.a,O({type:n,funnelID:E},e))}}),Object(r.createElement)(a.Route,{path:["/funnel-thankyou/:stepId/rules","/store-checkout/thankyou/:stepId/rules"],render:function(e){return Object(r.createElement)(r.Fragment,null,!C&&T&&Object(r.createElement)(m.b,{onPage:!0}),Object(r.createElement)(o.a,O({type:n,funnelID:E},e)))}}),Object(r.createElement)(a.Route,{path:["/funnel-thankyou/:stepId/settings","/store-checkout/thankyou/:stepId/settings"],render:function(e){return Object(r.createElement)(i.a,O({type:n,funnelID:E},e))}}),Object(r.createElement)(a.Route,{component:f.a})))}},291:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n(2),l=n(6),c=n.n(l),i=n(43),o=(n(8),n(332),n(22)),u=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled","orientation"];function s(e){var t=e.label,n=e.className,l=e.selected,f=e.help,b=e.onChange,d=(e.hideLabelFromVision,e.options),m=void 0===d?[]:d,p=e.disabled,O=void 0!==p&&p,y=e.orientation,v=void 0===y?"horizontal":y,j=(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}(e,u),Object(i.useInstanceId)(s)),_="inspector-radio-control-".concat(j),h=function(e){return b(e.target.value)};return!Object(a.isEmpty)(m)&&Object(r.createElement)("div",{className:c()("components-base-control",n,"components-radio-control bwf-components-radio-control",v)},Object(r.createElement)("div",{className:"components-base-control__field"},t&&Object(r.createElement)("label",{className:"components-base-control__label",dangerouslySetInnerHTML:{__html:t}}),Object(r.createElement)("div",{className:"bwf-radio-control-inner"},m.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(_,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(_,"-").concat(t),className:"components-radio-control__input",type:"radio",name:_,value:e.value,onChange:h,checked:!O&&e.value===l,disabled:O||e.disabled||e.isPro,"aria-describedby":f?"".concat(_,"__help"):void 0}),e.isPro&&Object(r.createElement)(o.b,null),Object(r.createElement)("label",{htmlFor:"".concat(_,"-").concat(t)},e.label))})))))}},293:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(15),c=n.n(l),i=n(129);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return d(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(d(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,d(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,d(f,"constructor",u),d(u,"constructor",o),o.displayName="GeneratorFunction",d(u,a,"GeneratorFunction"),d(f),d(f,a,"Generator"),d(f,r,(function(){return this})),d(f,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:l,m:m}})()}function d(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(d=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){d(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function m(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){m(l,r,a,c,i,"next",e)}function i(e){m(l,r,a,c,i,"throw",e)}c(void 0)}))}}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function v(e,t,n){return t=j(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,t)).state={values:e.initialValues,errors:e.errors,touched:e.touched},n.getInputProps=n.getInputProps.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.setTouched=n.setTouched.bind(n),n.setValue=n.setValue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.validate()}},{key:"componentWillUnmount",value:function(){this.validate((function(){}))}},{key:"componentDidUpdate",value:function(e,t){this.props.initialValues&&this.props.initialValues!==e.initialValues&&this.setState({values:this.props.initialValues})}},{key:"isValidForm",value:(i=p(b().m((function e(){return b().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,this.validate();case 1:return e.a(2,!Object.keys(this.state.errors).length)}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"validate",value:function(){var e=this.state.values,t=this.props.validate(e);this.setState({errors:t})}},{key:"setFormValue",value:function(e){console.log(this),this.setState({values:e})}},{key:"setValue",value:function(e,t){var n=this;this.setState((function(n){return{values:s(s({},n.values),{},f({},e,t))}}),(function(){var r=n.props,a=r.onChange;r.onChangeCallback,a({name:e,value:t},n.state.values,!Object.keys(n.state.errors||{}).length,n.setFormValue),n.validate((function(){}))}))}},{key:"setTouched",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState((function(n){return{touched:s(s({},n.touched),{},f({},e,t))}}))}},{key:"handleChange",value:function(e,t){var n=this.state.values;t.target?"checkbox"===t.target.type?this.setValue(e,!n[e]):this.setValue(e,t.target.value):this.setValue(e,t)}},{key:"handleBlur",value:function(e){this.setTouched(e)}},{key:"handleSubmit",value:(c=p(b().m((function e(){var t,n;return b().w((function(e){for(;;)switch(e.n){case 0:return t=this.state.values,n={},Object.keys(t).map((function(e){return n[e]=!0})),this.setState({touched:n}),e.n=1,this.isValidForm();case 1:if(!e.v){e.n=2;break}this.props.onSubmitCallback(t);case 2:return e.a(2)}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getInputProps",value:function(e){var t=this,n=this.state,r=n.errors,a=n.touched,l=n.values;return s(s({value:l[e],checked:Boolean(l[e]),selected:l[e],onChange:function(n){return t.handleChange(e,n)},onBlur:function(){return t.handleBlur(e)}},a[e]&&r[e]&&{className:"has-error"}),{},{help:a[e]?r[e]:null})}},{key:"getStateAndHelpers",value:function(){var e=this.state,t=e.values,n=e.errors;return{values:t,errors:n,touched:e.touched,setTouched:this.setTouched,setValue:this.setValue,handleSubmit:this.handleSubmit,getInputProps:this.getInputProps,isValidForm:!Object.keys(n).length}}},{key:"render",value:function(){var e=this.props.children(this.getStateAndHelpers());return Object(r.cloneElement)(e)}}])&&O(n.prototype,a),l&&O(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,l,c,i}(r.Component);h.propTypes={children:c.a.any,errors:c.a.object,initialValues:c.a.object.isRequired,onSubmitCallback:c.a.func,validate:c.a.func};var g={errors:{},initialValues:{},onSubmitCallback:a.noop,touched:{},validate:a.noop,onChange:function(){}};t.a=Object(i.a)(h,g)},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),l=n(6),c=n.n(l),i=n(43),o=n(8),u=(n(4),n(1)),s=n(45);n(319);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.label,n=void 0===t?"":t,l=e.id,b=void 0===l?"":l,d=e.value,m=e.onChange,p=void 0===m?a.noop:m,O=e.className,y=e.style,v=void 0===y?{}:y,j=e.isHover,_=e.hoverVal,h=void 0===_?"":_,g="inspector-color-".concat(Object(i.useInstanceId)(o.ColorPicker)),w=f(Object(r.useState)(!1),2),E=w[0],S=w[1],N=f(Object(r.useState)(),2),k=N[0],C=N[1],P=f(Object(r.useState)(0),2),T=P[0],x=P[1],A=j?Object(a.isArray)(d)?d:[d,h]:d,I=function(e){if(j){var t=A;return t[T]=e.hex,void p(t,{id:b})}p(e.hex,{id:b})},D=j?A[T]:A;return Object(r.createElement)("div",{className:c()("components-color-field",O),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:g},n),j&&Object(r.createElement)(o.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(o.Button,{className:c()("is-secondary-gray is-small",{"is-selected":0===T}),onClick:function(){return x(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(o.Button,{className:c()("is-secondary-gray is-small",{"is-selected":1===T}),onClick:function(){return x(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(o.ColorIndicator,{colorValue:D,ref:C,className:c()({"is-empty":Object(a.isEmpty)(D)})}),Object(r.createElement)("span",{className:"indicator-text"},D||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(o.ColorPicker,{color:D,onChangeComplete:I}),Object(r.createElement)(o.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},296:function(e,t,n){},297:function(e,t,n){"use strict";var r=n(0),a=n(6),l=n.n(a),c=n(2),i=n(8),o=n(55),u=(n(304),n(5));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,a=e.className,b=e.center,d=void 0!==b&&b,m=e.isDismissive,p=void 0!==m&&m,O=e.onDismisal,y=void 0===O?function(){}:O,v=e.isProFeatureLocked;if(Object(c.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:l()("bwf-zero-state",a,{"bwf-block-t-center":d})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return y()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:l()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(o.a,{className:l()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(o.a,{key:"layout-block-"+t,className:l()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(o.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(o.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(o.a,{className:l()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(i.Button,f({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:l()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:l()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},298:function(e,t,n){"use strict";var r=n(26);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return i(i({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,l)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},299:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(60),c=n(2),i=n(8);n(6),n(310);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=e.value,n=void 0===t?"":t,i=e.onChange,o=e.keyid,u=e.openMergeTagModal,f=e.customSettings,d=void 0===f?{}:f,m=e.toolbar,p=e.quicktags,O=void 0!==p&&p,y=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(y.current){var e=window.tinymce.get("editor-bwf"+o);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(c.isEmpty)(r)||(a=[].concat(b(Object(c.isArray)(r)?r:r.split(",")),b(a))),wp.editor.initialize("editor-bwf"+o,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:m||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:b(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+o,plugins:a},d),quicktags:!!O&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(c.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,i(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){l.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==l.BACKSPACE&&t.keyCode!==l.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===l.F10&&t.stopPropagation()})),u&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){u(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),n!==v.current&&i(v.current)}))}function r(){"complete"===document.readyState&&e()}return y.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+o)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+o,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){i(e.target.value)},onBlur:function(e){i(e.target.value)}}))};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=p(Object(r.useState)("visual"),2),l=a[0],c=(a[1],p(Object(r.useState)(),2)),o=c[0],u=c[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===l&&Object(r.createElement)(m,e),n&&"text"==l&&Object(r.createElement)(i.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:o,onChange:function(t){null!=e&&e.onChange(t)}}))))}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(0),a=n(15),l=n.n(a),c=["component","children"];var i=Object(r.createContext)(2);function o(e){return Object(r.createElement)(i.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function u(e){var t=e.component,n=e.children,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c),l=t||"div";return Object(r.createElement)(i.Consumer,null,(function(e){return Object(r.createElement)(i.Provider,{value:e+1},!1===t?n:Object(r.createElement)(l,a,n))}))}u.propTypes={component:l.a.oneOfType([l.a.func,l.a.string,l.a.bool]),children:l.a.node}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return b}));var r=n(0),a=n(292);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){return function(t){return Object(r.createElement)(a.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var a=Array.from(t.items),l=c(a.splice(r.index,1),1)[0];a.splice(n.index,0,l),t.onSortEnd&&t.onSortEnd({oldIndex:r.index,newIndex:n.index,items:a})}}},Object(r.createElement)(a.c,{droppableId:"droppable"},(function(n){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(e,l({},n.droppableProps,t,{provided:n})),n.placeholder)})))}},u=["id","index"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var f=function(e){return function(t){var n=t.id,l=t.index,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,u);return Object(r.createElement)(a.b,{draggableId:n.toString(),index:l,key:n},(function(t,n){return Object(r.createElement)(e,s({index:l,provided:t},c,{isDragging:n.isDragging}))}))}},b=function(e){return function(t){var n;return Object(r.createElement)("div",null===(n=t.provided)||void 0===n?void 0:n.dragHandleProps,Object(r.createElement)(e,t))}}},302:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(0),a=n(8),l=n(43),c=n(2),i=n(6),o=n.n(i),u=(n(349),n(63)),s=n(22),f=n(1);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function d(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.label,n=e.className,i=e.value,p=e.help,O=e.options,v=void 0===O?[]:O,j=e.onBlur,_=(void 0===j&&c.noop,e.onChange),h=void 0===_?c.noop:_,g=e.onFocus,w=(void 0===g&&c.noop,e.disabled),E=e.showtooltip,S=void 0!==E&&E,N=e.tooltipmsg,k=void 0===N?"":N,C=e.select_all,P=e.select_all_label,T=e.orientation,x=void 0===T?"vertical":T,A=m(Object(r.useState)(!0),2),I=A[0],D=A[1],F=Object(l.useInstanceId)(y);if(Object(c.isEmpty)(v))return null;var L="inspector-checklist-".concat(F);i=null!=i&&i?i:[];var R=o()("components-checklist",n),B=function(e){var t=d(i);!0===e.target.checked?i.includes(e.target.value)||t.push(e.target.value):t=i.filter((function(t){return t!==e.target.value})),h(t,{event:e}),D(!1)},M=v.map((function(e){return e.value}));return Object(r.createElement)(a.BaseControl,{label:t,id:L,help:p},Object(r.createElement)("div",{className:o()("component-checklist-option-wrap",R,x)},C&&Object(r.createElement)("div",{className:o()("bwf-checkbox-control select_all")},Object(r.createElement)("span",{className:o()("bwf-checkbox-control-inner")},Object(r.createElement)("input",{type:"checkbox",id:"checkbox_select_all",value:Object(c.isEmpty)(Object(c.difference)(M,i)),onChange:function(e){e.target.checked?h(M,{e:e}):h([],{e:e})},checked:Object(c.isEmpty)(Object(c.difference)(M,i)),className:o()({"bwf-no-animation":I})})),Object(r.createElement)("label",{htmlFor:"checkbox_select_all"},P||Object(f.__)("Select All","funnel-builder"))),v.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},k),visible:S&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(L,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(L,"-").concat(t),className:o()("bwf-checkbox-control")},Object(r.createElement)("span",{className:o()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",b({id:"".concat(L,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:B,checked:!e.isPro&&(n=i,a=e.value,!!Array.isArray(n)&&n.includes(a)),className:o()({"bwf-no-animation":I}),"aria-describedby":p?"".concat(L,"__help"):void 0},(w||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.b,null),Object(r.createElement)("label",{htmlFor:"".concat(L,"-").concat(t)},e.label)));var n,a}))))}},303:function(e,t,n){},304:function(e,t,n){},306:function(e,t,n){},308:function(e,t,n){"use strict";var r=n(0),a=n(3),l=n.n(a),c=(n(303),n(301)),i=(n(8),n(5)),o=n(1),u=n(2);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.groupID,n=e.items,a=void 0===n?[{key:"",label:"",display:Object(r.createElement)("p",null)}]:n,s=e.className,f=void 0===s?"":s,d=e.sortable,O=e.groupData,y=e.handleClick,v=e.actions,j=e.handleIcons,_=e.openedTabs,h=(void 0===_&&u.noop,e.openedKeys),g=e.setOpenedKeys,w=e.returnProps,E=void 0!==w&&w,S=p(Object(r.useState)(h||[0]),2),N=S[0],k=S[1],C={};a.forEach((function(e){C[e.key]=Object(r.createRef)()})),Object(r.useEffect)((function(){void 0!==h&&k(h)}),[h]),Object(r.useEffect)((function(){void 0!==g&&g(N)}),[N]),Object(r.useEffect)((function(){var e=Object.keys(C)[0],t=function(t){jQuery(C[t].current).on("click",(function(n){var r=Object(u.isString)(n.target.className)&&n.target.className.split(" ");if(r&&!r.includes("components-form-toggle__input")&&!r.includes("components-toggle-control__label")){var a=jQuery(this).parents(".bwf-c-s-collapsible");t!==e||a.hasClass("bwf-accordion-closed")?t===e&&a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideDown(400),a.removeClass("bwf-accordion-closed")):a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideUp(400),a.removeClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideDown(400),a.addClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideUp(400),a.addClass("bwf-accordion-closed"))}}))};for(var n in C)t(n)}),[]);var P=Object(c.c)((function(){return Object(r.createElement)(i.a,{icon:"menu"})}));return Object(r.createElement)("div",{className:"bwf-accordian-list"},a&&a.map((function(e,n){return e.hasOwnProperty("key")?Object(r.createElement)("div",{key:e.key,"data-accordion":n,className:f+" bwf-c-s-collapsible"},Object(r.createElement)("div",{className:"bwf-c-s-heading",ref:C[e.key],onClick:function(e){-1===N.indexOf(n)?k((function(e){return[].concat(m(e),[n])})):setTimeout((function(){k((function(e){return e.filter((function(e){return e!==n}))}))}),400)}},d&&Object(r.createElement)(P,null),Object(r.createElement)("div",{className:"bwf-accordion-label-elm"},e.label),v&&v.map((function(e){return e.hasOwnProperty("key")?Object(r.createElement)("a",{onClick:function(n){n.preventDefault(),y(e.key,t,"group",0,O)},href:"",key:e.key,className:"bwf-accordion-"+e.class},Object(o.__)(null==e?void 0:e.label,"funnel-builder")):null})),Object(r.createElement)("div",{className:"bwf-c-s-icon"},"plus-minus"===j?Object(r.createElement)(i.a,{icon:N.includes(n)?"minus":"plus-3"}):Object(r.createElement)(i.a,{icon:N.includes(n)?"angle-up":"angle-down",width:"16",height:"18"}))),Object(r.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion bwf-hide",style:b({},N.includes(n)&&{display:"block"})},e.hint,l.a.isValidElement(e.display)?l.a.cloneElement(e.display,E?{isOpened:N.includes(n)}:{}):e.display)):null})))}},309:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(5);n(333);t.a=function(e){var t=e.onClose,n=e.title,c=e.isDismissible,i=void 0===c||c;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),i&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(a.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(l.a,{icon:"close",size:20})))}},310:function(e,t,n){},312:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return p}));var r=n(0),a=(n(8),n(1)),l=n(12),c=n(4);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},b=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,i=e.importType,o=e.activeTemplateGroup;return u(u({title:!1===t?Object(a.__)("Templates are a PRO Feature","funnel-builder"):Object(a.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(a.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(a.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(a.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(a.__)("inactive or has expired.","funnel-builder")),Object(a.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(l.k)({},"/settings/")}}),{},{proLink:Object(c.U)([0===n||"funnel"===i?"Template":"Step",o,"Build","From","Scratch","Upgrade","Modal"])})},d=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,i=e.funnelId,o=e.activeGroup,s=e.activeStep;return u(u({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(a.__)(" is a PRO template","funnel-builder")):Object(a.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(a.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(a.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(a.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(a.__)("inactive or has expired.","funnel-builder")),Object(a.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(l.k)({},"/settings/")}}),{},{proLink:Object(c.U)([i?"Step":"Template",i?o:"upsell"===o?"upsell":s,t,"Upgrade","Modal"])})},m=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},p={optin:{inline:Object(a.__)("Inline","funnel-builder"),popup:Object(a.__)("Popup","funnel-builder")},wc_checkout:{1:Object(a.__)("One","funnel-builder"),2:Object(a.__)("Two","funnel-builder"),3:Object(a.__)("Three","funnel-builder")}}},314:function(e,t,n){"use strict";var r=n(0),a=(n(8),n(6)),l=n.n(a),c=n(2),i=n(15),o=n.n(i),u=n(5),s=n(45),f=(n(296),n(289)),b=function(e){var t=e.disabled,n=e.value,a=e.onChange,i=e.dateFormat,o=e.label,f=e.describedBy,b=e.error,d=e.onFocus,m=e.onKeyDown,p=e.errorPosition,O=e.placeHolder,y=l()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":b}),v=Object(c.uniqueId)("_woo-dates-input"),j=Object(r.useRef)(null);return Object(r.createElement)("div",{className:y},Object(r.createElement)("input",{type:"text",ref:j,className:"bwf-calendar-input-text",value:n,onChange:a,"aria-label":o,id:v,"aria-describedby":"".concat(v,"-message"),placeholder:Object(c.isEmpty)(O)?i.toLowerCase():O,onFocus:d,onKeyDown:m,disabled:t}),b&&Object(r.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:p},b),Object(r.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){d(),j.current&&j.current.focus()}},Object(r.createElement)(u.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(v,"-message")},b||f))};b.propTypes={disabled:o.a.bool,value:o.a.string,onChange:o.a.func.isRequired,dateFormat:o.a.string.isRequired,label:o.a.string.isRequired,describedBy:o.a.string.isRequired,error:o.a.string,errorPosition:o.a.string,onFocus:o.a.func,onKeyDown:o.a.func};var d={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:c.noop};t.a=Object(f.a)(b,d)},315:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),a=(n(329),n(330),n(1)),l=n(8),c=n(2),i=n(60),o=n(13),u=n.n(o),s=n(15),f=n.n(s),b=n(83),d=n(6),m=n.n(d),p=(n(296),n(314)),O=n(300),y=n(4),v=n(84);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}function g(e,t,n){return t=w(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,t,[e])).onDateChange=n.onDateChange.bind(n),n.onInputChange=n.onInputChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(l=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;i.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,a=n.dateFormat,l=u()(t);r({date:l,text:t?l.format(a):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(b.i)(n,t),a=r?null:b.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?a:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,l=t.disabled,i=t.text,s=t.dateFormat,f=t.error,b=t.isInvalidDate,d=t.placeHolder,O=t.position,y=void 0===O?"bottom center":O,j=t.hasValue,_=void 0!==j&&j,h=t.className,g=(Object(o.isMoment)(n)?n.isValid():u()(n).isValid())?n:"";return Object(r.createElement)("div",{className:m()("bwf-specific-date",{"bwf-has-value":_})},Object(r.createElement)(v.a,{position:y,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(h),renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(p.a,{disabled:!!n&&l,value:i,onChange:e.onInputChange,dateFormat:s,label:Object(a.__)("Choose a date","funnel-builder"),error:f,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date in format %s","funnel-builder"),s),onFocus:Object(c.partial)(e.handleFocus,n,o),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(c.partial)(e.handleKeyDown,n,o),errorPosition:"top center",placeHolder:d})},renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(N,{onToggle:n,date:g,isInvalidDate:b,onDateChange:e.onDateChange})}}))}}])&&_(n.prototype,l),s&&_(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,s}(r.Component),N=function(e){var t=e.onToggle,n=e.date,a=e.onDateChange,i=e.isInvalidDate,o=Object(r.useRef)();return Object(y.ub)(o,(function(){return t()})),Object(r.createElement)("div",{ref:o},Object(r.createElement)(O.b,{component:!1},Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(l.DatePicker,{currentDate:n,onChange:Object(c.partial)(a,t),isInvalidDate:i}))))};S.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=S},316:function(e,t,n){"use strict";var r=n(26);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("settings"),t=e.getStateProp;return i(i({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,l)),{},{data:t("data"),tabs:t("tabs"),isLoading:t("isLoading")})}},317:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(8),c=n(67),i=n(5),o=n(4),u=n(18),s=n(21),f=n(24),b=(n(372),n(34));function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=[Object(a.__)("Supports One Click Upsells with Express Checkout","funnel-builder"),Object(a.__)("Better Express Payment with Apple & Google Pay","funnel-builder"),Object(a.__)("Recover failure upsells","funnel-builder"),Object(a.__)("Get personalised Support","funnel-builder")],O=Object(o.I)()+"funnel_thumbnail.png";t.a=function(){var e=d(Object(r.useState)(!1),2),t=e[0],n=e[1],o=Object(s.a)().isNoticeclosed,m=Object(f.a)().removeNotice,y=(0,Object(b.a)().getStripeStatus)(),v=o("upsell-stripe-notice");return"connected"===y||v?null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-upsell-stripe-notice"},Object(r.createElement)("img",{src:O,alt:"thumbnail",onClick:function(){return n(!0)}}),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-upsell-stripe-notice__title"},Object(a.__)("Recover More Upsells with FunnelKit ","funnel-builder"),Object(r.createElement)("strong",null,Object(a.__)("Stripe","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-upsell-stripe-notice__features"},p.map((function(e,t){return Object(r.createElement)("span",{key:"stripe-feature-".concat(t)},Object(r.createElement)(i.a,{icon:"check-circle2",size:"16"}),e)}))),Object(r.createElement)(c.a,{stripeInText:!0})),Object(r.createElement)("span",{className:"bwf-upsell-stripe-notice__close",onClick:function(){return m("upsell-stripe-notice")}},Object(r.createElement)(i.a,{icon:"close",size:"16",color:u.TEXT_COLOR_3}))),t&&Object(r.createElement)(l.Modal,{title:Object(a.__)("How to setup Stripe with FunnelKit","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-xl",onRequestClose:function(){return n(!1)},shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0},Object(r.createElement)("iframe",{title:"thumbnail",width:"720",height:"372",src:"https://www.youtube.com/embed/01pWZNaGGd4?rel=0",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))}},319:function(e,t,n){},323:function(e,t,n){"use strict";var r=n(0);n(303);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.count,n=void 0===t?10:t,l=e.className,c=void 0===l?"":l;return Object(r.createElement)("div",{className:"bwf-accordion-placeholder ".concat(c)},a(Array(n)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))})))}},325:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){"use strict";var r=n(8),a=n(0),l=n(6),c=n.n(l),i=n(302),o=n(82),u=n(288),s=n(2),f=n(339),b=["ajax_cb","options"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=n(299),y=["value","onChange","id","label","className"];function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var j=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,l=e.id,i=e.label,o=e.className,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,y);function s(e){r(e,l)}return Object(a.createElement)("div",{className:c()("components-richeditor",o)},i&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:l},i),Object(a.createElement)(O.a,v({content:n,value:n,setContent:s,onChange:s,keyid:l},u)))},_=n(5),h=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:c()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(_.a,{icon:"duplicate",size:20}),"Copy")))},g=n(291),w=n(295),E=n(1),S=(n(334),n(4)),N=n(289);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var n=e.split(" ");return A(A(A(A({},t.attrTop,Object(s.isEmpty)(n[0])?"0":n[0]),t.attrRight,Object(s.isEmpty)(n[1])?"0":n[1]),t.attrBottom,Object(s.isEmpty)(n[2])?"0":n[2]),t.attrLeft,Object(s.isEmpty)(n[3])?"0":n[3])}return A(A(A(A({},t.attrTop,"0"),t.attrRight,"0"),t.attrBottom,"0"),t.attrLeft,"0")},D={label:Object(E.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(E.__)("Top","funnel-builder"),labelRight:Object(E.__)("Right","funnel-builder"),labelBottom:Object(E.__)("Bottom","funnel-builder"),labelLeft:Object(E.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},F=Object(N.a)((function(e){var t=e.value,n=void 0===t?{}:t,l=e.label,i=e.type,o=e.onChange,u=void 0===o?s.noop:o,f=(e.defaultSync,I(n,e)),b="",d=T(Object(a.useState)(!Object(S.k)(Object.values(f))),2),m=d[0],p=d[1],O=T(Object(a.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,A(A(A(A({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),2),y=O[0],v=O[1];b=y&&y[e.attrUnit]?y[e.attrUnit]:"px",Object(a.useEffect)((function(){v(P(P({},y),I(n,e)))}),[n]),Object(a.useEffect)((function(){v(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,A(A(A(A({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),b=y&&y[e.attrUnit]?y[e.attrUnit]:"px"}),[]);var j=function(t,r){var a=t.target.value;if(m)!function(t){"padding"===i&&(t=t.toString().replace(/-/g,""));var r=P({},y);if(r[e.attrTop]=t,r[e.attrRight]=t,r[e.attrBottom]=t,r[e.attrLeft]=t,Object(s.isString)(n)){var a="".concat(r[e.attrTop]," ").concat(r[e.attrRight]," ").concat(r[e.attrBottom]," ").concat(r[e.attrLeft]);u(a)}else u(r)}(a);else{"padding"===i&&(a=a.toString().replace(/-/g,""));var l=P({},y);if(l[r]=a,Object(s.isString)(n)){var c="".concat(l[e.attrTop]," ").concat(l[e.attrRight]," ").concat(l[e.attrBottom]," ").concat(l[e.attrLeft]);u(c)}else u(l)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},l&&Object(a.createElement)("label",{className:"components-base-control__label"},l),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrTop)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),l),value:y&&y[e.attrTop],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrRight)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),l),value:y&&y[e.attrRight],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrBottom)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),l),value:y&&y[e.attrBottom],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrLeft)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),l),value:y&&y[e.attrLeft],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)(r.Button,{className:c()("components-bwf-dimensions-control_reset",{"is-lock":m}),label:Object(E.__)("Reset","funnel-builder"),onClick:function(){return p((function(e){return!e}))},isSmall:!0},Object(a.createElement)(_.a,{icon:m?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),D),L=n(43);n(335);function R(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=[{id:"h-offset",selectindex:0,label:Object(E.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(E.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(E.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(E.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(E.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(E.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],z=function(e){var t=e.typography,n=e.setTypography,r=e.settingOptions,l=e.label,c=Object(L.useInstanceId)(z,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:c},l&&Object(a.createElement)("label",{className:"components-base-control__label"},l),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},r.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:t[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(r){var a=r.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?r.target.value:a<0?0:a;var l=R(t);l[e.selectindex]=a,n(l)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"",Object(a.createElement)("label",{className:"components-base-control__label"},Object(E.__)("Shadow Color","funnel-builder")),Object(a.createElement)(w.a,{value:t[4],onChange:function(e){var r=R(t);r[4]=e,n(r)}})))},U=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,l=n.h_offset,c=void 0===l?"":l,i=n.v_offset,o=void 0===i?"":i,u=n.blur,s=void 0===u?"":u,f=n.spread,b=void 0===f?"":f,d=n.color,m=void 0===d?"":d,p=n.inset,O=[c,o,s,b,m,void 0===p?"":p];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(z,{typography:O,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:M,label:r}))};n(336);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){var t=e.value,n=e.onChange,l=e.label,c=e.defaultCustomValue,i=G(Object(a.useState)(""),2),o=i[0],f=i[1],b=G(Object(a.useState)(""),2),d=b[0],m=b[1];return Object(a.useEffect)((function(){Object(s.isEmpty)(d)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(m("auto"),f("100%")):(m("custom"),f(t)))}),[t]),Object(a.createElement)(a.Fragment,null,l&&Object(a.createElement)("label",{className:"components-base-control__label"},l),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,q({value:o,onChange:function(e){n(e),f(e)},disabled:"auto"===d},"custom"===d&&{type:"number",min:"0"})),Object(a.createElement)(u.a,{options:[{key:"auto",label:Object(E.__)("Auto","funnel-builder")},{key:"custom",label:Object(E.__)("Custom","funnel-builder")}],selected:d,onChange:function(e){m(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?c:t),f(c))}})))},H=n(63),K=["label","tooltip"];function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var X={checkbox:o.a,radio:g.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:i.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,b),c=m(Object(a.useState)(r),2),i=c[0],o=c[1],u=m(Object(a.useState)(!1),2),p=u[0],O=u[1];Object(a.useEffect)((function(){Object(s.isEmpty)(i)&&y()}),[i]);var y=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),o(t),O(!0)}})}))};return Object(a.createElement)(a.Fragment,null,p?Object(a.createElement)(f.a,d({options:i},l)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:j,richtext:j,copier:h,color:w.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,K);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(a.createElement)(H.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(_.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,Z({},l,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":F,"box-shadow":U,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:c()("bwf_label",n)},t)},width:J};t.a=function(e){var t=e.input,n=e.formProps,l=e.values,i=e.customMapField,o=void 0===i?{}:i,u=Y(Y({},X),o),f=u.text;if(t.type.toLowerCase()in u&&(f=u[t.type.toLowerCase()]),t.ajax_cb&&(f=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(l)){var b=l[t.id];if(Object(s.isEmpty)(b))l[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof b[0]){var d=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&b.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},d.push(t)}else if("string"==typeof e.value.id&&b.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},d.push(n)}})),l[t.id]=d}}var m,p;return Object(a.createElement)("div",{className:c()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(f,Y(Y({label:t.label},(m=t,p=Object.assign({},m.props),m.type.toLowerCase()in u||(p.type=m.type.toLowerCase()),p.placeholder=m.placeholder,p.options=m.options,m.checkboxlabel&&(p.checkboxlabel=m.checkboxlabel),m.multiple&&(p.multiple=m.multiple),m.ajax_cb&&(p.ajax_cb=m.ajax_cb),"copier"===m.type&&(p=m),"width"===m.type&&(p=m),"color"===m.type&&(p=m,m.isHover&&m.hoverKey&&(p.hoverVal=l[m.hoverKey])),"richeditor"!==m.type&&"richtext"!==m.type&&"textarea"!==m.type||(p=m),"number"===m.type&&(p.min=m.min,p.max=m.max),"select"===m.type&&(p.excludeSelectedOptions=!1,p.options&&(p.options=p.options.map((function(e){return"object"!==$(e.value)&&(e.key="object"!==$(e.value)?e.value:e.key,e.value={id:e.value}),e}))),m.multiple&&(p.excludeSelectedOptions=!0,p.inlineTags=!0)),"richeditor"===m.type&&(p.id=m.id),"bwf-toggle"===m.type&&(p.tooltip=m.tooltip),"input"!==m.type&&"text"!==m.type&&"textarea"!==m.type||(p.placeholder=Object(E.__)("Type here","funnel-builder")),"text"===m.type&&m.disabled&&(p.disabled=m.disabled),"toggle"===m.type&&(p.className="bwf-tooglecontrol-advance",p.tooltip=m.tooltip,p.label=m.label),p.keyid=m.key,p)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},343:function(e,t,n){"use strict";var r=n(0),a=(n(374),n(10)),l=n.n(a),c=n(4),i=n(1),o=n(5),u=n(2),s=(n(42),n(6)),f=n.n(s);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=null;t.a=function(e){e.emptyOption;var t=e.onChange,n=e.value,a=e.apiEndPoint,s=(e.hintLabel,e.label),d=void 0===s?Object(i.__)("Select Page","funnel-builder"):s,p=e.error,O=Object(r.useRef)(),y=b(Object(r.useState)(""),2),v=y[0],j=y[1],_=b(Object(r.useState)(n),2),h=_[0],g=_[1],w=b(Object(r.useState)(),2),E=w[0],S=w[1],N=b(Object(r.useState)(!1),2),k=N[0],C=N[1],P=b(Object(r.useState)(""),2),T=P[0],x=P[1],A=b(Object(r.useState)(0),2),I=A[0],D=A[1];Object(c.ub)(O,(function(){k||j("")}));var F=function(e){g(e),j("")};Object(r.useEffect)((function(){v&&D(0)}),[v]);var L=function(e){t(e)};return Object(r.useEffect)((function(){if(v.length>=3){C(!0);try{if(clearTimeout(m),v!==T)m=setTimeout((function(){x(v);var e=a.includes("?")?"".concat(a,"&term=").concat(v):"".concat(a,"?term=").concat(v);l()({path:Object(c.y)(e)}).then((function(e){C(!1),e.success?S(e.data.pages||e.data.products):S([{ID:"no-data-found",name:"No result found"}])}))}),600);else{var e=JSON.parse(JSON.stringify(E));S(e),C(!1)}}catch(e){}}else clearTimeout(m),C(!1)}),[v]),Object(r.createElement)("div",{className:f()("bwf-custom-select",{"is-selected":!Object(u.isEmpty)(h)})},Object(r.createElement)("div",{className:"form-group required wffn_field_space bwf-display-flex"},Object(r.createElement)("label",{className:"bwf-custom-select-label"},d),Object(r.createElement)("div",{className:"field-wrap",ref:O},Object(r.createElement)("div",{className:" multiselect multiselect--above"},Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("input",{type:"text",autoFocus:!0,value:v,onChange:function(e){return j(e.target.value)},autoComplete:"off",placeholder:"".concat(0==h.length?"Search..":""),className:f()("multiselect__input",{"bwf-error-border":0===v.length&&p}),style:Object(u.isEmpty)(h)?{}:{display:"none"},disabled:!Object(u.isEmpty)(h),onKeyDown:function(e){38===e.keyCode&&I>0?D(I-1):40===e.keyCode&&I<E.length-1&&D(I+1)},onKeyPress:function(e){var t,n;"Enter"===e.key&&"no-data-found"!==(null===(t=E[I])||void 0===t?void 0:t.ID)&&(e.preventDefault(),F(null===(n=E[I])||void 0===n?void 0:n.name),L(E[I]))}}),!Object(u.isEmpty)(h)&&Object(r.createElement)("span",{className:"bwf-selected-item"},"string"==typeof h?h:h.name),""!=h&&Object(r.createElement)("div",{className:"bwf-custom-select-clear",onClick:function(){g(""),L("")}},Object(r.createElement)(o.a,{icon:"dismiss-circle",size:"16"}))),Object(r.createElement)("div",{className:" ".concat(v&&3<=v.length?"multiselect__content-wrapper":"bwf-hide"," ")},k?Object(r.createElement)("div",{className:"multiselect__option"},Object(i.__)("Fetching Details","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},null==E?void 0:E.map((function(e,t){return Object(r.createElement)("li",{className:"bwf_multiselect__element",onMouseOver:function(){return D(t)},onClick:function(){"no-data-found"!==e.ID&&(F(null==e?void 0:e.name),L(e))},key:"multiselect__content--key-".concat(t)},e&&"no-data-found"!==e.ID&&Object(r.createElement)("span",{"data-select":Object(i.__)("Press enter to select","funnel-builder"),"data-selected":Object(i.__)("Selected","funnel-builder"),"data-deselect":Object(i.__)("Press enter to remove","funnel-builder"),className:" multiselect__option ".concat(I===t?"multi-select-active":null)},Object(r.createElement)("span",null,null==e?void 0:e.name)),e&&"no-data-found"==e.ID&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.name))})))))),0!==v.length?Object(r.createElement)("div",{className:"bwf-field-hints",style:{fontSize:"12px",margin:"2px",color:"#3c434a"}},Object(i.__)("Enter minimum 3 letters","funnel-builder")):p&&Object(r.createElement)("div",{className:"bwf-error-text"},p))))}},349:function(e,t,n){},350:function(e,t,n){"use strict";var r=n(0),a=n(126),l=n(2),c=n(1),i=n(376),o=n(298),u=n(81),s=n(312);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(o.a)(),n=t.getTemplates,f=t.getBuilders,d=t.getDefaultBuilder,m=t.templateLoading,O=t.getActiveBuilder,y=t.getActiveGroup,v=t.getCurrentTemplate,j=t.getActiveStep,_=t.getActiveSubFilter,h=e.onImportComplete,g=e.isStoreCheckout,w=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,N=e.stepId,k=e.funnelId,C=Object(u.a)(),P=C.setActiveGroup,T=(C.setActiveSubFilter,C.setCurrentTemplate),x=p(p({wc_checkout:Object(c.__)("Checkout","funnel-builder")},!g&&{landing:Object(c.__)("Sales","funnel-builder")}),{},{upsell:Object(c.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(c.__)("Thank You","funnel-builder")},!g&&{optin:Object(c.__)("Optin","funnel-builder"),optin_ty:Object(c.__)("Optin Confirmation","funnel-builder")}),A=Object(a.useParams)(),I=A.id,D=A.filter,F=A.builder,L=A.templateId,R=b(Object(r.useState)(!1),2),B=R[0],M=R[1],z=n();Object(r.useEffect)((function(){return F&&(P(D),T({id:L})),function(){P("funnel")}}),[]);var U=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(l.isEmpty)(z)&&!B&&F){var e=z[D][F][L];T({id:L,template:e}),M(!0)}}),[z]);var q=f(),G=d(),V=O(),J=m(),H=y(),K=v(),$=(j(),_()),W=function(){var e=G;return Object(l.isEmpty)(V)||(e=V),q&&q[H]&&!q[H][e]&&(e=q[H][G]?G:"elementor"),e},Y=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&$&&V?z[t][V][e].group_type[n||$]:e},Q=function(e){return"wc_checkout"===H?$===e.no_steps:"optin"!==H||e.group.includes($)},Z=function(e,t,n){var r="";return"landing"===H?r="sp":"optin"===H?r="op":"optin_ty"===H?r="op-confirmed":"wc_checkout"===H?r="checkouts":"upsell"===H?r="offer":"wc_thankyou"===H&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===H&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},X=g?"/store-checkout":0===I?"/templates":"/funnels/".concat(I);return Object(r.createElement)(i.a,{filters:s.e,templates:z,activeBuilder:W(),templateCards:function(){if(Object(l.isEmpty)(z)||Object(l.isEmpty)([H]))return{};var e=W(),t={};return z[H]&&z[H][e]&&(t=z[H][e]),t}(),editors:q,defaultBuilder:G,isTemplateLoading:J,activeTemplateGroup:H,templateGroup:x,previewData:function(){if(Object(l.isEmpty)(z)||"funnel"===H)return{};var e={},t=[],n=[];try{var r=W();for(var a in t=[],z[H][r]){var c=z[H][r][a];if(!c.build_from_scratch&&Q(c)){var i={};if(i.id=a,i.funnel=c.group_type?c.group_type[Object.keys(c.group_type)[0]]:a,i.slug=a,i.name=c.name,i.thumbnail=c.thumbnail,i.template=null==K?void 0:K.id,i.pro=c.pro,i.group_type=c.group_type,i.type=H,i.preview=null==c?void 0:c.prevslug,t.push(i),c.group_type)Object.values(c.group_type).forEach((function(e){var t=z[H][r][e];n.push({id:null==t?void 0:t.prevslug,preview:Z(0,t,r)})}));else n.push({id:null==c?void 0:c.prevslug,preview:Z(0,c,r)})}}var o=z[H][r][Y(null==K?void 0:K.id,H)];e.activeTemplate={thumbnail:Y(null==K?void 0:K.id,H),preview:Z(null==K||K.id,o,r),slug:Y(null==K?void 0:K.id,H),name:null!=K&&K.id?z[H][r][null==K?void 0:K.id].name:"",pro:null!=K&&K.id?z[H][r][null==K?void 0:K.id].pro:"",tempPro:null!=K&&K.id?z[H][r][Y(null==K?void 0:K.id,H,!("wc_checkout"!==H&&"optin"!==H||!U(K.template))&&U(K.template))].pro:"",group:H,filters:!!o.group_type&&Object.keys(o.group_type),type:H,funnelGroup:[H],prevId:o.prevslug},e.thumbnails=t,e.previews=n}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:N&&k?k:g&&w?w:I,onImportComplete:h,templateFilterCheck:function(e,t){return"wc_checkout"===H?t===e.no_steps:"optin"!==H||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:$,showDefaultEditorNotice:!1,isStoreCheckout:g,parentRoute:X,showTemplatesNav:!(N||g&&0===I),urlDependency:S,stepId:N,importApiPrefix:g?"store-checkout":"funnels"})}},354:function(e,t,n){"use strict";var r=n(0),a=n(6),l=n.n(a),c=n(4),i=n(1),o=n(8),u=n(10),s=n.n(u),f=n(2),b=n(44),d=n(357),m=n(64),p=n(316),O=n(14),y=n(5),v=(n(373),n(42)),j=n(18);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=[Object(i.__)("New Features","funnel-builder"),Object(i.__)("New Add-ons & Integrations","funnel-builder"),Object(i.__)("World Class Support","funnel-builder"),Object(i.__)("Security Improvements","funnel-builder"),Object(i.__)("Wordpress Compatibility","funnel-builder"),Object(i.__)("Marketing & Payment Compatibility","funnel-builder")],S=function(e){var t=e.onclose,n=e.onAction,a=e.isLoading,l=void 0!==a&&a;return Object(r.createElement)(o.Modal,{className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-alert-modal bwf-deactivate-modal",isDismissible:!1,onRequestClose:t},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(i.__)("Deactivating License","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(i.__)("Close"),onClick:function(){return t()}},Object(r.createElement)(y.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-content bwf-mt-16"},Object(r.createElement)("span",null,Object(i.__)("You will lose access to the following active license benefits:","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("ul",null,E.map((function(e,t){return Object(r.createElement)("li",{key:"feature-".concat(t)},Object(r.createElement)(y.a,{icon:"cross-circle",color:j.DANGER_COLOR,size:"20"}),e)})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-mt-24"},Object(r.createElement)(o.Button,{className:"bwf-modal-cancel-btn bwf-strong ".concat(l?"bwf-is-active":""),onClick:function(){l||n()}},Object(r.createElement)("span",{style:g({},l&&{visibility:"hidden"})},Object(i.__)("Deactivate","funnel-builder")),l&&Object(r.createElement)(v.a,{color:"#0073aa",style:{position:"absolute"}})),Object(r.createElement)(o.Button,{isPrimary:!0,className:"bwf-btn-medium",onClick:function(){return t()},disabled:l},Object(i.__)("Cancel","funnel-builder")))))},N=n(13),k=n.n(N),C=n(24);function P(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return T(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(T(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,T(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,T(f,"constructor",u),T(u,"constructor",o),o.displayName="GeneratorFunction",T(u,a,"GeneratorFunction"),T(f),T(f,a,"Generator"),T(f,r,(function(){return this})),T(f,"toString",(function(){return"[object Generator]"})),(P=function(){return{w:l,m:b}})()}function T(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(T=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){T(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function x(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.id,n=e.label,a=e.license,u=void 0===a?"":a,v=e.setSettingFieldSchema,j=e.is_manually_deactivated,_=e.activated,h=e.expired,g=function(){return Object(f.isEmpty)(u)||_||h||j?Object(f.isEmpty)(u)||!h||j?!_||Object(f.isEmpty)(u)||j?j?"deactivated":"empty":"activated":"expired":"invalid"},w=function(e){var t=e||g();switch(t){case"activated":case"expired":case"invalid":return u.licence?"xxxxxxxxxxxxxxxxxxxxxxxxxx"+u.licence.substring(26):Object(f.isEmpty)(u.api_key)||"activated"!==t?"":u.api_key;default:return""}},E=Object(C.a)().setProData,N=Object(m.a)().setLiteBar,T=Object(d.a)().updateLicense,I=A(Object(r.useState)((function(){return w()})),2),D=I[0],F=I[1],L=A(Object(r.useState)({loading:!1,status:!1}),2),R=L[0],B=L[1],M=A(Object(r.useState)(""),2),z=M[0],U=M[1],q=A(Object(r.useState)(!1),2),G=q[0],V=q[1],J=A(Object(r.useState)(!1),2),H=J[0],K=J[1],$=A(Object(r.useState)(!1),2),W=$[0],Y=$[1],Q=Object(p.a)().data;Object(r.useEffect)((function(){Object(f.size)(D)?(U(""),Y(!0)):W&&!Object(f.size)(D)&&U(Object(i.__)("Please enter licence key","funnel-builder"))}),[D]);var Z=function(){var e,n=(e=P().m((function e(){var n;return P().w((function(e){for(;;)switch(e.n){case 0:return K(!0),e.p=1,e.n=2,s()({path:Object(c.y)("/license/"),method:"POST",data:{name:t,action:"activated"!==g()?"activate":"deactivate",key:D}}).then((function(e){if(200===e.code){var t,n=e.name,a=e.license_data,l=void 0!==a&&a,c=e.license_exist,o=void 0===c?{}:c;e.pro_status,Object(f.isEmpty)(o)||(wffn_contacts_data.license_exist=o),E(e.lev),"activated"!==g()?(N(2),wffn_contacts_data.is_pro=1):(N(1),wffn_contacts_data.is_pro=0);var u=(null===(t=Q.woofunnels_general_settings[0])||void 0===t||null===(t=t.tabs)||void 0===t?void 0:t.general).fields.map((function(e){return n===e.id&&(e.license=l,"activated"!==g()?(e.is_manually_deactivated=0,e.expired=0,e.activated=1,wffn_contacts_data.is_pro=1):(e.activated=0,e.is_manually_deactivated=1,wffn_contacts_data.is_pro=0)),e}));v(u),T(u),B({status:!0,loading:!1,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-mt-8"},Object(r.createElement)(y.a,{icon:"check-circle",size:"72"})),Object(r.createElement)("div",{className:"bwf-licence-status"},"activated"!==g()?Object(i.__)("License Activated","funnel-builder"):Object(i.__)("Successfully Deactivated","funnel-builder")))}),K(!1),V(!1)}else 400===e.code&&(K(!1),B({modalTitle:Object(i.__)("License Activation Failed","funnel-builder"),status:!0,error:e.error,hide:8e3}))}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,K(!1),B({status:!0,error:n.message});case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){x(l,r,a,c,i,"next",e)}function i(e){x(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),X=function(){switch(g()){case"activated":return!0;default:return!1}};Object(r.useEffect)((function(){"deactivated"===g()?F(w("deactivated")):"activated"===g()&&F(w("activated"))}),[g()]);var ee=w()===D&&Object(f.isEmpty)(z)&&Object(r.createElement)("p",{className:"hint"},Object(r.createElement)("span",{className:"bwfan-error"},e.activated?Object(i.__)("License expired on ","funnel-builder")+k()(null==u?void 0:u.expires).format(Object(c.Z)()):Object(i.__)("This license needs to be reactivated. Please contact support for any assistance","funnel-builder"),". "),Object(r.createElement)("span",{className:"is-reset-text"},e.activated?Object(i.__)("Got New License? ","funnel-builder"):"",Object(r.createElement)("span",{className:"is-link",onClick:function(){return F("")}},Object(i.__)("Reset","funnel-builder"))));return Object(r.createElement)("div",{className:l()("bwf-components-licence")},n&&Object(r.createElement)("label",{className:"components-label"},n),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g16"},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf-flex-column"},Object(r.createElement)(o.TextControl,{className:l()("bwf-license-text-input",{"has-error":Object(f.size)(z)||"expired"===g()&&w()===D}),placeholder:Object(i.__)("Enter license key here","funnel-builder"),disabled:X(),value:D,autoComplete:"off",onChange:function(e){return F(e)}}),Object(f.size)(z)?Object(r.createElement)("div",{className:"bwf-error-text"},z):null),Object(r.createElement)(O.a,{isSecondary:"empty"===g()||"deactivated"===g()||"expired"===g()||"invalid"===g(),isBusy:"activated"!==g()&&H,disabled:H,className:l()("bwf-ripple bwf-license-action-btn",{"is-inactive":"activated"===g()}),onClick:function(){return function(){return Object(f.isEmpty)(D)?(Y(!0),void U(Object(i.__)("Please enter licence key","funnel-builder"))):"activated"!==g()&&D.startsWith("xxxx")?(Y(!0),void U(Object(i.__)("Please enter a valid licence key","funnel-builder"))):void("activated"===g()?(Y(!1),V(!0)):Z())}(u,j)}},function(){switch(g()){case"activated":return Object(i.__)("Deactivate","funnel-builder");default:return Object(i.__)("Activate","funnel-builder")}}())),function(){switch(g()){case"activated":return Object(r.createElement)("p",{className:"hint"},"3"===(null==u?void 0:u.subscription_status)&&u.expires?Object(r.createElement)(r.Fragment,null,Object(i.__)("This license has been cancelled and will expire on ","funnel-builder"),k()(null==u?void 0:u.expires).format("MMMM D, YYYY")):u.expires?Object(r.createElement)(r.Fragment,null,Object(i.__)("License Expires on ","funnel-builder"),k()(null==u?void 0:u.expires).format("MMMM D, YYYY")):Object(i.__)("Lifetime license","funnel-builder"));case"empty":case"deactivated":return Object(r.createElement)("div",{className:"hint bwf-content"},Object(i.__)("Already Purchased? Access your license key in your account. ","funnel-builder"),Object(r.createElement)("a",{href:"https://myaccount.funnelkit.com/",target:"_blank",rel:"noreferrer"},Object(i.__)("Login to your FunnelKit Account","funnel-builder")));case"expired":case"invalid":return ee}}()),Object(r.createElement)(b.a,{confirmText:R.confirmText,modalTitle:R.modalTitle,confirmButtonText:R.buttonConfirm,cancelButtonText:R.buttonCancel,onConfirm:R.onConfirm,isLoading:R.loading,successMessage:R.success,errorMessage:R.error,content:R.content,onRequestClose:function(){return B({status:!1})},isOpen:R.status,autoHide:R.hide,closeIcon:!0}),G&&Object(r.createElement)(S,{isLoading:H,onAction:function(){Z()},onclose:function(){return V(!1)}}))}},357:function(e,t,n){"use strict";var r=n(2),a=n(19),l=n(4),c=n(316);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=["fetch","setStateProp"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(a.a)("settings"),t=e.fetch,n=e.setStateProp,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,o),u=Object(c.a)().data,f=void 0===u?{}:u,b=(f.woofunnels_general_settings&&f.woofunnels_general_settings.general||{}).fields,d=void 0===b?[]:b;return s(s({},i),{},{fetch:function(){t("GET",Object(l.y)("/funnels/global-settings/"))},setSettingsData:function(e){return n("data",e)},updateLicense:function(e){d&&Object(r.isArray)(d)&&d.length&&(f.woofunnels_general_settings.general.fields=e,n("data",f))}})}},364:function(e,t,n){"use strict";var r=n(0),a=n(8),l=n(2),c=n(1),i=(n(412),n(15)),o=n.n(i),u=n(6),s=n.n(u),f=n(5),b=n(18),d=(n(42),n(289));function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.onSearch,n=e.isLoading,i=e.items,o=e.onItemClick,u=e.error,d=e.blurText,p=e.placeholder,O=void 0===p?Object(c.__)("Type to search","funnel-builder"):p,y=e.helpText,v=e.multiGroup,j=void 0!==v&&v,_=e.stepTitle,h=void 0===_?Object(c.__)("details","funnel-builder"):_,g=m(Object(r.useState)(""),2),w=g[0],E=g[1],S=m(Object(r.useState)(!1),2),N=S[0],k=S[1],C=Object(r.useRef)(null),P=function(e,t){o(e),k(!1),t.preventDefault()};Object(r.useEffect)((function(){d&&!N&&E(d)}),[d,N]);var T=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(T.current).find(e.target).length>0?k(!0):k(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":y}),ref:T},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(f.a,{icon:"search",height:"16",width:"16",color:b.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(f.a,{icon:Object(l.isArray)(i)&&i.length>0&&N?"angle-up":"angle-down",height:"12",width:"12",color:b.TEXT_COLOR_2})),Object(r.createElement)(a.TextControl,{autoComplete:"off",value:w,onChange:function(e){return E(n=e),C.current&&clearTimeout(C.current),void(C.current=setTimeout((function(){return t(n)}),500));var n},placeholder:O}),(!Object(l.isArray)(i)||!!u)&&N&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(l.isArray)(i)&&N&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(c.__)("Fetching ".concat(h,""),"funnel-builder")):Object(r.createElement)("ul",null,j?i.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,e.name))})))})):i.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,Object(c.__)(e.value,"funnel-builder")))}))))),y&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},y))};O.propTypes={onSearch:o.a.func,isLoading:o.a.bool,items:o.a.oneOfType([o.a.arrayOf(o.a.shape({key:o.a.oneOfType([o.a.number,o.a.string]).isRequired,value:o.a.string.isRequired})),o.a.array]),onItemClick:o.a.func,onChange:o.a.func,error:o.a.any},t.a=Object(d.a)(O,{onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null})},365:function(e,t,n){},371:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(119),c=n(30),i=n(4),o=n(41),u=n(64),s=n(29),f=n(40),b=n(12),d=["funnel_id"];t.a=function(e){var t,n,m,p=e.selected,O=e.headerData,y=e.funnelID,v=e.stepId,j=e.type,_=e.checkoutId,h=e.offerId,g=e.editor,w=Object(s.a)(),E=w.setFunnelTitle,S=w.setFunnelData,N=Object(o.a)(),k=N.getFunnelData,C=N.getLoading,P=N.getPreviousStep,T=N.getStepId,x=Object(f.a)(),A=x.setStepFunnelData,I=(x.setStepData,k()),D=C(),F=P(),L=T(),R=Object(b.i)(),B=R.funnel_id,M=(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}(R,d),c.a.getSteps().filter((function(e){return"wfob"===j?e.id===_:e.id===v}))),z=null===(t=M[0])||void 0===t||null===(t=t.substeps)||void 0===t?void 0:t.wc_order_bump,U=null==z?void 0:z.filter((function(e){return e.id==v})),q=null===(n=M[0])||void 0===n||null===(n=n.substeps)||void 0===n?void 0:n.offer,G=null==q?void 0:q.filter((function(e){return e.id==h})),V="";if("wfob"===j)void 0!==U&&(V=null===(m=U[0])||void 0===m?void 0:m._data.title);else if("offer"===j){var J;if(void 0!==G)V=null===(J=G[0])||void 0===J?void 0:J._data.title}else{var H;V=null===(H=M[0])||void 0===H?void 0:H._data.title}var K=Object(a.size)(O),$=Object(u.a)(),W=$.setActiveMultiple,Y=($.resetHeaderMenu,$.setL2NavType),Q=$.setL2Nav,Z=$.setStepHeader,X=$.setPageBackLink,ee=$.setIsStepNavActive;$.setL2PostTitle;Object(r.useEffect)((function(){var e;Z(""),Y("menu"),Q(O),W({leftNav:Object(i.kb)()?"store-checkout":"funnels",rightNav:p}),ee(!0),X((e="admin.php?page=bwf&path=","experiment"===F?"".concat(e).concat(Object(i.kb)()?"/store-checkout":"/funnels/".concat(y),"/experiments/").concat(L):"canvas"===F?"".concat(e).concat(Object(i.kb)()?"/store-checkout":"/funnels/".concat(y),"/canvas"):"".concat(e).concat(Object(i.kb)()?"/store-checkout/steps":"/funnels/".concat(y,"/steps")))),Z(Object(r.createElement)(l.a,{stepId:v,modalTitle:V,type:j,offerId:h,checkoutId:_,disabled:K?[]:["preview"]}))}),[p,y,v,V,j,g,h,_,K]);var te=I.title,ne=void 0===te?"":te,re=I.status,ae=void 0===re?"":re,le=I.id;return Object(r.useEffect)((function(){Object(a.size)(I)>0&&(D||""===ne||(E(ne),S("status",ae)),Object(i.kb)()||!le||B||Object(b.k)({funnel_id:le}))}),[D,I,le,B]),Object(r.useEffect)((function(){return function(){ee(!1),Q({}),X(""),A({})}}),[]),!0}},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(4),c=(n(398),n(5)),i=n(2),o=["options","label","selected","onChange","disabled"];function u(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.options,n=e.label,f=e.selected,b=e.onChange,d=e.disabled,m=void 0!==d&&d,p=(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}(e,o),Object(r.useRef)()),O=s(Object(r.useState)(!1),2),y=O[0],v=O[1],j=s(Object(r.useState)([]),2),_=j[0],h=j[1],g=s(Object(r.useState)([]),2),w=g[0],E=g[1],S=s(Object(r.useState)(""),2),N=S[0],k=S[1],C=s(Object(r.useState)(t),2),P=C[0],T=C[1],x=s(Object(r.useState)(0),2),A=x[0],I=x[1],D=s(Object(r.useState)({}),2),F=D[0],L=D[1],R=s(Object(r.useState)(),2),B=R[0],M=R[1];Object(l.ub)(p,(function(){return v(!1)})),Object(r.useEffect)((function(){if(Array.isArray(f)&&f.length>0){h(f);var e=null==f?void 0:f.map((function(e){return e.value}));E(e)}}),[]),Object(r.useEffect)((function(){I(0)}),[y]),Object(r.useEffect)((function(){Object(i.size)(P)>1&&void 0!==P&&P.forEach((function(e,t){t===A&&M(null==e?void 0:e.value)}))}),[A,y]),Object(r.useEffect)((function(){Object(i.size)(P)>1&&void 0!==P&&P.forEach((function(e,t){(null==e?void 0:e.value)==(null==B?void 0:B.value)&&I(t)}))}),[B]);return Object(r.useEffect)((function(){if(Object(i.size)(P)>1&&void 0!==P){var e=P.filter((function(e,t){var n;if(null==w||!w.includes(null==e||null===(n=e.value)||void 0===n?void 0:n.toString()))return e}));L(e)}}),[w]),Object(r.useEffect)((function(){b(_)}),[_,w]),Object(r.useEffect)((function(){var e=null==t?void 0:t.filter((function(e){return""==N||e.label.toLowerCase().includes(N.toLowerCase())?e:void 0}));Object(i.isEmpty)(e)?T([{value:"no-data-found",label:"No Data Found"}]):T(e)}),[N]),Object(r.createElement)("div",{className:"bwf-multi-select components-base-control bwf-multiselect-control ".concat(m?"is-disabled":"")},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",{className:"components-base-control__label"},n),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("div",{className:"multiselect ".concat(y&&"multiselect--active"," "),style:{width:"30%"},tabIndex:"-1",onClick:function(){return v((function(e){return!e}))},ref:p},Object(r.createElement)("div",{className:"multiselect__select"},Object(r.createElement)(c.a,{icon:"angle-down",size:"16"})),Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("div",{className:"multiselect__tags-wrap"},null==_?void 0:_.map((function(e,t){return Object(r.createElement)("span",{className:"multiselect__tag bwf-badge",key:t},Object(r.createElement)("span",null,e.label," "),Object(r.createElement)("span",{onClick:function(){var t=_.filter((function(t){return t.value!==e.value}));h(t);var n=t.map((function(e){return e.value}));E(n),v(!1)}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:12,height:12})))}))),Object(r.createElement)("div",{className:"multiselect__spinner",style:{display:"none"}}),0==_.length&&Object(r.createElement)("span",null,Object(r.createElement)("span",{className:"multiselect__single"},"Select option"))),Object(r.createElement)("div",{className:"".concat(y?"multiselect__content-wrapper":"bwf-hide")},Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},Object(r.createElement)("li",null,y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("input",{type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){return k(e.target.value)},ref:function(e){e&&e.style.setProperty("margin-left","unset","important")},className:"bwf__multiselect__input",onKeyDown:function(e){38===e.keyCode&&A>0?F.map((function(e,t){e.value==B&&M(F[t-1])})):40===e.keyCode&&A<(null==P?void 0:P.length)-1&&F.map((function(e,t){e.value==B&&M(F[t+1])}))},onKeyPress:function(e){if("Enter"===e.key){var t,n,r;if(e.preventDefault(),!w.includes(null===(t=P[A])||void 0===t?void 0:t.value))h([].concat(u(_),[P[A]])),E([].concat(u(w),[null===(r=P[A])||void 0===r?void 0:r.value]));if(w.includes(null===(n=P[A])||void 0===n?void 0:n.value)){var a=_.filter((function(e){var t;return e.value!==(null===(t=P[A])||void 0===t?void 0:t.value)}));h(a);var l=a.map((function(e){return e.value}));E(l)}setTimeout((function(){v(!1)})),k("")}},placeholder:Object(a.__)("Search...","funnel-builder"),value:N||""}),Object(r.createElement)("span",{className:"bwf_multiselect_input_icon"},Object(r.createElement)(c.a,{icon:"search",width:16,height:16})))),P.map((function(e,t){return Object(r.createElement)("li",{className:"multiselect__element_value",key:t,onClick:function(){if("no-data-found"!==e.value){if(w.includes(e.value)||(h([].concat(u(_),[e])),E([].concat(u(w),[e.value]))),w.includes(e.value)){var t=_.filter((function(t){return t.value!==e.value}));h(t);var n=t.map((function(e){return e.value}));E(n)}setTimeout((function(){v(!1)})),k("")}},onMouseOver:function(){return I(t)},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.value&&Object(r.createElement)("span",{"data-select":Object(a.__)("Press enter to select","funnel-builder"),"data-selected":Object(a.__)("Select to remove","funnel-builder"),"data-deselect":Object(a.__)("Press enter to remove","funnel-builder"),className:" multiselect__option  ".concat(w.includes(e.value)&&"multiselect__option--selected","  ").concat(A===t?"multi-select-active":null," ").concat(A===t?"multi-select-selected-data":null," ")},Object(r.createElement)("span",null,null==e?void 0:e.label)),e&&"no-data-found"==e.value&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.label))}))))))))}},376:function(e,t,n){"use strict";n.d(t,"a",(function(){return ot}));var r=n(0),a=n(2),l=n(15),c=n.n(l),i=n(126),o=n(10),u=n.n(o),s=n(1),f=n(12),b=n(6),d=n.n(b),m=n(8),p=(n(483),n(42));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function g(e,t,n){return t=w(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,t,[e])).state={isLoading:!0},n.iframeRef=Object(r.createRef)(),n.setLoaded=n.setLoaded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(l=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props,t=e.src,n=e.onLoad,r=void 0===n?a.noop:n;this.setState({isLoading:!1}),r(!!t)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,l=void 0===n?Object(r.createElement)(p.a,{size:"xl"}):n,c=e.src,i=e.title,o=this.state.isLoading,u=d()("wffn-web-preview",t,{"is-loading":o});return Object(r.createElement)("div",{className:u},(o||Object(a.isEmpty)(c))&&l,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:v({},Object(a.isEmpty)(c)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:i,src:c})))}}])&&_(n.prototype,l),c&&_(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,c}(r.Component);S.propTypes={className:c.a.string,loadingContent:c.a.node,onLoad:c.a.func,src:c.a.string.isRequired,title:c.a.string.isRequired};var N=S,k=n(309),C=n(86),P=n(4);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){var t={title:Object(s.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(s.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(s.__)("Upgrade to PRO Now","funnel-builder"),proLink:P.pb,action:!1},n=e.onRequestClose,a=void 0===n?function(){}:n,l=e.isOpen,c=void 0!==l&&l,i=e.children,o=void 0===i?null:i,u=e.className,f=e.module,b=(e.isTemplate,e.modalContent?A(A({},t),e.modalContent):t);return c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:d()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",u),isDismissible:!1,onRequestClose:function(){return a()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(k.a,{title:Object(r.createElement)(r.Fragment,null,b.title),onClose:a}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof b.content?b.content.replace("{{feature_name}}",b.feature):b.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},b.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return a()}},b.demoLabel),!b.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return a()}},Object(s.__)("Cancel")),Object(r.createElement)(C.a,{module:f,isPrimary:!0,isTemplate:!0})),o)):null},F=n(44),L=n(298),R=(n(484),n(81)),B=n(30),M=n(312),z=(n(485),["src","onLoaded"]);function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=e.src,n=e.onLoaded,l=void 0===n?a.noop:n,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,z),i=q(Object(r.useState)(!1),2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),l(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)("img",U({src:t},c)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},J=n(5),H=n(43),K=n(45),$=n(413);function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.label,n=void 0===t?"":t,l=e.id,c=void 0===l?"":l,i=e.value,o=e.onChange,u=void 0===o?a.noop:o,s=e.className,f="inspector-color-".concat(Object(H.useInstanceId)(m.ColorPicker)),b=W(Object(r.useState)(!1),2),p=b[0],O=b[1];return Object(r.createElement)("div",{className:d()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:f},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(m.ColorIndicator,{colorValue:i})),Object(r.createElement)(m.TextControl,{value:i||"#ffffff",className:"indicator-text"}),p&&Object(r.createElement)(K.a,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(m.ColorPicker,{color:i,onChangeComplete:function(e){u(e.hex,{id:c})},disableAlpha:!0}))))},Z=function(e){var t=e.setCustomizeVisible,n=W(Object(r.useState)(!1),2),a=n[0],l=n[1],c=W(Object(r.useState)(""),2),i=c[0],o=c[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(m.Button,{onClick:function(){return t(!1)}},Object(r.createElement)(J.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),a?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:a,alt:"logo"}),Object(r.createElement)(m.Button,{className:"bwf-delete-btn",onClick:function(){return l(!1)}},Object(r.createElement)(J.a,{icon:"trash",size:20})))):Object(r.createElement)($.a,{onFileSelected:function(e){l(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(J.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(Q,{label:Object(s.__)("Color","funnel-builder"),value:i,onChange:function(e){return o(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(m.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(m.Button,null,Object(s.__)("Reset","funnel-builder"))))},X=n(20),ee=n(22);function te(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,l=e.funnelId,c=e.onClick,i=e.activeThumbnail,o=e.previewCustomizeEnabled,u=(e.tempPro,e.importType),f=Object(X.b)(),b=f.isProTemplatesLocked,p=f.isBasic,O=Object(X.b)("ck").isProTemplatesLocked,y=Object(X.b)("ul").isProTemplatesLocked,v=ne(Object(r.useState)(!1),2),j=v[0],_=v[1];return Object(a.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},te(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},j?Object(r.createElement)(Z,{setCustomizeVisible:_}):t&&t.map((function(e,t){var n="step"===u?null==e?void 0:e.type:null==e?void 0:e.step,a="upsell"===n,o=["wc_checkout","wc_thankyou"].includes(n);return Object(r.createElement)("label",{key:t,className:d()("wffn_template_page_options",{active_preview:e.id==i}),onClick:function(){return c(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},l?Object(r.createElement)(V,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(a?y:o||p?O:b)&&Object(r.createElement)(ee.b,null))})),o&&!j&&Object(r.createElement)(m.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return _(!0)}},Object(r.createElement)(J.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},ce=function(e){var t=e.type,n=e.filters,l=e.FB_PRO_STATUS,c=e.activeSubFilter,i=e.onClick,o=e.activeTemplateFilters,u=e.tempPro,f=e.templateType,b=e.funnelId,m=e.funnelGroup,p=e.hasPRO,O=e.importType,y=Object(X.b)("ck").isProTemplatesLocked;if(!t)return null;var v=n[t];if(void 0===v||Object(a.isEmpty)(v))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var j=[],_=function(e){o.includes(e)&&j.push(Object(r.createElement)("div",{className:d()("template-filter",{"active-filter":c==e}),onClick:function(){return i(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,v[e]),!("wc_checkout"===f&&!y&&(!b||"step"!==O)&&m.includes("wc_checkout"))&&(p(u||"no")||["2","3"].includes(e)&&!0!==l||"popup"===e&&!0!==l)&&Object(r.createElement)(ee.b,null)))};for(var h in v)_(h);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(s.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(s.__)("Optin Form","funnel-builder"):Object(s.__)("Type","funnel-builder"),":"),j))},ie=n(69),oe=function(e){var t=e.funnelId,n=e.activeGroup,a=e.activeSubFilter,l=e.activeStep,c=e.templateName,i=e.isTemplatePro,o=e.funnelGroup,u=e.hasPRO,f=e.importType,b=Object(X.b)("ck").isProTemplatesLocked,d=Object(X.b)("ul").isProTemplatesLocked,m=Object(X.b)(),p=m.isProTemplatesLocked,O=m.isBasic,y=u("status");if("upsell"===n&&!0!==y)return d&&Object(r.createElement)(ie.a,{dismissable:!1,proLink:Object(P.U)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===f?n:l){case"upsell":if(!0!==y)return d&&Object(r.createElement)(ie.a,{dismissable:!1,proLink:Object(P.U)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((b||t&&"step"===f||!o.includes("wc_checkout"))&&(u(i)||["2","3"].includes(a)&&!0!==y))return Object(r.createElement)(ie.a,{dismissable:!1,module:(null==o?void 0:o.includes("wc_checkout"))&&"ck",proLink:Object(P.U)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0});break;case"optin":if(u(i||"no")||"popup"===a&&!0!==y){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==a&&Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},a),Object(s.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(ie.a,{dismissable:!1,proLink:Object(P.U)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0})}}var v=t&&"step"===f?n:l;return"yes"===i&&("upsell"===v?d:["wc_checkout","wc_thankyou"].includes(v)||O?b:p)?Object(r.createElement)(ie.a,{dismissable:!1,module:(null==o?void 0:o.includes("wc_checkout"))&&("wc_checkout"===v||"wc_thankyou"===v)&&"ck",proLink:Object(P.U)([t?"Step":"Template","upsell",c,"Notice","Bar"]),isTemplate:!0}):""},ue=n(14),se=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},fe=se.logo?se.logo:"",be=function(e){var t,n,l=e.viewport,c=e.setviewport,i=e.templateName,o=e.isTemplatePro,u=e.onRequestClose,f=e.importing,b=e.onClick,m=e.onClickPro,p=e.activeGroup,O=e.isCheckoutPro,y=e.isOptinPro,v=e.activeStep,j=e.funnelId,_=e.importType,h=(e.templateGroup,e.hasPRO),g=e.stepId,w=Object(X.b)("ul").isProTemplatesLocked,E=Object(L.a)().getImportBtnLabel(),S=Object(a.isEmpty)(E)?"upsell"===p||j&&"step"===_?Object(s.__)("Import This Template","funnel-builder"):Object(s.__)("Import This Funnel","funnel-builder"):E,N=h("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:fe,alt:Object(s.__)("Funnel Builder for WordPress","funnel-builder"),width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},i)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"desktop"===l}),onClick:function(){return c("desktop")},title:Object(s.__)("Desktop Viewport","funnel-builder")},Object(r.createElement)(J.a,{icon:"desktop",color:"desktop"===l&&"#fff"})),Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"tablet"===l}),onClick:function(){return c("tablet")},title:Object(s.__)("Tablet Viewport","funnel-builder")},Object(r.createElement)(J.a,{icon:"tablet",color:"tablet"===l&&"#fff"})),Object(r.createElement)("span",{className:d()("wffn_viewport_icons",{active:"mobile"===l}),onClick:function(){return c("mobile")},title:Object(s.__)("Mobile Viewport","funnel-builder")},Object(r.createElement)(J.a,{icon:"mobile",color:"mobile"===l&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},(t=(!!g||"funnel"===_)&&j&&f&&f.group===p,n=f&&f.group===p,Object(r.createElement)(r.Fragment,null,h(o||"no")||!0!==N&&(O||y||"upsell"===v)||"upsell"===v&&w?Object(r.createElement)(ue.a,{disabled:n,isBusy:t,isPrimary:!0,onClick:m},S):Object(r.createElement)(ue.a,{isPrimary:!0,onClick:b,disabled:n,isBusy:t},S)))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(ue.a,{onClick:u},Object(r.createElement)(J.a,{icon:"close",size:"24"}))))};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=de(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==de(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t=e.isOpen,n=e.onRequestClose,l=e.activeGroup,c=e.activeEditor,o=e.importing,u=e.filters,b=e.hasPRO,p=e.previewData,O=e.isTemplateLoading,y=e.activeFilter,v=e.setPreviewErr,j=e.parentRoute,_=e.funnelId,h=e.importType,g=e.updateQueryString,w=e.previewCustomizeEnabled,E=e.urlDependency,S=e.stepId,k=e.onImport,T=e.children,x=Object(f.i)(),A=Object(X.b)().isBasic,I=Object(X.b)("ck").isProFeatureLocked,z=p(),U=z.thumbnails,q=z.activeTemplate,G=z.previews,V=void 0===G?[]:G,J=Object(i.useParams)().step,H=B.a.getFunnel(),K=!(!q||!q.type)&&q.type,$=E?J:null==q?void 0:q.type;Object(r.useEffect)((function(){_||(z.success?v(!1):!1===z.success&&v(!0))}),[z.success]),Object(r.useEffect)((function(){if(K)if("wc_checkout"===K||"optin"===K){var e=!(!q||!q.filters)&&q.filters[0];x.group&&("wc_checkout"===K&&["1","2","3"].includes(x.group)||"optin"===K&&["inline","popup"].includes(x.group))?Y(x.group):(Y(e),g({group:e}))}else x.group&&(delete x.group,g({},Object(f.g)(),x))}),[x.group,K]),Object(r.useEffect)((function(){!Object(a.isEmpty)(null==H?void 0:H.steps)&&"funnel"===h&&_&&g({},"/funnels/".concat(H.id))}),[H]);var W=Object(R.a)(),Y=W.setActiveSubFilter,Q=W.setCurrentTemplate,Z=(0,Object(L.a)().getCurrentTemplate)(),ee=pe(Object(r.useState)(!1),2),te=(ee[0],ee[1]),ne=b("status"),re=pe(Object(r.useState)("desktop"),2),ae=re[0],ie=re[1],ue=pe(Object(r.useState)(!1),2),se=ue[0],fe=ue[1],de=pe(Object(r.useState)(!1),2),Oe=de[0],ye=de[1],ve=pe(Object(r.useState)(!_),2),je=ve[0],_e=ve[1],he=pe(Object(r.useState)([]),2),ge=he[0],we=he[1];Object(r.useEffect)((function(){if(te(!1),q&&!ge.includes(q.prevId)){var e=JSON.parse(JSON.stringify(ge));e.push(q.prevId),we(e)}}),[null==q?void 0:q.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(U&&!_&&je){var e=U||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&_e(!1)}}))}}),[U]);var Ee=("wc_checkout"===l||$&&"wc_checkout"===$)&&"1"!==y,Se=("optin"===l||$&&"optin"===$)&&"inline"!==y;return z?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(be,me(me(me(me({viewport:ae,setviewport:ie,onRequestClose:n,importing:o,activeGroup:l,isCheckoutPro:Ee,isOptinPro:Se,activeStep:$,funnelId:_,importType:h,hasPRO:b,stepId:S,onClickPro:function(){!1===ne&&"yes"!==(null==q?void 0:q.tempPro)&&(Ee||Se||"upsell"===$)||"upsell"===$&&A&&!I?ye(!0):fe(!0)},onClick:function(){return k()}},"onRequestClose",(function(){_?g({},"".concat(j)):(g({},"".concat(j,"/").concat(l)),Y(!1)),n()})),"templateName",null==q?void 0:q.name),"isTemplatePro",null==q?void 0:q.tempPro),"templateGroup",null==q?void 0:q.funnelGroup)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:d()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(ce,{type:null==q?void 0:q.type,filters:u,FB_PRO_STATUS:ne,activeSubFilter:y,onClick:function(e){if(Y(e),g({group:e}),_){var t=Z.template,n=(void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||Q({id:n[e],template:{group_type:n},steps:U.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==q?void 0:q.filters,hasPRO:b,tempPro:null==q?void 0:q.tempPro,templateType:null==q?void 0:q.type,funnelId:_,funnelGroup:null==q?void 0:q.funnelGroup,importType:h}),!O&&Object(r.createElement)(oe,{funnelId:_,activeGroup:l,activeSubFilter:y,activeStep:$,hasPRO:b,templateName:null==q?void 0:q.name,isTemplatePro:null==q?void 0:q.pro,funnelGroup:null==q?void 0:q.funnelGroup,importType:h}),Object(a.isEmpty)(V)||Object(a.isEmpty)(ge)?"":V.map((function(e,t){var n=(null==e?void 0:e.preview)||"",a=(null==e?void 0:e.id)||"";return Object(r.createElement)(N,{key:t,className:d()("wffn_template_preview_frame",ae,{"hide-preview":e.id!==q.prevId}),title:"Funnel Template",src:ge.includes(a)?n:"",onLoad:function(e){if(te(!0),e&&V[t+1]){var n=JSON.parse(JSON.stringify(ge));n.push(V[t+1].id),we(n)}}})}))),Object(r.createElement)(le,{thumbnailsData:U,hasPlaceholder:je,funnelId:_,previewCustomizeEnabled:w,importType:h,tempPro:null==q?void 0:q.tempPro,onClick:function(e){Q({id:e.funnel,template:e,activeStep:e.step,steps:U.map((function(e){return{type:e.step,slug:e.lug}}))}),g({},_&&"step"===h?"".concat(j,"/templates/").concat(l,"/").concat(c,"/preview/").concat(e.funnel):_&&"funnel"===h?"".concat(j,"/templates/").concat(l,"/").concat(c,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===l?"".concat(j,"/").concat(l,"/").concat(c,"/preview/").concat(e.funnel):"".concat(j,"/").concat(l,"/").concat(c,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==q?void 0:q.thumbnail}))),T,Object(r.createElement)(D,{isOpen:se,onRequestClose:function(){return fe(!1)},modalContent:Object(M.c)({templateName:null==q?void 0:q.name,FB_PRO_STATUS:ne,funnelId:_,activeGroup:l,activeStep:$}),module:["wc_checkout","wc_thankyou"].includes(l)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(b((null==q?void 0:q.pro)||"no")||"yes"!==(null==q?void 0:q.pro)&&(Ee||Se||"upsell"===$)||"upsell"===$&&A&&!I)&&Object(r.createElement)(F.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(s.sprintf)(Object(s.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==q?void 0:q.name),Object(r.createElement)("mark",null,Object(s.__)("Two Step","funnel-builder")),Object(s.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(s.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(C.a,{module:I&&["wc_checkout","wc_thankyou"].includes(l)&&"ck",isPrimary:!0}),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===ne?g({},"/settings/"):window.open(Object(P.U)([_?"Step":"Template",_?l:"upsell"===l?"upsell":$,null==q?void 0:q.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){S||"funnel"===h&&"wc_checkout"===h||k();var e="1";if("optin"===l||"optin"===$?(Y("inline"),g({group:"inline"}),e="inline"):(Y("1"),g({group:"1"})),_){var t=Z.template,n=(void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||Q({id:n[e],template:{group_type:n},steps:U.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){ye(!1)},isOpen:Oe,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))):""}n(391);var ve=n(29),je=n(58),_e=n(405),he=n(31),ge=n(406),we=n(288),Ee=n(291),Se=(n(18),n(85));function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t,n,l,c=e.onCloseModal,i=e.onComplete,o=e.isWorking,u=e.activeTemplateGroup,f=(e.showCloneOption,e.templateGroup),b=e.className,p=e.children,O=Te(Object(r.useState)(""),2),y=O[0],v=O[1],j=Te(Object(r.useState)({}),2),_=(j[0],j[1]),h=Te(Object(r.useState)(""),2),g=h[0],w=h[1],E=Te(Object(r.useState)(null),2),S=E[0],N=E[1],k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return J((function(r){return n?(delete r[t],r):Ce(Ce({},r),{},Pe({},e,t))}))},C=Te(Object(r.useState)((function(){return u})),2),T=C[0],x=(C[1],B.a.getSteps()),A=Object(L.a)(),I=A.getScratchTemplateType,D=A.getCurrentTemplate,F=A.getImportOffer,R=I(),M=D(),z=F();Object(r.useEffect)((function(){_({})}),[]);var U=function(){var e;v(""),i("upsell"===T?V:"new"===R?{title:g}:{title:"".concat(null==S||null===(e=S.step)||void 0===e?void 0:e.name," Copy")},T,!(!S||!S.copyFrom)&&S.step)},q=(Object(r.useMemo)((function(){return Object.keys(f).map((function(e){return{key:e,label:f[e]}}))}),[f]),function(){return x.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(he.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),G=Te(Object(r.useState)(Ce({type:0===q().length?"new":"existing"},!Object(a.isNull)(z)&&{title:z.parent_title,insert_into:z.parent_id})),2),V=G[0],J=G[1],H=function(){if("upsell"===T){var e,t,n,r,l,c;if("new"===R)return"existing"===V.type?Object(a.isEmpty)(null===(n=V.offer_title)||void 0===n?void 0:n.trim())||!V.insert_into:Object(a.isEmpty)(null===(e=V.title)||void 0===e?void 0:e.trim())||Object(a.isEmpty)(null===(t=V.offer_title)||void 0===t?void 0:t.trim());if("existing"===R)return"existing"===V.type?!V.insert_into||Object(a.isNull)(S):Object(a.isEmpty)(null===(r=V.title)||void 0===r?void 0:r.trim())||Object(a.isNull)(S);if(!M.isBuildFromScratch)return Object(a.isEmpty)(null===(l=V.title)||void 0===l?void 0:l.trim())||Object(a.isEmpty)(null===(c=V.offer_title)||void 0===c?void 0:c.trim())}return"new"!==R&&M.isBuildFromScratch?"existing"===R?Object(a.isNull)(S):void 0:Object(a.isEmpty)(g.trim())},K=("new"===V.type||!Object(a.isNull)(z))&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here","funnel-builder"),label:Object(s.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(he.decodeEntities)(V.title))&&void 0!==t?t:"",onChange:function(e){return k("title",e)},disabled:!Object(a.isNull)(z)||o});return Object(r.useEffect)((function(){1===q().length&&k("insert_into",q()[0].key)}),[]),Object(r.createElement)(m.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(s.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",P.tb[T],")")),className:d()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",b),onRequestClose:function(){return c()},isDismissible:!0,shouldCloseOnClickOutside:!o,overlayClassName:"bwf-create-funnel-modal__overlay"},p,y&&Object(r.createElement)(Se.a,{errorMessage:y}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||H()||o||U()},role:"main"},"upsell"===T&&"new"!==V.type&&!Object(a.isNull)(z)&&K,"existing"===R&&M.isBuildFromScratch&&Object(r.createElement)(ge.a,{step:{type:"upsell"===T?"offer":T,title:f[T],is_substep:"upsell"===T},onStepSelected:function(e){N(e)},key:"bwf-clone-step-".concat(T)}),"upsell"===T?Object(r.createElement)(r.Fragment,null,!Object(a.isEmpty)(q())&&Object(a.isNull)(z)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(s.__)("Add Offers","funnel-builder")),Object(r.createElement)(Ee.a,{options:[{value:"existing",label:Object(s.__)("To Existing Upsell","funnel-builder"),disabled:0===q().length},{value:"new",label:Object(s.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=V.type)&&void 0!==n?n:0===q().length?"new":"existing",onChange:function(e){k("inherit_from","",!0),k("type",e)}})),"existing"===V.type&&Object(a.isNull)(z)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(we.b,{label:Object(s.__)("Select Upsell","funnel-builder"),options:q(),selected:1===q().length?q()[0].key:V.insert_into,onChange:function(e){k("insert_into",e)}})),"new"===V.type&&Object(a.isNull)(z)&&K,"new"===R&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here","funnel-builder"),label:Object(s.__)("Offer Name","funnel-builder"),value:null!==(l=V.offer_title)&&void 0!==l?l:"",onChange:function(e){return k("offer_title",e)},disabled:o})):"new"===R?Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Step Name","funnel-builder"),value:null!=g?g:"",onChange:function(e){return w(e)},disabled:o}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(ue.a,{onClick:c,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(ue.a,{isPrimary:!0,disabled:H()||o,isBusy:o,onClick:U,className:H()?"bwf-no-ripple":"",name:"add-funnel"},Object(s.__)("Add","funnel-builder")))))},Ie=n(55);n(486);function De(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){var t=e.showTemplatesNav;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},t&&Object(r.createElement)(Ie.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder",style:{marginBottom:"0"}},De(Array(5)).map((function(e,t){return Object(r.createElement)(Ie.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},De(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},Re=n(50),Be=n(3),Me=function(e){var t=e.editorList,n=e.activeEditor,l=e.onChange,c=Object(L.a)().getDefaultBuilder,i=Object(R.a)().setActiveBuilder,o=c(),u=Object(P.l)()||"wp_editor"===o||"customizer"===o;if(Object(Be.useEffect)((function(){Object(a.isEmpty)(o)&&u?i("gutenberg"):Object(a.isEmpty)(o)?i("elementor"):i(o)}),[]),!Object(a.isEmpty)(o)&&"customizer"!==o&&"wp_editor"!==o)return null;var f=Object.keys(t).filter((function(e){return!u||["gutenberg","customizer","wp_editor"].includes(e)})).map((function(e){return{value:e,label:u?"gutenberg"===e?Object(s.__)("Pre-Built","funnel-builder"):"wp_editor"===e?Object(s.__)("Custom (Using Shortcodes)","funnel-builder"):t[e]:t[e]}}));return Object(r.createElement)(Ie.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(Ee.a,{options:f,selected:n,onChange:function(e){return l(e)}}))},ze=n(25),Ue=n(63),qe=n(23),Ge=["edit"];var Ve=function(e){var t=e.funnelId,n=e.disabledNavs,a=e.activeTemplateGroup,l=e.templateGroup,c=e.onClick,o=e.urlDependency,u=Object(X.b)("ul").isProTemplatesLocked,s=Object(i.useParams)().importType,b={},m=window.location&&window.location.search?Object(ze.parse)(window.location.search.substring(1)):{},p=(m.edit,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(m,Ge));for(var O in l)"funnel"===s&&"upsell"===O||(b[O]={},b[O].name=l[O],b[O].isExclusive="upsell"===O,b[O].link=decodeURIComponent(Object(f.f)({},"/templates/".concat(O),p)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(Ie.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(b).map((function(e,l){var i=e===a,s=n.find((function(t){return t.key===e}));return Object(r.createElement)(Ie.c,{key:"bwf-temp-nav-".concat(l)},0===t&&o?Object(r.createElement)(qe.a,{className:d()("bwf-template-nav-item",{"is-selected":m.path==="/templates/"+e||"/templates"===m.path&&"funnel"===e}),href:b[e].link},b[e].name,b[e].isExclusive&&Object(r.createElement)(ee.b,null)):Object(r.createElement)(Ue.a,{toolTipText:s&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},s.message),visible:s||!1,size:366},Object(r.createElement)("div",{className:d()("bwf-template-nav-item",{"is-selected":i&&!s},{"is-disabled":s}),onClick:function(){s||c(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,b[e].name),u&&b[e].isExclusive&&Object(r.createElement)(ee.b,null))))}))))},Je=n(54);function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $e(e){var t=e.importBuildFromScratch,n=e.activeTemplateGroup,a=e.templateID,l=void 0===a?"scratch":a,c=e.importType,i=e.stepId,o=e.importing,u=e.allowNew,f=void 0===u||u,b=He(Object(r.useState)({status:!1}),2),d=b[0],m=b[1],p=Object(X.b)(),O=p.isProFeatureLocked,y=p.isBasicFeatureLocked||"upsell"===n&&O,v=Object(X.b)("ul").isProFeatureLocked,j=Object(R.a)().setScratchTemplateType;Object(r.useEffect)((function(){return function(){j("new")}}),[]);var _;return Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(J.a,{icon:"add-page",width:"48",height:"48",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,(_="step"===c?Object(s.__)("You can quickly add step","funnel-builder"):Object(s.__)("You can design the funnel from blank","funnel-builder"),Object(r.createElement)("div",{className:"wffn_import_description"},_)),f?Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){v&&"upsell"===n?m(Ye):(j("new"),t(l,e))},isBusy:!!i&&o},Object(s.__)("Start from Blank","funnel-builder"),v&&"upsell"===n&&Object(r.createElement)(ee.b,null)):null,"step"===c?null:Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){j("json"),t(l,e)}},Object(s.__)("Import","funnel-builder")),i?null:Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){y?m(We):(j("existing"),t(l,e))}},Object(s.__)("Clone","funnel-builder"),y&&Object(r.createElement)(ee.b,null)))))))),Object(r.createElement)(Je.a,{isOpen:!!d.status,onRequestClose:function(){return m({status:!1})},modalContent:d,type:2}))}var We={status:!0,feature:Object(s.__)("Cloning","funnel-builder"),proLink:Object(P.U)(["Template","Clone","Upgrade","Modal"])},Ye={status:!0,feature:Object(s.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(P.U)(["Upsell","Templates","Upgrade","Modal"])},Qe=n(392),Ze=(n(59),{optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"}),Xe=function(e){var t=e.templateFilterCheck,n=e.templateCards,l=e.showBuildFromScratch,c=e.importBuildFromScratch,i=e.activeTemplateGroup,o=e.activeEditor,u=e.onPreview,f=e.funnelId,b=e.importType,p=e.stepId,O=e.importing,y=Object(X.b)("ul").isProTemplatesLocked,v=Object(X.b)(),j=v.isProTemplatesLocked,_=v.isLite,h=v.isBasic,g=Object(X.b)("ck").isProTemplatesLocked,w=Object(R.a)().setScratchTemplateType,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)($e,{importBuildFromScratch:c,getRibbonName:M.b,activeTemplateGroup:i,templateID:e,importType:b,stepId:p,importing:O,allowNew:t})},S=[],N=function(e){var a=n[e];if(t(a,!!a.group_type&&Object.keys(a.group_type)[0])&&(!(a.build_from_scratch&&p&&a.hasOwnProperty("allow_new"))||a.allow_new)&&(l||!a.build_from_scratch)){var c,o=((null==a?void 0:a.group)||[]).includes("upsell")||"upsell"===i,f=(null==a||null===(c=a.group)||void 0===c?void 0:c.some((function(e){return"wc_checkout"===e||"wc_thankyou"===e})))||["wc_checkout","wc_thankyou"].includes(i);S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},a.build_from_scratch?E(a.slug?a.slug:e,a.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===a.pro&&(o?y:f||h?g:j)&&Object(r.createElement)(ee.b,null),Object(r.createElement)("div",{className:a.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},a.thumbnail&&Object(r.createElement)(V,{src:a.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(m.Button,{onClick:function(t){w("new"),u(t,e,a)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},a.name),"funnel"===i&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Ze[null==a?void 0:a.group[0]]&&Ze[null==a?void 0:a.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},a.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",a.steps.length,"funel-builder"),a.steps.length)):null)))))}};for(var k in n)N(k);return"wp_editor"===o&&Object(a.isEmpty)(S)&&S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},E("upsell"===i?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===o&&S.push(Object(r.createElement)(Qe.a,{key:"other-builder-notice",type:i})),!_||h||"wp_editor"===o&&!f&&"funnel"!==b||S.push(Object(r.createElement)("div",{className:"bwf-templates-upgrde-pro-notice",key:"upgrade-pro-notice"},Object(r.createElement)("div",null,Object(r.createElement)("strong",null,Object(s.__)("Browse our library of ready-made templates","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("span",null,Object(s.__)("Never start from scratch again! While Funnelkit Lite lets you create any template, save even more time with Funnelkit Pro. Upgrade now to access all templates.","funnel-builder"))),Object(r.createElement)(C.a,{isPrimary:!0,size:"md",proLink:Object(P.U)(["Template","Cards","Notice"])}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:d()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!f})},S))},et=function(e){var t=e.editors,n=e.activeTemplateGroup,l=e.activeEditor,c=e.defaultBuilder,i=Object(R.a)().makeDefaultEditor,o=Object(P.l)()||"wp_editor"===c||"customizer"===c;return"customizer"===l||o||!Object(a.isEmpty)(c)&&"wp_editor"!==c||c===l?null:Object(r.createElement)("div",{className:"bwf-templates-default-editor-notice"},Object(s.sprintf)(/* Translators: %s is the name of the page builder */
Object(s.__)("Want to make %s as default page builder?","funnel-builder"),Object(a.get)(t,"".concat(n,".").concat(l))||Object(s.__)("this","funnel-builder")),Object(r.createElement)(ue.a,{className:"bwf-no-style-btn",onClick:function(){return i(e=l),void u()({path:Object(P.y)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(e){e.success||console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)}));var e}},Object(s.__)("Yes","funnel-builder")))};function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.activeFilter,n=e.defaultBuilder,l=e.filters,c=e.editors,o=e.templates,b=e.isTemplateLoading,m=e.activeBuilder,p=e.activeTemplateGroup,O=e.templateGroup,y=void 0===O?[]:O,v=e.funnelId,j=void 0===v?0:v,_=(e.showDefaultEditorNotice,e.templateCards),h=void 0===_?{}:_,g=e.previewData,w=e.onImportComplete,E=e.templateFilterCheck,S=e.showTemplatesNav,N=e.parentRoute,k=e.disabledNavs,C=void 0===k?[]:k,T=e.showBuildFromScratch,x=void 0===T||T,A=e.funnelTitleModalData,I=void 0===A?{}:A,z=e.scratchConfirmModalData,U=e.importApiPrefix,q=void 0===U?"funnels":U,G=e.templateListNotice,V=e.showImportNotice,J=void 0===V?"":V,H=e.urlDependency,K=void 0===H||H,$=e.showEditors,W=void 0===$||$,Y=e.previewCustomizeEnabled,Q=void 0!==Y&&Y,Z=e.listRef,ee=e.stepId,te=Object(f.i)(),ne=Object(X.b)("ck").isProTemplatesLocked,re=Object(X.b)("ul").isProTemplatesLocked,ae=Object(X.b)(),le=ae.isProTemplatesLocked,ce=ae.isBasic,ie=Object(Re.a)().updateStatus,oe=j,ue=Object(X.c)(),se=ue.showSnackbar,fe=ue.hideSnackbar,be=lt(Object(r.useState)(!1),2),de=be[0],me=be[1],pe=lt(Object(r.useState)(!1),2),Oe=pe[0],he=pe[1],ge=function(){if(K)return f.k.apply(void 0,arguments)},we=Object(je.a)().unsetTabData,Ee=(0,B.a.getFunnel)(),Se=Object(R.a)(),Ne=Se.fetch,ke=Se.setActiveBuilder,Ce=Se.setActiveGroup,Pe=Se.setCurrentTemplate,Te=Se.setActiveStep,xe=Se.setActiveSubFilter,Ie=Se.setImportOffer,De=(0,Object(L.a)().getCurrentTemplate)(),Fe=Object(i.useParams)(),Be=Fe.builder,ze=Fe.templateId,Ue=Fe.filter,qe=void 0===Ue?p:Ue,Ge=Object(f.i)().importType,Je=ee?"step":"wc_checkout"===Ge?"funnel":Ge,He=Object(ve.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(a.isEmpty)(h)&&Ne(),function(){Ie(null),fe()}}),[]),Object(r.useEffect)((function(){var e,t;Be&&!b&&ze&&h[ze]&&Pe({id:ze,template:h[ze],steps:h[ze].steps,activeStep:null!==(e=h[ze])&&void 0!==e&&e.steps?null===(t=h[ze])||void 0===t?void 0:t.steps[0].type:""})}),[Be,ze,b]),Object(P.m)(Object(s.__)("Import Funnel","funnel-builder"));var Ke=lt(Object(r.useState)(!1),2),$e=Ke[0],We=Ke[1],Ye=lt(Object(r.useState)(!1),2),Qe=Ye[0],Ze=Ye[1],tt=lt(Object(r.useState)(!1),2),nt=tt[0],at=tt[1],ct=lt(Object(r.useState)({}),2),it=ct[0],ot=ct[1];Object(r.useEffect)((function(){ze&&Pe({id:ze,template:{}})}),[]),Object(r.useEffect)((function(){Oe&&(ge({},"/templates"),se(Object(s.__)("Template not found for requested URL. Please select from the list.")))}),[Oe]);var ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.noop;try{ot((function(e){return rt(rt({},e),{},{disableConfirm:!0,cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(P.y)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&(r(),ot({status:!1}))})).catch((function(e){ot({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.builders_options,a=e.builders_texts,l=n,c=null==De?void 0:De.isBuildFromScratch,i=!0,o=null==De?void 0:De.id;if("wp_editor"!==m&&"customizer"!==m&&void 0!==l&&l.status&&"activated"!==l.status||i){var u=a,f=u.text;"gutenberg"===m&&c&&(f=Object(s.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var b={key:"pluginActivation",status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:f}}),closeIcon:!0};b.confirmButtonText=u.ButtonText,"yes"===u.show_cancel_btn&&(b.cancelButtonText="Cancel"),"gutenberg"===m&&c&&(b.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),ot(rt(rt({},b),{},{onConfirm:function(){if(u.builder_link&&"install"===l.status&&"yes"===u.noInstall)return window.open(u.builder_link,"_blank"),void ot({status:!1});"yes"!==u.show_cancel_btn&&ot({status:!1}),ut(l.slug,l.init,l.status,o,t)},onCancel:function(){me(!1),Ze(!1),ot({status:!1})}})),Ze(!1)}else t()},ft=function(e){var n=Object(M.a)(m,p),r="/funnel-offer/".concat(ee,'/design?design={"builder":"').concat(n,'","template":"').concat(e,'"}'),a="/funnel-".concat(p,"/").concat(ee,'/design?design={"builder":"').concat(n,'","template":"').concat(e,'"}');u()({path:Object(P.y)("".concat("upsell"===p?r:a)),method:"POST"}).then((function(n){if(n.success)w();else{if(!n.hasOwnProperty("builders_options"))throw ot({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:n.message||n.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:n.error}),Ze(!1),n;st(n,(function(){Ze({id:e,group:p,filter:t}),ft(e)}))}})).catch((function(e){throw e}))},bt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var l=n[0],c=n[1],i=n[2],o=n[3],f=i||p;Ze({id:l,group:f,filter:t});var b=!0;try{if(ee)return void ft(l);var d=Object.create({});d.template=l,d.builder=Object(M.a)(m,f);var O=Object.create({});if(oe&&"step"===Je){var y=o&&o.hasOwnProperty("id")?o.id:0;o?(d.title=c.title,d.inherit_from=y,d.type=f,delete d.template,delete d.builder):(d.funnel_id=oe,d.type=f,d.title=c.title,d.template_type=t),"upsell"===f&&("new"===c.type?(delete d.inherit_from,o&&(d.offer_inherit=y),Object(a.size)(c.offer_title)?d.offer_title=c.offer_title:d.offer_title=o.name):Object(a.size)(c.offer_title)?d.title=c.offer_title:d.title="".concat(o.name," Copy")),d.insert_into=c.insert_into}else{var v=g().thumbnails;v.forEach((function(e){O["upsell"===e.step?"wc_upsells":e.step]=e.slug})),d.steps=JSON.stringify(O),oe&&"funnel"===Je?d.funnel_id=Number(oe):d.title=c.title}var j=0!==oe&&"step"===Je?"upsell"===f&&"existing"===c.type?Object(P.y)("/funnel-upsell/".concat(c.insert_into,"/offers")):Object(P.y)("/funnels/".concat(oe,"/steps")):Object(P.y)("/".concat(q,"/import_template"));u()({method:"POST",data:d,path:j}).then((function(e){if(e.hasOwnProperty("builders_options"))st(e,(function(){bt.apply(void 0,n)}));else if(e.status&&!0===e.status){if(e.setup&&ie(e.setup),b=!1,oe||(e.funnel_id?dt(e.funnel_id):ot({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==oe&&w){if("funnel"===Je&&He(!1),"upsell"===f&&c.hasOwnProperty("insert_into")&&""!==c.insert_into&&Ee.steps){var t=Ee.steps.findIndex((function(e){return parseInt(e.id)===parseInt(c.insert_into)})),r=Ee.steps[t].substeps;r.hasOwnProperty("offer")&&r.offer.length>0&&r.offer.map((function(e){we("offer",e.id,"products",e.id)}))}w(e)}}else ot({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),me(!1)})).catch((function(e){ot({status:!0,error:e.message||e.msg}),me(!1)})).finally((function(){b&&Ze(!1)}))}catch(e){console.log(e),Ze(!1)}},dt=function(e){try{u()({path:Object(P.y)("/funnels/".concat(e,"/import-status"))}).then((function(t){!0===t.status?w?(We(!1),w({funnel_id:e})):(delete te.group,ge({},"/funnels/".concat(e),te)):!1===t.status&&setTimeout((function(){dt(e)}),2e3)}))}catch(e){}},mt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var l=n[0],c=n[1],i=n[2];if(Ze({id:"scratch",group:p,filter:t}),i)u()({path:Object(P.y)("".concat("wc_checkout"===p?"/store-checkout":"/funnels","/duplicate/").concat(i)),method:"wc_checkout"===p?"POST":"GET"}).then((function(e){e.status&&(Object(P.kb)()||e.funnel_id)?w?w({funnel_id:e.funnel_id}):ge({},"/funnels/".concat(e.funnel_id),te):e.builders_options?st(e,(function(){mt.apply(void 0,n)})):ot({status:!0,modalTitle:Object(s.__)("Clone Funnel"),error:e.message||e.msg||Object(s.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:e.error}),Ze(!1)})).catch((function(e){Ze(!1),console.log(e)}));else{var o={funnel_name:l,template:"scratch"};i&&(o.inherit_from=i),c&&!Object(a.isEmpty)(c)&&(o.funnel_steps=c.join(",")),o.builder=m,"wc_checkout"===p&&(o.default_step="yes",o.template=null==De?void 0:De.id);try{u()({method:"POST",data:o,path:Object(P.y)("/".concat(q))}).then((function(e){if(e.builders_options)st(e,(function(){mt.apply(void 0,n)}));else if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id;e.setup&&ie(e.setup),"funnels"===q?(delete te.group,Object(f.k)({},"/funnels/".concat(t),te)):w({funnel_id:e.funnel.id})}else!1===e.status&&(ot({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),me(!1),Ze(!1))}))}catch(e){console.log(e),Ze(!1)}}},pt=function(e){var t=!1,n="upsell"===qe?!re:["wc_checkout","wc_thankyou"].includes(qe)||ce?!ne:!le;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},Ot=pt("status"),yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(z&&!n)ot(rt(rt({},z),{},{onConfirm:function(){return yt(e,t,!0)},onCancel:function(){return ot({status:!1})}}));else{if(Qe)return!1;"upsell"===p&&pt()?at(!0):(Pe({id:e,isBuildFromScratch:!0,template:{name:y[p]}}),J?J():ee||"funnel"===Je&&j?bt(e):me(!0),oe||He(!0))}},vt=function(){return Object(r.createElement)(F.a,{className:"bwf-admin-modal-squeezy "+it.className,isLoading:it.loading,successMessage:it.success,errorMessage:it.error,isOpen:it.status,autoHide:8e3,content:it.content,confirmText:it.confirmText,confirmButtonText:it.confirmButtonText,cancelButtonText:it.cancelButtonText,onConfirm:it.onConfirm,onCancel:it.onCancel,modalTitle:it.modalTitle,disableConfirm:it.disableConfirm,closeIcon:it.closeIcon,onRequestClose:function(){return ot({status:!1})}})},jt=function(){return Object(r.createElement)(r.Fragment,null,!de&&vt(),Object(r.createElement)(D,{isOpen:nt,onRequestClose:function(){return at(!1)},modalContent:Object(M.d)({FB_PRO_STATUS:Ot,funnelId:j,importType:Je,activeTemplateGroup:p}),className:"bwf-templates-pro-modal"}),de&&(0===j?Object(r.createElement)(_e.b,{onCloseModal:function(){me(!1)},isWorking:Qe,onComplete:function(e,t,n){De.isBuildFromScratch?mt(e,t,n):bt(De.id,{title:e})},modalTitle:I.title,className:d()({"bwf-visibility-hidden":"pluginActivation"===it.key})},vt()):Object(r.createElement)(Ae,{onCloseModal:function(){me(!1)},isWorking:Qe,activeTemplateGroup:p,templateGroup:y,showCloneOption:De.isBuildFromScratch,onComplete:function(e,t,n){var r=De.id;if(t!==p){var l=Object(a.get)(o,"".concat(t,".").concat(m)),c=l&&Object.keys(l).find((function(e){var t;return!0===(null===(t=l[e])||void 0===t?void 0:t.build_from_scratch)}));c&&(r=l[c].slug)}bt(r,e,t,n)},className:d()({"bwf-visibility-hidden":"pluginActivation"===it.key})},vt())))};return Object(r.createElement)(r.Fragment,null,b?Object(r.createElement)(Le,{showEditors:W,showTemplatesNav:W}):Object(r.createElement)("div",{className:"wffn_template_wrap"},(S||W)&&Object(r.createElement)("div",{className:"bwf-template-list-header"},Object(r.createElement)("div",null,S&&Object(r.createElement)(Ve,{funnelId:j,disabledNavs:C,activeTemplateGroup:p,templateGroup:y,onClick:function(e){return Ce(e)},urlDependency:K}),W&&Object(r.createElement)(Me,{editorList:c[p],onChange:function(e){ke(e)},activeEditor:m})),Object(r.createElement)(et,{editors:c,activeTemplateGroup:p,activeEditor:m,defaultBuilder:n})),Object(r.createElement)("div",{id:"wffn_design_container",ref:Z},Object(r.createElement)("div",{className:"wffn_tab_container"},G,Object(r.createElement)(Xe,{templateFilterCheck:E,templateCards:h,showBuildFromScratch:x,importBuildFromScratch:yt,activeTemplateGroup:p,activeEditor:m,onPreview:function(e,t,n){e.preventDefault(),n.group_type?xe(Object.keys(n.group_type)[0]):0!==j&&"funnel"!==Je||"optin"!==p&&"wc_checkout"!==p||xe("optin"===p?"inline":"wc_checkout"===p&&"1"),Pe({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),We(!0),"upsell"===p&&0===j?ge({},"".concat(N,"/").concat(p,"/").concat(m,"/preview/").concat(t)):0===j?ge({},"".concat(N,"/").concat(p,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===Je&&ge({},"".concat(N,"/templates/").concat(p,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)),Te(n.steps[0].type)):ge({},"".concat(N,"/templates/").concat(p,"/").concat(m,"/preview/").concat(t))},funnelId:j,importType:Je,stepId:ee,importing:Qe})))),(Be||$e)&&Object(r.createElement)(ye,{isOpen:$e||Be,onRequestClose:function(){We(!1),xe(!1),te.group&&(delete te.group,ge({},Object(f.g)(),te))},onImport:function(){J?J():ee||"funnel"===Je&&j?bt(De.id):me(!0)},templateGroup:y,activeGroup:p,templateID:De.id,template:De.template,activeEditor:m,importing:Qe,templateList:o,filters:l,templates:o,hasPRO:pt,previewData:g,isTemplateLoading:b,activeFilter:t,setPreviewErr:he,parentRoute:N,funnelId:j,importType:Je,updateQueryString:ge,previewCustomizeEnabled:Q,urlDependency:K,stepId:ee},jt()),!(Be||$e)&&jt())};it.prototype={filters:c.a.object.isRequired,templates:c.a.object.isRequired,editors:c.a.object.isRequired,defaultBuilder:c.a.object.isRequired,templateLoading:c.a.func.isRequired,activeTemplateGroup:c.a.string.isRequired,templateGroup:c.a.object.isRequired};var ot=it},377:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(8),c=n(14),i=n(2),o=n(288);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t,n,l,s=e.title,f=e.desc,b=e.options,d=u(Object(r.useState)(null===(t=b[0])||void 0===t?void 0:t.key),2),m=d[0],p=d[1],O=function(e){return b.find((function(t){return t.key===e}))};return Object(r.createElement)("div",{className:"bwf-card"},Object(r.createElement)("div",{className:"bwf-text-style-7"},s),Object(r.createElement)(o.b,{className:"bwf-mt-16",options:b,selected:m,onChange:function(e){return p(e)}}),Object(r.createElement)("div",{className:"bwf-mt-12 bwf-text-style-3 bwf-color-normal"},f),Object(r.createElement)("div",{className:"bwf-flex bwf-mt-24 bwf--space-between"},Object(i.size)(null===(n=O(m))||void 0===n?void 0:n.setting_url)?Object(r.createElement)(c.a,{className:"bwf-btn-gray is-secondary is-small"},Object(a.__)("Go to Settings","funnel-builder")):null,Object(r.createElement)("a",{href:null===(l=O(m))||void 0===l?void 0:l.documentation_url,target:"__blank",className:"bwf-text-bold"},Object(a.__)("View Docs","funnel-builder"))))},b=(n(365),n(309)),d=function(e){var t,n=e.experimentData;if(Object(i.size)(null==n?void 0:n.post_slug)||Object(i.size)(null==n?void 0:n.variants))return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-url-list"},Object(i.size)(null==n?void 0:n.post_slug)?Object(r.createElement)("div",{className:"bwf-container"},Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",{className:"bwf-text-light"},null==n?void 0:n.title,":")),Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",null,"/",null==n?void 0:n.post_slug))):null,Object(i.size)(null==n?void 0:n.variants)?null==n||null===(t=n.variants)||void 0===t?void 0:t.map((function(e,t){var n=e.title,a=e.control,l=e.post_slug,c=e.isControl,i=void 0!==c&&c,o=e.view_link,u=o?new URL(o).pathname.replace(/^\//,""):"";return Object(r.createElement)("div",{className:"bwf-container",key:t},Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",{className:"bwf-text-light"},n,":"),i?Object(r.createElement)("span",{className:"bwf-text-style-3"},"  ( ".concat(a?"Original":"Variant"," )")):null),Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",null,"/",l||u)))})):null))},m=[{title:Object(a.__)("Plugins","funnel-builder"),desc:Object(a.__)("Add the URLs in plugin settings to exclude them from cache.","funnel-builder"),key:"plugins"},{title:Object(a.__)("CDNs","funnel-builder"),desc:Object(a.__)("Add the URLs in the CDN's panel to exclude from cache.","funnel-builder"),key:"cdns"},{title:Object(a.__)("Hostings","funnel-builder"),desc:Object(a.__)("Add the URLs in Hosting's panel to exclude from cache.","funnel-builder"),key:"hostings"}],p={variants:[{id:5259,edit:"http://admin.local/wp-admin/admin.php?page=wfacp&wfacp_id=5259",title:"Checkout",desc:"",traffic:"20",control:!0,winner:!1,active:!0,view_link:"http://admin.local/checkouts/checkout-5/"},{id:5390,edit:"http://admin.local/wp-admin/admin.php?page=wfacp&wfacp_id=5390",title:"Checkout  Copy",desc:"",traffic:"40",control:!1,winner:!1,active:!0,view_link:"http://admin.local/checkouts/checkout-copy-19/"},{id:5392,edit:"http://admin.local/wp-admin/admin.php?page=wfacp&wfacp_id=5392",title:"Checkout  Copy",desc:"",traffic:"40",control:!1,winner:!1,active:!0,view_link:"http://admin.local/checkouts/checkout-copy-20/"}]},O=[{label:"W3 Total Cache",key:"w3-total-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/w3-total-cache/",setting_url:"",type:"plugins"},{label:"WP Super Cache",key:"wp-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/wp-super-cache/",setting_url:"",type:"plugins"},{label:"WP Fastest Cache",key:"wpFastestCache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/wp-fastest-cache/",setting_url:"",type:"plugins"},{label:"WP Rocket Cache",key:"wp-rocket",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/wp-rocket/",setting_url:"",type:"plugins"},{label:"Comet Cache",key:"comet-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/comet-cache/",setting_url:"",type:"plugins"},{label:"LiteSpeed Cache",key:"litespeed-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/litespeed-cache/",setting_url:"",type:"plugins"},{label:"Hyper Cache",key:"plugin",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/hyper-cache/",setting_url:"",type:"plugins"},{label:"Cachify Cache",key:"cachify",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/cachify/",setting_url:"",type:"plugins"},{label:"Simple Cache",key:"simple-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/simple-cache/",setting_url:"",type:"plugins"},{label:"WP Hummingbird Cache",key:"wp-hummingbird",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/hummingbird-page-speed-optimization/",setting_url:"",type:"plugins"},{label:"SiteGround",key:"siteGround",documentation_url:"https://funnelkit.com/docs/checkout-pages/caching/siteground/",setting_url:"",type:"plugins"},{label:"Breeze",key:"breeze",documentation_url:"https://funnelkit.com/docs/checkout-pages/caching/breeze-cloudways/",setting_url:"",type:"plugins"},{label:"WP Engine",key:"wp-engine",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/wp-engine/",setting_url:"",type:"hostings"},{label:"Kinsta",key:"kinsta",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/kinsta/",setting_url:"",type:"hostings"},{label:"Bluehost",key:"bluehost",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/bluehost/",setting_url:"",type:"hostings"},{label:"Flywheel",key:"flywheel",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/flywheel/",setting_url:"",type:"hostings"},{label:"DreamHost",key:"dreamhost",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/dreamhost/",setting_url:"",type:"hostings"},{label:"Pressable",key:"pressable",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/pressable/",setting_url:"",type:"hostings"},{label:"Pagely",key:"pagely",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/pagely/",setting_url:"",type:"hostings"},{label:"Cloudways",key:"cloudways",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/cloudways/",setting_url:"",type:"hostings"},{label:"Cloudflare",key:"cloudflare",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/cloudflare/",setting_url:"",type:"cdns"},{label:"KeyCDN",key:"keycdn",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/keycdn/",setting_url:"",type:"cdns"},{label:"BunnyCDN",key:"bunnycdn",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/bunnycdn/",setting_url:"",type:"cdns"},{label:"WP Engine",key:"wp engine",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/wp-engines-cdn/",setting_url:"",type:"cdns"},{label:"Kinsta",key:"kinstaa",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/kinstas-cdn/",setting_url:"",type:"cdns"},{label:"SiteGround",key:"siteGround",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/siteground-cdn/",setting_url:"",type:"cdns"},{label:"Jetpack",key:"jetpack",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/jetpacks-site-accelerator/",setting_url:"",type:"cdns"},{label:"Amazon CloudFront",key:"amazon-cloudFront",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/amazon-cloudfront/",setting_url:"",type:"cdns"}];function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.onCloseModal,n=e.experimentData,c=e.funnelId;return Object(i.isEmpty)(n)&&(n=p),Object(r.createElement)(l.Modal,{className:"bwf-admin-modal bwf-admin-modal-xl bwf-admin-modal-no-header bwf-custom-experiment-modal bwf-cache-modal",isDismissible:!0,onRequestClose:t},Object(r.createElement)(b.a,{title:Object(a.__)("How to exclude pages from cache?","funnel-builder"),onClose:function(){return t()}}),Object(r.createElement)("div",{className:"bwf-t-left"},Object(a.__)("Checkouts & Offers are dynamic pages whose URLs need to be excluded from caching Plugins, CDNs and Hosting providers.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mt-24"},Object(r.createElement)("section",{className:"bwf-cs__timeline-item is-active"},Object(r.createElement)("div",{className:"bwf-cs__timeline-item-title"},Object(r.createElement)("span",{className:"bwf-cs__timeline-status is-active"}),Object(r.createElement)("span",null,Object(a.__)("Step 1: Choose Caching Provider","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-cs__timeline-item-body bwf-flex bwf--space-between"},m.map((function(e){var t=O.filter((function(t){return t.type===e.key}));return Object(r.createElement)(f,y({},e,{key:e.key,options:t}))})))),Object(r.createElement)("section",{className:"bwf-cs__timeline-item is-active"},Object(r.createElement)("div",{className:"bwf-cs__timeline-item-title"},Object(r.createElement)("span",{className:"bwf-cs__timeline-status is-active"}),Object(r.createElement)("span",null,Object(a.__)("Step 2: Add URLs to Exclusion List","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-cs__timeline-item-body"},Object(r.createElement)(d,{experimentData:n,funnelId:c}),Object(r.createElement)("div",{className:"bwf-text-style-3 bwf-color-normal"},Object(a.__)("Use wildcard characters as recommended by your caching provider to exclude all urls in one go","funnel-builder")))),Object(r.createElement)("section",{className:"bwf-cs__timeline-item is-active"},Object(r.createElement)("div",{className:"bwf-cs__timeline-item-title"},Object(r.createElement)("span",{className:"bwf-cs__timeline-status is-active"}),Object(r.createElement)("span",null,Object(a.__)("Step 3: Confirm Cache Exclusion","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-text-style-5 bwf-t-left"},Object(a.__)("Test these pages as a non-loggedin user in browser's incognito mode to confirm proper cache exclusions.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-style-5 bwf-mt-16 bwf-flex bwf--g4 bwf-t-left"},Object(a.__)("Are you still confused?","funnel-builder"),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Support+Footer&utm_campaign=FB+Lite+Plugin",target:"__blank"},Object(a.__)("Contact support"))))))}},383:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){"use strict";var r=n(0),a=n(6),l=n.n(a),c=(n(487),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:l()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(c.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(c.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(c.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(c.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(c.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(c.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},398:function(e,t,n){},399:function(e,t,n){"use strict";var r=n(0),a=n(1),l=n(126),c=n(6),i=n.n(c),o=(n(383),n(10)),u=n.n(o),s=n(8),f=n(4),b=n(293),d=n(288),m=n(302),p=n(295),O=n(354),y=n(291),v=n(343),j=function(e){var t=e.onCloseModal;e.link;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Add Product","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-large bwf-modal-edit-page"}))},_=n(12),h=n(14),g=n(20),w=n(2),E=n(58),S=n(116),N=n(375);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D={checkbox:s.CheckboxControl,radio:y.a,radios:y.a,select:d.b,textarea:s.TextareaControl,"custom-select":v.a,text:s.TextControl,input:s.TextControl,checklist:m.a,license:O.a,color:p.a,"bwf-label":function(e){var t=e.label;return Object(r.createElement)("span",{className:"bwf_label"},t)},number:function(e){var t=e.value,n=e.onChange,a=(e.errors,e.placeholder),l=e.label,c=e.required;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{id:c?"required":""},l),Object(r.createElement)("input",{type:"number",value:t,onChange:function(e){return n(e.target.value)},placeholder:a}))},"multi-select":N.a},F=function(e){var t,n,c,o,s=Object(l.useParams)(),d=s.stepId,m=s.offerId,p=Object(_.i)().funnel_id,O=A(Object(r.useState)(!1),2),y=O[0],v=O[1],N=Object(g.c)().showSnackbar,C=Object(E.a)().setTabData,T=Object(S.a)().getStep,I=e.tabID,F=e.errorNotice,L=e.type,R=e.fields,B=e.disabled,M=e.saveSettings,z=T(L,d,"products",m).data,U=void 0===z?{}:z,q=A(Object(r.useState)(""),2),G=q[0],V=q[1],J=A(Object(r.useState)(!1),2),H=J[0],K=J[1],$=A(Object(r.useState)(""),2),W=$[0];$[1];R&&R[I]&&(t=Object.assign({},R[I]),o=R),c=null!=t&&t.fields?t.fields:[],n=null!=t&&t.values?t.values:{};var Y=A(Object(r.useState)(c),2),Q=Y[0],Z=Y[1];Object(r.useEffect)((function(){return G&&(N(G),v(!1)),function(){V("")}}),[G]),Object(r.useEffect)((function(){Z([]);var e=setTimeout((function(){return Z(c)}));return function(){clearTimeout(e)}}),[c]);var X=function(e){var t=o,n=(t[I],function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,[I].map(x)));return Object.values(n).forEach((function(t){var n=t.values;e=P(P({},n),e)})),e},ee=function(e,t,n){e.type=e.inputType?e.inputType:e.type,e.type=Array.isArray(e.styleClasses)&&e.styleClasses.includes("wp-color-picker")?"color":e.type;var a=e.type.toLowerCase()in D?D[e.type.toLowerCase()]:D.text;return B&&(t.disabled=!0),Object(r.createElement)("div",{className:i()("form-group",e.class||e.styleClasses,{"checkbox-control-wrap":"checkbox"===e.type},{"inline-group":!e.label},{"checklist-field":"checklist"===e.type},{"checkbox-field":"checkbox"===e.type})},Object(r.createElement)(a,P(P({label:e.label},function(e,t){var n,r=Object.assign({},e.props);return e.type.toLowerCase()in D||(r.type=e.type.toLowerCase()),r.placeholder=e.placeholder,r.options=e.options,Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),r.options=e.options||e.values,e.checkboxlabel&&(r.checkboxlabel=e.checkboxlabel),e.multiple&&(r.multiple=e.multiple),e.ajax_cb&&(r.ajax_cb=e.ajax_cb),"copier"!==e.type&&"custom-select"!==e.type||(r=e),"select"===e.type&&(r.excludeSelectedOptions=!1,r.options&&(r.options=r.options.map((function(e){return"object"!==k(e.value)&&(e.key="object"!==k(e.value)?e.value:e.key,e.value={id:e.value}),e}))),e.multiple&&(r.excludeSelectedOptions=!0,r.inlineTags=!0)),"richeditor"===e.type&&(r.id=e.id),"textarea"===(null===(n=e.type)||void 0===n?void 0:n.toLowerCase())&&(r=e),"text"===e.type&&e.disabled&&(r.disabled=e.disabled),r.required=e.required,r.error=t.hasOwnProperty(e.key)&&t[e.key],r}(e,n)),t)),e.hint&&Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}))},te=function(e,t){if(B)return!1;try{var n,r=!1;if(n=e[t.key],Array.isArray(t))t.every((function(t){return"true"==e[t.key]}))&&(r=!0);else if(Array.isArray(t.value)&&Array.isArray(n)){for(var a=0;a<n.length;a++)if(t.value.indexOf(n[a])>-1){r=!0;break}}else n==t.value&&(r=!0)}catch(e){console.log(e),r=!1}return r};return Object(r.createElement)(r.Fragment,null,Q&&Array.isArray(Q)&&Q.length?Object(r.createElement)(b.a,{onSubmitCallback:function(e){!function(e){var t=X(e);v(!0),V(""),F("",!1);try{u()({path:Object(f.y)("/funnel-".concat(L,"/").concat("offer"===L?m:d,"/settings?funnel_id=").concat(p)),method:"POST",data:{settings:JSON.stringify(t)}}).then((function(t){if(t.success){if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("ship_dynamic")&&!Object(w.isEmpty)(U)){var n=Object(w.cloneDeep)(U);n=P(P({},n),{},{ship_dynamic:t.data.ship_dynamic}),C(L,d,"products",m,n)}V(Object(a.__)("Setting Saved","funnel-builder")),o[I].values=e,M(o)}else V(t.msg)})).catch((function(e){console.log(e),V(e.message)}))}catch(e){console.log(e),V(Object(a.__)("There are some technical difficulties while updating settings. Contact Support","funnel-builder"))}}(e)},initialValues:n,validate:function(e){var t={};return["landing_page_base","checkout_page_base","optin_page_base","optin_ty_page_base","wfocu_page_base","ty_page_base"].forEach((function(n){e.hasOwnProperty(n)&&!e[n]&&"/%postname%/"!==bwfAdminGen.permalink_structure&&(t[n]=bwfAdminGen.errors.empty_base)})),void 0!==e.checkout_page_base&&e.checkout_page_base&&bwfAdminGen.checkout_page_slug===e.checkout_page_base&&(t.checkout_page_base=bwfAdminGen.errors.checkout_slug),Object(w.isArray)(Q)&&Q.forEach((function(n){n.toggler&&!te(e,n.toggler)||!n.required||!Object(w.isEmpty)(e[n.key])&&!Object(w.isNull)(e[n.key])||(t[n.key]=Object(a.__)("This Field is required!","funnel-builder"))})),t}},(function(e){var t=e.getInputProps,n=e.values,l=e.errors,o=e.handleSubmit,u=!1;return Object(r.createElement)("div",{className:"wtfb-tab-form"},c.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},e.type&&"label"!==e.type||e.inputType?Object(r.createElement)(r.Fragment,null,"radio"!==e.type&&"radios"!==e.type||"boolean"!=typeof e.values[0].value?"":n[e.key]="true"===n[e.key]||"false"!==n[e.key]&&n[e.key],u=!0,(!e.toggler||te(n,e.toggler))&&ee(e,t(e.key),l)):"label"===e.type&&e.hint?Object(r.createElement)("div",{className:i()("form-group component-label-description",e.styleClasses)},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",null,e.label),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint}}))):e.hint||e.desc||e.label?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint||e.desc||e.label},className:i()(e.styleClasses,{"field-label":e.label})}):null)})),u&&Object(r.createElement)("div",{className:"bwf-settings-action-wrap"},Object(r.createElement)(h.a,{isPrimary:!0,onClick:function(){B||(Object.keys(l).length?N(Object(a.__)("Please Validate Fields.","funnel-builder")):o())},disabled:B||y,isBusy:y,className:B?"bwf-no-ripple":""},Object(a.__)("Save","funnel-builder"))))})):null,H&&Object(r.createElement)(j,{onCloseModal:function(){K(!1)},link:W}))},L=n(308);n(3);var R=function(e){var t=e.onCloseModal,n=e.modalData;return Object(r.createElement)(s.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Offer Success/Failure Messages Help","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-xl bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal"},Object(r.createElement)("img",{src:n,alt:"settings"}))},B=n(31),M=n(22),z=(n(23),function(e){var t=e.html,n=e.className,a=Object(r.useRef)(null),c=Object(l.useHistory)(),i=Object(r.useCallback)((function(e){"A"===e.target.tagName&&"react"===e.target.getAttribute("data-link")&&(e.preventDefault(),c.push(e.target.getAttribute("href")))}),[c]);return Object(r.useEffect)((function(){var e=a.current;return e&&e.addEventListener("click",i),function(){e&&e.removeEventListener("click",i)}}),[i]),Object(r.createElement)("div",{ref:a,dangerouslySetInnerHTML:{__html:t},className:n})});function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=Object(g.b)("ck").isProFeatureLocked,n=e.tabs,a=void 0===n?[]:n,l=e.type,c=e.getdata,i=e.saveSettings,o=q(Object(r.useState)(!1),2),u=(o[0],o[1]),s=q(Object(r.useState)(""),2),b=(s[0],s[1]),d=q(Object(r.useState)(a[0].key),2),m=(d[0],d[1]),p=q(Object(r.useState)(!1),2),O=p[0],y=p[1],v=q(Object(r.useState)(""),2),j=v[0],_=v[1],h=Object(f.V)(),E=Object(w.get)(h,"0.modal",{}).primary_action;Object(r.useEffect)((function(){m(a[0].key)}),[a[0].key]);var S=function(e,t){var n="";u(t),Array.isArray(e)?e.forEach((function(e){n+="<p>"+e+"</p>"})):"object"===U(e)?Object.values(e).forEach((function(e){n+="<p>"+e+"</p>"})):n+="<p>"+e+"</p>",b(n)};return Object(r.createElement)(r.Fragment,null,a.length&&Object(r.createElement)("div",{className:"bwf-tabs-accordian-wrap"},Object(r.createElement)(L.a,{items:a.map((function(e){return{key:e.key,label:Object(r.createElement)(r.Fragment,null,e.label," ","checkout"===l&&t&&"tracking_analysis"===e.key&&Object(r.createElement)(M.b,null)),hint:e.hintLink?Object(r.createElement)("div",{className:"hint"},Object(B.decodeEntities)(e.hint)," ",Object(r.createElement)("a",{onClick:function(t){var n;t.stopPropagation(),n=e.hintLink,y(!0),_(n)}},e.hintLinkText)," "):Object(w.size)(e.hint)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z,{html:e.hint,className:"hint"}),"checkout"===l&&t&&"tracking_analysis"===e.key&&Object(r.createElement)("a",{href:Object(f.U)(["Tracking","Id","Setting","Upgrade","Link"]),target:"_blank",className:"bwf-upgrade-pro-text",rel:"noreferrer"},E)):null,display:Object(r.createElement)(F,{tabID:e.key,errorNotice:S,type:l,fields:c,saveSettings:i,disabled:"checkout"===l&&t&&"tracking_analysis"===e.key})}})),className:"bwf-accordion",openedTabs:function(e){var t;m(null===(t=a[e])||void 0===t?void 0:t.key)}})),O&&Object(r.createElement)(R,{onCloseModal:function(){y(!1)},modalData:j}))},J=n(323),H=n(40),K=n(30),$=n(317);t.a=function(e){var t=e.type,n=void 0===t?"":t,a=e.funnelID,c=void 0===a?"":a,i=Object(l.useParams)(),o=i.stepId,u=i.offerId,s=Object(r.useRef)(new AbortController),f=Object(E.a)(),b=f.fetchStep,d=f.setFunnelId,m=f.setTabData,p=Object(S.a)(),O=p.getStep,y=p.getStepHeaderData,v=p.getFunnelData,j=Object(H.a)(),_=j.setStepData,h=j.setLoading,g=j.setStepFunnelData,N=j.setIsFormLoading,k=y(n,o,"design",u),C=v(),P=K.a.getFunnelTitle();Object(r.useEffect)((function(){N(!1),!Object(w.isEmpty)(C)&&Object(w.isEmpty)(P)&&g(C),Object(w.isEmpty)(k)||(_(k),h(!1))}),[k,C]);var T=O(n,o,"settings",u),x=T.data,A=void 0===x?{}:x,I=T.loading,D=void 0===I||I,F=A.settings,L=void 0===F?{}:F;if(Object(r.useEffect)((function(){return Object(w.isEmpty)(A)&&b(n,o,"settings",u,s.current.signal),d(c),function(){s.current.abort()}}),[]),!D&&Object(w.size)(L)>0){var R=[];for(var B in L){var M={key:B,label:L[B].title,heading:L[B].heading,priority:L[B].priority,hint:L[B].hint,hintLink:L[B].hint_link,hintLinkText:L[B].hint_link_text};L[B]&&L[B].fields&&Object(w.isArray)(L[B].fields)&&L[B].fields.length>0&&R.push(M)}R.length&&R.sort((function(e,t){return e.priority-t.priority}))}return Object(r.createElement)(r.Fragment,null,D?Object(r.createElement)(J.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(V,{tabs:R,type:n,getdata:L,saveSettings:function(e){m(n,o,"settings",u,{settings:e})}}),["offer","upsell"].includes(n)&&Object(r.createElement)($.a,null)))}},405:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(0),a=n(2),l=n(8),c=n(1),i=n(10),o=n.n(i),u=n(14),s=n(302),f=n(4),b=n(364),d=n(22),m=n(85),p=n(298),O=n(20),y=n(312),v=n(6),j=n.n(v),_=n(436),h=n(24),g=n(12),w=n(469);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return P(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(P(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,P(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,P(f,"constructor",u),P(u,"constructor",o),o.displayName="GeneratorFunction",P(u,a,"GeneratorFunction"),P(f),P(f,a,"Generator"),P(f,r,(function(){return this})),P(f,"toString",(function(){return"[object Generator]"})),(C=function(){return{w:l,m:b}})()}function P(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(P=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){P(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function T(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.b=function(e){var t,n=e.onCloseModal,i=e.onComplete,o=e.isWorking,b=e.className,v=e.children,E=(Object(g.i)(),x(Object(r.useState)(""),2)),S=E[0],N=E[1],k=x(Object(r.useState)(""),2),P=k[0],A=k[1],D=x(Object(r.useState)([]),2),F=D[0],L=D[1],R=x(Object(r.useState)(!1),2),B=R[0],M=R[1],z=Object(O.b)("ul").isProFeatureLocked,U=Object(h.a)().setGlobalCheckout,q=(Object(w.a)().fetch,Object(p.a)()),G=q.getCurrentTemplate,V=q.getScratchTemplateType,J=q.getActiveGroup,H=q.getActiveSubFilter,K=G(),$=V(),W=J(),Y=H();if(K.isBuildFromScratch&&"json"===$)return Object(r.createElement)(_.a,{modalTitle:Object(f.kb)()?Object(c.__)("Import Store Checkout","funnel-builder"):Object(c.__)("Import Funnel","funnel-builder"),apiPath:Object(f.kb)()?"/store-checkout/import":"/funnels/import",onRequestClose:function(){return n()},onSuccess:function(e){var t=Array.isArray(e.funnel_id)?e.funnel_id[0]:e.funnel_id;t&&(Object(f.kb)()?(U({funnel_id:t,funnel_status:!1}),Object(g.k)({},"/store-checkout",{})):Object(g.k)({},"/funnels/".concat(t),{}))}});var Q=Object(r.createElement)(r.Fragment,null,"wc_checkout"===W?Object(c.__)("Create Store Checkout","funnel-builder"):Object(c.__)("Create Funnel","funnel-builder")),Z=function(){var e,t=(e=C().m((function e(){return C().w((function(e){for(;;)switch(e.n){case 0:if("new"!==$&&K.isBuildFromScratch||P){e.n=1;break}return N("Funnel title is required field"),e.a(2);case 1:N(""),i&&i(P,F,K.isBuildFromScratch&&"new"!==$&&B);case 2:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){T(l,r,a,c,i,"next",e)}function i(e){T(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}(),X=function(){return K.isBuildFromScratch?"new"===$?Object(a.isEmpty)(P.trim())||!1===W&&Object(a.isEmpty)(F):Object(a.isEmpty)(B):Object(a.isEmpty)(P.trim())},ee=function(e){return"wc_checkout"===e.type&&Y&&y.e.hasOwnProperty(e.type)&&y.e[e.type].hasOwnProperty(Y)?" - ".concat(y.e[e.type][Y]," ")+Object(c.__)("Step","funnel-builder"):""};return Object(r.createElement)(l.Modal,{title:Q,className:j()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",b),onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!o,overlayClassName:"bwf-create-funnel-modal__overlay"},v,S&&Object(r.createElement)(m.a,{errorMessage:S}),(!K.isBuildFromScratch||"existing"!==$)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(X()||Z())}},Object(r.createElement)(l.TextControl,{placeholder:Object(c.__)("Enter funnel name","funnel-builder"),label:Object(c.__)("Name","funnel-builder"),value:P,onChange:function(e){return A(e)},disabled:o})),K.isBuildFromScratch&&("new"===$?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===W?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(c.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(d.c,{content:Object(c.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(d.c,{content:Object(c.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(c.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(c.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(s.a,{value:F,onChange:function(e){L(e)},options:Object.keys(f.tb).map((function(e){return{value:e,label:f.tb[e],isPro:z&&"upsell"===e}})),disabled:o})))):Object(r.createElement)(I,{onSelect:function(e){return M(e)},activeGroup:W})),!K.isBuildFromScratch&&K.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(c.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=K.steps)||void 0===t?void 0:t.filter((function(e){return!z||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(d.c,{content:f.tb[e.type]+ee(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:o},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,disabled:X()||o,isBusy:o,onClick:Z,className:X()?"bwf-no-ripple":"",name:"add-funnel"},Object(c.__)("Done","funnel-builder"))))};var I=function(e){var t=e.onSelect,n=e.activeGroup,l=e.label,i=void 0===l?Object(c.__)("Funnel","funnel-builder"):l,u=x(Object(r.useState)([]),2),s=u[0],m=u[1],p=x(Object(r.useState)(""),2),O=p[0],y=p[1],v=x(Object(r.useState)({}),2),j=v[0],_=v[1],h=x(Object(r.useState)([]),2),g=h[0],w=h[1],E=x(Object(r.useState)(!0),2),S=E[0],k=E[1],C=function(e){k(!0),o()({path:Object(f.y)("/funnels".concat(Object(f.x)(N({},e))))}).then((function(e){e.status?(m(e.items),Object(a.size)(e.items)?w(e.items.map((function(e){return{key:e.id,value:e.title}}))):w([{key:"no-data",value:"No Data Found"}])):e.items||w([]),k(!1)})).catch((function(e){console.log(e),k(!1)}))};Object(r.useEffect)((function(){Object(a.isEmpty)(O)?C({limit:10,need_steps_data:!0}):C({limit:10,s:O,need_steps_data:!0})}),[O]);var P=Object(r.useMemo)((function(){var e;if(Object(a.isEmpty)(s))return[];var t=null===(e=s.find((function(e){return e.id===j.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(a.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[j]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,i),Object(r.createElement)(b.a,{onSearch:function(e){return y(e)},isLoading:S,items:g,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),_(e)},blurText:j.value,placeholder:Object(c.__)("Search","funnel-builder"),helpText:Object(c.__)("Search and select a Funnel to import steps","funnel-builder")}),!Object(a.isEmpty)(j)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(c.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(a.isEmpty)(P)?Object(r.createElement)(d.c,{content:Object(c.__)("No Steps","funnel-builder"),border:!0}):P.map((function(e,t){return Object(r.createElement)(d.c,{content:Object(f.sb)(e),border:!0,key:"steps-".concat(t)})})))))}},406:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(8),c=n(1),i=n(10),o=n.n(i),u=n(31),s=n(4),f=n(364);function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return m(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(m(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,m(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,m(f,"constructor",u),m(u,"constructor",o),o.displayName="GeneratorFunction",m(u,a,"GeneratorFunction"),m(f),m(f,a,"Generator"),m(f,r,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:l,m:b}})()}function m(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(m=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){m(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function p(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,i=t.title,m=t.is_substep,y=void 0!==m&&m,v=e.onStepSelected,j=e.label,_=void 0===j?Object(c.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):j,h=e.showCheckbox,g=void 0!==h&&h,w=O(Object(r.useState)(!g),2),E=w[0],S=(w[1],O(Object(r.useState)(!1),2)),N=S[0],k=S[1],C=O(Object(r.useState)(null),2),P=C[0],T=C[1],x=O(Object(r.useState)(!1),2),A=x[0],I=x[1],D=O(Object(r.useState)(null),2),F=D[0],L=D[1],R=Object(r.useRef)(new AbortController),B=A&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(l.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(c.__)("".concat(i," not found"),"funnel-builder")))),M=function(){var e,t=(e=d().m((function e(t){var r,l,c;return d().w((function(e){for(;;)switch(e.n){case 0:return k(!0),e.p=1,r=y&&!0===y?"&is_substep=true":"",e.n=2,o()({path:Object(s.y)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:R.current.signal});case 2:l=e.v,T(l||null),Object(a.isEmpty)(l.steps)&&Object(a.isEmpty)(l.pages)?I(!0):I(!1),e.n=4;break;case 3:e.p=3,"AbortError"===(c=e.v).name?console.log(c):(T(null),I(!0));case 4:k(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){p(l,r,a,c,i,"next",e)}function i(e){p(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return M(""),function(){R.current.abort()}}),[]);var z=Object(a.isObject)(P)&&!Object(a.isNull)(P)?b(Object(a.isEmpty)(P)?[]:P):Object(a.isArray)(P)&&!Object(a.isEmpty)(P)?P.map((function(e){return{key:e.id,value:e.name}})):[],U=F&&F.hasOwnProperty("name")?Object(u.decodeEntities)(F.name):"";return Object(r.createElement)(r.Fragment,null,E&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},_),Object(r.createElement)(f.a,{onSearch:function(e){return M(e)},isLoading:N,items:z,multiGroup:Object(a.isObject)(P),error:B,onItemClick:function(e){L(e),v({step:e,copyFrom:E})},blurText:U,placeholder:Object(c.__)("Search","funnel-builder"),stepTitle:i,helpText:["offer","wc_order_bump"].includes(n)?null:Object(c.__)("Search and select a page from a Funnel, Post or a Page.","funnel-builder")})))}},412:function(e,t,n){},413:function(e,t,n){"use strict";var r=n(0),a=n(1),l=(n(447),n(8)),c=n(5),i=n(20);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),o=(e.btnLabel,e.dropZoneContent),u=Object(i.c)().showSnackbar,s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):u(Object(a.__)("Uploaded file is not valid.","funnel-builder")):u(Object(a.__)("Uploaded file not found","funnel-builder"))},f=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(l.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(l.FormFileUpload,{isSecondary:!0,accept:f,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},o||null,"application/json"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(a.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(a.__)("(Maximum file size allowed 10 MB)","funnel-builder"))))}}),Object(r.createElement)(l.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},422:function(e,t,n){},423:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){"use strict";var r=n(0),a=(n(325),n(126)),l=n(1),c=n(5),i=n(63),o=n(20);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.additionalTabs,n=u(Object(r.useState)([]),2),a=n[0],s=n[1],f=Object(o.c)().showSnackbar;Object(r.useEffect)((function(){s(null==t?void 0:t.fields)}),[t]);return Object(r.createElement)(r.Fragment,null,(null==t?void 0:t.heading)&&Object(r.createElement)("div",{className:"bwf-additional-heading"},null==t?void 0:t.heading),Object(r.createElement)("div",{className:"bwf-shortcodes"},null==a?void 0:a.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading bwf-grid-full",key:t},e.heading):Object(r.createElement)("div",{key:t,className:"bwf-additional-container"},Object(r.createElement)("div",{className:"bwf-additional-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),f(t+" "+Object(l.__)("copied","funnel-builder")),void f(t+" copied");var t,n,r}},Object(r.createElement)(c.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))}))))},b=n(10),d=n.n(b),m=n(44),p=n(2),O=n(8),y=n(4),v=n(14),j=n(58),_=n(40),h=n(29),g=n(116),w=n(41),E=n(59);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.pageUrl,n=void 0===t?"":t,a=e.onRequestClose,c=e.stepId,i=e.type,u=e.stepTitle,s=e.urlSlug,f=e.stepDescription,b=e.offerId,m=(0,Object(w.a)().getStepsData)(),N=S(Object(r.useState)(!1),2),k=N[0],C=N[1],P=S(Object(r.useState)(""),2),T=P[0],x=P[1],A=S(Object(r.useState)(f),2),I=A[0],D=(A[1],S(Object(r.useState)(u),2)),F=D[0],L=(D[1],S(Object(r.useState)(""),2)),R=L[0],B=L[1],M=S(Object(r.useState)(),2),z=M[0],U=M[1],q=Object(r.useRef)(),G=Object(r.useRef)(),V=Object(_.a)().setStepData,J=Object(h.a)().setSingleStepData,H=Object(g.a)().getStep,K=Object(j.a)(),$=K.setStepHeaderData,W=K.setTabData,Y=H(i,c,"design",b).data,Q=void 0===Y?{}:Y,Z=Object(o.c)().showSnackbar;Object(r.useEffect)((function(){var e;null===(e=G.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){var e=n.split("/");q.current=e.slice(0,Object(p.isEmpty)(e[e.length-1])?-2:-1).join("/"),B(n)}),[n]),Object(r.useEffect)((function(){x(s)}),[s]);var X=function(){var e={},t=F.replace(/\s/g,"");Object(p.isEmpty)(t)&&(e.heading=Object(l.__)("Title: This field is required","funnel-builder"));var n=T.replace(/\s/g,"");if(Object(p.isEmpty)(n)&&(e.title=Object(l.__)("Page Url Slug: This field is required","funnel-builder")),0===Object(p.size)(e)){C(!0);var r='{"title":"'.concat(null==m?void 0:m.title,'","slug":"').concat(T,'","description":"').concat(I,'"}');d()({path:Object(y.y)("/funnel-".concat(i,"/save-state/").concat(c)),method:"POST",data:JSON.parse(r)}).then((function(e){if(e.success){if(C(!1),e.hasOwnProperty("step_data")){V(e.step_data),$(i,c,b,e.step_data);var t=Object(p.cloneDeep)(Q);t.step.post_name=T,t.step.view_link=e.step_data.view_link,W(i,c,"design",b,t)}e.hasOwnProperty("step_list")&&J(e.step_list.id,e.step_list),a(),Z(Object(l.__)("Changes Saved","funnel-builder"))}})).catch((function(e){return console.log(e)}))}else U(e)};return Object(r.createElement)(O.Modal,{title:Object(l.__)("Edit Page URL","funnel-builder"),onRequestClose:a,className:"bwf-admin-modal bwf-modal-edit-page bwf-edit-page"},z&&Object(p.size)(z)>0&&Object(r.createElement)(E.a,{status:"error",isDismissible:!0,onRemove:function(){return U({})}},Object(r.createElement)("ul",null,Object.keys(z).map((function(e){return Object(r.createElement)("li",{key:e},z[e])})))),Object(r.createElement)("label",{id:"required"},Object(l.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(O.TextControl,{value:T,onChange:function(e){x(e.replace(/\s+/g,"-").toLocaleLowerCase()),B(q.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},onKeyPress:function(e){"Enter"===e.key&&X()},className:Object(p.size)(T.trim())?"":"bwf-error-border",ref:G,required:!0}),Object(p.size)(T.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(l.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-url-title"},Object(l.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},R))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,disabled:!Object(p.size)(T.trim()),className:Object(p.size)(T.trim())?"":"bwf-no-ripple",isBusy:k,onClick:X},Object(l.__)("Update","funnel-builder"))))},C=(n(422),n(128)),P=n(328),T=n(308),x=n(42);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=function(e){var t=e.activeTab,n=void 0===t?"content":t,a=e.formFields,c=e.activeProduct,i=e.initialValues,u=void 0===i?{}:i,s=e.styleRef,f=e.type,b=e.stepId,m=e.offerId,v=e.addTabIndex,_=Object(j.a)().setTabData,h=(0,Object(g.a)().getStep)(f,b,"design",m).data,w=void 0===h?{}:h,E=L(Object(r.useState)({}),2),S=E[0],N=E[1],k=L(Object(r.useState)({}),2),A=k[0],I=k[1],F=L(Object(r.useState)(!1),2),R=F[0],B=F[1],M=L(Object(r.useState)(""),2),z=M[0],U=M[1],q=L(Object(r.useState)([0]),2),G=q[0],V=q[1],J=L(Object(r.useState)([0]),2),H=J[0],K=J[1],$=Object(o.c)().showSnackbar;Object(r.useEffect)((function(){z&&($(z),U(""))}),[z]),Object(r.useEffect)((function(){Q()}),[c]),Object(r.useEffect)((function(){W()}),[A,S]);var W=function(){if(S){var e=[];for(var t in A){var n,r;if(S.hasOwnProperty(t)){var a=S[t];null!=a&&a.toggler&&(null==a||null===(n=a.toggler)||void 0===n?void 0:n.value)!=A[null==a||null===(r=a.toggler)||void 0===r?void 0:r.key]||e.push(D(D({},a),{},{value:A[t]}))}}Y(e)}},Y=function(e){var t="";e.forEach((function(e){switch(e.type){case"text":e.contentClass&&jQuery(e.contentClass).text(e.value);break;case"richtext":case"richeditor":case"textarea":e.contentClass&&jQuery(e.contentClass).html(e.value);break;case"label":break;case"toggle":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;0==e.value?jQuery(n).hide():jQuery(n).show()}break;case"image":if(e.selectors){var r,a,l,c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type)if(jQuery(c+" img").length)jQuery(c+" img").attr("src",null==e||null===(a=e.value)||void 0===a?void 0:a.image_url);else jQuery(c).find("svg").remove(),jQuery(c).append('<img src="'+(null==e||null===(l=e.value)||void 0===l?void 0:l.image_url)+'" alt="order bump" />');else if(Object(p.isEmpty)(null==e||null===(r=e.value)||void 0===r?void 0:r.custom_url))jQuery(c+" img").attr("src","").attr("srcset","");else{var i,o;if(jQuery(c+" img").length)jQuery(c+" img").attr("src",null==e||null===(i=e.value)||void 0===i?void 0:i.custom_url).attr("srcset","");else jQuery(c).find("svg").remove(),jQuery(c).append('<img src="'+(null==e||null===(o=e.value)||void 0===o?void 0:o.custom_url)+'" alt="order bump" />').attr("srcset","")}}break;default:if(e.selectors&&e.stylekey){var u,s=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,f="".concat(e.stylekey,":").concat(e.value).concat(null!==(u=null==e?void 0:e.styleUnit)&&void 0!==u?u:"",";");-1!==t.search("".concat(s,"{"))?t=t.replace("".concat(s,"{"),"".concat(s,"{").concat(f)):t+="".concat(s,"{").concat(f,"}")}}})),null!=s&&s.current&&(s.current.innerHTML=t)},Q=function(){var e;if(!Object(p.isEmpty)(a)&&!Object(p.isEmpty)(c)){var t,n={};if(null!=a&&null!==(e=a.content)&&void 0!==e&&e[c])(null==a||null===(t=a.content)||void 0===t?void 0:t[c]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}));if(null!=a&&a.design)(null==a?void 0:a.design).forEach((function(e){((null==e?void 0:e.fields)||[]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}))}));N(n),console.log("fields",n)}},Z=function(e,t,n){return e.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},(Object(p.isEmpty)(e.toggler)||X(t,e.toggler,e))&&Object(r.createElement)(P.a,{input:e,formProps:n(e.key),values:t}))}))},X=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else r==t.value&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(C.a,{onSubmitCallback:function(e){B(!0);try{d()({path:Object(y.y)("/funnel-".concat(f,"/").concat(b,"/design/save-settings")),method:"POST",data:e}).then((function(t){if(t.success){var n=Object(p.cloneDeep)(w);n.step.additional_tabs[v].values=e,_(f,b,"design",m,n),U(Object(l.__)("Changes Saved","funnel-builder")),B(!1)}else B(!1),U(t.msg)}))}catch(e){console.log(e),B(!1),U(e.message)}},initialValues:u,validate:function(){return{}},onChange:function(e,t){I(t)}},(function(e){var t=e.getInputProps,i=e.values,o=(e.errors,e.handleSubmit);return Object(r.createElement)(r.Fragment,null,function(e,t){var l;if("content"===n){var i,o=null==a||null===(i=a.content)||void 0===i?void 0:i[c];return Object(r.createElement)("div",{style:{padding:"16px 16px 0"}},Z(o,t,e))}var u=null!==(l=a[n])&&void 0!==l?l:[],s=null==u?void 0:u.map((function(n,a){var l;return{label:null==n?void 0:n.label,key:null!==(l=null==n?void 0:n.key)&&void 0!==l?l:a,display:Object(r.createElement)("div",{className:"bwf-form-fields-wrapper"},Z(null==n?void 0:n.fields,t,e))}}));return"tab_form_style"===n?Object(r.createElement)(T.a,{items:s,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:G,setOpenedKeys:function(e){V(e)}}):Object(r.createElement)(T.a,{items:s,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:H,setOpenedKeys:function(e){K(e)}})}(t,i),Object(r.createElement)(O.Button,{isPrimary:!0,onClick:o,isBusy:R,disabled:R,className:"bwf-mt-24"},Object(r.createElement)("span",{style:D({},R&&{visibility:"hidden"})},Object(l.__)("Save","funnel-builder")),R&&Object(r.createElement)(x.a,{color:"#ffffff",style:{position:"absolute"}})))})))};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t,n=e.additionalTabs,a=e.type,u=e.stepId,s=e.offerId,f=e.addTabIndex,b=M(Object(r.useState)(null),2),d=b[0],m=b[1],O=M(Object(r.useState)(null==n?void 0:n.tabs[0]),2),y=O[0],v=O[1],j=M(Object(r.useState)(!1),2),_=j[0],h=j[1],g=Object(o.c)().showSnackbar;Object(r.useEffect)((function(){"shortcode"===n.content[y.id].type?(m(n.content[y.id].fields),h(!1)):h(!0)}),[y]);return Object(r.createElement)(r.Fragment,null,(null==n?void 0:n.heading)&&Object(r.createElement)("div",{className:"bwf-additional-heading"},null==n?void 0:n.heading),n&&n.hasOwnProperty("tabs")&&Object(r.createElement)("div",{className:"bwf-tabs-list"},null==n||null===(t=n.tabs)||void 0===t?void 0:t.map((function(e,t){return Object(r.createElement)("button",{key:t,className:"bwf-tabs-list-button ".concat((null==y?void 0:y.id)===e.id?"active-btn":""),onClick:function(){v(e),"tab_custom_shortcode"===e.id?h(!1):h(!0)}},null==e?void 0:e.name)}))),!_&&Object(p.size)(d)>0&&Object(r.createElement)("div",{className:"bwf-shortcodes"},null==d?void 0:d.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading bwf-grid-full",key:t},e.heading):Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-setting-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),g(t+" "+Object(l.__)("copied","funnel-builder")),void g(t+" copied");var t,n,r}},Object(r.createElement)(c.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))}))),_&&Object(r.createElement)(B,{activeTab:y.id,formFields:null==n?void 0:n.content,initialValues:null==n?void 0:n.values,type:a,stepId:u,offerId:s,addTabIndex:f}))},q=(n(306),n(293)),G=n(288);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.onCloseModal,n=e.onSuccess,c=e.SnackBarMsg,i=e.fieldTypes,o=Object(a.useParams)().stepId,u=W(Object(r.useState)(!1),2),s=u[0],f=u[1],b=W(Object(r.useState)("text"),2),m=b[0],p=b[1],v=W(Object(r.useState)({label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",enable_time:!1,preferred_time_format:"12",allow_delete:!1,show_custom_field_at_thankyou:!0,show_custom_field_at_email:!0,required:!0,multiselect_maximum:"",multiselect_maximum_error:"You can only select {maximum_number} items"}),2),j=v[0],_=v[1],h=function(){t()};Object(r.useEffect)((function(){j.field_type=m,j.default="checkbox"===m?"1":"";var e=JSON.parse(JSON.stringify(j));_(e)}),[m]);var g=j;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:h,title:Object(l.__)("Add New Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-section-modal"},Object(r.createElement)(q.a,{validate:function(e){var t={};return""!==e.label.trim()&&e.label||(t.label=Object(l.__)("Label is required","funnel-builder")),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email"].includes(e.field_type)&&!e.name&&(t.name="Field ID is required"),["wfacp_radio","select","select2","multiselect"].includes(e.field_type)&&!e.options&&(t.options="Options are required"),e.name&&["billing","shipping"].includes(e.name.trim().toLowerCase())&&(t.name=Object(l.sprintf)(Object(l.__)("Field ID contains a reserved term '%s'","funnel-builder"),e.name.trim().toLowerCase())),t},onSubmitCallback:function(e){f(!0),d()({path:Object(y.y)("/funnel-checkout/".concat(o,"/form_fields/add_field")),method:"POST",data:e}).then((function(e){e.success?(f(!1),n(e.data)):(f(!1),c(e.msg||e.message))})).catch((function(e){f(!1),c(e.msg||e.message)}))},initialValues:g,onChange:function(e,t){p(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,c=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(G.b,$({},t("field_type"),{options:i})))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("label"),{placeholder:Object(l.__)("Type here...","funnel-builder"),autoComplete:"off",required:!0}))),c.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(l.__)("This is a required field","funnel-builder"))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.name&&a.name?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Field ID (Order Meta Key)","funnel-builder")),Object(r.createElement)(O.TextControl,$({},t("name"),{placeholder:Object(l.__)("Type here...","funnel-builder")}))),c.name&&a.name&&Object(r.createElement)("div",{className:"bwf-error-text"},a.name),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Field ID (Order Meta Key) where value of this field gets stored. Use '_' to seperate in case of multiple words.Example: date_of_birth","funnel-builder"))),["wfacp_radio","select","select2","multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.options&&a.options?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(O.TextControl,$({},t("options"),{placeholder:Object(l.__)("Type here...","funnel-builder")}))),c.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field")),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("multiselect_maximum"),{label:Object(l.__)("Max number of selection","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("multiselect_maximum_error"),{label:Object(l.__)("Error Message","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["text","wfacp_radio","select","textarea","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("default"),{label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["text","textarea","select","select2","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,$({},t("placeholder"),{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here...","funnel-builder")})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(G.b,$({options:[{label:"True",value:"1",key:"1"},{label:"False",value:"0",key:"0"}]},t("default"))))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("show_custom_field_at_thankyou"),{label:Object(l.__)("Show On Thank You Page","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Show In Order Email","funnel-builder")})))),["text","wfacp_radio","select","textarea","checkbox","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,$({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:h,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(O.Button,{isPrimary:!0,onClick:o,isBusy:s,disabled:s},Object(r.createElement)("span",{style:H({},s&&{visibility:"hidden"})},Object(l.__)("Add","funnel-builder")),s&&Object(r.createElement)(x.a,{color:"#ffffff",style:{position:"absolute"}}))))}))))};function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.onCloseModal,n=e.addedSection,a=Object(r.useRef)(),c=X(Object(r.useState)(!1),2),i=c[0],o=c[1],u=function(){t()};return Object(r.useEffect)((function(){a.current.focus()}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:u,title:Object(l.__)("Add New Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(q.a,{validate:function(){return{}},onSubmitCallback:function(e){o(!0);var t=e.name.replace(/\s+/g,"-").toLowerCase(),r=t+"".concat(Object(p.size)(t)>0?"-":"")+Math.floor(1e3*Math.random());e.id=r,n(e)},initialValues:{name:"",sub_heading:"",class:"",fields:[],id:""}},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Z({},t("name"),{label:Object(l.__)("Name","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:a,onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Z({},t("sub_heading"),{label:Object(l.__)("Sub Heading","funnel-builder"),autoComplete:"off",placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,Z({},t("class"),{label:Object(l.__)("Classes","funnel-builder"),autoComplete:"off",placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(O.Button,{onClick:u,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:n,isBusy:i},Object(l.__)("Add","funnel-builder"))))}))))},ne=n(299);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(){return(ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var se=function(e){var t=e.onCloseModal,n=e.updatedField,i=e.fields,o=e.updated,u=e.updatedSectionId,s=e.activeStep,f=e.SnackBarMsg,b=Object(a.useParams)().stepId,m=Object(r.useRef)(),p=oe(Object(r.useState)(!1),2),j=p[0],_=p[1],h=oe(Object(r.useState)(n),2),g=h[0],w=h[1],E=function(){t()};Object(r.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){"1"===g.allow_delete||"true"===g.allow_delete?w((function(e){return ce(ce({},e),{},{allow_delete:!0})})):"0"===g.allow_delete||"false"===g.allow_delete?w((function(e){return ce(ce({},e),{},{allow_delete:!1})})):"1"===g.coupon_style||"true"===g.coupon_style?w((function(e){return ce(ce({},e),{},{coupon_style:!0})})):"0"===g.coupon_style||"false"===g.coupon_style?w((function(e){return ce(ce({},e),{},{coupon_style:!1})})):"1"===g.show_custom_field_at_thankyou||"true"===g.show_custom_field_at_thankyou?w((function(e){return ce(ce({},e),{},{show_custom_field_at_thankyou:!0})})):"0"===g.show_custom_field_at_thankyou||"false"===g.show_custom_field_at_thankyou?w((function(e){return ce(ce({},e),{},{show_custom_field_at_thankyou:!1})})):"1"===g.show_custom_field_at_email||"true"===g.show_custom_field_at_email?w((function(e){return ce(ce({},e),{},{show_custom_field_at_email:!0})})):"0"===g.show_custom_field_at_email||"false"===g.show_custom_field_at_email?w((function(e){return ce(ce({},e),{},{show_custom_field_at_email:!1})})):"1"===g.required||"true"===g.required?w((function(e){return ce(ce({},e),{},{required:!0})})):"0"!==g.required&&"false"!==g.required||w((function(e){return ce(ce({},e),{},{required:!1})}))}),[g]);var S=g,N=function(e){var t;_(!0),i.fieldsets[s][u].fields=null===(t=i.fieldsets[s][u])||void 0===t||null===(t=t.fields)||void 0===t?void 0:t.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(y.y)("/funnel-checkout/".concat(b,"/form_fields")),method:"POST",data:i}).then((function(e){e.success?o(i):f(Object(l.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){f(e.message||e.msg)}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:E,shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal bwf-admin-modal-no-header",isDismissible:!1},Object(r.createElement)(q.a,{validate:function(e){var t={};return["radios","select","select2","multiselect","wfacp_radio"].includes(e.type)&&!e.options&&(t.options=Object(l.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){N(e)},initialValues:S},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,i=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," "),Object(r.createElement)("span",null,"(",Object(l.__)("Field ID : ","funnel-builder")," ",n.id,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," ")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:E},Object(r.createElement)(c.a,{icon:"close",size:20}))),(["text","radios","wfacp_radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","select2","multiselect","number","password","wfacp_wysiwyg","wfacp_html","wfacp_date"].includes(n.type)||["shipping_calculator","order_coupon","order_summary","order_total","_bwf_dob"].includes(n.id))&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({},t("label"),{label:Object(l.__)("Label","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)},placeholder:Object(l.__)("Type here","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:m})),("wfop_wysiwyg"===n.type||"html"===n.type||"wfacp_wysiwyg"===n.type||"_bwf_dob"===n.id)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(l.__)("This label is for admin purpose only, won't appear on the checkout form.","funnel-builder")))))),"bwfan_birthday_date"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({},t("bwfan_birthday_date"),{type:"number",label:Object(l.__)("Minimum Age","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["radios","wfacp_radio","select","select2","multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.options&&a.options?"bwf-validation":"")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(O.TextControl,ae({placeholder:Object(l.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"))),i.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["order_coupon"].includes(n.id)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({label:Object(l.__)("Success message","funnel-builder")},t("coupon_success_message_heading"),{placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"order_coupon"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Use merge tags to display Coupon Code: {{coupon_code}} & Coupon Value: {{coupon_value}} in success message","funnel-builder")))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,ae({},t("coupon_style"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Make coupon field a clickable link","funnel-builder")}))))),(["text","textarea","select","email","tel","select2","number","password","wfacp_date"].includes(n.type)||["shipping_calculator"].includes(n.id))&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({},t("placeholder"),{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Enter the default text for shipping method","funnel-builder")))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({},t("multiselect_maximum"),{label:Object(l.__)("Max number of selection","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder")})))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({},t("multiselect_maximum_error"),{label:Object(l.__)("Error Message","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder")})))),["radios","wfacp_radio","select","textarea","hidden","select2","text","multiselect","number","tel","password","email","wfacp_date"].includes(n.type)&&!["billing_first_name","billing_last_name","billing_phone","shipping_phone","billing_email"].includes(n.id)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["checkbox"].includes(n.type)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(G.b,ae({options:[{label:Object(l.__)("True","funnel-builder"),value:"1",key:"1"},{label:Object(l.__)("False","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,ae({label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["wfop_wysiwyg","html","wfacp_wysiwyg"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ne.a,ae({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["order_summary"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,ae({},t("allow_delete"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Enable this to show delete icon below item subtotal","funnel-builder")))),["order_total"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,ae({},t("default"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Detailed Summary","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(l.__)("Enable this to show detailed summary including Subtotal, Coupon, Fees, Shipping and Taxes whichever are applicable.","funnel-builder")))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,ae({},t("show_custom_field_at_thankyou"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Show On Thank You Page","funnel-builder")})))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,ae({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Show In Order Email","funnel-builder")})))),(["text","radios","wfacp_radio","select","textarea","checkbox","email","tel","select2","multiselect","number","password","wfacp_date"].includes(n.type)||"bwfan_birthday_date"===n.id)&&!["shipping_calculator","order_total","order_summary","order_coupon","order_comments"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,ae({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(l.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:E,className:"bwf-modal-cancel-btn",disabled:j},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,disabled:j,isBusy:j,onClick:o},Object(l.__)("Update","funnel-builder"))))}))))},fe=(n(326),n(12)),be=n(25),de=n(85),me=n(82),pe=n(90),Oe=n(31),ye=n(6),ve=n.n(ye);function je(){return(je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function _e(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ee=function(e){var t=Object(a.useParams)(),n=t.stepId,i=(t.id,window.location&&window.location.search?Object(be.parse)(window.location.search.substring(1)):{}),o=e.onCloseModal,u=e.productData,s=e.onChange,f=e.addToCartSettings,b=he(Object(r.useState)("general"),2),d=b[0],m=b[1],j=he(Object(r.useState)([]),2),_=j[0],h=j[1],g=he(Object(r.useState)(""),2),w=g[0],E=g[1],S=he(Object(r.useState)(""),2),N=S[0],k=S[1],P=he(Object(r.useState)(""),2),T=P[0],x=P[1],A=he(Object(r.useState)(""),2),I=A[0],D=A[1],F=he(Object(r.useState)(""),2),L=F[0],R=F[1],B=he(Object(r.useState)(""),2),M=B[0],z=B[1],U=he(Object(r.useState)(""),2),q=U[0],V=U[1],J=he(Object(r.useState)(""),2),H=J[0],K=J[1],$=he(Object(r.useState)(""),2),W=$[0],Y=$[1],Q=he(Object(r.useState)(""),2),Z=Q[0],X=Q[1],ee=he(Object(r.useState)([]),2),te=ee[0],re=ee[1],ae=he(Object(r.useState)({}),2),le=ae[0],ce=ae[1],ie=he(Object(r.useState)(""),2),oe=ie[0],ue=ie[1],se=he(Object(r.useState)([]),2),ye=se[0],ge=se[1],we=he(Object(r.useState)(""),2),Ee=we[0],Ne=we[1],ke=he(Object(r.useState)(!1),2),Ce=ke[0],Pe=ke[1],Te=function(){o()};Object(r.useEffect)((function(){0!==u.products.length&&(h(u.default_products),re(null==u?void 0:u.products),ce(null==u?void 0:u.settings),E(u.settings.enable_delete_item),k(u.settings.enable_custom_name_in_order_summary),x(u.settings.is_hide_additional_information),D(u.settings.additional_information_title),R(u.settings.hide_best_value),z(u.settings.hide_quantity_switcher),V(u.settings.hide_quick_view),K(u.settings.hide_product_image),Y(u.settings.best_value_text),X(u.settings.best_value_position),Ne(u.settings.best_value_product))}),[u]),Object(r.useEffect)((function(){if(Object(p.size)(te)>0){var e=te.map((function(e){return{label:e.title,value:e.key,key:e.key}}));ge([].concat([{label:"Select Product",value:"",key:""}],_e(e)))}}),[te]);var xe={label:u.label},Ae=Object(pe.a)({containerClass:"#product_switching .bwf-step-menu-header .bwfan_navigation",selectedClass:".bwfan_navigation_active",orientation:"horizontal"}).switchTab,Ie=[{type:"general",id:"general",label:Object(l.__)("General","funnel-builder")},{type:"description",id:"description",label:Object(l.__)("Description","funnel-builder")},{type:"advanced",id:"advanced",label:Object(l.__)("Advanced","funnel-builder")}];return Object(r.useEffect)((function(){var e,t;Ae((e=d,t=0,Ie.map((function(n,r){n.id===e&&(t=r)})),t))}),[d]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-xl bwf-modal-edit-page  bwf-edit-product-modal"},Object(r.createElement)("div",{className:"sections bwf-product-field"},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Edit Field","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:function(){return Te()}},Object(r.createElement)(c.a,{icon:"close",size:20})))),Object(r.createElement)("div",{className:"wfacp_product_swicther_field_wrap"},Object(r.createElement)("div",{id:"product_switching"},Object(r.createElement)("div",{className:"wfacp_tabs"},0===u.products.length&&Object(r.createElement)("div",{className:"bwf-welcome-card"},Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_welc_icon"},Object(r.createElement)("span",{className:"bwf-product-h"}," ",Object(l.__)("Oops! no products found","funnel-builder")," ")),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-product-p"},Object(l.__)("To edit this field please add atleast one product","funnel-builder")," "),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_btns_welcome_card"},Object(r.createElement)(O.Button,{isPrimary:!0,onClick:function(){return Object(fe.k)({},"".concat(Object(y.kb)()?"/store-checkout/checkout":"/funnel-checkout","/").concat(n,"/products"),i)}},Object(l.__)(" Add Product ","funnel-builder")),Object(r.createElement)("div",{className:"wfacp_clear_20"}),Object(r.createElement)("div",{className:"wfacp_clear_20"}))),0!==u.products.length&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfan_header bwfan__step-header"},Object(r.createElement)("div",{className:"bwfan_header_l2 bwf-step-menu-header"},Object(r.createElement)("div",{className:"bwfan_header_l"},Object(r.createElement)("div",{className:"bwfan_navigation"},Ie.map((function(e,t){return Object(r.createElement)("a",{className:ve()("bwf-cursor-pointer",{bwfan_navigation_active:d===e.id}),onClick:function(){"general"===e.id&&m("general"),"description"===e.id&&m("description"),"advanced"===e.id&&m("advanced")},key:t},e.label)})),Object(r.createElement)("div",{className:"bwf-nav-indicator"}))))),Object(r.createElement)(C.a,{validate:function(e){var t={};return ue(""),""===e.label.trim()&&(t.label="",ue("Label is required")),e.label||(t.label="",ue("Label is required")),t},onSubmitCallback:function(e){!function(e){Pe(!0),le.enable_delete_item=w,le.enable_custom_name_in_order_summary=N,le.enable_custom_name_in_order_summary=N,le.is_hide_additional_information=T,le.additional_information_title=I,le.additional_information_title=I,le.hide_best_value=L,le.hide_quantity_switcher=M,le.hide_quick_view=q,le.hide_product_image=H,le.best_value_text=W,le.best_value_position=Z,le.best_value_product=Ee,ce(le);var t={default_products:_,settings:le,products:te,label:e.label};s(t)}(e)},initialValues:xe},(function(e){var t=e.getInputProps,n=e.values,a=(e.errors,e.touched),c=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,oe&&a.label&&Object(r.createElement)("div",{className:"bwf-validate-product"},Object(r.createElement)(de.a,{errorMessage:oe}),Object(r.createElement)("div",{className:"bwf_clear_10"})),"general"===d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(l.__)("Label","funnel-builder")),Object(r.createElement)(O.TextControl,je({},t("label"),{onKeyPress:function(e){"Enter"===e.key&&c(n)},placeholder:Object(l.__)("Label","funnel-builder"),className:"bwf-product-validation-text",autoComplete:"off"})))),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-general-product bwf-product-header bwf-mt-24 ".concat("1"!==f?"":"bwf-no-value")},"1"!==f&&Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Title","funnel-builder")))),null==te?void 0:te.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-general-product bwf-product-end ".concat("1"!==f?"":"bwf-no-value"),key:t},"2"===f&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("input",{type:"radio",value:e.key,checked:_.includes(e.key),onChange:function(e){return h([e.target.value])},className:"components-radio-control__input ".concat(_===e.key?"active":"")})),"3"===f&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)(me.a,{checked:_.includes(e.key),onChange:function(t){return function(e,t){if(e)h([].concat(_e(_),[t]));else{var n=_.filter((function(e){return e!==t}));h(n)}}(t,e.key)}})),Object(r.createElement)("div",{className:"bwf-flex"},Object(Oe.decodeEntities)(e.old_title)),Object(r.createElement)("div",{className:"bwf-product-title"},Object(r.createElement)("input",{type:"text",defaultValue:e.title,placeholder:"Title",onChange:function(t){return function(e,t){te.map((function(n){n.key===e&&(n.title=t.target.value)}));var n=JSON.parse(JSON.stringify(te));re(n)}(e.key,t)},className:"bwf-h-36"}),Object(r.createElement)("input",{type:"text",defaultValue:e.you_save_text,placeholder:"You Save Text",onChange:function(t){return function(e,t){te.map((function(n){n.key===e&&(n.you_save_text=t.target.value)}));var n=JSON.parse(JSON.stringify(te));re(n)}(e.key,t)},className:"bwf-h-36"})))})),Object(r.createElement)("div",{className:"bwf-product-desc field-wrap"},Object(r.createElement)("label",{type:"description"},Object(l.__)("Merge Tags","funnel-builder")+": {{quantity}}, {{saving_value}}, {{saving_percentage}} and {{unit_price}}")),Object(r.createElement)("div",{className:"wfacp_ps_conditional_wrap bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:w,onChange:function(){return E(!w)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"wfacp_product_switcher_delete_options bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:N,onChange:function(){return k(!N)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Enable Custom Product Name In Order Details","funnel-builder")})),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(l.__)("This option will allow you to view the product custom name on Thank you page, Customer Email & Admin Order Detail page","funnel-builder"))))))),"description"===d&&Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(l.__)("Use this section to show per product custom description when the product is selected.","funnel-builder"),Object(r.createElement)("br",null),Object(l.__)("Note: This feature will work if you are using product specific order forms.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field bwf-mt-24"},Object(r.createElement)(O.ToggleControl,{checked:T,onChange:function(){return x(!T)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Custom Product Description","funnel-builder")})),Object(r.createElement)("div",{className:"form-group bwf-display-flex_column field-wrap"},Object(r.createElement)("label",{type:"text"},Object(l.__)("Title","funnel-builder")),Object(r.createElement)("input",{type:"text",value:I,className:"bwf-h-36",onChange:function(e){return D(e.target.value)}}))),Object(r.createElement)("div",{className:"bwf-product-textarea bwf-product-header bwf-mt-24"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Custom Details","funnel-builder")))),null==te?void 0:te.map((function(e,t){return Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-product-textarea"},Object(r.createElement)("div",{className:"bwf-flex"},null==e?void 0:e.title),Object(r.createElement)("div",{className:"form-group bwf_w_full"},Object(r.createElement)(ne.a,{keyid:"".concat(e.key).concat(Math.floor(100*Math.random())),content:e.whats_included,value:e.whats_included,onChange:function(t){return function(e,t){te.map((function(n){n.key===e&&(n.whats_included=t)}));var n=JSON.parse(JSON.stringify(te));re(n)}(e.key,t)},toolbar:"bold,italic, underline,bullist,numlist,link",quicktags:!0}))))}))),"advanced"===d&&Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"pro_mb"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Best Value Tag","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:L,onChange:function(){return R(!L)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Best Value Tag","funnel-builder")}))),!L&&Object(r.createElement)("div",{className:"bwf-product-advanced"},Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(l.__)("Apply on Product","funnel-builder")),Object(r.createElement)(G.b,{options:ye,selected:Ee,onChange:function(e){Ne(e)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(l.__)("Label","funnel-builder")),Object(r.createElement)("input",{type:"text",placeholder:"Best Value Product",className:"bwf-h-36",value:W,onChange:function(e){return Y(e.target.value)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(l.__)("Position","funnel-builder")),Object(r.createElement)(G.b,{options:Se,selected:Z,onChange:function(e){X(e)}}))),Object(r.createElement)("div",{className:"pro_checkbox_wrap pro_mb bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(l.__)("Other","funnel-builder"))),Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-products-other-detail"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:M,onChange:function(){return z(!M)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Quantity Incrementor","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:q,onChange:function(){return V(!q)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Quick View","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(O.ToggleControl,{checked:H,onChange:function(){return K(!H)},className:"bwf-tooglecontrol-advance",label:Object(l.__)("Hide Product Image","funnel-builder")}))))),Object(r.createElement)("div",{className:"bwf-product-modal-footer"},Object(r.createElement)(O.Button,{onClick:Te,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,isBusy:Ce,onClick:c},Object(l.__)("Update","funnel-builder"))))})))))))))},Se=[{label:"Default",value:"",key:""},{label:"Above product title",value:"above",key:"above"},{label:"Below product title",value:"below",key:"below"},{label:"Top left corner",value:"top_left_corner",key:"top_left_corner"},{label:"Top Right corner",value:"top_right_corner",key:"top_right_corner"}],Ne=n(301),ke=n(91),Ce=n.n(ke),Pe=n(309);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return De(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Fe(){return(Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=Object(Ne.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",style:{cursor:"move"}},Object(r.createElement)(c.a,{icon:"ul",size:"20"}))})),ze=function(e){var t=e.index,n=e.data,a=e.setFieldId,i=e.setShowContent,o=e.changeVisibility,u=e.fieldId,s=e.showContent,f=e.changePlaceholder,b=e.changeLabel,d=e.changeRequired,m=e.sortable,v=void 0===m||m,j=e.provided;return Object(r.createElement)("div",Fe({key:t,"data-key":"first_name",className:"bwf_address_field bwf_sortable_address_field"},v&&Re({ref:j.innerRef},j.draggableProps)),Object(r.createElement)("div",{className:ve()("bwf_billing_accordion_inner",{"is-opened":u===n.key&&s}),onClick:function(){a(n.key),n.key===u?i(!s):(a(n.key),i(!0))}},Object(r.createElement)("div",{className:"accordion_left"},v&&Object(r.createElement)(Me,{provided:j}),Object(r.createElement)("div",{className:"accordion_heading"},n.data_label),n.key.includes("same_as")?null:Object(r.createElement)("div",{className:"bwf_hint_small"},"(",Object(l.__)("Field ID: ","funnel-builder"),n.key,")")),Object(r.createElement)("div",{className:"accordion_right"},Object(r.createElement)("span",{onClick:function(e){e.stopPropagation(),o(n.key)}},Object(r.createElement)(c.a,{icon:null!=n&&n.status?"eye":"eye-close",size:24})),Object(r.createElement)(c.a,{icon:"angle-down",size:24})),Object(r.createElement)("div",{className:"bwf_billing_clear"}),!Object(p.isEmpty)(n.configuration_message)&&Object(r.createElement)("div",{className:"bwf_misconfiguration_field"},n.configuration_message)),Object(r.createElement)("div",{className:ve()("bwf_billing_accordion_content form-group",{"bwf-display-block":u===n.key&&s})},"billing_wc_custom_field"===u||"shipping_wc_custom_field"===u?Object(r.createElement)("span",null,Object(l.sprintf)(/* translators: %s: Field type. */
Object(l.__)("Enable this field to show the extra %s fields registered by other plugins. Still not seeing the field on the checkout? ","funnel-builder"),"billing_wc_custom_field"===u?Object(l.__)("billing","funnel-builder"):Object(l.__)("shipping","funnel-builder")),Object(r.createElement)("a",{target:"_blank",href:Object(y.gb)(["Step","Checkout","Form","Address","Edit"]),rel:"noreferrer"},Object(l.__)("Contact Support.","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(O.TextControl,{label:Object(l.__)("Label","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),className:"form-control bwf_label",value:n.label||"",onChange:function(e){return b(n.key,e)}}))),!n.key.includes("same_as")&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(O.TextControl,{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),className:"form-control bwf_placeholder",value:n.placeholder||"",onChange:function(e){return f(n.key,e)}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,{checked:!!n.required,onChange:function(){return d(n.key)},type:"checkbox",className:"bwf-tooglecontrol-advance",label:Object(l.__)("Required","funnel-builder")})))))))},Ue=Object(Ne.b)(ze),qe=Object(Ne.a)((function(e){var t=e.items,n=e.setAddress,a=(e.onPopupClose,e.lastItems),l=e.setLastItems,c=e.provided,i=Ae(Object(r.useState)(""),2),o=i[0],u=i[1],s=Ae(Object(r.useState)(!1),2),f=s[0],b=s[1],d=function(e,t){e.includes("same_as")?l((function(n){return n.map((function(n){return n.key===e?Re(Re({},n),{},{label:t}):n}))})):n((function(n){return n.map((function(n){return n.key===e?Re(Re({},n),{},{label:t}):n}))}))},m=function(e,t){n((function(n){return n.map((function(n){return n.key===e?Re(Re({},n),{},{placeholder:t}):n}))}))},p=function(e){e.includes("same_as")?l((function(t){return t.map((function(t){return t.key===e?Re(Re({},t),{},{status:!t.status}):t}))})):n((function(t){return t.map((function(t){return t.key===e?Re(Re({},t),{},{status:!t.status}):t}))}))},O=function(e){n((function(t){return t.map((function(t){return t.key===e?Re(Re({},t),{},{required:!t.required}):t}))}))};return Object(r.createElement)("div",Fe({id:"bwf_address_field_address","data-address-type":"address",className:"bwf_accordion bwf_address_sortable_area ui-sortable",ref:c.innerRef},c.droppableProps),t.map((function(e,t){return Object(r.createElement)(Ue,{key:"bwf-address-field-sort-".concat(t),data:e,id:e.key,index:t,setFieldId:u,setShowContent:b,changeVisibility:p,fieldId:o,showContent:f,changePlaceholder:m,changeLabel:d,changeRequired:O})})),a&&a.map((function(e,t){return Object(r.createElement)(ze,{key:"bwf-address-field-".concat(t),data:e,index:t,setFieldId:u,setShowContent:b,changeVisibility:p,fieldId:o,showContent:f,changePlaceholder:m,changeLabel:d,changeRequired:O,sortable:!1})})))})),Ge=function(e){var t=e.onCloseModal,n=e.addressType,a=e.addressData,c=e.onChange,i=Ae(Object(r.useState)([]),2),o=i[0],u=i[1],s=Ae(Object(r.useState)([]),2),f=s[0],b=s[1],d=Ae(Object(r.useState)(!1),2),m=d[0],p=d[1],y=function(){t()};Object(r.useEffect)((function(){u(a.filter((function(e){return!e.key.includes("same_as")}))),b(a.filter((function(e){return e.key.includes("same_as")})))}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:y,shouldCloseOnClickOutside:!1,isDismissible:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-edit-field-modal bwf-section-modal bwf-admin-modal-no-header",overlayClassName:"bwf-dragging-overlay"},Object(r.createElement)(Pe.a,{title:Object(r.createElement)(r.Fragment,null,Object(l.__)("Field","funnel-builder")," -"," ","".concat(n," Address")),onClose:y}),Object(r.createElement)("div",{className:"sections"},Object(r.createElement)("div",{className:"bwf_vue_forms"},Object(r.createElement)("div",{className:"bwf_without_form_generator "},Object(r.createElement)("div",{className:"bwf_billing"},Object(r.createElement)(qe,{onPopupClose:y,addressData:a,helperClass:"bwf-address-item__helper-class",onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;u((function(e){return Ce()(e,t,n)}))},items:o,setAddress:u,setLastItems:b,lastItems:f})),Object(r.createElement)("div",{className:"bwf-admin-modal-footer wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.Button,{onClick:y,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,isBusy:m,onClick:function(){p(!0),c([].concat(xe(o),xe(f)))}},Object(l.__)("Update","funnel-builder"))))))))},Ve=(n(423),function(e){var t=e.onRequestClose,n=e.desc,a=void 0===n?"":n;return Object(r.createElement)(O.Modal,{title:Object(l.__)("Alert!","funnel-builder"),className:"bwf-validation-modal bwf-admin-modal bwf-admin-modal-small bwf-c-s-delete-model",onRequestClose:t},Object(r.createElement)("div",{className:"bwf-validation-desc bwf-modal-error bwf-modal-content"},a),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.a,{isPrimary:!0,onClick:t},Object(l.__)("Close","funnel-builder"))))}),Je=n(292),He=n(22),Ke=n(54);function $e(){return($e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Qe=["product_switching","order_total"],Ze=function(e){var t=e.list,n=e.fieldIndex,a=e.sectionIndex,i=e.editField,u=e.onDeleteField,s=Object(o.b)("ck").isProFeatureLocked,f=We(Object(r.useState)({status:!1}),2),b=f[0],d=f[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Je.b,{draggableId:t.id?JSON.stringify(t.id):"field-list-".concat(n),key:t.id,index:n},(function(e){return Object(r.createElement)("div",$e({ref:e.innerRef,key:t.id},e.draggableProps,e.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui - sortable - handle bwf - width - auto",onClick:function(){s&&(null!=t&&t.is_pro||Qe.includes(t.id))?d({status:!0,feature:"product_switching"===t.id?Object(l.__)("Product Field","funnel-builder"):"order_total"===t.id?Object(l.__)("Order Total Field","funnel-builder"):Object(l.__)("Advanced Fields","funnel-builder"),proLink:Object(y.U)(["Form","Field","Section","Field","Upgrade","Modal"])}):i(t,a)}}),s&&((null==t?void 0:t.is_pro)||Qe.includes(t.id))&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==t?void 0:t.data_label),!t.hasOwnProperty("id")||"billing_email"===t.id||s&&(null!=t&&t.is_pro||Qe.includes(t.id))?Object(r.createElement)("span",{className:"bwf-ml-4"}):Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(e){u(t,a),e.stopPropagation()}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16})),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(l.__)("Click to edit. Drag to re-order.","funnel-builder")))})),b.status&&Object(r.createElement)(Ke.a,{isOpen:b.status,onRequestClose:function(){return d({status:!1})},modalContent:b,type:2,module:"ck"}))};var Xe=function(e){var t=e.data,n=e.sectionIndex,a=e.editField,c=e.onDeleteField;return Object(r.createElement)(Je.c,{droppableId:"droppableVM-".concat(t.id),type:"droppableVM",direction:"horizontal"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",{ref:e.innerRef,className:"bwf_template_field_container single_step ui-sortable"},t.hasOwnProperty("fields")&&Object(p.isArray)(t.fields)&&t.fields.length>0?null==t?void 0:t.fields.map((function(e,t){return Object(r.createElement)(Ze,{list:e,fieldIndex:t,sectionIndex:n,editField:a,onDeleteField:c,key:t})})):Object(r.createElement)("span",null,Object(l.__)("Drag new fields here to populate the section","funnel-builder"))),e.placeholder)}))};function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){return(tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.data,n=e.index,a=e.editSection,i=e.deleteSection,o=e.editField,u=e.onDeleteField,s=e.onDropFields,f=lt(Object(r.useState)(),2),b=f[0],d=f[1],O=lt(Object(r.useState)({}),2),y=O[0],v=O[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Je.b,{draggableId:(null==t?void 0:t.id)||"section-".concat(n),key:null==t?void 0:t.id,index:n},(function(e){return Object(r.createElement)("div",{key:null==t?void 0:t.id},Object(r.createElement)("div",tt({ref:e.innerRef},e.draggableProps,{key:n,className:"bwf_field_container ui-sortable-handle",onDrop:function(e){s(e,b)},onDragEnter:function(e){d(n)},onDragOver:function(e){e.preventDefault()}}),Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("span",e.dragHandleProps,Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-cursor-move"},Object(r.createElement)(c.a,{icon:"ul",size:"16"}))),Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("span",{className:"bwf-section-name"},null==t?void 0:t.name),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"-"),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},null==t?void 0:t.sub_heading)),Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){return a(t,n)}},Object(r.createElement)(c.a,{icon:"edit",color:"#82838E",size:16}))),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){var e,a,c;e=null==t?void 0:t.name,a=n,c={modalTitle:Object(l.__)("Remove Section","funnel-builder"),content:Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to remove ","funnel-builder"),Object(r.createElement)("b",null,e),Object(l.__)(". This action cannot be undone. Cancel to stop, Remove to proceed.","funnel-builder")),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0},v(rt(rt({},c),{},{onConfirm:function(){i(a),v({status:!1})}}))}},Object(r.createElement)(c.a,{icon:"trash",color:"#82838E",size:18})))),Object(r.createElement)(Xe,{data:t,sectionIndex:n,editField:o,onDeleteField:u}))))})),Object(r.createElement)(m.a,{isLoading:y.loading,successMessage:y.success,errorMessage:y.error,isOpen:y.status,autoHide:8e3,closeIcon:!0,content:y.content,confirmText:y.confirmText,confirmButtonText:y.confirmButtonText,confirmButtonClass:y.confirmButtonClass,cancelButtonText:y.cancelButtonText,onConfirm:y.onConfirm,onCancel:y.onCancel,modalTitle:y.modalTitle,disableConfirm:y.disableConfirm,onRequestClose:function(){return v({status:!1})}}))};function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(){return(ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function st(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yt=function(e,t,n){var r=Array.from(e),a=mt(r.splice(t,1),1)[0];return r.splice(n,0,a),r},vt=function(e){var t=e.step,n=e.fieldsStep,a=e.setIsAddSection,c=e.onDeleteField,i=e.deleteSection,o=e.editSection,u=e.editField,s=e.updateStepField,f=e.onDropFields,b=e.activeStep,d=n[Object(p.size)(n)-1];return Object(r.createElement)("div",{"data-slug":"third_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder third_step ui-sortable"},Object(r.createElement)(Je.a,{onDragEnd:function(e){var n=e.source,r=e.destination;if(e.destination)if("droppableStep"===e.type){var a=yt(t,e.source.index,e.destination.index);s(a)}else if("droppableVM"===e.type){var l,c=n.droppableId.substring(n.droppableId.indexOf("-")+1),i=r.droppableId.substring(r.droppableId.indexOf("-")+1),o=t.filter((function(e){return e.id===c})),u=t.filter((function(e){return e.id===i})),f=yt(null===(l=o[0])||void 0===l?void 0:l.fields,e.source.index,e.destination.index);if(c===i){var b=t.map((function(e){return e.id===c?bt(bt({},e),{},{fields:f}):e}));s(b)}else{var d,m,p=st(null===(d=o[0])||void 0===d?void 0:d.fields),O=st(null===(m=u[0])||void 0===m?void 0:m.fields),y=mt(p.splice(e.source.index,1),1)[0];O.splice(e.destination.index,0,y);var v=t.map((function(e){return e.id===c?bt(bt({},e),{},{fields:p}):e.id===i?bt(bt({},e),{},{fields:O}):e}));s(v)}}}},Object(r.createElement)(Je.c,{droppableId:"droppable",type:"droppableStep"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",ut({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return Object(r.createElement)(it,{data:e,key:t,index:t,editSection:o,deleteSection:i,editField:u,onDeleteField:c,onDropFields:f})}))),e.placeholder)})))),d===b&&Object(r.createElement)("div",{className:"bwf_form_note_sec bwf_field_container bwf-mb-16"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(l.__)("Payment Gateways","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("span",null,Object(l.__)("Note: Payment Information containing gateways will be automatically added to the end of order form.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)(O.Button,{isSecondary:!0,onClick:function(){return a(!0)}},Object(l.__)("Add New Section","funnel-builder"))))};function jt(){return(jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var gt=function(e){var t=e.onCloseModal,n=e.editData,a=e.editId,c=e.editSection,i=_t(Object(r.useState)({name:"",sub_heading:"",class:"",fields:[],id:""}),2),o=i[0],u=i[1],s=Object(r.useRef)(),f=_t(Object(r.useState)(!1),2),b=f[0],d=f[1];Object(r.useEffect)((function(){u(n)}),[n]);var m=function(){t()};Object(r.useEffect)((function(){s.current.focus()}),[]);var p=o;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:m,title:Object(l.__)("Edit Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(q.a,{validate:function(){return{}},onSubmitCallback:function(e){d(!0),c(e,a)},initialValues:p},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,jt({},t("name"),{label:Object(l.__)("Name","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()},ref:s}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,jt({},t("sub_heading"),{label:Object(l.__)("Sub Heading","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(O.TextControl,jt({},t("class"),{label:Object(l.__)("Classes","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(O.Button,{onClick:m,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,isBusy:b,onClick:n},Object(l.__)("Update","funnel-builder"))))}))))};function wt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var St=function(e){var t=e.selectors,n=void 0===t?[7,1,5]:t,a=e.sectionCount,l=void 0===a?3:a,c=e.staticSection,i=void 0===c||c,o=e.addSection,u=void 0===o||o,s=e.steps,f=void 0===s||s;return Object(r.createElement)("div",{className:"bwf-design-form"},Object(r.createElement)("div",{className:"bwf-form-title bwf-placeholder-temp bwf-h-28 bwf-w-180 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-form-description bwf-placeholder-temp bwf-h-20 bwf-w-400 bwf-mt-8"}),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},f?Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-240 bwf-h-30 bwf-rounded-3 bwf-border-1"}))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-20"}))),Object(r.createElement)("div",{className:"single_step_template"},wt(Array(l)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf_field_container",key:"bwf_field_container__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "})),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},wt(Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-drag-item-".concat(t)})}))))})),i&&Object(r.createElement)("div",{className:"bwf_field_container"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-16 "}))),u&&Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-36 bwf-rounded-3 bwf-border-1"})))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in bwf-h-30"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-40 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}))),n.map((function(e,t){return Object(r.createElement)("div",{className:"bwf_input_fields",key:"bwf_input_fields__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf_input_fields_list"},wt(Array(e)).map((function(e,n){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-selector-drag-item__placeholder-".concat(t,"-").concat(n)})})))))}))))),Object(r.createElement)("div",{className:"bwf_form_submit bwf-mt-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-36 bwf-rounded-3 bwf-border-1"})))},Nt=n(18),kt=n(127);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return Tt(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Tt(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Tt(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,Tt(f,"constructor",u),Tt(u,"constructor",o),o.displayName="GeneratorFunction",Tt(u,a,"GeneratorFunction"),Tt(f),Tt(f,a,"Generator"),Tt(f,r,(function(){return this})),Tt(f,"toString",(function(){return"[object Generator]"})),(Pt=function(){return{w:l,m:b}})()}function Tt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Tt=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){Tt(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function xt(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function At(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){xt(l,r,a,c,i,"next",e)}function i(e){xt(l,r,a,c,i,"throw",e)}c(void 0)}))}}function It(e){return function(e){if(Array.isArray(e))return Mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||Bt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){if(e){if("string"==typeof e)return Mt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(e,t):void 0}}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zt=function(e){var t=e.type,n=e.stepId,a=e.tab,i=e.offerId,u=Object(o.b)("ck").isProFeatureLocked,s=Object(o.c)().showSnackbar,f=Rt(Object(r.useState)(),2),b=f[0],O=f[1],_=Rt(Object(r.useState)(),2),h=_[0],w=_[1],E=Rt(Object(r.useState)(),2),S=E[0],N=E[1],k=Rt(Object(r.useState)(),2),C=k[0],P=k[1],T=Rt(Object(r.useState)(!1),2),x=T[0],A=T[1],I=Rt(Object(r.useState)(!1),2),D=I[0],F=I[1],L=Rt(Object(r.useState)(!1),2),R=L[0],B=L[1],M=Rt(Object(r.useState)(!1),2),z=M[0],U=M[1],q=Rt(Object(r.useState)(""),2),G=q[0],V=q[1],J=Rt(Object(r.useState)(!1),2),H=J[0],K=J[1],$=Rt(Object(r.useState)({}),2),W=$[0],Y=$[1],Z=Rt(Object(r.useState)({}),2),X=Z[0],ee=Z[1],ne=Rt(Object(r.useState)(""),2),re=ne[0],ae=ne[1],le=Rt(Object(r.useState)(["single_step"]),2),ce=le[0],ie=le[1],oe=Rt(Object(r.useState)("single_step"),2),ue=oe[0],fe=oe[1],be=Rt(Object(r.useState)([]),2),de=be[0],me=be[1],pe=Rt(Object(r.useState)([]),2),Oe=pe[0],ye=pe[1],ve=Rt(Object(r.useState)([]),2),je=ve[0],_e=ve[1],he=Rt(Object(r.useState)({}),2),ge=he[0],we=he[1],Se=Rt(Object(r.useState)(""),2),Ne=Se[0],ke=Se[1],Pe=Rt(Object(r.useState)(""),2),Te=Pe[0],xe=Pe[1],Ae=Rt(Object(r.useState)([]),2),Ie=Ae[0],De=Ae[1],Fe=Rt(Object(r.useState)([]),2),Le=Fe[0],Re=Fe[1],Be=Rt(Object(r.useState)([]),2),Me=Be[0],ze=Be[1],Ue=Rt(Object(r.useState)(!1),2),qe=Ue[0],Je=Ue[1],$e=Rt(Object(r.useState)(),2),We=$e[0],Ye=$e[1],Qe=Rt(Object(r.useState)(""),2),Ze=Qe[0],Xe=Qe[1],et=Rt(Object(r.useState)({status:!1}),2),tt=et[0],nt=et[1],rt=Rt(Object(r.useState)(!1),2),at=rt[0],lt=rt[1],ct=Rt(Object(r.useState)(!1),2),it=ct[0],ot=ct[1],ut=Rt(Object(r.useState)([]),2),st=ut[0],ft=ut[1],bt=Rt(Object(r.useState)(!1),2),dt=bt[0],mt=bt[1],pt=Object(r.useRef)(new AbortController),Ot=Object(r.useRef)(!0),yt=Object(g.a)(),jt=yt.getFormLoading,_t=yt.getFormData,ht=yt.getStep,wt=Object(j.a)(),Et=wt.fetchStepFields,Ct=wt.setFormFieldData,Tt=wt.setSaveDataValue,xt=wt.fetchStep,Dt=jt(),Lt=_t(t,n,a,i),Bt=ht(t,n,a,i).unSavedData,Mt=void 0!==Bt&&Bt;Object(r.useEffect)((function(){re&&(s(re),ae(""))}),[re]);var zt=Lt.dependency_messages,Ut=void 0===zt?[]:zt,qt=Lt.fields,Gt=void 0===qt?[]:qt,Vt=Lt.fields_data,Jt=void 0===Vt?{}:Vt,Ht=Lt.fields_types,Kt=void 0===Ht?[]:Ht,$t=Gt.active_fields,Wt=void 0===$t?[]:$t,Yt=Gt.steps,Qt=void 0===Yt?{}:Yt,Zt=Gt.product_fields,Xt=void 0===Zt?{}:Zt,en=Jt.basic,tn=Jt.advanced,nn=Jt.product,rn=Jt.third_party,an=Jt.address_order,ln=void 0===an?{}:an,cn=ln.address,on=void 0===cn?[]:cn,un=ln.shipping_address,sn=void 0===un?[]:un,fn=Xt.products,bn=void 0===fn?[]:fn,dn=Xt.default_products,mn=void 0===dn?"":dn,pn=Xt.settings,On=void 0===pn?{}:pn,yn=Xt.add_to_cart_setting,vn=void 0===yn?"":yn,jn=Gt.fieldsets,_n=void 0===jn?{}:jn;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(_n)){if(_n.hasOwnProperty("single_step")&&_n.single_step){var e=_n.single_step;me(e),De(e)}_n.hasOwnProperty("two_step")&&_n.two_step?(ye(_n.two_step),Re(_n.two_step)):(ye([]),Re([])),_n.hasOwnProperty("third_step")&&_n.third_step?(_e(_n.third_step),ze(_n.third_step)):(_e([]),ze([]))}}),[_n]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(Ut)){var e=Ut.map((function(e){return Ft(Ft({},e),{},{showDependency:!1})}));ft(e)}}),[Ut]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(_n)){var e=Object(p.cloneDeep)(Lt);e.fields.active_fields=hn(_n),Ct(t,n,a,i,e,{})}}),[Dt]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(Qt)){var e=["single_step"];Qt.hasOwnProperty("two_step")&&"yes"===Qt.two_step.active&&e.push("two_step"),e.includes("two_step")&&Qt.hasOwnProperty("third_step")&&"yes"===Qt.third_step.active&&e.push("third_step"),ie(e)}}),[Qt]),Object(r.useEffect)((function(){return(Object(p.isEmpty)(Lt)||Dt||Mt)&&Et(t,n,a,i,pt.current.signal),function(){Ot.current=!1,pt.current.abort()}}),[]);var hn=function(e){var t=[];e.hasOwnProperty("single_step")&&e.single_step.length>0&&e.single_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,It(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("two_step")&&e.two_step.length>0&&e.two_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,It(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("third_step")&&e.third_step.length>0&&e.third_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,It(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))}));var n=[].concat(t);return It(new Set(n))},gn=function(e){var r=tn.filter((function(t){return t.id!==e})),l=Object(p.cloneDeep)(Lt);l.fields_data.advanced=r,Ct(t,n,a,i,l)},wn=function(e){var t=0,n=0,r="";r=0===Object(p.size)(ce)||1==Object(p.size)(ce)?"single_step":2===Object(p.size)(ce)?"two_step":"third_step";var a=!1;return Object.values(e).every((function(e){return e.every((function(e){return e.fields.every((function(e){return"address"===e.id?(n=1,t=2,a=!0):"shipping_address"===e.id&&(t=1,n=2,a=!0),!0!==a})),!0!==a})),!0!==a})),{current_step:r,have_billing_address:Wt.includes("address")?"true":"false",have_shipping_address:Wt.includes("shipping_address")?"true":"false",have_coupon_field:Wt.includes("order_coupon")?"true":"false",have_shipping_method:Wt.includes("shipping_calculator")?"true":"false",enabled_product_switching:Wt.includes("product_switching")?"yes":"no",have_billing_address_index:n,have_shipping_address_index:t}},En=function(){var e=At(Pt().m((function e(){var r,c,o,u,s,f,b,m,O,v,j,_,h,g,w=arguments;return Pt().w((function(e){for(;;)switch(e.n){case 0:if(r=w.length>0&&void 0!==w[0]?w[0]:{},c=w.length>1?w[1]:void 0,o=w.length>2?w[2]:void 0,u=wn(r.hasOwnProperty("fieldsets")?r.fieldsets:_n),s={steps:Qt,fieldsets:r.hasOwnProperty("fieldsets")?r.fieldsets:_n,products:bn,address_order:r.hasOwnProperty("address_order")?r.address_order:ln,default_products:Object(p.get)(r,"product_fields.default_products",mn),product_settings:On,product_fields:r.hasOwnProperty("product_fields")?r.product_fields:Xt,current_step:u.current_step,have_billing_address:u.have_billing_address,have_shipping_address:u.have_shipping_address,have_coupon_field:u.have_coupon_field,have_shipping_method:u.have_shipping_method,enabled_product_switching:u.enabled_product_switching,have_billing_address_index:u.have_billing_address_index,have_shipping_address_index:u.have_shipping_address_index,active_fields:Wt},f=!1,b=!1,ce.includes("third_step")&&(O=0,null===(m=r.hasOwnProperty("fieldsets")?r.fieldsets:_n)||void 0===m||null===(m=m.two_step)||void 0===m||m.map((function(e){0===Object(p.size)(e.fields)&&0===O?f=!0:O+=1})),0===Object(p.size)(null==_n?void 0:_n.two_step)&&(f=!0)),ce.includes("two_step")&&(_=0,null===(v=r.hasOwnProperty("fieldsets")?r.fieldsets:_n)||void 0===v||null===(v=v.single_step)||void 0===v||v.map((function(e){0===Object(p.size)(e.fields)&&0===_?b=!0:_+=1})),0===Object(p.size)(null===(j=r.hasOwnProperty("fieldsets")?r.fieldsets:_n)||void 0===j?void 0:j.single_step)&&(b=!0)),h=!1,Wt.includes("billing_email")&&(h=!0),h){e.n=1;break}Je(!0),e.n=6;break;case 1:if(!b){e.n=2;break}ot(!0),e.n=6;break;case 2:if(!f){e.n=3;break}lt(!0),e.n=6;break;case 3:return e.p=3,e.n=4,d()({path:Object(y.y)("/funnel-checkout/".concat(n,"/form_fields")),method:"POST",data:s}).then((function(e){e.success?(Tt(!1),c?(gn(o),Y({loading:!1,status:!1})):Ct(t,n,a,i,{},{unSavedData:!1}),"checkout"===t&&xt(t,n,"optimizations",i),ae(Object(l.__)("Changes Saved","funnel-builder"))):ae(e.msg||e.message)}));case 4:e.n=6;break;case 5:e.p=5,g=e.v,console.log(g),ae(g.message);case 6:mt(!1);case 7:return e.a(2)}}),e,null,[[3,5]])})));return function(){return e.apply(this,arguments)}}(),Sn=function(e){var r=Object(p.cloneDeep)(Lt);switch(e){case"third_step":r.fields.current_step="two_step";break;case"two_step":r.fields.current_step="single_step"}r.fields.steps[e].active="no",delete r.fields.fieldsets[e],r.fields.active_fields=hn(r.fields.fieldsets),Ct(t,n,a,i,r,{unSavedData:!0})},Nn=function(e){var r=Object(p.cloneDeep)(Lt);r.fields.current_step=e,r.fields.steps[e].active="yes",Ct(t,n,a,i,r,{unSavedData:!0}),setTimeout((function(){return fe(e)}),100)},kn=function(e,t){var n=[];return e.map((function(e,r){r===t&&e.fields.map((function(e){return n.push(e.id)}))})),Wt.filter((function(e){return!n.includes(e)}))},Cn={wfacp_duplicate_billing_first_and_last_name:function(){var e={billing_first_name:Object(l.__)("Billing First Name","funnel-builder"),billing_last_name:Object(l.__)("Billing Last Name","funnel-builder"),billing_phone:Object(l.__)("Phone","funnel-builder")},t=Object.keys(e).filter((function(e){return Wt.includes(e)&&on.filter((function(t){return t.key===e})).map((function(e){return e.status})).includes(!0)}));if(!t.length)return!1;var n=t.map((function(t){return'"'.concat(e[t],'"')})),r=n.length>1?n.slice(0,-1).join(", ")+" "+Object(l.__)("and","funnel-builder")+" "+n.slice(-1):n.join(", ");return Object(l.sprintf)(/* translators: %1$s: field names, %2$s: singular/plural verb form (is/are) */
Object(l.__)('%1$s %2$s available individually and inside the "Billing Address". Please choose one location to keep them.',"funnel-builder"),r,Object(l._n)("field is","fields are",n.length,"funnel-builder"))}};Object(r.useEffect)((function(){if(st.length>0){var e=Object(p.cloneDeep)(st);e=e.map((function(e){if(e.hasOwnProperty("isRemoved")&&e.isRemoved)return e.showDependency=!1,e;if(e.hasOwnProperty("ids")&&Array.isArray(e.ids))return Wt.filter((function(t){return e.ids.includes(t)})).length>0?e.showDependency=!1:e.showDependency=!0,e;if(e.hasOwnProperty("reverse_check")&&e.reverse_check&&e.hasOwnProperty("id")&&""!==e.id)return Wt.includes(e.id)?e.showDependency=!0:e.showDependency=!1,e;if(e.hasOwnProperty("call_back")&&Cn.hasOwnProperty(e.call_back)){var t=Cn[e.call_back]();return t?(e.showDependency=!0,"string"==typeof t&&(e.message=t)):e.showDependency=!1,e}return e.hasOwnProperty("show")&&e.show&&(e.showDependency=!0),e})),ft(e)}}),[Wt,on,Qt,Dt,ce]);var Pn=function(){var e=At(Pt().m((function e(t){var r;return Pt().w((function(e){for(;;)switch(e.n){case 0:r={},t.hasOwnProperty("message_id")&&(r.message_id=t.message_id),r.message_type=t.hasOwnProperty("is_global")&&!0===t.is_global?"global":"self";try{d()({path:Object(y.y)("/funnel-checkout/".concat(n,"/form_fields/hide-message")),method:"POST",data:r}).then((function(e){if(e.success){if(r.hasOwnProperty("message_id")){var t=Object(p.cloneDeep)(st);t=t.map((function(e){return e.hasOwnProperty("message_id")&&r.message_id===e.message_id&&(e.showDependency=!1,e.isRemoved=!0),e})),ft(t)}}else ae(e.msg||e.message)}))}catch(e){console.log(e.message)}case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tn=function(){nt({status:!0,feature:Object(l.__)("Multistep Checkout","funnel-builder"),proLink:Object(y.U)(["Form","Field","Section","Field","Upgrade","Modal"])})};return Dt?Object(r.createElement)(St,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-title"},Object(l.__)("Checkout Form Fields","funnel-builder")),Object(r.createElement)("style",null,".bwfan__step-header .bwf-step-menu-header{\n\t\tmargin-bottom: 12px !important;\n\t   }"),Object(r.createElement)("div",{className:" bwf_w_full"},st.map((function(e,t){if(e.showDependency)return Object(r.createElement)("div",{key:t,className:"bwf-form-field-warning ".concat(e.dismissible?"":"bwf-remove-icon")},Object(r.createElement)("div",{className:"bwf-warning-text"},Object(r.createElement)("div",{className:"bwf-warning-icon"},Object(r.createElement)(c.a,{icon:"info",width:20,height:20})),Object(r.createElement)("div",{className:"bwf-warning-content",dangerouslySetInnerHTML:{__html:e.message}}),e.dismissible&&Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){Pn(e)}},Object(r.createElement)(c.a,{icon:"close",width:16,height:16}))))}))),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_form_field_header"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf_step_actions"},Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){return fe("single_step")}},Object(r.createElement)("div",{"data-slug":"single_step",className:"bwf_template_tabs ".concat("single_step"===ue&&"bwf_active_tabs"," ")},Object(r.createElement)("span",null,Object(l.__)("Step 1","funnel-builder")))),(null==ce?void 0:ce.length)>1&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){u?Tn():fe("two_step")}},Object(r.createElement)("div",{"data-slug":"two_step",className:"bwf_template_tabs ".concat("two_step"===ue&&"bwf_active_tabs"," ")},u&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(l.__)("Step 2","funnel-builder")),!u&&2===(null==ce?void 0:ce.length)&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),Sn("two_step"),setTimeout((function(){fe("single_step")}),100)}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16})))),(null==ce?void 0:ce.length)>2&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){u?Tn():fe("third_step")}},Object(r.createElement)("div",{"data-slug":"third_step",className:"bwf_template_tabs ".concat("third_step"===ue&&"bwf_active_tabs"," ")},u&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(l.__)("Step 3","funnel-builder")),!u&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),Sn("third_step"),setTimeout((function(){fe("two_step")}),100)}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16}))))),(null==ce?void 0:ce.length)<3&&Object(r.createElement)("div",{className:"bwf_add_new_step"},Object(r.createElement)("div",{className:"bwf_step bwf_modal_open bwf_step_add_step_btn",onClick:function(){u?Tn():1==ce.length?Nn("two_step"):2==ce.length&&Nn("third_step")}},u&&Object(r.createElement)(He.b,{className:"size-16"})," ",Object(r.createElement)("span",null,!u&&"+"," ",Object(l.__)("Add New Step","funnel-builder")))))),Object(r.createElement)(v.a,{isPrimary:!0,onClick:function(){mt(!0),En()},isBusy:dt,disabled:dt},Object(l.__)("Save","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_p20_noside bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf_wrap_inner_fields bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container bwf-position-relative"},u&&"single_step"!==ue&&Object(r.createElement)(kt.b,{modalContent:{feature:Object(l.__)("Multistep Checkout","funnel-builder"),proLink:Object(y.U)(["Form","Field","MultiStep","Upgrade","Modal"])},content:Object(l.__)("We're sorry, this feature is not available on your plan. Learn more about Multistep Checkout.","funnel-builder")}),Object(r.createElement)("div",null,Object(r.createElement)(vt,{activeStep:ue,step:"single_step"==ue?de:"two_step"==ue?Oe:je,fields:"single_step"==ue?Ie:"two_step"==ue?Le:Me,fieldsStep:ce,setIsAddSection:F,helperClass:"bwf-section-item__helper-class",onSortEnd:function(e){var r=e.oldIndex,l=e.newIndex;"single_step"==ue?(me((function(e){return Ce()(e,r,l)})),De((function(e){return Ce()(e,r,l)}))):"two_step"==ue?(ye((function(e){return Ce()(e,r,l)})),Re((function(e){return Ce()(e,r,l)}))):(_e((function(e){return Ce()(e,r,l)})),ze((function(e){return Ce()(e,r,l)})));var c=Object(p.cloneDeep)(Lt);"single_step"===ue?c.fields.fieldsets.single_step=Ce()(c.fields.fieldsets.single_step,r,l):"two_step"===ue?c.fields.fieldsets.two_step=Ce()(c.fields.fieldsets.two_step,r,l):"third_step"===ue&&(c.fields.fieldsets.third_step=Ce()(c.fields.fieldsets.third_step,r,l)),c.fields.active_fields=hn(c.fields.fieldsets),Ct(t,n,a,i,c,{unSavedData:!0})},onDeleteField:function(e,r){var l,c=Object(p.cloneDeep)(Lt);if(c.fields.active_fields=c.fields.active_fields.filter((function(t){if(t!=e.id)return t})),"single_step"==ue)Ie[r].fields=null===(l=Ie[r])||void 0===l||null===(l=l.fields)||void 0===l?void 0:l.filter((function(t){return t.id!=e.id})),c.fields.fieldsets.single_step=JSON.parse(JSON.stringify(Ie));else if("two_step"==ue){var o;Le[r].fields=null===(o=Le[r])||void 0===o||null===(o=o.fields)||void 0===o?void 0:o.filter((function(t){return t.id!=e.id})),c.fields.fieldsets.two_step=JSON.parse(JSON.stringify(Le))}else if("third_step"==ue){var u;Me[r].fields=null===(u=Me[r])||void 0===u||null===(u=u.fields)||void 0===u?void 0:u.filter((function(t){return t.id!=e.id})),c.fields.fieldsets.third_step=JSON.parse(JSON.stringify(Me))}Ct(t,n,a,i,c,{unSavedData:!0})},deleteSection:function(e){var r=Object(p.cloneDeep)(Lt),l=[];if("single_step"==ue){var c=de.filter((function(t,n){return n!==e}));r.fields.fieldsets.single_step=JSON.parse(JSON.stringify(c)),l=kn(de,e)}else if("two_step"==ue){var o=Oe.filter((function(t,n){return n!==e}));r.fields.fieldsets.two_step=JSON.parse(JSON.stringify(o)),l=kn(Oe,e)}else{var u=je.filter((function(t,n){return n!==e}));r.fields.fieldsets.third_step=JSON.parse(JSON.stringify(u)),l=kn(je,e)}r.fields.active_fields=l,Ct(t,n,a,i,r,{unSavedData:!0})},editSection:function(e,t){we(e),Xe(!0),ke(t)},editField:function(e,t){ee(e),"product_switching"===e.id?U(!0):"address"===e.id?(V("Billing"),K(!0)):"shipping_address"===e.id?(V("Shipping"),K(!0)):"product_switching"!==e.id&&"wc_advanced_order_field"!==e.id&&(B(!0),Ye(t))},updateStepField:function(e){var r=Object(p.cloneDeep)(Lt);"single_step"===ue?(r.fields.fieldsets.single_step=e,me(e),De(e)):"two_step"===ue?(r.fields.fieldsets.two_step=e,ye(e),Re(e)):"third_step"===ue&&(r.fields.fieldsets.third_step=e,_e(e),ze(e)),r.fields.active_fields=hn(r.fields.fieldsets),Ct(t,n,a,i,r)},onDropFields:function(e,r){var l=Object(p.cloneDeep)(Lt);if("single_step"===ue){var c;if("product"===Te)null===(c=de[r])||void 0===c||c.fields.push(S);else if("advance"===Te){var o;null===(o=de[r])||void 0===o||o.fields.push(b)}else if("basic"===Te){var u;null===(u=de[r])||void 0===u||u.fields.push(h)}else if("third_party"===Te){var s;null===(s=de[r])||void 0===s||s.fields.push(C)}l.fields.fieldsets.single_step=JSON.parse(JSON.stringify(de))}else if("two_step"===ue){var f;if("product"==Te)null===(f=Oe[r])||void 0===f||f.fields.push(S);else if("advance"===Te){var d;null===(d=Oe[r])||void 0===d||d.fields.push(b)}else if("basic"===Te){var m;null===(m=Oe[r])||void 0===m||m.fields.push(h)}else if("third_party"===Te){var O;null===(O=Oe[r])||void 0===O||O.fields.push(C)}l.fields.fieldsets.two_step=JSON.parse(JSON.stringify(Oe))}else if("third_step"===ue){var y;if("product"==Te)null===(y=je[r])||void 0===y||y.fields.push(S);else if("advance"===Te){var v;null===(v=je[r])||void 0===v||v.fields.push(b)}else if("basic"===Te){var j;null===(j=je[r])||void 0===j||j.fields.push(h)}else if("third_party"===Te){var _;null===(_=je[r])||void 0===_||_.fields.push(C)}l.fields.fieldsets.third_step=JSON.parse(JSON.stringify(je))}l.fields.active_fields=hn(l.fields.fieldsets),Ct(t,n,a,i,l,{unSavedData:!0})}}))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(l.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=en[n];null!=Wt&&Wt.includes(t.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(e){return n=t,xe("basic"),void w(n);var n},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in en)t();return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=nn[n];null!=Wt&&Wt.includes(t.id)||u&&t.is_pro?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&t.is_pro&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(e){return n=t,xe("product"),void N(n);var n},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in nn)t();return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t={a:0,b:0},a=function(){var a=tn[i];Object(p.isEmpty)(a.label)||(null!=Wt&&Wt.includes(a.id.toString())||u&&a.is_pro?(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id+t.a.toString()},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&a.is_pro&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==a?void 0:a.label))))),t.a++):(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id+t.b.toString()},Object(r.createElement)("div",{onDragStart:function(e){return t=a,xe("advance"),void O(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text bwf-white-break-space"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==a?void 0:a.label)),a.allow_delete&&Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(l.__)("Delete Field","funnel-builder"),content:Object(l.sprintf)(Object(l.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),a.label),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};Y(Ft(Ft({},e),{},{onConfirm:function(){!function(e,t){Y(Ft(Ft({},t),{},{disableConfirm:!0}));try{d()({path:Object(y.y)("/funnel-checkout/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:{section:"advanced",index:e}}).then((function(t){t.success?(gn(e),En({},!0,e)):ae(t.msg||t.message)}))}catch(e){Y({status:!0,error:e.message||e.msg})}}(a.id,e)}}))}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16}))))),t.b++))};for(var i in tn)a();return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields bwf-third-party"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title bwf-flex bwf--space-between "},Object(r.createElement)("div",{className:"bwf-flex bwf--align-end bwf--g8"},Object(r.createElement)("b",null,Object(l.__)("Third Party Addon Field","funnel-builder")))),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=rn[n];null!=Wt&&Wt.includes(t.id)||u&&"yes"===t.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&"yes"===t.is_locked&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(e){return n=t,xe("third_party"),void P(n);var n},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in rn)t();return e}()),Object(r.createElement)("div",{className:"bwf-description bwf-text-style-3 bwf-color-normal"},Object(r.createElement)("div",null,Object(l.__)("Drag this field to show the advanced fields registered by other plugins in case they are missing from the checkout.","funnel-builder")),Object(r.createElement)("div",null,Object(r.createElement)("span",null,Object(l.__)("Still not seeing field on the checkout?","funnel-builder")),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Third+Party+Checkout+Field&utm_campaign=FB+Lite+Plugin",target:"_blank"},Object(l.__)(" Contact Support","funnel-builder"))))))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(v.a,{isSmall:!0,isSecondary:!0,onClick:function(){u?nt({status:!0,feature:Object(l.__)("Adding Field","funnel-builder"),content:{},proLink:Object(y.U)(["Form","Field","New","Field","Upgrade","Modal"])}):A(!0)}},u?Object(r.createElement)(c.a,{icon:"king",size:"20",color:Nt.BLUE_BASE}):""," ",Object(l.__)("Add New Field","funnel-builder"))))))))),x&&Object(r.createElement)(Q,{fieldTypes:Kt,onCloseModal:function(){A(!1)},onSuccess:function(e){A(!1);var r=Object(p.cloneDeep)(Lt);r.fields_data.advanced=[].concat(It(tn),[e]),Ct(t,n,a,i,r)},SnackBarMsg:function(e){ae(e)}}),D&&Object(r.createElement)(te,{onCloseModal:function(){F(!1)},addedSection:function(){var e=At(Pt().m((function e(r){var l;return Pt().w((function(e){for(;;)switch(e.n){case 0:l=Object(p.cloneDeep)(Lt),"single_step"===ue?l.fields.fieldsets.single_step=[].concat(It(de),[r]):"two_step"===ue?l.fields.fieldsets.two_step=[].concat(It(Oe),[r]):"third_step"===ue&&(l.fields.fieldsets.third_step=[].concat(It(je),[r])),Ct(t,n,a,i,l,{unSavedData:!0}),F(!1);case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Ze&&Object(r.createElement)(gt,{onCloseModal:function(){Xe(!1)},editId:Ne,editData:ge,editSection:function(){var e=At(Pt().m((function e(r,l){var c,o,u,s;return Pt().w((function(e){for(;;)switch(e.n){case 0:c=Object(p.cloneDeep)(Lt),"single_step"===ue?(o=de.map((function(e,t){return t==l?r:e})),c.fields.fieldsets.single_step=JSON.parse(JSON.stringify(o))):"two_step"===ue?(u=Oe.map((function(e,t){return t===l?r:e})),c.fields.fieldsets.two_step=JSON.parse(JSON.stringify(u))):"third_step"===ue&&(s=je.map((function(e,t){return t==l?r:e})),c.fields.fieldsets.third_step=JSON.parse(JSON.stringify(s))),Ct(t,n,a,i,c,{unSavedData:!0}),Xe(!1);case 1:return e.a(2)}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),R&&Object(r.createElement)(se,{onCloseModal:function(){B(!1)},updated:function(e){var r=Object(p.cloneDeep)(Lt);r.fields=e,Ct(t,n,a,i,r),B(!1),ae(Object(l.__)("Changes Saved","funnel-builder"))},updatedField:X,fields:Gt,activeStep:ue,updatedSectionId:We,SnackBarMsg:function(e){ae(e)}}),z&&Object(r.createElement)(Ee,{onCloseModal:function(){U(!1)},productData:Xt,addToCartSettings:vn,onChange:function(){var e=At(Pt().m((function e(r){var l;return Pt().w((function(e){for(;;)switch(e.n){case 0:return(l=Object(p.cloneDeep)(Lt)).fields.product_fields=Ft(Ft({},l.fields.product_fields),r),Ct(t,n,a,i,l,{unSavedData:!0}),e.n=1,En({product_fields:l.fields.product_fields});case 1:U(!1);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()}),H&&Object(r.createElement)(Ge,{onCloseModal:function(){K(!1)},addressType:G,addressData:"Billing"===G?on:sn,onChange:function(){var e=At(Pt().m((function e(r){var l;return Pt().w((function(e){for(;;)switch(e.n){case 0:return l=Object(p.cloneDeep)(Lt),"Billing"===G?l.fields_data.address_order.address=JSON.parse(JSON.stringify(r)):l.fields_data.address_order.shipping_address=JSON.parse(JSON.stringify(r)),Ct(t,n,a,i,l),e.n=1,En({address_order:l.fields_data.address_order});case 1:K(!1);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:W.loading,successMessage:W.success,errorMessage:W.error,isOpen:W.status,autoHide:8e3,closeIcon:!0,content:W.content,confirmText:W.confirmText,confirmButtonText:W.confirmButtonText,confirmButtonClass:W.confirmButtonClass,cancelButtonText:W.cancelButtonText,onConfirm:W.onConfirm,onCancel:W.onCancel,modalTitle:W.modalTitle,disableConfirm:W.disableConfirm,onRequestClose:function(){return Y({status:!1})}}),qe&&Object(r.createElement)(Ve,{desc:Object(l.__)("Billing Email is required for processing payment","funnel-builder"),onRequestClose:function(){Je(!1),Tt(!1)}}),at&&Object(r.createElement)(Ve,{desc:Object(l.__)("Step 2 can't be blank. Add a few fields or remove the step and save again.","funnel-builder"),onRequestClose:function(){lt(!1),Tt(!1)}}),it&&Object(r.createElement)(Ve,{desc:Object(l.__)("Step 1 can't be blank. Add a few fields and save again.","funnel-builder"),onRequestClose:function(){ot(!1),Tt(!1)}}),tt.status&&Object(r.createElement)(Ke.a,{isOpen:tt.status,onRequestClose:function(){return nt({status:!1})},modalContent:tt,type:2,module:"ck"})))},Ut=(n(327),n(291));function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(){return(Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Wt=function(e){var t=e.onCloseModal,n=e.onSuccess,a=e.SnackBarMsg,c=e.stepId,i=Kt(Object(r.useState)(!1),2),o=i[0],u=i[1],s=Kt(Object(r.useState)("text"),2),f=s[0],b=s[1],m=function(){t()},p=Kt(Object(r.useState)({field_type:"text",label:"",placeholder:"",default:"",required:!1,options:"",radio_alignment:"horizontal",section_type:"advanced",enable_time:"false",preferred_time_format:"",show_custom_field_at_thankyou:"false",show_custom_field_at_email:"false",width:""}),2),j=p[0],_=p[1];Object(r.useEffect)((function(){_((function(e){return Jt(Jt({},e),{},{field_type:f,default:"checkbox"===f?"1":""})}))}),[f]);var h=j;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:m,title:Object(l.__)("Add Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-optin-form-modal"},Object(r.createElement)(q.a,{validate:function(e){var t={};return""===e.label.trim()&&(t.label=Object(l.__)("Label is required","funnel-builder")),e.label||(t.label=Object(l.__)("Label is required","funnel-builder")),["radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(l.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){u(!0);try{var t='{"section":"advanced","fields":'.concat(JSON.stringify(e),"}");d()({path:Object(y.y)("/funnel-optin/".concat(c,"/form_fields/add_field")),method:"POST",data:JSON.parse(t)}).then((function(e){e.success?(u(!1),n(e.data)):(u(!1),a(Object(l.__)("Something went wrong, Please contact to support team","funnel-builder")))}))}catch(e){u(!1),a(e.msg||e.message)}},initialValues:h,onChange:function(e,t){b(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,c=e.touched,i=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(G.b,Gt({},t("field_type"),{options:[{label:Object(l.__)("Text","funnel-builder"),value:"text",key:"text"},{label:Object(l.__)("Radio","funnel-builder"),value:"radio",key:"radio"},{label:Object(l.__)("HTML","funnel-builder"),value:"wfop_wysiwyg",key:"wfop_wysiwyg"},{label:Object(l.__)("Select","funnel-builder"),value:"select",key:"select"},{label:Object(l.__)("Textarea","funnel-builder"),value:"textarea",key:"textarea"},{label:Object(l.__)("Checkbox","funnel-builder"),value:"checkbox",key:"checkbox"},{label:Object(l.__)("Hidden","funnel-builder"),value:"hidden",key:"hidden"}]})))),["text","radio","wfop_wysiwyg","select","textarea","checkbox","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Gt({},t("label"),{placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})),c.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["text","select","textarea"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Gt({},t("placeholder"),{label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["text","radio","select","textarea","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Gt({},t("default"),{label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(G.b,Gt({options:[{label:Object(l.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(l.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&i()}})))),["radio","select"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(c.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Gt({placeholder:Object(l.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&i()}})),c.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(l.__)("This is a required field","funnel-builder")))),["radio"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-modal-radio"},Object(r.createElement)(Ut.a,Gt({options:[{label:Object(l.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(l.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["text","radio","select","textarea","checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,Gt({},t("required"),{label:Object(l.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.a,{onClick:m,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:i,isBusy:o,disabled:o},Object(l.__)("Add","funnel-builder"))))}))))};function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(){return(Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){en(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function en(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Yt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rn=function(e){var t=e.onCloseModal,n=e.updatedField,a=e.fields,i=e.updated,o=e.SnackBarMsg,u=e.stepId,s=tn(Object(r.useState)(!1),2),f=s[0],b=s[1],m=tn(Object(r.useState)(n),2),p=m[0],j=m[1],_=function(){t()};Object(r.useEffect)((function(){switch(p.required){case"1":case"true":j((function(e){return Xt(Xt({},e),{},{required:!0})}));break;case"0":case"false":j((function(e){return Xt(Xt({},e),{},{required:!1})}))}switch(p.phone_validation){case"1":case"true":j((function(e){return Xt(Xt({},e),{},{phone_validation:!0})}));break;case"0":case"false":j((function(e){return Xt(Xt({},e),{},{phone_validation:!1})}))}}),[p]);var h=p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.Modal,{onRequestClose:_,isDismissible:!1,className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-update-field-modal bwf-optin-form-modal bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1},Object(r.createElement)(q.a,{validate:function(e){var t={};return["radios","radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(l.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){!function(e){b(!0);var t=a.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(y.y)("/funnel-optin/".concat(u,"/form_fields")),method:"POST",data:t}).then((function(e){e.success?(b(!1),i(t)):o(Object(l.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){o(e.message||e.msg)}}(e)},initialValues:h},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,i=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label),Object(r.createElement)("span",null,"(",Object(l.__)("Field Type : ","funnel-builder")," ",null==n?void 0:n.type,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label)),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:_},Object(r.createElement)(c.a,{icon:"close",size:20}))),["text","radios","radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Qt({},t("label"),{label:Object(l.__)("Label","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})),("wfop_wysiwyg"===n.type||"html"===n.type)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(l.__)("This label is for admin purpose only, won't appear on the optin form.","funnel-builder")))))),["text","select","textarea","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Qt({label:Object(l.__)("Placeholder","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder")},t("placeholder"),{onKeyPress:function(e){"Enter"===e.key&&o()}})))),["text","radios","radio","select","textarea","hidden","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Qt({},t("default"),{label:Object(l.__)("Default","funnel-builder"),placeholder:Object(l.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})))),["checkbox"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(G.b,Qt({},t("default"),{options:[{label:Object(l.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(l.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]})))),["radios","select","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(l.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.TextControl,Qt({placeholder:Object(l.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&o()}})),i.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["radios","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(l.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-form-radio"},Object(r.createElement)(Ut.a,Qt({options:[{label:Object(l.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(l.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["wfop_wysiwyg","html"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field field-input"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ne.a,Qt({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["text","radios","radio","select","textarea","checkbox","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,Qt({},t("required"),{label:Object(l.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(O.ToggleControl,Qt({},t("phone_validation"),{label:Object(l.__)("Enable Validation","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:ve()("bwf-form-buttons",{wf_funnel_right_align:!Object(l.isRTL)(),wf_funnel_left_align:Object(l.isRTL)()})},Object(r.createElement)(v.a,{onClick:_,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:o,isBusy:f,disabled:f},Object(l.__)("Update","funnel-builder"))))}))))};function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(){return(ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==an(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||bn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){if(e){if("string"==typeof e)return dn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var mn=function(e){var t=e.type,n=e.stepId,a=e.tab,i=e.offerId,u=Object(o.b)().isProFeatureLocked,s=Object(o.c)().showSnackbar,f=fn(Object(r.useState)([]),2),b=f[0],_=f[1],h=fn(Object(r.useState)(),2),w=h[0],E=h[1],S=fn(Object(r.useState)(!1),2),N=S[0],k=S[1],C=fn(Object(r.useState)(!1),2),P=C[0],T=C[1],x=fn(Object(r.useState)({}),2),A=x[0],I=x[1],D=fn(Object(r.useState)({}),2),F=D[0],L=D[1],R=fn(Object(r.useState)(""),2),B=R[0],M=R[1],z=fn(Object(r.useState)(!1),2),U=z[0],q=z[1],G=fn(Object(r.useState)(!1),2),V=G[0],J=G[1],H=fn(Object(r.useState)({status:!1}),2),K=H[0],$=H[1],W=Object(g.a)(),Y=W.getLoading,Q=W.getFormLoading,Z=W.getFormData,X=W.getStep,ee=Object(j.a)(),te=ee.fetchStepFields,ne=ee.setFormFieldData,re=ee.setSaveDataValue,ae=Y(),le=Q(),ce=Z(t,n,a,i),ie=X(t,n,a,i).unSavedData,oe=void 0!==ie&&ie,ue=ce.fields,se=void 0===ue?[]:ue,fe=ce.fields_data,be=void 0===fe?{}:fe,de=be.basic,me=void 0===de?[]:de,pe=be.advanced,Oe=void 0===pe?[]:pe,ye=Oe.length>0;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(se)&&se.hasOwnProperty("single_step")&&se.single_step){var e=se.single_step[0].fields;_(e)}}),[se]),Object(r.useEffect)((function(){B&&(s(B),M(""))}),[B]);var ve=Object(r.useRef)(new AbortController),je=function(e){E(e)};Object(r.useEffect)((function(){return(Object(p.isEmpty)(ce)&&!ae||oe)&&te(t,n,a,i,ve.current.signal),function(){ve.current.abort()}}),[]);var _e=null==b?void 0:b.map((function(e){return null==e?void 0:e.id})),he=function(e){var r=Oe.filter((function(t){return t.id!==e})),l=Object(p.cloneDeep)(ce);l.fields_data.advanced=r,ne(t,n,a,i,l)},ge=function(e,r,c){var o=!1;if(b.map((function(e){"wfop_optin_email"===e.id&&(o=!0)})),!o&&c)q(!0),J(!1);else try{d()({path:Object(y.y)("/funnel-optin/".concat(n,"/form_fields")),method:"POST",data:b}).then((function(c){if(c.success){if(re(!1),e)he(r),I({loading:!1,status:!1});else{var o=Object(p.cloneDeep)(ce);ne(t,n,a,i,o,{unSavedData:!1})}M(Object(l.__)("Changes Saved","funnel-builder")),J(!1)}else M(c.msg||c.message)}))}catch(e){console.log(e),M(e.message)}};return le?Object(r.createElement)(St,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-header"},Object(r.createElement)("span",{className:"bwf-form-title "},Object(l.__)("Optin Form Fields","funnel-builder")),Object(r.createElement)(v.a,{isPrimary:!0,onClick:function(){J(!0),ge("","",!0)},isBusy:V,disabled:V},Object(l.__)("Save","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_layout_container"},Object(r.createElement)("div",{className:"bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{"data-slug":"single_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder single_step"},Object(r.createElement)("div",{className:"bwf_field_container","step-name":"single_step"},Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(l.__)("Fields","funnel-builder"))),Object(r.createElement)("div",null)),Object(r.createElement)(Je.a,{onDragEnd:function(e){var r=e.source,l=e.destination;if(e.destination){var c=function(e,t,n){var r=Array.from(e),a=fn(r.splice(t,1),1)[0];return r.splice(n,0,a),r}(b,r.index,l.index),o=Object(p.cloneDeep)(ce);o.fields.single_step[0].fields=c,ne(t,n,a,i,o)}}},Object(r.createElement)(Je.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return Object(r.createElement)("div",ln({ref:e.innerRef},e.droppableProps,{className:"bwf_template_field_container single_step ui-sortable",onDrop:function(e){!function(e){e.preventDefault();var r=Object(p.cloneDeep)(ce);r.fields.single_step[0].fields=Object(p.cloneDeep)([].concat(sn(b),[w])),ne(t,n,a,i,r,{unSavedData:!0})}(e)},onDragOver:function(e){e.preventDefault()}}),null==b?void 0:b.map((function(e,o){return Object(r.createElement)(Je.b,{key:e.id,draggableId:e.id||"field-".concat(o),index:o},(function(o,u){return Object(r.createElement)("div",ln({ref:o.innerRef},o.draggableProps,o.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui-sortable-handle",onClick:function(){L(e),T(!0)}}),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(l.__)("Click to edit. Drag to re-order.","funnel-builder")),Object(r.createElement)("span",null,Object(l.__)(null==e?void 0:e.label,"funnel-builder")),Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(r){!function(e){var r=Object(p.cloneDeep)(ce),l=b.filter((function(t){return t.label!==e.label}));r.fields.single_step[0].fields=Object(p.cloneDeep)(l),ne(t,n,a,i,r,{unSavedData:!0})}(e),r.stopPropagation()}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:12,height:12})))}))})),e.placeholder)})))))))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in"},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(l.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=me[n];_e.includes(t.id)||u&&"yes"===t.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf-cursor-pointer bwf_input_field_place_holder"},u&&"yes"===t.is_locked&&Object(r.createElement)(He.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(){return je(t)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style bwf-cursor-pointer"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in me)t();return e}()))),ye&&Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(l.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_advanced_container"},function(){var e=[],t=function(){var t=Oe[a];_e.includes(t.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder bwf-cursor-pointer"},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(){return je(t)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize bwf-white-break-space"},null==t?void 0:t.label)),Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(l.__)("Delete Field","funnel-builder"),content:Object(l.sprintf)(Object(l.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),t.label),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};I(on(on({},e),{},{onConfirm:function(){!function(e,t){try{I(on(on({},t),{},{disableConfirm:!0,confirmButtonText:Object(l.__)("Deleting")}));var r='{"section":"advanced","index":"'.concat(e,'"}');d()({path:Object(y.y)("/funnel-optin/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:JSON.parse(r)}).then((function(t){t.success?(he(e),ge(!0,e)):M(t.msg||t.message)}))}catch(e){I({status:!0,error:e.message||e.msg})}}(t.id,e)}}))}},Object(r.createElement)(c.a,{icon:"dismiss-circle",width:16,height:16})))))};for(var a in Oe)t();return e}())))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(O.Button,{isSecondary:!0,isSmall:!0,onClick:function(){u?$({status:!0,title:Object(l.__)("Add New Form Field is a Pro Feature","funnel-builder"),content:Object(l.__)("We're sorry, the Add New Form Field is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),feature:Object(l.__)("Adding Field","funnel-builder"),proLabel:Object(l.__)("Upgrade to PRO Now","funnel-builder"),proLink:Object(y.U)([t,"Form","New","Field","Upgrade","Modal"])}):k(!0)}},u?Object(r.createElement)(c.a,{icon:"king",size:16,color:"#0073aa"}):""," ",Object(l.__)("Add New Field","funnel-builder")))))))),N&&Object(r.createElement)(Wt,{onCloseModal:function(){k(!1)},onSuccess:function(e){k(!1);var r=Object(p.cloneDeep)(ce);r.fields_data.advanced=[].concat(sn(Oe),[e]),ne(t,n,a,i,r),M(Object(l.__)("Changes Saved","funnel-builder"))},SnackBarMsg:function(e){M(e)},stepId:n}),P&&Object(r.createElement)(rn,{onCloseModal:function(){T(!1)},updated:function(e){var r=Object(p.cloneDeep)(ce);r.fields.single_step[0].fields=e,ne(t,n,a,i,r),T(!1),M(Object(l.__)("Changes Saved","funnel-builder"))},updatedField:F,fields:b,SnackBarMsg:function(e){M(e)},stepId:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:A.loading,successMessage:A.success,errorMessage:A.error,isOpen:A.status,autoHide:8e3,closeIcon:!0,content:A.content,confirmText:A.confirmText,confirmButtonText:A.confirmButtonText,confirmButtonClass:A.confirmButtonClass,cancelButtonText:A.cancelButtonText,onConfirm:A.onConfirm,onCancel:A.onCancel,modalTitle:A.modalTitle,disableConfirm:A.disableConfirm,onRequestClose:function(){return I({status:!1})}}),U&&Object(r.createElement)(Ve,{desc:Object(l.__)("Optin Email is required for optin form","funnel-builder"),onRequestClose:function(){return q(!1)}}),K.status&&Object(r.createElement)(Ke.a,{isOpen:K.status,onRequestClose:function(){return $({status:!1})},modalContent:K})))},pn=n(392),On=n(377),yn=n(317),vn=n(23),jn=(n(424),function(e){var t=e.offerId,n=Object(fe.i)();return Object(r.createElement)("div",{className:"bwf-offer-shortcode-notice-container"},Object(r.createElement)("div",{className:"bwf-offer-shortcode-notice__header"},Object(l.__)("Shortcodes","funnel-builder")),Object(r.createElement)("div",{className:"bwf-offer-shortcode-notice"},Object(r.createElement)(c.a,{icon:"info",size:"20"}),Object(r.createElement)("span",null,Object(r.createElement)("strong",null,Object(l.__)("Information: ","funnel-builder")),Object(l.__)("To use shortcodes on the offer page, you need to add a product to the offer. Once the product is added, the shortcode will be dynamically generated based on the product details.","funnel-builder")),Object(r.createElement)(vn.a,{href:Object(y.L)("".concat(Object(y.kb)()?"/store-checkout/offer":"/funnel-offer","/").concat(t,"/product").concat(Object(y.kb)()?"":"&funnel_id=".concat(n.funnel_id))),className:"components-button is-primary"},Object(l.__)("Add Product","funnel-builder"))))});function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e){return function(e){if(Array.isArray(e))return kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){En(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_n(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||Nn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){if(e){if("string"==typeof e)return kn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Cn=function(e){switch(e){case"1":case 1:return Object(l.__)("One Step","funnel-builder");case"2":case 2:return Object(l.__)("Two Step","funnel-builder");case"3":case 3:return Object(l.__)("Three Step","funnel-builder");case"inline":return Object(l.__)("Inline","funnel-builder");case"popup":return Object(l.__)("Popup","funnel-builder");default:return""}},Pn=function(e){var t=e.onDelete,n=e.type,a=e.stepId,u=e.offerId,s=e.tab,b=e.isLoading,O=e.fetchStep,v=e.additionalTabs,j=void 0===v?[]:v,h=e.design,g=e.postData,S=e.template,N=e.stepData,C=e.globalData,P=e.funnelId,T=Object(o.b)().isLite,x=Sn(Object(r.useState)({}),2),A=x[0],I=x[1],D=Sn(Object(r.useState)(!0),2),F=D[0],L=D[1],R=Sn(Object(r.useState)(!1),2),B=R[0],M=R[1],z=Sn(Object(r.useState)(!1),2),q=z[0],G=z[1],V=Object(o.c)().showSnackbar,J=Object(w.a)().isFetchCompleted,H=Object(_.a)().setIsFormLoading,K=(N||{}).other_builder;Object(r.useEffect)((function(){b&&L(!0),["checkout","optin"].includes(n)&&!1===b&&null===J&&L(!0),["checkout","optin"].includes(n)&&!1===b&&!0===J&&(L(!1),H(!0)),!1===b&&void 0!==S&&L(!1)}),[b,J]);var $,W,Y,Q=function(){var e={modalTitle:Object(l.__)("Remove Template","funnel-builder"),content:Object(l.__)("You are about to remove this template. Any changes done to the current template will be lost. Cancel to stop, Remove to proceed.","funnel-builder"),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButtonText:Object(l.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0};I(wn(wn({},e),{},{onConfirm:function(){!function(e){I(wn(wn({},e),{},{disableConfirm:!0}));try{var r="/funnel-".concat(n,"/").concat(u,"/design"),l="/funnel-".concat(n,"/").concat(a,"/design");d()({path:Object(y.y)("".concat("offer"===n?r:l)),method:"DELETE"}).then((function(e){e.success?(I({loading:!1,status:!1}),t()):I({status:!0,error:e.msg||e.message})}))}catch(e){I({status:!0,error:e.message||e.msg})}}(e)}}))},Z="embed_forms"===(null==h?void 0:h.selected_type);return Object(r.createElement)(r.Fragment,null,F&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-selected-template bwf-selected-template__placeholder"},Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title bwf-placeholder-temp bwf-h-28 bwf-w-400"}),Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-90"}),Object(r.createElement)("span",{className:"bwf-template-last-edited bwf-placeholder-temp bwf-h-20 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-title-info bwf-mt-4 bwf-placeholder-temp bwf-h-24 bwf-w-270"})),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(r.createElement)("div",{className:"bwf-selected-designed bwf-placeholder-temp bwf-flex"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-25 bwf-w-150 bwf-mt-10"})),Object(r.createElement)("div",{className:"bwf-template-info"},Object(r.createElement)("div",{className:"bwf-action-btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3 bwf-mr-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3"}),Object(r.createElement)("div",{className:"bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-100"}),Object(r.createElement)("div",{className:"bwf-h-36 bwf-w-full bwf-border-1 bwf-rounded-3 bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-200 bwf-ml-5 bwf-mt-10"})))))),Object(r.createElement)("div",{className:"bwf-additional-details"},Object(r.createElement)("div",{className:"bwf-settings"},Object(r.createElement)("div",{className:"bwf-additional-heading bwf-placeholder-temp bwf-h-28 bwf-w-210 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-additional-tab-hint bwf-mt-4 bwf-placeholder-temp bwf-h-20 bwf-w-300"}),Object(r.createElement)("div",{className:"bwf-shortcodes"},hn(Array(3)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-additional-container",key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-placeholder-temp bwf-h-16 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-copy-link bwf-placeholder bwf-placeholder-temp bwf-h-36"}))})))),["checkout","optin"].includes(n)&&Object(r.createElement)(St,null))))),Object(r.createElement)("div",{className:"bwf-selected-template"},!F&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title"},Object(l.__)("Template: ","funnel-builder"),null!=S&&S.build_from_scratch?Object(l.__)("Start from scratch","funnel-builder"):null==S?void 0:S.name),S&&S.group&&Object(p.isArray)(S.group)&&S.group[0]&&Object(r.createElement)(He.c,{content:Cn(S.group[0])}),Object(r.createElement)("span",{className:"bwf-template-last-edited"},Object(l.__)("Last Edited","funnel-builder"),":"," ",null==g?void 0:g.post_modified_date))),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(p.isEmpty)(null==S?void 0:S.thumbnail)?Object(r.createElement)("div",{className:"bwf-selected-designed is-build-from-scratch"},Object(r.createElement)("div",{className:"bwf-funnel-overlay"},Object(r.createElement)("div",{className:"bwf-middle-align"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(c.a,{icon:"default-template",width:"60",height:"60",color:"#82838E"}))))):Object(r.createElement)("div",{className:"bwf-selected-designed"},Object(r.createElement)("img",{src:null==S?void 0:S.thumbnail,alt:"thumbnail"})),Object(r.createElement)("div",{className:"bwf-delete-template bwf-cursor-pointer",onClick:function(){return Q()}},Object(r.createElement)("span",null,Object(r.createElement)(c.a,{icon:"trash",color:"#82838E"})),Object(r.createElement)("span",{className:"bwf-delete-text"},Object(l.__)("Delete","funnel-builder")))),Object(r.createElement)("div",{className:"bwf-template-info bwf-additional-settings"},($={text:Object(l.__)("Edit Template","funnel-builder"),link:null==g?void 0:g.edit_link},K&&K.page_builder&&"Other Page Builder"!==K.page_builder&&($.link=null==K?void 0:K.url),Z&&($.link=null==g?void 0:g.post_edit_link),W=$,Y=function(){var e={text:Object(l.__)("Switch to WordPress Editor","funnel-builder"),link:null==g?void 0:g.post_edit_link},t="gutenberg"===(null==h?void 0:h.selected_type),r="custom"===(null==h?void 0:h.selected_type);return(t||r)&&(e={}),Z&&(T?e={}:(e.text=Object(l.__)("Customize Form","funnel-builder"),e.link=null==g?void 0:g.edit_link)),"wp_editor"===(null==h?void 0:h.selected_type)&&(e="optin"===n?{text:Object(l.__)("Customize Form","funnel-builder"),link:"/funnel-optin/".concat(a,"/customize&funnel_id=").concat(P),isReact:!0}:{}),e}(),Object(r.createElement)("div",{className:"bwf-action-btn"},Object(r.createElement)("a",{className:"bwf-switch-editor-btn components-button is-primary",href:W.link},W.text),!Object(p.isEmpty)(Y)&&(Y.isReact?Object(r.createElement)(vn.a,{className:"bwf-switch-editor-btn components-button is-secondary",href:Object(y.L)(Y.link)},Y.text):Object(r.createElement)("a",{className:"bwf-switch-editor-btn components-button is-secondary",href:Y.link},Y.text)))),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},"offer"!==n||"custom_page"!==(null==h?void 0:h.selected_type)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-url-title"},Object(l.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==g?void 0:g.view_link),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Edit","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-edit-icon",onClick:function(){return M(!0)}},Object(r.createElement)(c.a,{icon:"edit",width:20,height:20,color:"#82838E"}))),Object(r.createElement)(i.a,{toolTipText:Object(l.__)("Copy","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return e="Page URL",(t=document.createElement("textarea")).value=null==g?void 0:g.view_link,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),V(e+" "+Object(l.__)("copied","funnel-builder")),void V(e+" copied");var e,t}},Object(r.createElement)(c.a,{icon:"duplicate",width:20,height:20,color:"#82838E"})))))):Object(r.createElement)(E.a,{status:"info"},Object(r.createElement)("strong",null,Object(l.__)("Information: ","funnel-builder")),Object(l.__)('Creating offers using WordPress custom pages is a legacy feature. We recommend using the "Start From Blank" option to create templates using your preferred page builder.',"funnel-builder"))),"checkout"===n||"offer"===n?Object(r.createElement)("div",{className:"bwf-brown-light-notice bwf-mw-517 bwf-style-3"},Object(r.createElement)(c.a,{icon:"bulb"}),Object(r.createElement)("div",{className:"bwf-text-style-2"},Object(l.__)("Recommendation: ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-font-normal"},"checkout"===n?Object(r.createElement)(r.Fragment,null,Object(l.__)("Checkout pages need to be excluded from all types of caching including caching done by Plugins, CDNs, or Hosting. ","funnel-builder"),Object(r.createElement)("a",{onClick:function(){return G(!0)},className:"bwf-underline"},Object(l.__)("Learn More"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{style:{lineHeight:"16px",marginTop:"8px"}},Object(r.createElement)("strong",null,Object(l.__)("Caching - ","funnel-builder")),Object(l.__)("Upsell needs to be excluded from all types caching including caching done by Plugins, CDNs or Hosting. ","funnel-builder"),Object(r.createElement)("a",{onClick:function(){return G(!0)},className:"bwf-underline"},Object(l.__)("Learn More"))),Object(r.createElement)("div",{style:{lineHeight:"16px",marginTop:"8px"}},Object(r.createElement)("strong",{style:{lineHeight:"16px"}},Object(l.__)("If Upsell Skipped - ","funnel-builder")),Object(l.__)("It could be due to a settings issue. Our guide will help you troubleshoot and fix the problems ","funnel-builder"),Object(r.createElement)("a",{onClick:function(){return window.open("https://funnelkit.com/docs/one-click-upsells/getting-started/why-upsells-are-not-triggering/","_blank")},className:"bwf-underline"},Object(l.__)("View Reasons"))))))):null),["wp_editor","embed_forms","custom"].includes(null==h?void 0:h.selected_type)&&Object(r.createElement)(pn.a,{type:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-small",isLoading:A.loading,successMessage:A.success,errorMessage:A.error,isOpen:A.status,autoHide:8e3,closeIcon:!0,content:A.content,confirmText:A.confirmText,confirmButtonText:A.confirmButtonText,confirmButtonClass:A.confirmButtonClass,cancelButtonText:A.cancelButtonText,onConfirm:A.onConfirm,onCancel:A.onCancel,modalTitle:A.modalTitle,disableConfirm:A.disableConfirm,onRequestClose:function(){return I({status:!1})}}),B&&Object(r.createElement)(k,{pageUrl:null==g?void 0:g.view_link,urlSlug:null==g?void 0:g.post_name,toggleState:null==g?void 0:g.status,onRequestClose:function(){return M(!1)},stepId:"offer"===n?u:a,offerId:u,onComplete:O,type:n,stepTitle:null==g?void 0:g.post_title,stepDescription:null==g?void 0:g.post_description})),Object(r.createElement)("div",{className:"bwf-additional-details bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-settings"},Object(p.isEmpty)(j)||j.some((function(e){return Object(p.isEmpty)(e)}))?"offer"===n&&["wp_editor","embed_forms","custom"].includes(null==h?void 0:h.selected_type)&&Object(r.createElement)(jn,{offerId:u}):j.map((function(e,t){return e&&e.hasOwnProperty("tabs")?Object(r.createElement)(U,{additionalTabs:e,key:"bwf-additional-tab-".concat(t),type:n,stepId:a,offerId:u,addTabIndex:t}):Object(r.createElement)(f,{additionalTabs:e,key:"bwf-additional-tab-".concat(t)})}))))),!b&&Object(r.createElement)("div",{className:"bwf-design-form"},"checkout"===n&&Object(r.createElement)(zt,{type:n,stepId:a,tab:s,offerId:u}),"optin"===n&&Object(r.createElement)(mn,{type:n,stepId:a,tab:s,offerId:u})),q&&Object(r.createElement)(On.a,{onCloseModal:function(){return G(!1)},experimentData:C})),"offer"===n&&Object(r.createElement)(yn.a,null))},Tn=(n(391),n(350)),xn=n(81),An=n(30),In=["template","additional_tabs","design"];function Dn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return Fn(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Fn(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Fn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,Fn(f,"constructor",u),Fn(u,"constructor",o),o.displayName="GeneratorFunction",Fn(u,a,"GeneratorFunction"),Fn(f),Fn(f,a,"Generator"),Fn(f,r,(function(){return this})),Fn(f,"toString",(function(){return"[object Generator]"})),(Dn=function(){return{w:l,m:b}})()}function Fn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Fn=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){Fn(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function Ln(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.type,n=e.funnelID,l=Object(a.useParams)(),c=l.stepId,i=l.offerId,o=void 0===i?"":i,u=Object(r.useRef)(new AbortController),s=Rn(Object(r.useState)(""),2),f=s[0],b=s[1],d=Rn(Object(r.useState)([]),2),m=d[0],O=(d[1],Rn(Object(r.useState)({}),2)),y=O[0],v=O[1],h=Object(j.a)(),E=h.fetchStep,S=h.setFunnelId,N=(h.fetchStepFields,Object(g.a)()),k=N.getStep,C=N.getStepHeaderData,P=N.getFunnelData,T=Object(_.a)(),x=T.setStepData,A=T.setLoading,I=T.setStepFunnelData,D=T.setIsFormLoading,F=Object(w.a)().getStepsData,L=C(t,c,"design",o),R=P(),B=F(),M=k(t,c,"design",o),z=M.data,U=void 0===z?{}:z,q=M.loading,G=void 0===q||q,V=U.step,J=void 0===V?{}:V,H=U.step_data,K=void 0===H?{}:H,$=An.a.getFunnelTitle(),W=J.template,Y=void 0===W?{}:W,Q=J.additional_tabs,Z=void 0===Q?[]:Q,X=J.design,ee=void 0===X?{}:X,te=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(J,In),ne=Object(xn.a)().setActiveGroup;Object(r.useEffect)((function(){D(!1),!Object(p.isEmpty)(R)&&Object(p.isEmpty)($)&&I(R),Object(p.isEmpty)(L)||(x(L),A(!1))}),[L,R,G]),Object(r.useEffect)((function(){f&&!G&&null===Z&&ne(f)}),[G,Z,f]),Object(r.useEffect)((function(){b("offer"===t?"upsell":"thankyou"===t?"wc_thankyou":"optin-confirmation"===t?"optin_ty":"checkout"===t?"wc_checkout":t)}),[t]);var re=function(){E(t,c,"design",o,u.current.signal)};Object(r.useEffect)((function(){"offer"===t&&Object.keys(y).length&&re()}),[y]),Object(r.useEffect)((function(){return Object(p.isEmpty)(U)&&re(),S(n),function(){u.current.abort()}}),[]);var ae=function(){var e,t=(e=Dn().m((function e(){return Dn().w((function(e){for(;;)switch(e.n){case 0:re();case 1:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){Ln(l,r,a,c,i,"next",e)}function i(e){Ln(l,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-template-design"},"upsell"==f&&Object(r.createElement)("div",{className:"wfocu_secondary_top_bar"},Object(r.createElement)("div",{className:"wfocu_steps"},Object(r.createElement)("div",{className:"wfocu_steps_sortable ui-sortable"},null==m?void 0:m.map((function(e,t){return Object(r.createElement)("div",{key:e.id,className:"wfocu_step_container ui-sortable-handle "},Object(r.createElement)("a",{className:"wfocu_step ".concat(y.id==e.id?"current_offer":""),onClick:function(){v(e)}},Object(r.createElement)("span",{className:"step_name"},e.name)))}))))),G||null!==Z?Object(r.createElement)(Pn,{onDelete:function(){re()},isLoading:G,template:Y,fetchStep:re,additionalTabs:Z,design:ee,postData:te,stepData:K,type:t,stepId:c,tab:"design",offerId:o,globalData:B,funnelId:n}):Object(r.createElement)(Tn.a,{onImportComplete:ae,urlDependency:!1,stepId:"offer"===t?o:c,funnelId:n})))}},436:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(1),c=n(10),i=n.n(c),o=n(8),u=n(4),s=n(413),f=(n(481),n(5)),b=(n(482),n(6)),d=n.n(b),m=n(18),p=function(e){var t=e.value,n=void 0===t?0:t,a=e.content,l=void 0===a?"":a,c=e.isLoading,i=e.error;return Object(r.createElement)("div",{className:"bwf-circular-progress-bar"},Object(r.createElement)("div",{className:d()("bwf-circular-progress-bar__circle",{"is-loading":c,"is-complete":!c&&!i,"is-danger":i}),role:"progressbar","aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100",style:{"--value":n,"--pg-bar-color":i?m.DANGER_COLOR:m.BLUE_BASE}}),Object(r.createElement)("div",{className:"bwf-circular-progress-bar__content"},i?Object(r.createElement)(f.a,{icon:"cross",size:"72",color:"#ffffff"}):c?l:Object(r.createElement)(f.a,{icon:"tick",size:"72",color:"#ffffff"})))},O=n(20),y=n(50),v=n(291),j=n(405),_=n(24),h=n(14);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var C=Object(r.createElement)(r.Fragment,null,Object(l.__)("It seems there was an issue during the import. Please contact","funnel-builder"),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Funnel+Import+Failed&utm_campaign=FB+Lite+Plugin",target:"_blank",rel:"noopener noreferrer"},Object(l.__)(" support ","funnel-builder")),Object(l.__)("with JSON for a review.","funnle-builder"));t.a=function(e){e.isOpen;var t=e.onRequestClose,n=e.onSuccess,c=void 0===n?a.noop:n,b=e.modalTitle,d=e.apiPath,m=e.showSuccessState,g=void 0===m||m,w=e.extraParams,S=void 0===w?{}:w,k=e.enableClone,P=void 0!==k&&k,T=Object(O.b)().isBasicFeatureLocked,x=N(Object(r.useState)({status:!1,modalTitle:b||Object(l.__)("Import Funnel","funnel-builder")}),2),A=x[0],I=x[1],D=N(Object(r.useState)(null),2),F=D[0],L=D[1],R=N(Object(r.useState)("json"),2),B=R[0],M=R[1],z=N(Object(r.useState)(0),2),U=z[0],q=z[1],G=N(Object(r.useState)(!1),2),V=G[0],J=G[1],H=Object(O.c)().showSnackbar,K=Object(y.a)().updateStatus,$=Object(_.a)().setGlobalCheckout,W=Object(r.useRef)(new AbortController),Y=function(e){if(c(e),e.setup&&K(e.setup),Object(u.kb)()&&U&&$({funnel_id:e.funnel_id,funnel_name:"",funnel_status:!1}),"json"===B){if(!g)return void t(!0);I(E(E({},A),{},{status:!0,title:Object(l.__)("Sucessfully Imported","funnel-builder"),loading:!1,message:Object(l.__)("Successfully Imported and added in your FunnelKit.","funnel-builder")}))}else t(!0)},Q=function(){I(E(E({},A),{},{status:!1,loading:!1,error:!0,title:Object(l.__)("Importing Failed","funnel-builder"),message:C})),L(null)};Object(r.useEffect)((function(){F&&function(){I(E(E({},A),{},{title:Object(l.__)("Please wait","funnel-builder"),loading:!0,message:Object(r.createElement)(r.Fragment,null,Object(l.__)("Please wait! We are importing ")+(null==F?void 0:F.name)+Object(l.__)(" data."))}));try{var e=new FormData;if(e.append("files",F),!Object(a.isEmpty)(S))for(var t=0,n=Object.entries(S);t<n.length;t++){var c=N(n[t],2),o=c[0],s=c[1];e.append(o,s)}i()({method:"POST",body:e,path:Object(u.y)(d||"/funnels/import"),signal:W.current.signal}).then((function(e){1==e.status?Y(e):Q()})).catch((function(){Q()}))}catch(e){console.log(e),Q()}}()}),[F]);var Z=function(){var e;null===(e=W.current)||void 0===e||e.abort(),t(A.status)},X=function(){switch(B){case"json":return!F;case"existing":return!U;default:return!1}};return Object(r.createElement)(o.Modal,{className:"bwf-admin-modal bwf-admin-modal-small bwf-import-funnel-modal",title:A.modalTitle,onRequestClose:Z,shouldCloseOnClickOutside:!V},A.title&&Object(r.createElement)("div",{className:"bwf-import-modal-content"},Object(r.createElement)(p,{value:"100",content:Object(r.createElement)(f.a,{icon:"import-file",size:"56"}),isLoading:A.loading,error:A.error}),Object(r.createElement)("div",{className:"bwf-drop-import-content bwf-mt-10"},A.message),(!0===A.status||A.error)&&Object(r.createElement)(h.a,{isPrimary:!0,onClick:Z,className:"bwf-import-modal-close-btn"},Object(l.__)("Close","funnel-builder"))),!A.title&&Object(r.createElement)(r.Fragment,null,P&&Object(r.createElement)(v.a,{options:[{value:"json",label:Object(l.__)("Upload JSON","funnel-builder")},{value:"existing",label:Object(l.__)("Clone Funnel","funnel-builder"),isPro:T}],selected:B,onChange:function(e){M(e)},className:""}),"json"===B?Object(r.createElement)(s.a,{onFileSelected:function(e){return L(e)},filetypeArray:["application/json"]}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(j.a,{activeGroup:Object(u.kb)()?"wc_checkout":"",onSelect:function(e){return q(e)}}),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(h.a,{onClick:t,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(h.a,{isPrimary:!0,disabled:X()||V,isBusy:V,onClick:function(){J(!0),i()({path:Object(u.y)("".concat(Object(u.kb)()?"/store-checkout":"/funnels","/duplicate/").concat(U)),method:Object(u.kb)()?"POST":"GET"}).then((function(e){e.status?Y(e):H(e.msg),J(!1)})).catch((function(e){H(e.msg),J(!1)}))},className:X()?"bwf-no-ripple":"",name:"add-funnel"},Object(l.__)("Done","funnel-builder"))))))}},447:function(e,t,n){},469:function(e,t,n){"use strict";var r=n(2),a=n(19),l=n(4),c=n(122),i=n(10),o=n.n(i);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=["state","fetch","setStateProp"],f=["s","page","filter","path"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(a.a)("funnelList"),t=e.state,n=e.fetch,i=e.setStateProp,u=p(e,s),b=(0,Object(c.a)().getFunnels)();return d(d({},u),{},{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.query,c=e.offset,o=e.limit,u=e.search,s=e.getDraft,b=void 0!==s&&s,m=e.getSteps,O=void 0!==m&&m,y=e.categories,v=e.signal,j=(a.s,a.page,a.filter,a.path,p(a,f)),_=d(d(d(d({offset:c,limit:o},u&&{s:u}),{},{filters:j},b&&{need_draft_count:""}),O&&{need_steps_data:!0}),!Object(r.isEmpty)(y)&&{categories:y.map((function(e){return e.id})).join(",")});u&&!Object(r.isEmpty)(u)?i("search",u):t.search&&i("search",null),i("analyticsLoading",!0),n("GET",Object(l.y)("/funnels"),_,{signal:v})},fetchAnalytics:function(e){i("analyticsLoading",!0);var t=Object(r.cloneDeep)(b),n=t.map((function(e){return e.id}));o()({path:Object(l.y)("/funnels/funnel-list/revenue"),method:"POST",data:{funnel_ids:n},signal:e}).then((function(e){e.status&&e.funnels&&(t=t.map((function(t){return e.funnels[parseInt(t.id)]?d(d({},t),{},{stats:e.funnels[t.id]}):t})),i("funnels",t),i("analyticsLoaded",!0)),i("analyticsLoading",!1)})).catch((function(e){"AbortError"!==e.name&&console.log(e),i("analyticsLoading",!1)}))},setFunnelListValues:function(e,t){i(e,t)},updateFunnelInList:function(e,t){var n=b.map((function(n){return n.id===e?d(d({},n),t):n}));i("funnels",n)},setSearchText:function(e){i("search",e)}})}},481:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){},593:function(e,t,n){"use strict";var r=n(0),a=n(2),l=n(126),c=n(1),i=n(8),o=n(10),u=n.n(o),s=(n(583),n(297)),f=n(5),b=n(4),d=n(54);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.isRuleSaved,n=e.type,a=e.isProFeatureLocked,l=m(Object(r.useState)(!1),2),i=l[0],o=l[1],u=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(f.a,{icon:"thankyou-rule",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-rule-heading bwf-pb-8",content:"bump"===n?Object(c.__)("Add rules to show conditional order bumps","funnel-builder"):"thankyou"===n?Object(c.__)("Add rules to show conditional thankyou pages","funnel-builder"):Object(c.__)("Add rules to show conditional one click upsells","funnel-builder")}},{type:"content",data:{class:"bwf-rule-description",content:"bump"===n?Object(c.__)("Want to show different order bump based on buyer's cart?","funnel-builder")+"<br>"+Object(c.__)("Use this section to add rules.","funnel-builder"):"thankyou"===n?Object(c.__)("Want to show different thankyou pages based on buyer's purchase?","funnel-builder")+"<br>"+Object(c.__)("Use this section to add rules.","funnel-builder"):Object(c.__)("Want to show different one click upsell pages based on buyer's purchase?","funnel-builder")+"<br>"+Object(c.__)("Use this section to add rules.","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(c.__)("Add Rules","funnel-builder"),onClick:function(){a?o(!0):t("yes")}}]}}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wfty_welcome_wrap"},Object(r.createElement)(s.a,{data:u,isProFeatureLocked:a})),i&&Object(r.createElement)(d.a,{isOpen:i,onRequestClose:function(){return o(!1)},modalContent:{content:{},proLink:Object(b.U)(["Thankyou","Rules"]),feature:Object(c.__)("Rule","funnel-builder")}}))},y=n(43),v=n(6),j=n.n(v),_=(n(584),n(42)),h=n(45);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=["label","className","selected","options","onBlur","onChange","onSearch","onFocus","optionKey","isLoading","optionLabel","placeholder","searchPlaceholder","defaultOptions"];function E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=null,C=Object(y.compose)([y.withInstanceId])((function(e){e.label;var t=e.className,n=e.selected,l=e.options,i=e.onBlur,o=(void 0===i&&a.noop,e.onChange),u=void 0===o?a.noop:o,s=e.onSearch,d=void 0===s?a.noop:s,m=e.onFocus,p=(void 0===m&&a.noop,e.optionKey,e.isLoading),O=void 0===p||p,y=(e.optionLabel,e.placeholder),v=(void 0===y&&Object(c.__)("Select"),e.searchPlaceholder),_=void 0===v?"":v,g=e.defaultOptions,N=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,w),C=S(Object(r.useState)(!1),2),P=C[0],T=C[1],x=S(Object(r.useState)(""),2),A=x[0],I=x[1],D=S(Object(r.useState)(),2),F=D[0],L=D[1],R=S(Object(r.useState)(""),2),B=R[0],M=R[1],z=S(Object(r.useState)(0),2),U=z[0],q=z[1],G=N.instanceId,V=("inspector-searchlist-".concat(G),Object(a.isEmpty)(n)||n.name,Object(r.useRef)()),J=Object(r.useRef)();j()("bwf-searchlist-component",t);Object(b.ub)(V,(function(){return T(!1)})),Object(r.useEffect)((function(){clearTimeout(k),k=setTimeout((function(){d(A)}),400)}),[A]),Object(r.useEffect)((function(){(null==l?void 0:l.length)>0&&L(""==A?g:l)}),[l]),Object(r.useEffect)((function(){Object(a.isEmpty)(n)||M(null==n?void 0:n.name)}),[n]);var H=function(e){M(e.name),setTimeout((function(){T(!1)})),q(0),u(e)};return Object(r.useEffect)((function(){P?J.current.focus():I("")}),[P]),Object(r.useEffect)((function(){""==A&&L(g)}),[A]),Object(r.createElement)("div",{className:"bwf-search-list chosen-container chosen-container-single bwf-w-full bwf-rule-input-conatiner  ".concat(P&&"chosen-container-active chosen-with-drop"),onClick:function(){return T(!0)},ref:V},Object(r.createElement)("a",{className:"chosen-single bwf-chosen-container bwf-background-white"},Object(r.createElement)("span",null,Object(c.__)(B,"funnel-builder")),Object(r.createElement)("div",{className:"bwf-chosen-single"},Object(r.createElement)(f.a,{icon:P?"angle-up":"angle-down",size:14}))),Object(r.createElement)(h.a,{position:"bottom",className:"chosen-drop"},Object(r.createElement)("div",{className:"chosen-search"},Object(r.createElement)("input",E(E(E(E({type:"text",autoFocus:!0,ref:J,autoComplete:"off",placeholder:_,onChange:function(e){return I(e.target.value)}},"autoComplete","off"),"onKeyDown",(function(e){38===e.keyCode&&U>0?q(U-1):40===e.keyCode&&U<F.length-1&&q(U+1)})),"value",A||""),"onKeyPress",(function(e){"Enter"===e.key&&(e.preventDefault(),"emptyOption"!==F[0].id&&H(F[U]))}))),Object(r.createElement)("div",{className:"bwf-search-list-icon"},Object(r.createElement)(f.a,{icon:"search",size:16}))),Object(r.createElement)("ul",{className:"chosen-results"},O?Object(r.createElement)("div",{className:"bwf-searchlist-option-none"},Object(c.__)("Fetching Details","funnel-builder")):Object(a.isEmpty)(F)?Object(r.createElement)("div",{className:"bwf-searchlist-option-none"},Object(c.__)("No Data Found","funnel-builder")):null==F?void 0:F.map((function(e,t){e.id;var n=e.name;e.funnel_title;return Object(r.createElement)("li",{onMouseOver:function(){return q(t)},key:t,className:j()("active-result",{"bwf-select-active":U==t&&"emptyOption"!==e.id,"bwf-searchlist-option-none":"emptyOption"===e.id}),onClick:function(){"emptyOption"!==e.id&&H(e)}},Object(c.__)(n,"funnel-builder"))})))))})),P=n(132),T=n(288),x=n(315),A=n(13),I=n.n(A);n(14);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof i?r:i,u=Object.create(o.prototype);return L(u,"_invoke",function(n,r,a){var l,i,o,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return l=t,i=0,o=e,b.n=n,c}};function d(n,r){for(i=n,o=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=b.p,m=l[2];n>3?(a=m===r)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=n<2&&d<l[1])?(i=0,b.v=r,b.n=l[1]):d<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,b.n=m,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,m){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,o=m;(t=i<2?e:o)||!f;){l||(i?i<3?(i>1&&(b.n=-1),d(i,o)):b.n=o:b.v=o);try{if(u=2,l){if(i||(a="next"),t=l[a]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);l=e}else if((t=(f=b.n<0)?o:n.call(r,b))!==c)break}catch(t){l=e,i=1,o=t}finally{u=1}}return{value:t,done:f}}}(n,a,l),!0),u}var c={};function i(){}function o(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(L(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,L(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=u,L(f,"constructor",u),L(u,"constructor",o),o.displayName="GeneratorFunction",L(u,a,"GeneratorFunction"),L(f),L(f,a,"Generator"),L(f,r,(function(){return this})),L(f,"toString",(function(){return"[object Generator]"})),(F=function(){return{w:l,m:b}})()}function L(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(L=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){L(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function R(e,t,n,r,a,l,c){try{var i=e[l](c),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function c(e){R(l,r,a,c,i,"next",e)}function i(e){R(l,r,a,c,i,"throw",e)}c(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t,n,l,o,s=e.removeRuleData,d=e.andKey,m=e.onChange,p=e.data,O=(e.rowkey,e.allRuleData),y=void 0===O?[]:O,v=e.ruleDataKey,_=(e.totalRuleData,e.ruleFinalData,e.updateOptions),h=Object(r.useRef)(),g=M(Object(r.useState)(y),2),w=g[0],E=(g[1],Object(r.useMemo)((function(){var e={};return y.map((function(t){t.hasOwnProperty("value")&&(e[t.value]=t)})),e}),[y])),S=Object(r.useContext)(b.h),N=M(Object(r.useState)(""),2),k=N[0],A=N[1],L=M(Object(r.useState)([]),2),R=L[0],z=L[1],U=M(Object(r.useState)([]),2),q=U[0],G=U[1],V=M(Object(r.useState)(!1),2),J=(V[0],V[1]),H=M(Object(r.useState)([]),2),K=H[0],$=H[1],W=M(Object(r.useState)(!1),2),Y=W[0],Q=(W[1],M(Object(r.useState)([]),2)),Z=Q[0],X=Q[1],ee=M(Object(r.useState)(""),2),te=ee[0],ne=ee[1],re=M(Object(r.useState)(""),2),ae=re[0],le=re[1],ce=M(Object(r.useState)(""),2),ie=ce[0],oe=ce[1],ue=M(Object(r.useState)(""),2),se=ue[0],fe=ue[1],be=M(Object(r.useState)(""),2),de=be[0],me=be[1],pe=M(Object(r.useState)([]),2),Oe=pe[0],ye=pe[1],ve=M(Object(r.useState)([]),2),je=ve[0],_e=ve[1],he=M(Object(r.useState)(!1),2),ge=he[0],we=he[1],Ee=M(Object(r.useState)(!1),2),Se=Ee[0],Ne=Ee[1],ke=M(Object(r.useState)([]),2),Ce=ke[0],Pe=ke[1],Te=M(Object(r.useState)([]),2),xe=Te[0],Ae=Te[1],Ie=M(Object(r.useState)([]),2),De=Ie[0],Fe=Ie[1];Object(r.useEffect)((function(){"newRow"==p?(A("general_always"),le(""),oe(""),_e(!1)):Object(a.isEqual)(p.rule_type,k)&&Object(a.isEqual)(p.operator,ae)&&Object(a.isEqual)(p.condition,ie)||(A(p.rule_type),le(p.operator),oe(p.condition),_e(!1))}),[p]),Object(b.ub)(h,(function(){return J(!1)})),Object(r.useEffect)((function(){if(E.hasOwnProperty(k)){var e,t=E[k];if(z(t.operators),G(t.fields),t.fields.map((function(e){"multiSelect"==e.type&&(ye(e.options),Ae(e.options))})),t.fields.forEach((function(e){if(X(null==e?void 0:e.options),"select"==e.type&&Fe(null==e?void 0:e.options),["order_category","order_item_type","order_term","order_payment_gateway","order_shipping_method","customer_user","customer_role","customer_purchased_products","customer_purchased_cat","order_shipping_country","order_billing_country","order_coupons","day","cart_category","cart_tags","cart_item_type","cart_coupons","cart_shipping_method","cart_shipping_country","cart_billing_country","wfacp_page","cart_item","order_subs","automation_tag","gateway"].includes(k)){var t,n=null==e||null===(t=e.options)||void 0===t?void 0:t.filter((function(e){var t,n,r,a;if(Array.isArray("cart_item"===k?null==ie?void 0:ie.products:null==ie?void 0:ie.categories)&&"cart_item"===k?null==ie||null===(t=ie.products)||void 0===t?void 0:t.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()):null==ie||null===(r=ie.categories)||void 0===r?void 0:r.includes(null==e||null===(a=e.id)||void 0===a?void 0:a.toString()))return e}));$(n)}fe(p.label),me(p.placeholder)})),je)le(null===(e=t.operators[0])||void 0===e?void 0:e.value),"customer_purchased_products"!==k&&"customer_purchased_cat"!==k||"custom-html"!==t.fields[0].type?"order_item"==k||"cart_item"==k?t.fields.map((function(e){var t;"order_item"==k&&"multiSelect"==e.type?oe({qty:"1",products:null==e||null===(t=e.options[0])||void 0===t?void 0:t.id}):"cart_item"==k&&"multiSelect"==e.type&&oe({qty:"1",products:[]})})):"order_custom_meta"==k?oe({meta_key:"",meta_value:""}):["order_total","order_item_count","time","order_coupon_text_match","cart_total_full","cart_total","cart_item_count","cart_items_count","cart_per_item_count","order_item_text_match"].includes(k)?oe(""):["order_coupon_exist","is_guest","is_first_order","funnel_skip"].includes(k)?t.fields.map((function(e){oe(null==e?void 0:e.options[0].value)})):["order_category","order_item_type","order_term","order_payment_gateway","order_shipping_method","customer_user","customer_role","customer_purchased_products","customer_purchased_cat","order_shipping_country","order_billing_country","order_coupons","day","cart_category","cart_tags","cart_item_type","cart_coupons","cart_shipping_method","cart_shipping_country","cart_billing_country","wfacp_page","order_subs","automation_tag","gateway"].includes(k)?oe({categories:[]}):oe([]):t.fields.map((function(e){oe({custom_html:e.label})}))}}),[k]);var Le=Object(r.useMemo)((function(){return!!S&&S.hasOwnProperty("showError")&&!!S.showError}),[S]);Object(r.useEffect)((function(){Object(a.size)(Z)>0&&Pe(Z)}),[Z]),Object(r.useEffect)((function(){if(te.length>0){Ne(!0);var e=null;"customer_user"===k||"order_coupons"===k||"cart_coupons"===k||"customer_purchased_products"===k?(clearTimeout(e),e=setTimeout((function(){var e="";e="customer_user"===k?"/funnels/customers/search?term=".concat(te):"customer_purchased_products"===k?"/funnels/products/search?term=".concat(te):"/funnels/coupons/search?term=".concat(te),u()({path:Object(b.y)(e)}).then((function(e){if(e.success)if("customer_user"===k)Pe(e.data.customers);else if("customer_purchased_products"===k){var t=e.data.products.map((function(e){return{id:e.id.toString(),name:e.name}}));Pe(t)}else Pe(e.data.coupons);else Pe([{id:"no-result",name:'No results match "'.concat(te,'"')}]);Ne(!1)}))}))):setTimeout((function(){var e=Z.filter((function(e){return e.name.toLowerCase().includes(te)}));Object(a.size)(e)>0?Pe(e):Pe([{id:"no-result",name:'No results match "'.concat(te,'"')}]),Ne(!1)}),1e3)}else Pe(Z)}),[te]),Object(r.useEffect)((function(){""!=k&&m({rule_type:k,operator:ae,condition:ie},d)}),[k,ae,ie]);var Re=function(){var e=B(F().m((function e(){var t,n,r=arguments;return F().w((function(e){for(;;)switch(e.n){case 0:t=r.length>0&&void 0!==r[0]?r[0]:"";try{n=null,t.length>=1&&(we(!0),clearTimeout(n),n=setTimeout((function(){u()({path:Object(b.y)("/funnels/products/search?term=".concat(t))}).then((function(e){e.success?(we(!1),Ae(e.data.products)):(we(!1),Ae([{name:"No Data Found",id:"emptyOption"}]))}))}),0))}catch(e){console.log("Failed Step List Variants:",e)}case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=B(F().m((function e(){var t,n,r=arguments;return F().w((function(e){for(;;)switch(e.n){case 0:t=r.length>0&&void 0!==r[0]?r[0]:"";try{n=null,t.length>=1&&(Ne(!0),clearTimeout(n),n=setTimeout((function(){u()({path:Object(b.y)("/funnels/products/search?term=".concat(t))}).then((function(e){if(e.success){var n=e.data.products.map((function(e){return{name:e.name,id:e.id.toString()}}));Pe(n)}else Pe([{id:"no-result",name:'No results match "'.concat(t,'"')}]);Ne(!1)}))}),0))}catch(e){console.log("Failed Step List Variants:",e)}case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=Object(a.debounce)((function(e){oe(e)}),100),ze=Object(a.debounce)((function(e){oe(e),ie.meta_key=e;var t=JSON.parse(JSON.stringify(ie));oe(t)}),100),Ue=Object(a.debounce)((function(e){ie.meta_value=e;var t=JSON.parse(JSON.stringify(ie));oe(t)}),100),qe=Object(a.debounce)((function(e){if(!(Number(e)<1)){ie.qty=e;var t=JSON.parse(JSON.stringify(ie));oe(t)}}),100);return Object(r.createElement)(r.Fragment,null,d?Object(r.createElement)("div",{className:"bwf-rule-and-btn"},Object(c.__)("AND","funnel-builder")):null,Object(r.createElement)("div",{className:"bwf-rule  ".concat(Y||0!==R.length?"bwf-rule-with-operator":"bwf-rule-without-operator"),key:v},Object(r.createElement)("div",{className:"bwf-rule-options"},Object(r.createElement)("div",{className:"rule-type"},Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(c.__)("For","funnel-builder")),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper"},Object(r.createElement)(T.b,{options:w,selected:k,onChange:function(e){_e(!0),A(e)},className:j()("bwf-rule-select",{"rule-error":Le&&"general_always"===k})}),Le&&"general_always"===k&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("Select a rule","funnel-builder"))))),!Y&&0!==R.length&&Object(r.createElement)("div",{className:"operator"},"general_always"!==k&&""!==k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(T.b,{options:R,selected:ae,onChange:function(e){le(e)},className:"bwf-rule-select"})))),!Y&&Object(r.createElement)("div",{className:"condition",name:"wfty_rule[basic][0][2][rule_type]"},["order_category","order_item_type","order_term","order_payment_gateway","order_shipping_method","customer_user","customer_role","customer_purchased_products","customer_purchased_cat","order_shipping_country","order_billing_country","order_coupons","day","cart_category","cart_tags","cart_item_type","cart_coupons","cart_shipping_method","cart_shipping_country","cart_billing_country","wfacp_page","order_subs","automation_tag","gateway"].includes(k)&&ie.hasOwnProperty("custom_html")?Object(r.createElement)("div",{className:"bwf-custom-html",dangerouslySetInnerHTML:{__html:ie.custom_html}}):!Object(a.isEmpty)(q)&&Array.isArray(null==ie?void 0:ie.categories)?Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(c.__)("Values","funnel-builder")),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper"},Object(r.createElement)(P.a,{values:null==ie?void 0:ie.categories,searchedValue:function(e){return ne(e)},selectedValue:K,onChangeValue:function(e){ie.categories=e;var t=JSON.parse(JSON.stringify(ie));oe(t)},onChangeData:function(e){Object(a.isArray)(e)&&!Object(a.isEmpty)(e)&&_(k,e,Z),$(e)},options:Ce,defaultOptions:Z,className:!Le||K&&!Object(a.isEmpty)(K)?"":"rule-error",isLoading:Se,placeholder:Object(c.__)("Search","funnel-builder")}),Le&&(!K||Object(a.isEmpty)(K))&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder")))):null,["order_item","cart_item"].includes(k)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-rule-product"},Object(r.createElement)("div",{className:"bwf-sub-rule bwf-rule-quantity"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"}," ",Object(c.__)("QTY","funnel-builder")),Object(r.createElement)("div",null,Object(r.createElement)("input",{type:"number",className:"bwf-rule-input-conatiner bwf-h-36 ".concat(Le&&!parseInt(ie.qty)?"rule-error":""),value:null!==(t=null==ie?void 0:ie.qty)&&void 0!==t?t:"",onKeyDown:function(e){"."===e.key&&e.preventDefault()},onChange:function(e){return qe(e.target.value)},min:"1",step:"1"}))),Object(r.createElement)("div",{className:"bwf-sub-rule bwf-product-condition"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(c.__)("Products","funnel-builder")),"order_item"===k&&"object"===D(ie)&&Object(r.createElement)("div",null,Object(r.createElement)(C,{options:xe,defaultOptions:Oe,selected:null!==(n=xe.find((function(e){return parseInt(e.id)===parseInt(null==ie?void 0:ie.products)})))&&void 0!==n?n:{},className:!Le||ie.hasOwnProperty("products")&&!Object(a.isEmpty)(ie.products)?"":"rule-error",onChange:function(e){ie.products=e.id;var t=JSON.parse(JSON.stringify(ie));_(k,[e],Oe),oe(t)},isLoading:ge,apiEndPoint:"funnelkit-app/funnels/products/search",onSearch:Re})),"cart_item"===k&&Array.isArray(null==ie?void 0:ie.products)&&Object(r.createElement)(P.a,{values:ie.products,searchedValue:function(e){return Be(e)},selectedValue:K,onChangeValue:function(e){ie.products=e;var t=JSON.parse(JSON.stringify(ie));Object(a.isArray)(e)&&!Object(a.isEmpty)(e)&&_(k,Ce.filter((function(t){return e.includes(t.id.toString())})),Z),oe(t)},onChangeData:function(e){$(e)},options:Ce,defaultOptions:Z,className:!Le||K&&!Object(a.isEmpty)(K)?"":"rule-error",isLoading:Se,placeholder:Object(c.__)("Search","funnel-builder")}))),Le&&!parseInt(ie.qty)&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnelbuilder")),Le&&"cart_item"===k&&(!K||Object(a.isEmpty)(K))&&Object(r.createElement)("div",{className:"bwf-error-text bwf-product-error"},Object(c.__)("This is a required field","funnelbuilder"))),["order_total","order_item_count","cart_total_full","cart_total","cart_item_count","cart_items_count","cart_per_item_count"].includes(k)&&Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(c.__)("Values","funnel-builder")),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper"},Object(r.createElement)("input",{type:"number",className:"bwf_w_full bwf-rule-input-conatiner bwf-h-36 ".concat(Le&&(!ie||parseInt(ie)<1)?"rule-error":""),value:ie,placeholder:de,onChange:function(e){return Me(e.target.value)},min:"1"}),Le&&(!ie||parseInt(ie)<1)&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder")))),["order_coupon_text_match","order_item_text_match"].includes(k)&&Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(c.__)("Values","funnel-builder")),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper"},Object(r.createElement)(i.TextControl,{className:"bwf_w_full bwf-rule-input-conatiner ".concat(Le&&(!ie||parseInt(ie)<1)?"rule-error":""),value:ie,placeholder:de,onChange:function(e){return Me(e)}}),Le&&(!ie||parseInt(ie)<1)&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder")))),["time"].includes(k)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(r.createElement)(f.a,{icon:"timer",size:"20"})),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper"},Object(r.createElement)(i.TextControl,{value:ie,onChange:function(e){return oe(e)},type:"time",className:"bwf_w_full bwf-rule-input-conatiner ".concat(Le&&(!ie||parseInt(ie)<1)?"rule-error":""),placeholdervalue:0===ie.length?I()().format("HH:mm"):""}),Le&&(!ie||parseInt(ie)<1)&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder"))))),["date"].includes(k)&&Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},Object(r.createElement)(f.a,{icon:"calender",size:"20"})),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper ".concat(!Le||ie&&!Object(a.isEmpty)(ie)?"":"rule-error")},Object(r.createElement)(x.b,{placeHolder:I()().format(b.c),date:Object(a.isEmpty)(ie)?"":I()(ie).format(b.c),text:Object(a.isEmpty)(ie)?"":I()(ie).format(b.c),onUpdate:function(e){return oe(I()(e.text).format(b.c))},dateFormat:b.c,position:"bottom right"}),Le&&(!ie||Object(a.isEmpty)(ie))&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder")))),["order_coupon_exist","is_guest","is_first_order","funnel_skip"].includes(k)&&void 0!==Z&&"object"!==D(ie)&&Object(r.createElement)("div",{className:"bwf-sub-rule"},Object(r.createElement)("div",{className:"bwf-rule-sub-title"},se||Object(c.__)("Values","funnel-builder")),Object(r.createElement)(T.b,{options:De,selected:ie,onChange:function(e){oe(e)},className:"bwf-rule-select ".concat(!Le||ie&&!Object(a.isEmpty)(ie)?"":"rule-error")})),["order_custom_meta"].includes(k)&&Object(r.createElement)("div",{className:"bwf-order-custom-container"},Object(r.createElement)("div",{className:"bwf-rule-field-wrapper bwf-order-custom-field bwf-rule-meta-conatiner"},Object(r.createElement)(i.TextControl,{className:"bwf-order-custom-field bwf-rule-input-conatiner ".concat(!Le||ie.hasOwnProperty("meta_key")&&!Object(a.isEmpty)(ie.meta_key)?"":"rule-error"),value:null!==(l=null==ie?void 0:ie.meta_key)&&void 0!==l?l:"",onChange:function(e){return ze(e)},type:"text",placeholder:"Enter custom meta key"}),Le&&(!ie.hasOwnProperty("meta_key")||Object(a.isEmpty)(ie.meta_key))&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-rule-field-wrapper bwf-order-custom-field bwf-rule-meta-conatiner"},Object(r.createElement)(i.TextControl,{className:"bwf-order-custom-field bwf-rule-input-conatiner ".concat(!Le||ie.hasOwnProperty("meta_value")&&!Object(a.isEmpty)(ie.meta_value)?"":"rule-error"),value:null!==(o=null==ie?void 0:ie.meta_value)&&void 0!==o?o:"",onChange:function(e){return Ue(e)},type:"text",placeholder:Object(c.__)("Enter custom meta Value","funnel-builder")}),Le&&(!ie.hasOwnProperty("meta_value")||Object(a.isEmpty)(ie.meta_value))&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder"))))),Y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-flex bwf--column"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-180 bwf-h-20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-36 "})),Object(r.createElement)("div",{className:"bwf-flex bwf--column"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-180 bwf-h-20 bwf-mr-auto"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-36 "})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-24 bwf-mt-24"})),!Y&&Object(r.createElement)("div",{className:"remove bwf-rule-remove bwf-cursor-pointer bwf-mt-8",onClick:function(){s(d,p)}},Object(r.createElement)(f.a,{icon:"delete",size:20}))))};function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=e.rowkey,n=e.ruleDataValue,l=e.data,o=e.type,u=e.totalRuleData,s=e.allRuleData,f=e.ruleFinalData,d=e.validateRule,m=void 0===d?a.noop:d,p=e.updateOptions,O=q(Object(r.useState)(["1"]),2),y=O[0],v=O[1],j=q(Object(r.useState)([]),2),_=j[0],h=j[1],g=q(Object(r.useState)([]),2),w=g[0],E=g[1],S=Object(r.useContext)(b.h);Object(r.useEffect)((function(){if(0!=(null==l?void 0:l.length)){E(l);var e=new Array(null==l?void 0:l.length).fill("0");v(e)}else E(l)}),[l]),Object(r.useEffect)((function(){"zeroState"==_&&h([])}),[l]),Object(r.useEffect)((function(){"empty"==_&&h(w)}),[w]),Object(r.useEffect)((function(){0!=_.length&&"empty"!=_&&"zeroState"!==_?n(_,t):"empty"==_?n("empty",t):"zeroState"==_&&n("zeroState",t)}),[_]);var N=function(e){var t=null==l?void 0:l.length,n=null==w?void 0:w.length;return w&&Object(a.isArray)(w)&&0!=t&&0!=n&&"general_always"!=w[e].rule_type?w[e]:"newRow"};return Object(r.createElement)(r.Fragment,null,0!==t&&Object(r.createElement)("div",{className:"wfty-rule-group-header"},Object(r.createElement)("div",{className:"bwf-rules-or"},Object(r.createElement)("span",{className:"bwf-or-container"},"OR"))),Object(r.createElement)("div",{className:"bwf-rule-sub-container",key:"rule-group-".concat(t)},Object(r.createElement)("div",{className:"bwf_w_full",key:"grp-".concat(t,"-warp")},Object(r.createElement)("div",{key:"grp-".concat(t,"-warp")},null==y?void 0:y.map((function(e,n){var l=N(n);return Object(r.createElement)(U,{ruleDataKey:"grp-".concat(t,"-ruleidx-").concat(n),key:"grp-".concat(t,"-ruleidx-").concat(n),type:o,data:l,andKey:n,rowkey:t,allRuleData:s,totalRuleData:u,ruleFinalData:f,updateOptions:p,onChange:function(e,t){if(void 0!==_&&"empty"!==_&&"zeroState"!==_)if(t in _){_[t]=e;var n=JSON.parse(JSON.stringify(_));h(n)}else{_.push(e);n=JSON.parse(JSON.stringify(_));h(n)}},removeRuleData:function(e,n){if(1===Object(a.size)(_)&&0===e&&"newRow"===n&&Object(a.size)(u)>1)h("empty");else if(1!==Object(a.size)(_)||0!=e||Object(a.size)(_[0].operator)||Object(a.size)(_[0].condition))if(0==e&&0==t&&1==_.length&&1==u.length)h("zeroState");else if(0==e&&1==_.length)h("empty");else{var r=null==_?void 0:_.filter((function(t,n){if(n!==e)return t})),l=JSON.parse(JSON.stringify(r));h(l)}else h(_)}})}))),Object(r.createElement)(i.Button,{isSmall:!0,className:"bwf-rules-and is-secondary-gray",onClick:function(){var e=!0;if(!Object(a.isEmpty)(l)&&l.map((function(t){"general_always"===t.rule_type&&((null==S?void 0:S.setShowError)&&S.setShowError(!0),e=!1)})),!e||m()){if(e){S.setShowError(!1),_.push({rule_type:"general_always",operator:"",condition:""});var t=JSON.parse(JSON.stringify(_));h(t)}}else(null==S?void 0:S.setShowError)&&S.setShowError(!0)}},Object(c.__)("Add Condition","funnel-builder")))))};function J(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var K=function(){return J(Array(2)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-rule-sub-container",key:t},J(Array(2)).map((function(e,t){return Object(r.createElement)("div",{key:t},t?Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-40 bwf-h-20 bwf-mb-16"}):null,Object(r.createElement)("div",{className:"bwf-rule bwf-rule-without-operator"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-36 "}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-36 "}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-20"})))})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-180 bwf-h-30 bwf-mt-12"}))}))},$=n(40),W=n(20),Y=n(58),Q=n(116),Z=n(29),X=n(30),ee=n(317);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,c,i=[],o=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.type,n=void 0===t?"":t,o=e.funnelID,s=void 0===o?"":o,f=Object(W.b)(),d=f.isProFeatureLocked,m=(f.isLite,f.isBasic),p=Object(W.b)("ck").isProFeatureLocked,y=Object(W.b)("ul").isProFeatureLocked,v="thankyou"===n&&m?p:"upsell"===n?y:d,j=Object(l.useParams)().stepId,h=Object(W.c)().showSnackbar,g=ce(Object(r.useState)(""),2),w=g[0],E=g[1],S=ce(Object(r.useState)(!1),2),N=S[0],k=S[1],C=ce(Object(r.useState)({}),2),P=C[0],T=C[1],x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];T((function(r){var l,c=Object(a.uniqWith)([].concat(le(null!==(l=Object(a.get)(r,"".concat(e,".options")))&&void 0!==l?l:[]),le(n),le(t)),(function(e,t){return e.id==t.id}));return Object(a.setWith)(r,"".concat(e,".options"),c,Object)}))},A=ce(Object(r.useState)({isRuleSaved:"yes",ruleData:[],isSaved:!1}),2),I=A[0],D=A[1],F=Object(Z.a)().setSingleStepData,L=Object($.a)(),R=L.setStepData,B=L.setStepFunnelData,M=L.setLoading,z=Object(Y.a)(),U=z.fetchStep,q=z.setFunnelId,G=z.setTabData,J=z.setStepHeaderData,H=z.setRuleCloneToMain,te=Object(Q.a)(),ne=te.getStep,ae=te.getStepHeaderData,ie=te.getFunnelData,oe=ae(n,j,"rules",""),ue=ie(),se=ne(n,j,"rules",""),fe=ne(n,j,"design",""),be=fe.loading,de=void 0===be||be,me=se.data,pe=void 0===me?{}:me,Oe=se.loading,ye=void 0===Oe||Oe,ve=se.unSavedData,je=void 0!==ve&&ve,_e=X.a.getFunnelTitle();Object(r.useEffect)((function(){!Object(a.isEmpty)(ue)&&Object(a.isEmpty)(_e)&&B(ue),Object(a.isEmpty)(oe)||(R(oe),M(!1))}),[oe,ue,ye]);var he=Object(r.useRef)(new AbortController),ge=pe.rules,we=void 0===ge?[]:ge,Ee=pe.rules_list,Se=void 0===Ee?[]:Ee;Object(r.useEffect)((function(){if(v)"no"!==I.isRuleSaved&&D(re(re({},I),{},{isRuleSaved:"no"}));else if(Object(a.isEmpty)(we))Object(a.isEmpty)(we)&&!ye&&D(re(re({},I),{},{isRuleSaved:"no"}));else{var e=new Array(we.length).fill("0");D(re(re({},I),{},{ruleData:e,isRuleSaved:"yes"}))}}),[we]),Object(r.useEffect)((function(){return v?Object(a.isEmpty)(fe.data)&&U(n,j,"design","",he.current.signal):(Object(a.isEmpty)(pe)||je)&&U(n,j,"rules","",he.current.signal),q(s),function(){H(n,j,"rules",""),he.current.abort()}}),[]),Object(r.useEffect)((function(){w&&(h(w),Object(a.delay)(E,3e3,""),E(""))}),[w]);var Ne=function(){var e=!1,t=!0;return we.map((function(n){!Object(a.isEmpty)(n)&&n.forEach((function(r){var l;t&&(!r.hasOwnProperty("condition")||(Object(a.isObject)(r.condition)||Object(a.isArray)(r.condition))&&Object(a.isEmpty)(r.condition)||(Object(a.isString)(r.condition)||Object(a.isNumber)(r.condition))&&""===r.condition||Object(a.isObject)(r.condition)&&(""===r.condition.meta_key||""===r.condition.meta_value||""===r.condition.qty)||Object(a.isArray)(r.condition.products)&&Object(a.isEmpty)(r.condition.products)||Object(a.isArray)(r.condition.categories)&&Object(a.isEmpty)(r.condition.categories)?(e=!1,t=!1):e=(null===(l=n[0])||void 0===l||l.rule_type,!0))}))})),e},ke=function(e){var t=Object(a.cloneDeep)(pe);(t=re(re({},t),{},{rules:e})).rules_list=t.rules_list.map((function(e){return P.hasOwnProperty(e.key)&&(e.fields=e.fields.map((function(t){return"multiSelect"!==t.type&&"chosen-select"!==t.type||(t.options=Object(a.get)(P,"".concat(e.key,".options"))),t}))),e})),G(n,j,"rules","",t)};return Object(r.createElement)(r.Fragment,null,(v?de:ye)?Object(r.createElement)(K,null):Object(r.createElement)("div",{className:"wffn_content_wrap wffn_ty_edit_rules"},Object(r.createElement)("div",{id:"wfty_funnel_rule_settings","data-is_rules_saved":I.isRuleSaved,className:"wfty_wrap_r wfty_table wfty_rules_container wfty_wrap_inner_rules "},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-step-sticky"},Object(r.createElement)("div",{className:"bwf_table_title"},Object(c.__)("All Rules","funnel-builder")),Object(r.createElement)("div",{className:"button bwf-rule-btn"},Object(r.createElement)(i.Button,{isPrimary:!0,isBusy:I.isSaved,disabled:I.isSaved,onClick:function(){var e=!0;we.map((function(t){1===Object(a.size)(we)&&"general_always"===t[0].rule_type&&(k(!1),e=!1,D(Object(a.cloneDeep)(re(re({},I),{},{ruleData:[]}))))})),!e||Ne()?function(){k(!1),D(re(re({},I),{},{isSaved:!0}));try{var e={};we.forEach((function(t,n){var r="group".concat(n);e[r]={},t.forEach((function(t,n){e[r]["rule".concat(n)]=t}))}));var t={basic:e};u()({path:Object(b.y)("/funnel-".concat(n,"/").concat(j,"/rules")),method:"POST",data:t}).then((function(e){e.success?(H(n,j,"rules","",!0),e.hasOwnProperty("step_data")&&(R(e.step_data),J(n,j,"",e.step_data)),e.hasOwnProperty("step_list")&&F(e.step_list.id,e.step_list),E(Object(c.__)("Changes Saved","funnel-builder")),D(re(re({},I),{},{isSaved:!1}))):E(e.msg)}))}catch(e){console.log(e),E(e.message)}}():k(!0)}},Object(r.createElement)("span",{style:re({},I.isSaved&&{visibility:"hidden"})},Object(c.__)("Save","funnel-builder")),I.isSaved&&Object(r.createElement)(_.a,{color:"#ffffff",style:{position:"absolute"}})))),!Object(a.isEmpty)(I.ruleData)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wfty_rules_form"},Object(r.createElement)(b.h.Provider,{value:{showError:N,setShowError:k,type:n}},Object(r.createElement)("div",{"data-category":"basic",className:"wfty-rules-builder"},Object(r.createElement)("div",{className:"wfty_rules_common"},Object(r.createElement)("div",{className:"wfty-rule-group-target"},I.ruleData.map((function(e,t){return Object(r.createElement)(V,{key:t,updateOptions:x,ruleFinalData:we,allRuleData:Se,rowkey:t,data:0===we.length?[{rule_type:"general_always",operator:"",condition:""}]:we[t],type:n,totalRuleData:I.ruleData,validateRule:Ne,ruleDataValue:function(e,t){if("empty"===e){var n;null==we||we.splice(t,1),null===(n=I.ruleData)||void 0===n||n.splice(t,1);var r=JSON.parse(JSON.stringify(we)),a=JSON.parse(JSON.stringify(we));ke(r),D(re(re({},I),{},{ruleData:a}))}else if("zeroState"===e)ke(JSON.parse(JSON.stringify([]))),D(re(re({},I),{},{ruleData:["1"]}));else if("emptyData"!==e){we[t]=e;var l=JSON.parse(JSON.stringify(we));ke(l)}}})}))),Object(r.createElement)(i.Button,{isSecondary:!0,title:"Add a set of conditions",className:"bwf-add-condition bwf-btn-small",onClick:function(){I.isSaved||(Ne()?(k(!1),we.push([]),D(re(re({},I),{},{ruleData:Object(a.cloneDeep)([].concat(le(I.ruleData),["1"]))}))):k(!0))}},Object(c.__)("Create Rule Group","funnel-builder")))))),"upsell"===n&&Object(r.createElement)(ee.a,null))),Object(r.createElement)("div",{id:"wfty_funnel_rule_add_settings","data-is_rules_saved":I.isRuleSaved},Object(r.createElement)(O,{isRuleSaved:function(e){return D(re(re({},I),{},{isRuleSaved:e,ruleData:Object(a.cloneDeep)([].concat(le(I.ruleData),["1"]))}))},type:n,isProFeatureLocked:v}))))}}}]);