(window.webpackJsonp=window.webpackJsonp||[]).push([[41,2,5,8],Array(294).concat([function(e,t,n){var r;try{r={cloneDeep:n(766),constant:n(498),defaults:n(767),each:n(548),filter:n(551),find:n(768),flatten:n(577),forEach:n(549),forIn:n(772),has:n(561),isUndefined:n(562),last:n(773),map:n(563),mapValues:n(774),max:n(775),merge:n(777),min:n(783),minBy:n(784),now:n(652),pick:n(785),range:n(790),reduce:n(565),sortBy:n(793),uniqueId:n(798),values:n(570),zipObject:n(799)}}catch(e){}r||(r=window._),e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),o=n(2),a=n(6),i=n.n(a),c=n(43),u=n(8),l=(n(4),n(1)),s=n(45);n(319);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.label,n=void 0===t?"":t,a=e.id,d=void 0===a?"":a,p=e.value,b=e.onChange,y=void 0===b?o.noop:b,m=e.className,h=e.style,v=void 0===h?{}:h,g=e.isHover,O=e.hoverVal,w=void 0===O?"":O,j="inspector-color-".concat(Object(c.useInstanceId)(u.ColorPicker)),_=f(Object(r.useState)(!1),2),E=_[0],S=_[1],x=f(Object(r.useState)(),2),k=x[0],P=x[1],C=f(Object(r.useState)(0),2),N=C[0],T=C[1],D=g?Object(o.isArray)(p)?p:[p,w]:p,I=function(e){if(g){var t=D;return t[N]=e.hex,void y(t,{id:d})}y(e.hex,{id:d})},M=g?D[N]:D;return Object(r.createElement)("div",{className:i()("components-color-field",m),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:j},n),g&&Object(r.createElement)(u.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(u.Button,{className:i()("is-secondary-gray is-small",{"is-selected":0===N}),onClick:function(){return T(0)}},Object(l.__)("Default","funnel-builder")),Object(r.createElement)(u.Button,{className:i()("is-secondary-gray is-small",{"is-selected":1===N}),onClick:function(){return T(1)}},Object(l.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(u.ColorIndicator,{colorValue:M,ref:P,className:i()({"is-empty":Object(o.isEmpty)(M)})}),Object(r.createElement)("span",{className:"indicator-text"},M||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(u.ColorPicker,{color:M,onChangeComplete:I}),Object(r.createElement)(u.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(l.__)("Reset","funnel-builder")))))}},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(6),a=n.n(o),i=n(2),c=n(8),u=n(55),l=(n(304),n(5));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,o=e.className,d=e.center,p=void 0!==d&&d,b=e.isDismissive,y=void 0!==b&&b,m=e.onDismisal,h=void 0===m?function(){}:m,v=e.isProFeatureLocked;if(Object(i.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",o,{"bwf-block-t-center":p})},y&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return h()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(l.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(u.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(u.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(u.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(u.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(l.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(u.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(c.Button,f({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:a()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(l.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(60),i=n(2),c=n(8);n(6),n(310);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.value,n=void 0===t?"":t,c=e.onChange,u=e.keyid,l=e.openMergeTagModal,f=e.customSettings,p=void 0===f?{}:f,b=e.toolbar,y=e.quicktags,m=void 0!==y&&y,h=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(h.current){var e=window.tinymce.get("editor-bwf"+u);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,o=["lists","link"];Object(i.isEmpty)(r)||(o=[].concat(d(Object(i.isArray)(r)?r:r.split(",")),d(o))),wp.editor.initialize("editor-bwf"+u,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:b||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:d(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+u,plugins:o},p),quicktags:!!m&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(i.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,c(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){a.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==a.BACKSPACE&&t.keyCode!==a.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===a.F10&&t.stopPropagation()})),l&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(o.__)("Merge Tags","funnel-builder"),tooltip:Object(o.__)("Merge Tags","funnel-builder"),onclick:function(){l(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),n!==v.current&&c(v.current)}))}function r(){"complete"===document.readyState&&e()}return h.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+u)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+u,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){c(e.target.value)},onBlur:function(e){c(e.target.value)}}))};function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,o=y(Object(r.useState)("visual"),2),a=o[0],i=(o[1],y(Object(r.useState)(),2)),u=i[0],l=i[1];return Object(r.useEffect)((function(){l(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===a&&Object(r.createElement)(b,e),n&&"text"==a&&Object(r.createElement)(c.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:u,onChange:function(t){null!=e&&e.onChange(t)}}))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(0),o=n(15),a=n.n(o),i=["component","children"];var c=Object(r.createContext)(2);function u(e){return Object(r.createElement)(c.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function l(e){var t=e.component,n=e.children,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i),a=t||"div";return Object(r.createElement)(c.Consumer,null,(function(e){return Object(r.createElement)(c.Provider,{value:e+1},!1===t?n:Object(r.createElement)(a,o,n))}))}l.propTypes={component:a.a.oneOfType([a.a.func,a.a.string,a.a.bool]),children:a.a.node}},,,,function(e,t,n){},,,,,,function(e,t,n){},,,function(e,t,n){"use strict";var r=n(294),o=n(324).Graph;function a(e,t,n,o){var a;do{a=r.uniqueId(o)}while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function i(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:a,simplify:function(e){var t=(new o).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,a=e.y,i=t.x-o,c=t.y-a,u=e.width/2,l=e.height/2;if(!i&&!c)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(c)*u>Math.abs(i)*l?(c<0&&(l=-l),n=l*i/c,r=l):(i<0&&(u=-u),n=u,r=u*c/i);return{x:o+n,y:a+r}},buildLayerMatrix:function(e){var t=r.map(r.range(i(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var o=e.node(n),a=o.rank;r.isUndefined(a)||(t[a][o.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,a=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%a!=0?--o:o&&r.forEach(t,(function(t){e.node(t).rank+=o}))}))},addBorderNode:function(e,t,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return a(e,"border",o,t)},maxRank:i,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},function(e,t,n){"use strict";var r=n(0),o=(n(8),n(6)),a=n.n(o),i=n(2),c=n(15),u=n.n(c),l=n(5),s=n(45),f=(n(296),n(289)),d=function(e){var t=e.disabled,n=e.value,o=e.onChange,c=e.dateFormat,u=e.label,f=e.describedBy,d=e.error,p=e.onFocus,b=e.onKeyDown,y=e.errorPosition,m=e.placeHolder,h=a()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":d}),v=Object(i.uniqueId)("_woo-dates-input"),g=Object(r.useRef)(null);return Object(r.createElement)("div",{className:h},Object(r.createElement)("input",{type:"text",ref:g,className:"bwf-calendar-input-text",value:n,onChange:o,"aria-label":u,id:v,"aria-describedby":"".concat(v,"-message"),placeholder:Object(i.isEmpty)(m)?c.toLowerCase():m,onFocus:p,onKeyDown:b,disabled:t}),d&&Object(r.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:y},d),Object(r.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){p(),g.current&&g.current.focus()}},Object(r.createElement)(l.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(v,"-message")},d||f))};d.propTypes={disabled:u.a.bool,value:u.a.string,onChange:u.a.func.isRequired,dateFormat:u.a.string.isRequired,label:u.a.string.isRequired,describedBy:u.a.string.isRequired,error:u.a.string,errorPosition:u.a.string,onFocus:u.a.func,onKeyDown:u.a.func};var p={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop};t.a=Object(f.a)(d,p)},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(0),o=(n(329),n(330),n(1)),a=n(8),i=n(2),c=n(60),u=n(13),l=n.n(u),s=n(15),f=n.n(s),d=n(83),p=n(6),b=n.n(p),y=(n(296),n(314)),m=n(300),h=n(4),v=n(84);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function j(e,t,n){return t=_(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e])).onDateChange=n.onDateChange.bind(n),n.onInputChange=n.onInputChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(a=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;c.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.dateFormat,a=l()(t);r({date:a,text:t?a.format(o):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(d.i)(n,t),o=r?null:d.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?o:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,a=t.disabled,c=t.text,s=t.dateFormat,f=t.error,d=t.isInvalidDate,p=t.placeHolder,m=t.position,h=void 0===m?"bottom center":m,g=t.hasValue,O=void 0!==g&&g,w=t.className,j=(Object(u.isMoment)(n)?n.isValid():l()(n).isValid())?n:"";return Object(r.createElement)("div",{className:b()("bwf-specific-date",{"bwf-has-value":O})},Object(r.createElement)(v.a,{position:h,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(w),renderToggle:function(t){var n=t.isOpen,u=t.onToggle;return Object(r.createElement)(y.a,{disabled:!!n&&a,value:c,onChange:e.onInputChange,dateFormat:s,label:Object(o.__)("Choose a date","funnel-builder"),error:f,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date in format %s","funnel-builder"),s),onFocus:Object(i.partial)(e.handleFocus,n,u),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(i.partial)(e.handleKeyDown,n,u),errorPosition:"top center",placeHolder:p})},renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(x,{onToggle:n,date:j,isInvalidDate:d,onDateChange:e.onDateChange})}}))}}])&&O(n.prototype,a),s&&O(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,s}(r.Component),x=function(e){var t=e.onToggle,n=e.date,o=e.onDateChange,c=e.isInvalidDate,u=Object(r.useRef)();return Object(h.ub)(u,(function(){return t()})),Object(r.createElement)("div",{ref:u},Object(r.createElement)(m.b,{component:!1},Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(a.DatePicker,{currentDate:n,onChange:Object(i.partial)(o,t),isInvalidDate:c}))))};S.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=S},,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(6),i=n.n(a),c=n(2),u=n(15),l=n.n(u),s=n(355),f=n(75),d=n(65),p=function(e){var t=e.children;return Object(r.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};p.propTypes={children:l.a.node};var b=p,y=n(345),m=n(337),h=n(363),v=function(e){var t=e.data;return Object(r.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var n=e.label,o=e.value;return Object(r.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(r.createElement)("span",{className:"bwf-table-summary-value"},o),Object(r.createElement)("span",{className:"bwf-table-summary-label"},n))})))};v.propTypes={data:l.a.array};var g=v,O=(n(390),n(289));function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}function x(e,t,n){return t=k(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],k(e).constructor):t.apply(e,n))}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=x(this,t,[e])).getShowCols(e.headers);return n.state={showCols:r},n.onColumnToggle=n.onColumnToggle.bind(n),n.onPageChange=n.onPageChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=e.headers,n=e.query,r=this.props,o=r.headers,a=r.onColumnsChange,i=r.query,u=this.state.showCols;if(Object(c.isEqual)(o,t)||this.setState({showCols:this.getShowCols(o)}),i.orderby!==n.orderby&&!u.includes(i.orderby)){var l=u.concat(i.orderby);this.setState({showCols:l}),a(l)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,n=e.visible;return!(void 0!==n&&!n)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var n=e.key;return t.includes(n)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,n=e.rows,r=this.state.showCols;return n.map((function(e){return t.map((function(t,n){var o=t.key;return r.includes(o)&&e[n]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,n=this.props,r=n.headers,o=n.query,a=n.onQueryChange,i=n.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(o.orderby===e){var n=Object(c.find)(r,{defaultSort:!0})||Object(c.first)(r)||{};a("sort")(n.key,"desc")}var u=Object(c.without)(t.showCols,e);return i(u,e),{showCols:u}}var l=[].concat(j(t.showCols),[e]);return i(l,e),{showCols:l}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,n=e.onQueryChange;t&&t.apply(void 0,arguments),n&&n("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.className,c=t.isLoading,u=t.onQueryChange,l=t.onSort,p=t.query,v=t.rowHeader,O=t.rowsPerPage,w=t.showMenu,j=t.summary,_=t.title,E=t.totalRows,S=t.rowClasses,x=t.emptyMessage,k=t.filterColumnIcon,P=void 0===k?"":k,C=t.extraSectionBeforefilterCol,N=t.hideHeader,T=t.footer,D=t.showPagination,I=void 0===D||D,M=t.id,A=t.perPageOptions,R=this.state.showCols,F=this.props.headers,L=this.getVisibleHeaders(),B=this.getVisibleRows(),q=i()("bwf-table","bwf-analytics-card",a,{"bwf-table-placeholder":c});return Object(r.createElement)(s.a,{className:q,title:_,action:n,hideHeader:N&&"yes"==N?"yes":"no",footer:T,menu:!(!C&&!w)&&Object(r.createElement)("div",null,C,w&&Object(r.createElement)(f.a,{label:Object(o.__)("Choose which values to display","funnel-builder"),buttonIcon:P,renderContent:function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b,null,Object(o.__)("Columns:","funnel-builder")),F.map((function(t){var n=t.key,o=t.label;return t.required?null:Object(r.createElement)(d.a,{checked:R.includes(n),isCheckbox:!0,isClickable:!0,key:n,onInvoke:e.onColumnToggle(n)},o)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable,id:M},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(h.a,{numberOfRows:O,headers:L,rowHeader:v,caption:_,query:p})):Object(r.createElement)(m.a,{rows:B,headers:L,rowHeader:v,caption:_,query:p,emptyMessage:x,onSort:l||u("sort"),rowClasses:S}),I&&!c&&Object(r.createElement)(y.a,{key:parseInt(p.paged,10)||1,page:parseInt(p.paged,10)||1,perPage:O,total:E,onPageChange:this.onPageChange,onPerPageChange:u("per_page"),perPageOptions:A}),j&&Object(r.createElement)(g,{data:j}))}}])&&E(n.prototype,a),u&&E(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,u}(r.Component);C.propTypes={headers:l.a.arrayOf(l.a.shape({hiddenByDefault:l.a.bool,defaultSort:l.a.bool,isSortable:l.a.bool,key:l.a.string,label:l.a.oneOfType([l.a.string,l.a.node]),required:l.a.bool})),ids:l.a.arrayOf(l.a.number),isLoading:l.a.bool,onQueryChange:l.a.func,onColumnsChange:l.a.func,onSort:l.a.func,query:l.a.object,rowHeader:l.a.oneOfType([l.a.number,l.a.bool]),rows:l.a.arrayOf(l.a.arrayOf(l.a.shape({display:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number,l.a.bool])}))).isRequired,rowsPerPage:l.a.number.isRequired,showMenu:l.a.bool,summary:l.a.arrayOf(l.a.shape({label:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number])})),totalRows:l.a.oneOfType([l.a.number,l.a.string]).isRequired,rowClasses:l.a.arrayOf(l.a.string),showPagination:l.a.bool};var N={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[],showPagination:!0};t.a=Object(O.a)(C,N)},function(e,t,n){},,function(e,t,n){var r;try{r={clone:n(684),constant:n(498),each:n(548),filter:n(551),has:n(561),isArray:n(305),isEmpty:n(730),isFunction:n(471),isUndefined:n(562),keys:n(352),map:n(563),reduce:n(565),size:n(733),transform:n(739),union:n(740),values:n(570)}}catch(e){}r||(r=window._),e.exports=r},,,function(e,t,n){var r;try{r=n(682)}catch(e){}r||(r=window.graphlib),e.exports=r},,,,function(e,t,n){"use strict";var r=n(8),o=n(0),a=n(6),i=n.n(a),c=n(302),u=n(82),l=n(288),s=n(2),f=n(339),d=["ajax_cb","options"];function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=n(299),h=["value","onChange","id","label","className"];function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var g=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,a=e.id,c=e.label,u=e.className,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h);function s(e){r(e,a)}return Object(o.createElement)("div",{className:i()("components-richeditor",u)},c&&Object(o.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:a},c),Object(o.createElement)(m.a,v({content:n,value:n,setContent:s,onChange:s,keyid:a},l)))},O=n(5),w=function(e){var t=e.label,n=e.copy_text;return Object(o.createElement)("div",{className:i()("components-copier")},t&&Object(o.createElement)("label",{className:"components-label"},t),n&&Object(o.createElement)("div",{className:"bwf-display-flex"},Object(o.createElement)("span",{className:"bwf-copier-text"},n," "),Object(o.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(o.createElement)(O.a,{icon:"duplicate",size:20}),"Copy")))},j=n(291),_=n(295),E=n(1),S=(n(334),n(4)),x=n(289);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var n=e.split(" ");return D(D(D(D({},t.attrTop,Object(s.isEmpty)(n[0])?"0":n[0]),t.attrRight,Object(s.isEmpty)(n[1])?"0":n[1]),t.attrBottom,Object(s.isEmpty)(n[2])?"0":n[2]),t.attrLeft,Object(s.isEmpty)(n[3])?"0":n[3])}return D(D(D(D({},t.attrTop,"0"),t.attrRight,"0"),t.attrBottom,"0"),t.attrLeft,"0")},M={label:Object(E.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(E.__)("Top","funnel-builder"),labelRight:Object(E.__)("Right","funnel-builder"),labelBottom:Object(E.__)("Bottom","funnel-builder"),labelLeft:Object(E.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},A=Object(x.a)((function(e){var t=e.value,n=void 0===t?{}:t,a=e.label,c=e.type,u=e.onChange,l=void 0===u?s.noop:u,f=(e.defaultSync,I(n,e)),d="",p=N(Object(o.useState)(!Object(S.k)(Object.values(f))),2),b=p[0],y=p[1],m=N(Object(o.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,D(D(D(D({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),2),h=m[0],v=m[1];d=h&&h[e.attrUnit]?h[e.attrUnit]:"px",Object(o.useEffect)((function(){v(C(C({},h),I(n,e)))}),[n]),Object(o.useEffect)((function(){v(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,D(D(D(D({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),d=h&&h[e.attrUnit]?h[e.attrUnit]:"px"}),[]);var g=function(t,r){var o=t.target.value;if(b)!function(t){"padding"===c&&(t=t.toString().replace(/-/g,""));var r=C({},h);if(r[e.attrTop]=t,r[e.attrRight]=t,r[e.attrBottom]=t,r[e.attrLeft]=t,Object(s.isString)(n)){var o="".concat(r[e.attrTop]," ").concat(r[e.attrRight]," ").concat(r[e.attrBottom]," ").concat(r[e.attrLeft]);l(o)}else l(r)}(o);else{"padding"===c&&(o=o.toString().replace(/-/g,""));var a=C({},h);if(a[r]=o,Object(s.isString)(n)){var i="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);l(i)}else l(a)}};return Object(o.createElement)("div",{className:"bwf-dimensions-control-component"},a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrTop)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:h&&h[e.attrTop],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrRight)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:h&&h[e.attrRight],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrBottom)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:h&&h[e.attrBottom],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrLeft)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:h&&h[e.attrLeft],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)(r.Button,{className:i()("components-bwf-dimensions-control_reset",{"is-lock":b}),label:Object(E.__)("Reset","funnel-builder"),onClick:function(){return y((function(e){return!e}))},isSmall:!0},Object(o.createElement)(O.a,{icon:b?"lock":"unlock",size:"16"}))),Object(o.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),M),R=n(43);n(335);function F(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=[{id:"h-offset",selectindex:0,label:Object(E.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(E.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(E.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(E.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(E.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(E.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],q=function(e){var t=e.typography,n=e.setTypography,r=e.settingOptions,a=e.label,i=Object(R.useInstanceId)(q,"bwf-field-item");return Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:"bwf-box-shadow-control-component ",id:i},a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},r.map((function(e){return e.type?"color"===e.type?"":void 0:Object(o.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(o.createElement)("input",{type:"number",value:t[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(r){var o=r.target.value;o=e.hasOwnProperty("allownegative")&&e.allownegative?r.target.value:o<0?0:o;var a=F(t);a[e.selectindex]=o,n(a)}}),Object(o.createElement)("label",{htmlFor:e.id},e.label))})))),Object(o.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"Â ",Object(o.createElement)("label",{className:"components-base-control__label"},Object(E.__)("Shadow Color","funnel-builder")),Object(o.createElement)(_.a,{value:t[4],onChange:function(e){var r=F(t);r[4]=e,n(r)}})))},z=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,a=n.h_offset,i=void 0===a?"":a,c=n.v_offset,u=void 0===c?"":c,l=n.blur,s=void 0===l?"":l,f=n.spread,d=void 0===f?"":f,p=n.color,b=void 0===p?"":p,y=n.inset,m=[i,u,s,d,b,void 0===y?"":y];return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(q,{typography:m,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:B,label:r}))};n(336);function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.value,n=e.onChange,a=e.label,i=e.defaultCustomValue,c=Y(Object(o.useState)(""),2),u=c[0],f=c[1],d=Y(Object(o.useState)(""),2),p=d[0],b=d[1];return Object(o.useEffect)((function(){Object(s.isEmpty)(p)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(b("auto"),f("100%")):(b("custom"),f(t)))}),[t]),Object(o.createElement)(o.Fragment,null,a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)("div",{className:"bwf-width-control"},Object(o.createElement)(r.TextControl,U({value:u,onChange:function(e){n(e),f(e)},disabled:"auto"===p},"custom"===p&&{type:"number",min:"0"})),Object(o.createElement)(l.a,{options:[{key:"auto",label:Object(E.__)("Auto","funnel-builder")},{key:"custom",label:Object(E.__)("Custom","funnel-builder")}],selected:p,onChange:function(e){b(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?i:t),f(i))}})))},G=n(63),X=["label","tooltip"];function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var J={checkbox:u.a,radio:j.a,select:l.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:c.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,d),i=b(Object(o.useState)(r),2),c=i[0],u=i[1],l=b(Object(o.useState)(!1),2),y=l[0],m=l[1];Object(o.useEffect)((function(){Object(s.isEmpty)(c)&&h()}),[c]);var h=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),u(t),m(!0)}})}))};return Object(o.createElement)(o.Fragment,null,y?Object(o.createElement)(f.a,p({options:c},a)):Object(o.createElement)("div",{className:"setting-form-field"},Object(o.createElement)("div",{className:"is-placeholder long"})))},richeditor:g,richtext:g,copier:w,color:_.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,X);return Object(o.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(o.createElement)("div",{className:"bwf-flex bwf--g4"},Object(o.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(o.createElement)(G.a,{toolTipText:n,size:280,position:"bottom right"},Object(o.createElement)(O.a,{icon:"info",size:16}))),Object(o.createElement)(r.ToggleControl,Q({},a,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":A,"box-shadow":z,"bwf-label":function(e){var t=e.label,n=e.class;return Object(o.createElement)("span",{className:i()("bwf_label",n)},t)},width:H};t.a=function(e){var t=e.input,n=e.formProps,a=e.values,c=e.customMapField,u=void 0===c?{}:c,l=W(W({},J),u),f=l.text;if(t.type.toLowerCase()in l&&(f=l[t.type.toLowerCase()]),t.ajax_cb&&(f=l.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(a)){var d=a[t.id];if(Object(s.isEmpty)(d))a[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof d[0]){var p=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&d.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},p.push(t)}else if("string"==typeof e.value.id&&d.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},p.push(n)}})),a[t.id]=p}}var b,y;return Object(o.createElement)("div",{className:i()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(o.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(o.createElement)(f,W(W({label:t.label},(b=t,y=Object.assign({},b.props),b.type.toLowerCase()in l||(y.type=b.type.toLowerCase()),y.placeholder=b.placeholder,y.options=b.options,b.checkboxlabel&&(y.checkboxlabel=b.checkboxlabel),b.multiple&&(y.multiple=b.multiple),b.ajax_cb&&(y.ajax_cb=b.ajax_cb),"copier"===b.type&&(y=b),"width"===b.type&&(y=b),"color"===b.type&&(y=b,b.isHover&&b.hoverKey&&(y.hoverVal=a[b.hoverKey])),"richeditor"!==b.type&&"richtext"!==b.type&&"textarea"!==b.type||(y=b),"number"===b.type&&(y.min=b.min,y.max=b.max),"select"===b.type&&(y.excludeSelectedOptions=!1,y.options&&(y.options=y.options.map((function(e){return"object"!==K(e.value)&&(e.key="object"!==K(e.value)?e.value:e.key,e.value={id:e.value}),e}))),b.multiple&&(y.excludeSelectedOptions=!0,y.inlineTags=!0)),"richeditor"===b.type&&(y.id=b.id),"bwf-toggle"===b.type&&(y.tooltip=b.tooltip),"input"!==b.type&&"text"!==b.type&&"textarea"!==b.type||(y.placeholder=Object(E.__)("Type hereâ¦","funnel-builder")),"text"===b.type&&b.disabled&&(y.disabled=b.disabled),"toggle"===b.type&&(y.className="bwf-tooglecontrol-advance",y.tooltip=b.tooltip,y.label=b.label),y.keyid=b.key,y)),n)),t.hint&&Object(o.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(6),i=n.n(a),c=n(15),u=n.n(c),l=n(1),s=n(8),f=n(43),d=n(612),p=n(613),b=n(614),y=n(5),m=n(22),h=n(289);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function j(e,t,n){return t=_(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e])).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},n.container=Object(r.createRef)(),n.sortBy=n.sortBy.bind(n),n.updateTableShadow=n.updateTableShadow.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,n=this.props,r=n.headers,a=n.query;return function(){var n=a.orderby||Object(o.get)(Object(o.find)(r,{defaultSort:!0}),"key",!1),i=a.order||Object(o.get)(Object(o.find)(r,{key:n}),"defaultOrder","desc"),c="desc";e===n&&(c="desc"===i?"asc":"desc"),t.props.onSort(e,c)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,n=t.isScrollableRight,r=t.isScrollableLeft,o=e.scrollWidth-e.scrollLeft<=e.offsetWidth;o&&n?this.setState({isScrollableRight:!1}):o||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var a=e.scrollLeft<=0;a&&r?this.setState({isScrollableLeft:!1}):a||r||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.ariaHidden,a=t.caption,c=t.classNames,u=t.headers,f=t.instanceId,h=t.query,v=t.rowHeader,O=t.rows,w=t.rowClasses,j=t.emptyMessage,_=this.state,E=_.isScrollableRight,S=_.isScrollableLeft,x=_.tabIndex,k=i()("bwf-table-table",c,{"is-scrollable-right":E,"is-scrollable-left":S,"is-empty-data":!N}),P=h.orderby||Object(o.get)(Object(o.find)(u,{defaultSort:!0}),"key",!1),C=h.order||Object(o.get)(Object(o.find)(u,{key:P}),"defaultOrder","desc"),N=!!O.length;return Object(r.createElement)("div",{className:k,ref:this.container,tabIndex:x,"aria-hidden":n,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(r.createElement)("table",{width:"100%"},Object(r.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},a,"0"===x&&Object(r.createElement)("small",null,Object(l.__)("(scroll to see more)","funnel-builder"))),Object(r.createElement)("tbody",null,Object(r.createElement)("tr",null,u.map((function(t,n){var a=t.cellClassName,c=t.isSortable,u=t.isNumeric,y=t.key,h=t.label,v=t.screenReaderLabel,O=t.isPro,w="header-".concat(f,"-").concat(n),j={className:i()("bwf-table-header",a,{"is-sortable":c,"is-sorted":P===y,"is-numeric":u})};c&&(j["aria-sort"]="none",P===y&&(j["aria-sort"]="asc"===C?"ascending":"descending"));var _=P===y&&"asc"!==C?Object(l.sprintf)(Object(l.__)("Sort by %s in ascending order","funnel-builder"),v):Object(l.sprintf)(Object(l.__)("Sort by %s in descending order","funnel-builder"),v),E=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{"aria-hidden":Boolean(v)},h),O&&Object(r.createElement)(m.b,null),v&&Object(r.createElement)("span",{className:"screen-reader-text"},v));return Object(r.createElement)("th",g({role:"columnheader",scope:"col",key:n},j),c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Button,{"aria-describedby":w,onClick:N?e.sortBy(y):o.noop},E,P===y&&"asc"===C?Object(r.createElement)(d.a,{icon:p.a}):Object(r.createElement)(d.a,{icon:b.a})),Object(r.createElement)("span",{className:"screen-reader-text",id:w},_)):E)}))),N?O.map((function(e,t){return Object(r.createElement)("tr",{key:t,className:w[t]},e.map((function(e,t){var o=u[t],a=o.cellClassName,c=(o.isLeftAligned,o.isNumeric),l=o.isPro,s=v===t,f=s?"th":"td",d=i()("bwf-table-item",a,{"is-conversion":"conversion"===u[t].key,"is-numeric":c,"is-sorted":P===u[t].key});return Object(r.createElement)(f,{scope:s?"row":null,key:t,className:d},l&&!n?"-":function(e){return e.display||null}(e))})))})):Object(r.createElement)("tr",{className:"bwf-table-empty"},Object(r.createElement)("td",{className:"bwf-table-empty-item",colSpan:u.length},Object(r.createElement)(y.a,{icon:"no-data",height:"82",width:"112"}),Object(r.createElement)("div",{className:"bwf-no-data"},Object(l.__)("No Data Available","funnel-builder")),j?Object(r.createElement)("div",{className:"bwf-info"},j):null)))))}}])&&O(n.prototype,a),c&&O(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(r.Component);S.propTypes={ariaHidden:u.a.bool,className:u.a.string,headers:u.a.arrayOf(u.a.shape({defaultSort:u.a.bool,defaultOrder:u.a.string,isLeftAligned:u.a.bool,isNumeric:u.a.bool,isSortable:u.a.bool,key:u.a.string,label:u.a.node,required:u.a.bool,screenReaderLabel:u.a.string})),onSort:u.a.func,query:u.a.object,rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,rowHeader:u.a.oneOfType([u.a.number,u.a.bool]),rowClasses:u.a.arrayOf(u.a.string)};var x={ariaHidden:!1,headers:[],onSort:o.noop,query:{},rowHeader:0,rowClasses:[]};t.a=Object(f.withInstanceId)(Object(h.a)(S,x))},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(6),i=n.n(a),c=n(2),u=n(15),l=n.n(u),s=n(8),f=n(43),d=n(60);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function h(e,t,n){return t=v(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){var e;return b(this,t),(e=h(this,t,arguments)).handleKeyDown=e.handleKeyDown.bind(e),e.select=e.select.bind(e),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>r?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.options,a=t.onSearch,i=t.selectedIndex,c=t.setExpanded;if(0!==o.length)switch(e.keyCode){case d.UP:n(),e.preventDefault(),e.stopPropagation();break;case d.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case d.ENTER:this.select(o[i]),e.preventDefault(),e.stopPropagation();break;case d.LEFT:case d.RIGHT:c(!1);break;case d.ESCAPE:return c(!1),void a(null);case d.TAB:this.select(o[i]),c(!1),a(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.listboxId,a=t.options,c=t.selectedIndex,u=t.staticList,l=i()("bwf-select-control-listbox",{"is-static":u});return Object(r.createElement)("div",{ref:this.listbox,id:o,role:"listbox",className:l,tabIndex:"-1"},a.map((function(t,o){return Object(r.createElement)(s.Button,{ref:e.getOptionRef(o),key:t.key,id:"bwf-select-control-option-".concat(n,"-").concat(t.key),role:"option","aria-selected":o===c,disabled:t.isDisabled,className:i()("bwf-select-control-option",{"is-selected":o===c}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.label)})))}}])&&y(n.prototype,o),a&&y(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);O.propTypes={instanceId:l.a.number,listboxId:l.a.string,node:l.a.instanceOf(Element).isRequired,onSelect:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,selectedIndex:l.a.number,staticList:l.a.bool};var w=O,j=n(134);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}function P(e,t,n){return t=C(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,t,[e])).removeAll=n.removeAll.bind(n),n.removeResult=n.removeResult.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),n=t,(a=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this;return function(){var n=t.props,r=n.selected,o=n.onChange,a=Object(c.findIndex)(r,{key:e});o([].concat(E(r.slice(0,a)),E(r.slice(a+1))))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,a=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control-tags"},n.map((function(t,a){if(!t.label)return null;var i=Object(o.sprintf)(Object(o.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,a+1,n.length);return Object(r.createElement)(j.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:i})}))),a&&Object(r.createElement)(s.Button,{className:"bwf-select-control-clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Clear all","funnel-builder")))):null}}])&&x(n.prototype,a),i&&x(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,i}(r.Component);T.propTypes={onChange:l.a.func,onSelect:l.a.func,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showClearButton:l.a.bool};var D=T,I=n(5);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}function B(e,t,n){return t=q(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=B(this,t,[e])).state={isActive:!1},n.input=Object(r.createRef)(),n.updateSearch=n.updateSearch.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(t,e),n=t,(a=[{key:"updateSearch",value:function(e){var t=this;return function(n){t.isBWFMaintainSingleTerm()||e(n.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,o=n.setExpanded,a=n.showAllOnFocus,i=n.updateFilteredOptions;return function(n){t.setState({isActive:!0}),r&&a?(n.target.select(),i("")):r?e(n.target.value):o(!0)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.selected,a=t.onChange,i=t.query,c=t.setExpanded;d.BACKSPACE===e.keyCode&&!i&&o.length&&a(A(o.slice(0,-1))),d.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),d.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control-control-value"},n[0].label)}},{key:"renderInput",value:function(){var e=this.props,t=e.activeId,n=e.hasTags,o=e.inlineTags,a=e.instanceId,i=e.isExpanded,c=e.isSearchable,u=e.listboxId,l=e.onSearch,s=e.placeholder,f=e.searchInputType,d=this.state.isActive,p=this.isBWFMaintainSingleTerm();return Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control-control-input",id:"bwf-select-control-".concat(a,"-control-input"),ref:this.input,type:c?f:"button",value:this.getInputValue(),placeholder:d&&!p?s:"",onChange:this.updateSearch(l),onFocus:this.onFocus(l),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":i,"aria-haspopup":"true","aria-owns":u,"aria-controls":u,"aria-activedescendant":t,"aria-describedby":n&&o?"search-inline-input-".concat(a):null})}},{key:"isBWFMaintainSingleTerm",value:function(){var e=this.props,t=e.selected;return!!e.bwfMaintainSingleTerm&&t.length>0}},{key:"getInputValue",value:function(){var e=this.props,t=e.isFocused,n=e.isSearchable,r=e.multiple,o=e.query,a=e.selected,i=a.length?a[0].label:"";return r||t?this.isBWFMaintainSingleTerm()?"":n&&t&&o?o:"":i}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.hasTags,c=t.help,u=t.inlineTags,l=t.instanceId,s=t.isSearchable,f=t.label,d=t.query,p=this.state.isActive;return Object(r.createElement)("div",{className:i()("components-base-control","bwf-select-control-control",n,{empty:!d||0===d.length,"is-active":p,"has-tags":u&&a,"with-value":this.getInputValue().length,"has-error":!!c}),onClick:function(){e.input.current.focus()}},s&&Object(r.createElement)(I.a,{icon:"search",size:18}),u&&Object(r.createElement)(D,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(l,"-control-input"),className:"components-base-control__label"},f),this.renderInput(),u&&Object(r.createElement)("span",{id:"search-inline-input-".concat(l),className:"screen-reader-text"},Object(o.__)("Move backward for selected items","funnel-builder")),!!c&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(l,"__help"),className:"components-base-control__help"},c)))}}])&&F(n.prototype,a),c&&F(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(r.Component);U.propTypes={hasTags:l.a.bool,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,instanceId:l.a.number,label:l.a.string,listboxId:l.a.string,onBlur:l.a.func,onChange:l.a.func,onSearch:l.a.func,placeholder:l.a.string,query:l.a.string,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showAllOnFocus:l.a.bool,bwfMaintainSingleTerm:l.a.bool};var Y=U,V=(n(527),n(129));function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function X(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function Q(e,t,n){return t=J(t),function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],J(e).constructor):t.apply(e,n))}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t,n){return(t=ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}var re=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(n=Q(this,t,[e]),"mounted",!0),n.state=W(W({},n.constructor.getInitialState()),{},{filteredOptions:[],selectedIndex:0}),n.bindNode=n.bindNode.bind(n),n.decrementSelectedIndex=n.decrementSelectedIndex.bind(n),n.incrementSelectedIndex=n.incrementSelectedIndex.bind(n),n.onAutofillChange=n.onAutofillChange.bind(n),n.updateFilteredOptions=Object(c.debounce)(n.updateFilteredOptions.bind(n),e.searchDebounceTime),n.search=n.search.bind(n),n.selectOption=n.selectOption.bind(n),n.setExpanded=n.setExpanded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(t,e),n=t,u=[{key:"getInitialState",value:function(){return{isExpanded:!1,isFocused:!1,query:""}}}],(a=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.multiple,n=this.constructor.getInitialState();!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.multiple,n=e.selected;return!!t&&n.some((function(e){return Boolean(e.label)}))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return r;var o=n.find((function(e){return e.key===r}));return o?[o]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,o=t.selected,a=this.state.query,i=n?[].concat(X(o),[e]):[e];this.reset(i),Array.isArray(o)?-1===Object(c.findIndex)(o,{key:e.key})&&r(i,a):o!==e.key&&r(e.key,a)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(o.sprintf)(Object(o._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(o.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=this.state.filteredOptions;return t?r:n}},{key:"getFilteredOptions",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props,r=n.excludeSelectedOptions,o=void 0===r||r,a=n.maxResults,i=void 0===a?10:a,c=n.onFilter,u=void 0===c?function(){}:c,l=this.getSelected().map((function(e){return e.key})),s=[],f=0;f<e.length;f++){var d=e[f];if(!o||!l.includes(d.key)){var p=d.keywords,b=void 0===p?[]:p;if("string"==typeof d.label&&(b=[].concat(X(b),[d.label])),s.push(d),i&&s.length===i)break}}return u(s,t)}},{key:"setExpanded",value:function(e){this.setState({isExpanded:e})}},{key:"search",value:function(e){this.setState({query:e,isFocused:!0}),this.updateFilteredOptions(e)}},{key:"updateFilteredOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,o=n.options,a=n.onSearch,i=this.activePromise=Promise.resolve(a(o,e)).then((function(n){if(i===t.activePromise&&t.mounted){var o=null===e||e.length||r?t.getFilteredOptions(n,e):n;t.setState({selectedIndex:0,filteredOptions:o,isExpanded:Boolean(o.length)},(function(){return t.announce(o)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getFilteredOptions(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,o=e.className,a=e.controlClassName,c=e.inlineTags,u=e.instanceId,l=e.isSearchable,s=e.options,f=this.state,d=f.isExpanded,p=f.isFocused,b=f.selectedIndex,y=this.hasTags(),m=(s[b]||{}).key,h=void 0===m?"":m,v=d?"bwf-select-control-listbox-".concat(u):null,g=d?"bwf-select-control-option-".concat(u,"-").concat(h):null;return Object(r.createElement)("div",{className:i()("bwf-select-control bwf-select-control-1",o,{"has-inline-tags":y&&c,"is-focused":p,"is-searchable":l}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control-autofill-input",tabIndex:"-1"}),n,Object(r.createElement)(Y,G({},this.props,this.state,{activeId:g,className:a,hasTags:y,isExpanded:d,listboxId:v,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateFilteredOptions:this.updateFilteredOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm})),!c&&y&&Object(r.createElement)(D,G({},this.props,{selected:this.getSelected()})),d&&Object(r.createElement)(w,G({},this.props,this.state,{activeId:g,listboxId:v,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}])&&Z(n.prototype,a),u&&Z(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,u}(r.Component);re.propTypes={autofill:l.a.string,children:l.a.node,className:l.a.string,controlClassName:l.a.string,excludeSelectedOptions:l.a.bool,onFilter:l.a.func,getSearchExpression:l.a.func,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,label:l.a.string,onChange:l.a.func,onSearch:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,placeholder:l.a.string,searchDebounceTime:l.a.number,selected:l.a.oneOfType([l.a.string,l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string}))]),maxResults:l.a.number,multiple:l.a.bool,showClearButton:l.a.bool,searchInputType:l.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:l.a.bool,showAllOnFocus:l.a.bool,staticList:l.a.bool,bwfMaintainSingleTerm:l.a.bool};var oe={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,bwfMaintainSingleTerm:!1},ae=Object(V.a)(re,oe);t.a=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(ae)},,,function(e,t,n){var r=n(713),o=n(723),a=n(370),i=n(305),c=n(728);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):c(e)}},,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(8),i=n(6),c=n.n(i),u=n(15),l=n.n(u),s=n(2),f=(n(348),n(5)),d=n(288),p=n(289);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function g(e,t,n){return t=O(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j=[10,25,50,75,100],_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,t,[e])).state={inputValue:n.props.page},n.previousPage=n.previousPage.bind(n),n.nextPage=n.nextPage.bind(n),n.onInputChange=n.onInputChange.bind(n),n.onInputBlur=n.onInputBlur.bind(n),n.perPageChange=n.perPageChange.bind(n),n.selectInputValue=n.selectInputValue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(i=[{key:"getPerPageOptions",value:function(){var e=this.props.perPageOptions;return[].concat(y(void 0===e?[]:e),j).sort((function(e,t){return e-t}))}},{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,o=t.total,a=t.page;n(parseInt(e,10));var i=Math.ceil(o/parseInt(e,10));a>i&&r(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,o=parseInt(e.target.value,10);o!==r&&Number.isFinite(o)&&o>0&&this.pageCount&&this.pageCount>=o&&n(o,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var i=c()("bwf-pagination-link",{"is-active":t>1}),u=c()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(o.sprintf)(Object(o.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(a.Button,{className:i,disabled:!(t>1),onClick:this.previousPage,label:Object(o.__)("Previous Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-left",width:16})),Object(r.createElement)(a.Button,{className:u,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(o.__)("Next Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=this.getPerPageOptions().map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(d.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(r.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(o.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,o=e.className,a=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var i=c()("bwf-pagination",o);return this.pageCount<=1?t>this.getPerPageOptions()[0]&&Object(r.createElement)("div",{className:i},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:i},this.renderPageArrows(),a&&this.renderPerPagePicker())}}])&&h(n.prototype,i),u&&h(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,u}(r.Component);_.propTypes={page:l.a.number.isRequired,onPageChange:l.a.func,perPage:l.a.number.isRequired,onPerPageChange:l.a.func,total:l.a.oneOfType([l.a.number,l.a.string]).isRequired,className:l.a.string,showPagePicker:l.a.bool,showPerPagePicker:l.a.bool,showPageArrowsLabel:l.a.bool};var E={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0};t.a=Object(p.a)(_,E)},,function(e,t,n){"use strict";var r=n(1);t.a={calendarLabel:Object(r.__)("Calendar","funnel-builder"),closeDatePicker:Object(r.__)("Close","funnel-builder"),focusStartDate:Object(r.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(r.__)("Clear Date","funnel-builder"),clearDates:Object(r.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(r.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(r.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(r.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(r.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(r.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(r.__)("page up and page down keys","funnel-builder"),homeEnd:Object(r.__)("Home and end keys","funnel-builder"),escape:Object(r.__)("Escape key","funnel-builder"),questionMark:Object(r.__)("Question mark","funnel-builder"),selectFocusedDate:Object(r.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(r.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(r.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(r.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(r.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(r.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(r.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Selected. %s","funnel-builder"),t)}}},function(e,t,n){},,,function(e,t,n){"use strict";var r=n(0),o=n(8),a=n(31),i=n(15),c=n.n(i),u=n(6),l=n.n(u),s=(n(368),n(5)),f=["labels","isOpen","showIcon","hasValue"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var p=function(e){var t=e.labels,n=e.isOpen,i=e.showIcon,c=e.hasValue,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,f),p=l()("bwf-dropdown-button",{"is-open":n,"is-multi-line":t.length>1,"has-value":c});return Object(r.createElement)(o.Button,d({className:p,"aria-expanded":n},u),Object(r.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(r.createElement)("span",{key:t},Object(a.decodeEntities)(e))})),i&&Object(r.createElement)(s.a,{icon:"calender"})))};p.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=p},function(e,t,n){var r=n(534),o=n(536),a=n(353);e.exports=function(e){return a(e)?r(e):o(e)}},,,function(e,t,n){"use strict";var r=n(0),o=n(6),a=n.n(o),i=n(15),c=n.n(i),u=(n(75),n(300));n(389);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function p(e,t,n){return t=b(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return s(this,t),p(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.action,n=e.children,o=e.description,i=e.isInactive,c=e.menu,l=e.title,s=e.hideHeader,f=e.footer,d=e.id,p=a()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(r.createElement)("div",{className:p,id:d},s&&"no"==s&&(!!l||t||c)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-header"},!!l&&Object(r.createElement)("div",{className:"bwf-card-title-wrapper"},Object(r.createElement)("div",{className:"bwf-card-title bwf-card-header-item"},l),o&&Object(r.createElement)("div",{className:"bwf-card-description bwf-card-header-item"},o)),t&&Object(r.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(r.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(r.createElement)(u.b,{className:"bwf-card-body"},n),f&&Object(r.createElement)("div",{className:"bwf-card-footer"},f))}}])&&f(n.prototype,o),i&&f(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(r.Component);m.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])};t.a=m},,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(15),i=n.n(a),c=n(337);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["numberOfRows"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function h(e,t,n){return t=v(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return b(this,t),h(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.numberOfRows,a=void 0===n?5:n,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,l),u=Object(o.range)(a).map((function(){return e.props.headers.map((function(){return{display:Object(r.createElement)("span",{className:"is-placeholder"})}}))})),f=this.props.headers.map((function(e){return d(d({},e),{},{label:Object(r.createElement)("span",{className:"is-placeholder"})})}));return Object(r.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:u},i,{headers:f}))}}])&&y(n.prototype,a),i&&y(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,i}(r.Component);O.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},t.a=O},,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(1),i=n(8),c=n(406),u=n(14),l=n(291),s=n(59),f=n(20);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,p=e.onRequestClose,b=e.onCreationScreen,y=e.creationSuccess,m=e.clearAndCloseEverything,h=e.isBusy,v=e.errors,g=Object(f.b)(),O=g.isProFeatureLocked,w=g.isBasic,j=Object(f.b)("ck").isProFeatureLocked,_=w&&"wc_checkout"===(null==t?void 0:t.type)?j:O,E=d(Object(r.useState)(""),2),S=E[0],x=E[1],k=d(Object(r.useState)(""),2),P=k[0],C=k[1],N=d(Object(r.useState)(null),2),T=N[0],D=N[1],I=d(Object(r.useState)(null!=v?v:{}),2),M=I[0],A=I[1],R=d(Object(r.useState)("new"),2),F=R[0],L=R[1],B=d(Object(r.useState)(!1),2),q=B[0],z=B[1];Object(r.useEffect)((function(){A(v)}),[v]),Object(r.useEffect)((function(){var e;C(null==T||null===(e=T.step)||void 0===e?void 0:e.name),"new"===F&&Object(o.isEmpty)(S.trim())||"existing"===F&&Object(o.isEmpty)(P)?z(!0):z(!1)}),[F,T,S,P]);var U=function(){if(!q){var t=e.errors;T&&T.copyFrom&&!T.step&&(t.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(o.size)(t)?n({copyFrom:T&&T.hasOwnProperty("step")?T.step:null,title:"existing"===F?"".concat(P," Copy"):S}):A(t)}};return Object(r.createElement)(r.Fragment,null,M&&Object(o.size)(M)>0&&Object(r.createElement)(s.a,{status:"error",isDismissible:!0,onRemove:function(){return A({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(M).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},M[e])})))),h||!b||y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){U(),e.preventDefault()}},Object(r.createElement)(l.a,{options:[{value:"new",label:Object(a.__)("Create New","funnel-builder")},{value:"existing",label:Object(a.__)("Clone Existing","funnel-builder"),isPro:_}],selected:F,onChange:function(e){L(e)},className:"bwf-add-bump_radio-items"}),"new"===F?Object(r.createElement)(i.TextControl,{label:Object(a.__)("Name","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return x(e)}}):null,"existing"===F?Object(r.createElement)(c.a,{step:t,onStepSelected:function(e){return D(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{className:"bwf-modal-cancel-btn",onClick:p},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,onClick:U,disabled:q,isBusy:h,className:q?"bwf-no-ripple":""},Object(a.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(a.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(u.a,{isPrimary:!0,onClick:function(){p(),m()}},Object(a.__)("OK","funnel-builder")))))}},function(e,t,n){"use strict";var r=n(0),o=n(8),a=n(1),i=n(4),c=n(6),u=n.n(c),l=n(5),s=n(10),f=n.n(s),d=n(393),p=n(86);function b(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,c=y(Object(r.useState)({default_css:"",skin_all:{}}),2),s=c[0],m=c[1],h=y(Object(r.useState)(!0),2),v=h[0],g=h[1];return Object(r.useEffect)((function(){f()({path:Object(i.y)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&m({skin_all:e.skin_all,default_css:e.default_css}),g(!1)})).catch((function(e){g(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(o.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(a.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(p.a,{isPrimary:!0,proLink:Object(i.U)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(l.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:u()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},b(new Array(8)).map((function(e,t){return Object(r.createElement)(d.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,s.default_css),Object.keys(s.skin_all).map((function(e){var t=s.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},function(e,t,n){},function(e,t,n){var r=n(534),o=n(695),a=n(353);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t){e.exports=function(e){return e}},,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y}));var r=n(0),o=n(328),a=n(4),i=n(2),c=n(433),u=n(6),l=n.n(u),s={image:c.a},f=function(e,t,n,a){return e.map((function(e,c){return"richeditor"===e.type&&(e.openMergeTagModal=a,e.id="richeditor-".concat(c),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:c},(Object(i.isEmpty)(e.toggler)||d(t,e.toggler,e))&&Object(r.createElement)(o.a,{input:e,formProps:n(e.key),values:t,customMapField:s}))}))},d=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var o=0;o<r.length;o++)if(t.value.indexOf(r[o])>-1){n=!0;break}}else Object(a.z)(r)==Object(a.z)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},p=function(e,t){if(e.selectors&&e.stylekey&&!Object(i.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,o="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(o)):t+="".concat(r,"{").concat(o,"}")}return t},b=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var o=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(o).addClass(e.contentClass):jQuery(o).show():e.contentClass?jQuery(o).removeClass(e.contentClass):jQuery(o).hide()}break;case"select":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(e.value&&Object(i.isArray)(e.allClasses)?(jQuery(a).removeClass(e.allClasses),jQuery(a).addClass(e.value)):r=p(e,r),e.classList){var c=Object.values(e.classList),u=e.classList[e.value];jQuery(a).removeClass(c).addClass(u)}}break;case"color":if(e.selectors){var l=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,s="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(l,"{").concat(s,"}"),"social_proof_tooltip_bg_color"===e.key&&(r+="".concat(l,"::after{ border-top-color: ").concat(e.value,"}"))}if(e.isHover&&e.hoverSelectors){var f=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,d="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(f,"{").concat(d,"}")}break;case"dimension-control":if(e.selectors){var b=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,y="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(b,"{").concat(y,"}"),r+="".concat(b,"{").concat(y,"}")}break;case"box-shadow":if(e.selectors){var m=e.value,h=m.h_offset,v=m.v_offset,g=m.blur,O=m.spread,w=m.color,j=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(i.isEmpty)(h)||Object(i.isEmpty)(v)||Object(i.isEmpty)(g)||Object(i.isEmpty)(O)||Object(i.isEmpty)(w))){var _="".concat(e.stylekey,":").concat(h,"px ").concat(v,"px ").concat(g,"px ").concat(O,"px ").concat(w,";");r+="".concat(j,"{").concat(_,"}")}}break;case"image":if(e.selectors){var E,S,x,k,P,C,N=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(i.isEmpty)(null==e||null===(E=e.value)||void 0===E?void 0:E.custom_url))if(jQuery(N+" img").length)jQuery(N+" img").attr("src",null==e||null===(P=e.value)||void 0===P?void 0:P.image_url);else jQuery(N).find("svg").remove(),jQuery(N).append('<img src="'+(null==e||null===(C=e.value)||void 0===C?void 0:C.image_url)+'" alt="order bump" />');else if(Object(i.isEmpty)(null==e||null===(S=e.value)||void 0===S?void 0:S.custom_url))jQuery(N+" img").attr("src","").attr("srcset","");else{var T,D;if(jQuery(N+" img").length)jQuery(N+" img").attr("src",null==e||null===(T=e.value)||void 0===T?void 0:T.custom_url).attr("srcset","");else jQuery(N).find("svg").remove(),jQuery(N).append('<img src="'+(null==e||null===(D=e.value)||void 0===D?void 0:D.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var I,M,A=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,R=null!==(I=null==e||null===(M=e.value)||void 0===M?void 0:M.position)&&void 0!==I?I:"left";if(null!=e&&e.alignmentClassList){var F=Object.values(null==e?void 0:e.alignmentClassList),L=null==e?void 0:e.alignmentClassList[R];jQuery(A).removeClass(F).addClass(L)}}var B=null!==(x=null==e||null===(k=e.value)||void 0===k?void 0:k.width)&&void 0!==x?x:"100";B&&(r+="".concat(N,"{max-width: ").concat(B,"px;}"))}break;default:r=p(e,r)}})),t(r)}))},y=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:l()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(6),i=n.n(a),c=n(1213),u=n(2),l=n(480),s=n.n(l),f=n(8),d=n(1227),p=n(524),b=n(182),y=n(12),m=n(15),h=n.n(m),v=n(42);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function _(e,t,n){return t=E(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){return O(this,t),_(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props.height,t=void 0===e?0:e;return Object(r.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:t}},Object(r.createElement)(v.a,{size:"xl"}))}}])&&w(n.prototype,o),a&&w(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);x.propTypes={height:h.a.number};var k=x,P=n(300),C=(n(444),n(1228)),N=n(1208);n(445);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function M(e,t,n){return t=A(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=M(this,t,[e])).chartRef=Object(r.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(u.isEqual)(this.props.data,e.data)||!Object(u.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width||this.props.chartMeta!==e.chartMeta}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(u.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(N.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,n=e.height,r=e.width;this.deleteChart();var o=Object(N.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(r," ").concat(n)).attr("height",n).attr("width",r).attr("preserveAspectRatio","xMidYMid meet");return t&&o.attr("class","".concat(t,"__viewbox")),o.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(r.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&D(n.prototype,o),a&&D(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}F.propTypes={className:h.a.string,data:h.a.array,orderedKeys:h.a.array,tooltip:h.a.object,chartType:h.a.string};var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]));return B(t).filter((function(e){return"date"!==e}))},V=n(1229),H=n(1212),G=n(1219),X=n(13),K=n.n(X);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(V.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(n?0:.07)},Q=function(e,t){return Object(H.a)().domain([K()(e[0],"YYYY-MM-DD HH:mm").toDate(),K()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},J=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var r=0,o=Object.entries(e);r<o.length;r++){var a=$(o[r],2),i=a[0],c=a[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<n&&(n=c.value)}})),{upper:t,lower:n}}(e),n=t.lower,r=t.upper,o=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;if(0===e&&t>0&&t<=1)return Math.pow(10,Math.floor(Math.log10(t)))/2;var n=Math.max(-e,t),r=3*Math.pow(10,(Math.log(n)*Math.LOG10E+1|0)-2),o=Math.ceil(n/r)*r/3;return t<1&&e>-1?Math.round(4*o)/4:Math.ceil(o)}(n,r),a={lower:0,upper:0,step:o};return(Number.isFinite(n)||n<0)&&(a.lower=Math.floor(n/o)*o,a.lower===n&&0!==n&&(a.lower-=o)),(Number.isFinite(r)||r>0)&&(a.upper=o<=1?4:4*o,a.upper===r&&0!==r&&(a.upper+=o)),a},ee=n(1224),te=function(e){for(var t=[],n=1;n<=Math.floor(Math.sqrt(e));n++)e%n==0&&(t.push(n),e/n!==n&&t.push(e/n));return t.sort((function(e,t){return e-t})),t},ne=function(e,t,n,r){var o,a=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,n);return(e.length>=63&&"day"===r||e.length>=9&&"week"===r)&&(e=(o=e).filter((function(e,t){return 0===t||K()(e).toDate().getMonth()!==K()(o[t-1]).toDate().getMonth()}))),e.length<=a||"hour"===r&&function(e){var t=K()(e[0]).toDate(),n=K()(e[e.length-1]).toDate();return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}(e)&&t>783?e:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n[0]!==e[0]&&n.unshift(e[0]),n}(e,function(e,t){for(var n=[],r=1;n.length<=3;)n=te(e.length-r),r+=1;return n.find((function(n){return e.length/n<t}))}(e,a))},re=function(e,t,n,r){var o=K()(e).toDate(),a=0!==t?n[t-1]:n[t];return a=a instanceof Date?a:K()(a).toDate(),0===t?r(o):function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),r=e.split(n),o=t.split(n),a=new Array,i=e.length>t.length?r:o,c=0;c<i.length;c++)r[c]!==o[c]&&a.push(o[c]);return a}(r(a),r(o)).join(" ")},oe=n(4);function ae(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e,t,n){for(var r=[],o=0;o<e;o++){var a=(o+1)/e*t,i=n?Math.round(a):a;r[r.length-1]!==i&&r.push(i)}return r},ue=function(e,t,n){return[0].concat(ae(function(e,t){if(e>=0)return[];var n=Math.ceil(-e/t);return ce(n,e,e<-1)}(e,n)),ae(function(e,t){if(e<=0)return[];var n=Math.ceil(e/t);return ce(n,e,e>1)}(t,n)))},le=function(e,t,n,r,o,a){Object(oe.A)();var i=ue(t.yScale.domain()[0],t.yScale.domain()[1],t.step),c=t.xScale.range()[1],u=o?c+r.left+r.right+35:-r.left/2-15,l=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+l).attr("transform","translate(0, 0)").call(Object(ee.b)(t.yScale).tickValues(i).tickSize(-c-r.left-r.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+u+", 0)").attr("text-anchor","start").call(Object(ee.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[i[0]]:i).tickFormat((function(e){return e>-1&&e<1&&n.yBelow1Format?n.yBelow1Format(e):a&&!a.isCurrency?n.yFormat(e):(t=n.yFormat(e),"left"===(null==(o=null!==(r=wffn_contacts_data.currency)&&void 0!==r?r:{symbol:""})?void 0:o.symbolPosition)?(null==o?void 0:o.symbol)+t:t+(null==o?void 0:o.symbol));var t,r,o})))},se=function(e,t,n,r,o,a,i){!function(e,t,n,r){var o=n.yScale.range()[0],a=ne(t.uniqueDates,n.xScale.range()[1],t.mode,t.interval);"line"!==t.chartType&&"curve-line"!==t.chartType||(a=a.map((function(e){return K()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+10,")")).call(Object(ee.a)(n.xScale).tickValues(a).tickFormat((function(e,n){return"hour"===t.interval?r.xFormat(e instanceof Date?e:K()(e).toDate()):re(e,n,a,r.xFormat)}))),"day"===t.interval&&e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+("day"===t.interval?30:0),")")).call(Object(ee.a)(n.xScale).tickValues(a).tickFormat((function(e,t){return re(e,t,a,r.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(o,")")).call(Object(ee.a)(n.xScale).tickValues(a).tickSize(5).tickFormat(""))}(e,t,n,r),le(e,n,r,o,a,i),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},fe=n(1114),de=n(1124);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=function(e,t,n,r,o,a){var i,c,l=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(de.a)().x((function(e){return i(K()(e.date).toDate())})).y((function(e){return c(e.value)}))),d=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(d.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),b=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(u.first)(e.filter((function(e){return e.date===n}))),l=o(K()(n).toDate()),s=o(i>=1?K()(t[i-1]).toDate():K()(t[0]).toDate()),f=i<t.length-1?o(K()(t[i+1]).toDate()):o(K()(t[t.length-1]).toDate()),d=0===i?f-l:l-s,p=0===i?0:l-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),y=s<=1365||n.uniqueDates.length>50?2:3;y=s<=783?1.25:y;var m=s<=1365?4:6;n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",y).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return n.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return ye(ye({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",m).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",y+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),r[n].parentNode,fe.b.target)})).on("blur",(function(){return a.hide()}));var h=e.append("g").attr("class","focusspaces").selectAll(".focus").data(b).enter().append("g").attr("class","focus"),v=h.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y2",l),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",m+2).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",y+2).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),h.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",l).attr("opacity",0).on("mouseover",(function(e,r,o){var i=(0===r||r===b.length-1)&&n.uniqueDates.length>1?0:.5;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,o[r].parentNode,i)})).on("mouseout",(function(){return a.hide()}))},ve=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],ge=function(e,t){return function(n){var r=e.length>5?5:e.length,o=Object(u.findIndex)(e,(function(e){return e.key===n})),a=o<=4?ve[r][o]:0;return t(a)}};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function je(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}var _e=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24,this.chartMeta={},this.type="old",this.isProFeatureLocked=!1,this.component=!1},(t=[{key:"calculateXPosition",value:function(e,t,n){var r=this.ref.getBoundingClientRect(),o=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),a=Math.max(o.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-r.width/2-a,o.width-r.width-this.margin));var i=e.left+e.width*n+this.margin-a;return i+r.width+this.margin>o.width?Math.max(this.margin,e.left+e.width*(1-n)-r.width-this.margin-a):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var n=this.ref.getBoundingClientRect(),r=e.top+this.margin-t.top;return r+n.height+this.margin>t.height?Math.max(0,e.top-n.height-this.margin-t.top):r}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.getBoundingClientRect(),a=this.chart.getBoundingClientRect(),i=this.ref.getBoundingClientRect();return"below"===this.position&&(t=0),{x:n<50||n>a.width-220?this.calculateXPosition(o,a,t):n-i.width/4,y:r-("new"===this.type?.65*i.height:i.height)}}},{key:"hide",value:function(){Object(N.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(N.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat(K()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;if(this.visibleKeys.length){Object(N.a)(n).select(".focus-grid, .barfocus").attr("opacity","1");var u=this.calculatePosition(t,a,i,c),l=(this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(o.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(o.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(o.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),this.title?this.title:this.labelFormat(K()(e.date).toDate()),Object(oe.A)()),s=function(e){return"year"===o.interval?K()(e).year():K()(e).format("month"===o.interval?"MMM YYYY":Object(oe.Z)())},f=function(t){var n,a,i,c,u,f,d,p,b,y,m,h=o.visibleKeys[0].key;if(o.component){var v,g=o.component;return'<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t'.concat(Object(r.renderToString)(Object(r.createElement)(g,{data:e[h]})),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t\t\t<div>").concat(s(null===(v=e[h])||void 0===v?void 0:v.labelDate),"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>")}switch(t){case"old":return 1===o.visibleKeys.length?'\n\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t'.concat(o.chartMeta&&!o.chartMeta.isCurrency?e[h].value:l.formatAmount(e[h].value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t\t<div>").concat(s(null===(n=e[h])||void 0===n?void 0:n.labelDate),"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"):'\n\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t<div class="label">'.concat(s(null===(a=e.primary)||void 0===a?void 0:a.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(o.chartMeta&&!o.chartMeta.isCurrency?e.primary.value:l.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t<div class="label">').concat(s(null===(i=e.secondary)||void 0===i?void 0:i.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(o.chartMeta&&!o.chartMeta.isCurrency?e.secondary.value:l.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t<div>").concat(s(null===(c=e.primary)||void 0===c?void 0:c.labelDate),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t");case"new":return 1===o.visibleKeys.length?'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t\t\t'.concat(l.formatAmount(e[h].value),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-sec-values">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Checkout</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(l.formatAmount(null===(u=e[h].data)||void 0===u?void 0:u.checkout),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Order Bump</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(o.isProFeatureLocked?"-":l.formatAmount(null===(f=e[h].data)||void 0===f?void 0:f.orderBump),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Upsell</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(o.isProFeatureLocked?"-":l.formatAmount(null===(d=e[h].data)||void 0===d?void 0:d.upsell),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div>').concat(null===(p=e[h].data)||void 0===p?void 0:p.orders," Orders</div>\n\t\t\t\t\t\t\t\t\t<div>").concat(s(e.date),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"):'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label" >'.concat(s(null===(b=e.primary)||void 0===b?void 0:b.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(l.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">').concat(s(null===(y=e.secondary)||void 0===y?void 0:y.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(l.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t<div>').concat(s(null===(m=e.primary)||void 0===m?void 0:m.labelDate),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t")}};Object(N.a)(this.ref).style("left",u.x+"px").style("top",u.y+"px").style("visibility","visible").html(f(this.type))}}}])&&we(e.prototype,t),n&&we(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ee=n(1203),Se=n(1204),xe=n(18);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";switch(e){case 0:t=xe.BLUE_BASE;break;case 1:t=xe.NOTICE_YELLOW;break;case 2:t="#F5C452";break;default:t=xe.BLUE_BASE}return t},De=function(e,t,n,r,o,a,i){var c,l,s=r.yScale.range()[0],f=r.xScale.range()[1],d=(c=r.xScale,l=r.yScale,Object(de.a)().curve(Ee.a).x((function(e){return c(K()(e.date).toDate())})).y((function(e){return l(e.value)}))),p=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),b=e.append("g").attr("class","lines").selectAll(".line-g").data(p.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),y=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(u.first)(e.filter((function(e){return e.date===n}))),l=o(K()(n).toDate()),s=o(i>=1?K()(t[i-1]).toDate():K()(t[0]).toDate()),f=i<t.length-1?o(K()(t[i+1]).toDate()):o(K()(t[t.length-1]).toDate()),d=0===i?f-l:l-s,p=0===i?0:l-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,f,r.xScale),m=b.append("defs");b.append("g").attr("class","line-group").each((function(e,t){var n,o=Object(N.a)(this),a=Object(u.findIndex)(i,(function(t){return t.key===e.key})),c=Te(a),l=(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null,f="grad-".concat(e.key,"-").concat(t),p=m.append("linearGradient").attr("id",f).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");[{offset:"0%",opacity:.02},{offset:"20%",opacity:.03},{offset:"50%",opacity:.04},{offset:"80%",opacity:.02},{offset:"100%",opacity:0}].forEach((function(e){p.append("stop").attr("offset",e.offset).style("stop-color","rgba(".concat(l.r,", ").concat(l.g,", ").concat(l.b,", ").concat(e.opacity,")"))}));var b=Object(Se.a)().curve(Ee.a).x((function(e){return r.xScale(K()(e.date).toDate())})).y0(s).y1((function(e){return r.yScale(e.value)}));o.append("path").attr("class","area").attr("d",b(e.values)).attr("fill","url(#".concat(f,")")).style("opacity",1),o.append("path").attr("fill","none").attr("stroke-width",2).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",c).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",d(e.values))}));var h=2;h=f<=783?2:h;var v=f<=1365?4:6;f/n.uniqueDates.length>36&&b.selectAll("circle").data((function(e,t){return e.values.map((function(n){return Ce(Ce({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",v).attr("fill",(function(e){return"#0073aa"})).attr("stroke","#fff").attr("stroke-width","4px").style("opacity",(function(e){e.focus;return 0})).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,t,n){})).on("blur",(function(){return a.hide()}));var g=e.append("g").attr("class","focusspaces").selectAll(".focus").data(y).enter().append("g").attr("class","focus"),O=g.append("g").attr("class","focus-grid").attr("opacity","0");O.selectAll(null).data((function(e){return e.values})).enter().append("line").attr("x1",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y1",(function(e){return r.yScale(e.value)})).attr("x2",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y2",s),O.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",v+2).attr("fill",(function(e){var t=Object(u.findIndex)(i,(function(t){return t.key===e.key}));return Te(t)})).attr("stroke","#fff").style("filter","url(#glow)").attr("stroke-width",h).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),g.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",s).attr("opacity",0).on("mouseover",(function(e,o,c){var u,l,s,f,d,p,b=(0===o||o===y.length-1)&&n.uniqueDates.length>1?0:.5,m=e.values.sort((function(e,t){return(null==i?void 0:i.findIndex((function(t){return(null==t?void 0:t.key)===(null==e?void 0:e.key)})))-(null==i?void 0:i.findIndex((function(e){return(null==e?void 0:e.key)===(null==t?void 0:t.key)})))})),h=null!==(u=null===(l=m[0])||void 0===l?void 0:l.value)&&void 0!==u?u:0,v=null!==(s=null===(f=m[1])||void 0===f?void 0:f.value)&&void 0!==s?s:0,g=null!==(d=null===(p=m[2])||void 0===p?void 0:p.value)&&void 0!==d?d:0;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,c[o].parentNode,b,r.xScale(K()(e.date).toDate()),r.yScale(Math.max(h,v,g)))})).on("mouseout",(function(){return a.hide()}))},Ie=n(1223),Me=n(1205),Ae=n(1122),Re=n(289);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Be(r.key),r)}}function Be(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fe(t)?t:t+""}function qe(e,t,n){return t=ze(t),function(e,t){if(t&&("object"==Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],ze(e).constructor):t.apply(e,n))}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ye=function(){return"rtl"===document.documentElement.dir},Ve=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qe(this,t,[e])).drawChart=n.drawChart.bind(n),n.getParams=n.getParams.bind(n),n.tooltipRef=Object(r.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(t,e),n=t,(o=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,n=e.xFormat,r=e.x2Format,o=e.yFormat,a=e.yBelow1Format;return{screenReaderFormat:U(t,C.a),xFormat:U(n,C.a),x2Format:U(r,C.a),yBelow1Format:U(a),yFormat:U(o)}}},{key:"getScaleParams",value:function(e){var t=this.props,n=t.data,r=t.height,o=t.orderedKeys,a=t.chartType,i=this.getMargin(),c=r-i.top-i.bottom,u=this.getWidth()-i.left-i.right,l=J(n),s=l.upper,f=l.lower,d=l.step,p=function(e,t,n){return Object(G.a)().domain([Math.min(t,0),0===n&&0===t?1:Math.max(n,0)]).rangeRound([e,0])}(c,f,s);if("line"===a||"curve-line"===a)return{step:d,xScale:Q(e,u),yMax:s,yMin:f,yScale:p};var b=this.shouldBeCompact(),y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(V.a)().domain(e).range([0,t]).paddingInner(n?0:.1)}(e,u,b);return{step:d,xGroupScale:Z(o,y,b),xScale:y,yMax:s,yMin:f,yScale:p}}},{key:"getParams",value:function(e){var t=this.props,n=t.chartType,r=t.colorScheme,o=t.data,a=t.interval,i=t.mode,c=t.orderedKeys||function(e){return Y(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,n){return e+n[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(o),u=c.filter((function(e){return e.visible})),l=c.length>5?u:c;return{getColor:ge(l,r),interval:a,mode:i,chartType:n,uniqueDates:e,visibleKeys:u}}},{key:"createTooltip",value:function(e,t,n){var r=this.props,o=r.tooltipLabelFormat,a=r.tooltipPosition,i=r.tooltipTitle,c=r.tooltipValueFormat,u=r.interval,l=r.chartMeta,s=r.toopTipComponent,f=new _e;f.ref=this.tooltipRef.current,f.type=l?"old":"new",f.chart=e,f.position=a,f.title=i,f.labelFormat=U(o,C.a),f.valueFormat=U(c),f.visibleKeys=n,f.getColor=t,f.interval=u,f.chartMeta=l,f.isProFeatureLocked=this.props.isProFeatureLocked,f.component=s,this.tooltip=f}},{key:"drawChart",value:function(e){var t,n=this.props,r=n.data,o=n.dateParser,a=n.chartType,i=n.emptyText,c=n.chartMeta,l=n.chartId,s=n.orderedKeys,f=this.getMargin(),d=e.attr("id","chart").append("g").attr("transform","translate(".concat(f.left,", ").concat(f.top,")"));if("donut"===a)return null===(t=Object(N.a)("#".concat(l," .d3-donut-tip")).node())||void 0===t||t.remove(),void function(e,t,n){var r=n.width,o=void 0===r?640:r,a=n.height,i=void 0===a?400:a,c=(n.margin,n.emptyText),l=void 0===c?"":c,s=n.chartId,f=n.donutTip,d=Math.min(o,i)/2+35,p=t.reduce((function(e,t){return e+(t.value||0)}),0),b=p?t:[{key:"dummy",value:100,color:["#DEDFEA","#DEDFEA"]}],y=Object(Ae.a)().domain(b.map((function(e){return e.key}))).range(b.map((function(e){return e.color&&Object(u.isArray)(e.color)?e.color[0]:xe.TEXT_COLOR_3}))),m=Object(Ie.a)().sort(null).value((function(e){return e.value}))(b),h=Object(Me.a)().innerRadius(.52*d).outerRadius(.8*d),v=Object(Me.a)().innerRadius(.52*(d+2)).outerRadius(.8*(d+8));Object(Me.a)().innerRadius(.9*d).outerRadius(.9*d),e.attr("transform","translate("+o/2+","+i/2+")");var g=e.append("defs").append("filter").attr("id","drop-shadow").attr("height","130%");g.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),g.append("feFlood").attr("flood-color","#323247").attr("flood-opacity","0.5").attr("result","offsetColor"),g.append("feOffset").attr("in","blur").attr("dx",1).attr("dy",1).attr("result","offsetBlur"),g.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("result","offsetBlur").attr("operator","in");var O=g.append("feMerge");O.append("feMergeNode").attr("in","offsetBlur"),O.append("feMergeNode").attr("in","SourceGraphic");var w=function(e){if(p){Object(N.a)("#slice-"+e.data.key).attr("d",v).attr("filter","url(#drop-shadow");var t=e.data.tooltip;Object(N.a)("#".concat(s," .d3-donut-tip")).style("opacity",1),f.html(t).style("opacity",1).style("left",fe.b.layerX-50+"px").style("top",fe.b.layerY+10+"px")}},j=function(e){Object(N.a)("#slice-"+e.data.key).attr("d",h).attr("filter",""),Object(N.a)("#".concat(s," .d3-donut-tip")).style("opacity",0)};e.selectAll("allSlices").data(m).enter().append("path").attr("id",(function(e){return"slice-"+e.data.key})).attr("d",h).attr("fill",(function(e){return y(e.data.key)})).style("stroke-width","0").on("mousemove",w).on("mouseleave",j),e.selectAll("allValues").data(m).enter().append("text").text((function(e){return e.data.value>4?e.data.value<10&&e.data.value%1?Math.floor(e.data.value)+"%":e.data.value+"%":""})).attr("id",(function(e){return"value-"+e.data.key})).attr("class","slice-value").attr("transform",(function(e){return"translate("+h.centroid(e)+")"})).style("text-anchor","middle").style("fill",(function(e){return e.data.color&&Object(u.isArray)(e.data.color)?e.data.color[1]:"#ffffff"})).on("mousemove",w).on("mouseleave",j),p||e.append("text").attr("class","name-text").text(l).attr("text-anchor","middle").attr("x","0").attr("y","0").attr("width","100").style("fill",xe.TEXT_COLOR_3).call((function(e){e.each((function(){for(var e=Object(N.a)(this),t=e.text().split(/\s+/).reverse(),n=parseFloat(e.attr("width")),r=parseFloat(e.attr("y")),o=e.attr("x"),a=e.attr("text-anchor"),i=e.text(null).append("tspan").attr("x",o).attr("y",r).attr("text-anchor",a),c=0,u=[],l=t.pop();l;)u.push(l),i.text(u.join(" ")),i.node().getComputedTextLength()>n&&(c+=1,u.pop(),i.text(u.join(" ")),u=[l],i=e.append("tspan").attr("x",o).attr("y",r+20*c).attr("anchor",a).text(l)),l=t.pop()}))}))}(d,r,{height:280,width:280,emptyText:i,chartId:l,donutTip:Object(N.a)("#"+l).append("div").style("opacity",0).attr("class","d3-donut-tip")});var p=function(e,t){var n=Object(C.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return n(e)-n(t)}))}(r,o),b=this.getFormatParams(),y=this.getParams(p),m=this.getScaleParams(p);this.createTooltip(d.node(),y.getColor,y.visibleKeys),se(d,y,m,b,f,Ye(),c),"curve-line"!==a?("line"===a&&he(d,r,y,m,b,this.tooltip),"bar"===a&&function(e,t,n,r,o,a){var i=r.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(r.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===n.mode?o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",r.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),fe.b.target,r[n].parentNode)})).on("mouseout",(function(){return a.hide()}));var u=r.yScale(0);c.selectAll(".bar").data((function(e){return n.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return r.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(u,r.yScale(e.value))})).attr("width",r.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(u-r.yScale(e.value))})).attr("fill",(function(e){return n.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var r=e.label||e.key;if("time-comparison"===n.mode){var i=t.find((function(t){return t.date===e.date}));r=o.screenReaderFormat(K()(i[e.key].labelDate).toDate())}return"".concat(r," ").concat(a.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,n,r){var o=e.value>0?fe.b.target:fe.b.target.parentNode;a.show(t.find((function(t){return t.date===e.date})),o,r[n].parentNode)})).on("blur",(function(){return a.hide()}))}(d,r,y,m,b,this.tooltip)):De(d,r,y,m,b,this.tooltip,s)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return!1;var o=this.getMargin(),a=r-o.left-o.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return a<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return Ye()?{bottom:e.bottom,left:-30,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return r;var o=this.getMargin(),a=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*a:t.length*(a+1);return Math.max(r,i+o.left+o.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,n=e.data,o=e.emptyMessage;if(o&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<e.length;n++)for(var r=0,o=Object.entries(e[n]);r<o.length;r++){var a=L(o[r],2),i=a[0],c=a[1];if("date"!==i&&!Object(u.isNil)(c.value)&&c.value!==t)return!1}return!0}(n,t))return Object(r.createElement)("div",{className:"d3-chart__empty-message"},o)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,o=e.height,a=e.orderedKeys,c=e.chartType,u=e.chartMeta,l=this.getWidth();return Object(r.createElement)("div",{className:i()("d3-chart__container",t)},this.getEmptyMessage(),Object(r.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(r.createElement)(F,{className:i()(t),data:n,drawChart:this.drawChart,chartMeta:u,height:o,orderedKeys:a,tooltip:this.tooltip,chartType:c,width:l}))}}])&&Le(n.prototype,o),a&&Le(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Ve.propTypes={baseValue:h.a.number,className:h.a.string,colorScheme:h.a.func,data:h.a.array.isRequired,dateParser:h.a.string.isRequired,emptyMessage:h.a.string,height:h.a.number,interval:h.a.oneOf(["hour","day","week","month","quarter","year",""]),margin:h.a.shape({bottom:h.a.number,left:h.a.number,right:h.a.number,top:h.a.number}),mode:h.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:h.a.oneOfType([h.a.string,h.a.func]),orderedKeys:h.a.array,tooltipLabelFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipValueFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipPosition:h.a.oneOf(["below","over"]),tooltipTitle:h.a.string,chartType:h.a.oneOf(["bar","line","curve-line","donut"]),width:h.a.number,xFormat:h.a.oneOfType([h.a.string,h.a.func]),x2Format:h.a.oneOfType([h.a.string,h.a.func]),yBelow1Format:h.a.oneOfType([h.a.string,h.a.func]),yFormat:h.a.oneOfType([h.a.string,h.a.func])};var He=Object(Re.a)(Ve,{baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"}),Ge=n(43),Xe=n(82);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,We(r.key),r)}}function We(e){var t=function(e,t){if("object"!=Ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ke(t)?t:t+""}function Ze(e,t,n){return t=Qe(t),function(e,t){if(t&&("object"==Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Qe(e).constructor):t.apply(e,n))}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var et=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ze(this,t)).listRef=Object(r.createRef)(),e.state={isScrollable:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=(e.colorScheme,e.data),n=e.handleLegendHover,a=e.handleLegendToggle,c=e.interactive,u=e.legendDirection,l=(e.legendValueFormat,e.instanceId),s=e.totalLabel,f=this.state.isScrollable,d=t.filter((function(e){return e.visible})),p=d.length,b="column"===u&&t.length>5&&s;return t.length,Object(r.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(u),{"has-total":b,"is-scrollable":f},this.props.className)},Object(r.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:b?this.updateListScroll:null},t.map((function(e,t){return Object(r.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(l,"__item__").concat(e.key),onMouseEnter:n,onMouseLeave:n,onBlur:n,onFocus:n},Object(r.createElement)("button",{onClick:a,id:"bwf-legend-".concat(l,"__item-button__").concat(e.key),disabled:e.visible&&p<=1||!e.visible&&p>=5||!c,title:p>=5?Object(o.sprintf)(Object(o.__)("You may select up to %d items.","funnel-builder"),5):""},Object(r.createElement)("div",{className:"bwf-legend-item-container"},Object(r.createElement)(Xe.a,{checked:e.visible,onChange:function(){},color:1===t?xe.NOTICE_YELLOW:xe.BLUE_BASE}),Object(r.createElement)("span",{className:"bwf-legend-item-title"},e.label))))}))),b&&Object(r.createElement)("div",{className:"bwf-legend-total"},s))}}])&&$e(n.prototype,a),c&&$e(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(r.Component);et.propTypes={className:h.a.string,colorScheme:h.a.func,data:h.a.array.isRequired,handleLegendToggle:h.a.func,handleLegendHover:h.a.func,interactive:h.a.bool,legendDirection:h.a.oneOf(["row","column"]),legendValueFormat:h.a.oneOfType([h.a.string,h.a.func]),totalLabel:h.a.string,instanceId:h.a.number};var tt=Object(Ge.withInstanceId)(Object(Re.a)(et,{interactive:!0,legendDirection:"row",legendValueFormat:","}));n(446);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(){return(rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,st(r.key),r)}}function ct(e,t,n){return t=ut(t),function(e,t){if(t&&("object"==nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],ut(e).constructor):t.apply(e,n))}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}function ft(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var dt=function(e){function t(e){var n,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ct(this,t,[e]),o=n,i=function(){return Object(r.createElement)("div",{className:"bwf-chart__donut-legends"},n.props.data.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-chart__donut-legend",key:"bwf-chart__donut-legend-".concat(t)},Object(r.createElement)("div",{className:"bwf-chart__donut-legend-color",style:{backgroundColor:e.color[0]}}),e.title)})))},(a=st(a="getDonutLegends"))in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,n.chartBodyRef=Object(r.createRef)();var c=n.getDataKeys();return n.state={focusedKeys:[],visibleKeys:c.slice(0,5),width:0},n.prevDataKeys=c.sort(),n.handleTypeToggle=n.handleTypeToggle.bind(n),n.handleLegendToggle=n.handleLegendToggle.bind(n),n.handleLegendHover=n.handleLegendHover.bind(n),n.updateDimensions=n.updateDimensions.bind(n),n.getVisibleData=Object(p.a)(n.getVisibleData),n.getOrderedKeys=Object(p.a)(n.getOrderedKeys),n.setInterval=n.setInterval.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lt(e,t)}(t,e),n=t,(a=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,n=e.filterParam,r=e.mode,o=e.query;if("item-comparison"===r){var a=n?Object(y.e)(o[n]):[];return this.getOrderedKeys([],[],a).map((function(e){return e.key}))}return Y(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=Y(e).sort();if(!Object(u.isEqual)(t,this.prevDataKeys)){var n=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:n.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,n=e.symbolPosition,r=e.decimalSeparator,o=e.thousandSeparator;Object(c.a)({decimal:r,thousands:o,grouping:[3],currency:ft(t,n)})}},{key:"getOrderedKeys",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.props,o=r.data,a=r.legendTotals,i=r.mode;if(!o||0===o.length)return[];var c=o.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=ot(t,2),r=n[0],o=n[1];"date"===r||e[r]||(e[r]=o.label)})),e}),{}),u=Object.entries(c).map((function(n){var r=ot(n,2),i=r[0],c=r[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:a&&void 0!==a[i]?a[i]:"conversion_rate"!==i?o.reduce((function(e,t){return e+t[i].value}),0):0!==o.reduce((function(e,t){return e+t.conversion.value}),0)?o.reduce((function(e,t){return e+t.conversion.value}),0)/o.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?u.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||n.includes(parseInt(e.key,10))})):u}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,n=t.path,r=t.query,o=t.onChartChange,a=void 0===o?u.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(y.k)({chartType:e},n,r),a(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),n=this.state,r=n.focusedKeys,o=n.visibleKeys;o.includes(t)?this.setState({focusedKeys:Object(u.without)(r,t),visibleKeys:Object(u.without)(o,t)}):this.setState({focusedKeys:r.concat([t]),visibleKeys:o.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.props.width?this.props.width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var n=t.filter((function(e){return e.visible}));return Object(u.isEmpty)(n)?[]:e.map((function(e){var t={date:e.date};return n.forEach((function(n){t[n.key]=e[n.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,n=t.path,r=t.query,o=t.onIntervalChange,a=void 0===o?u.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(y.k)({interval:e},n,r),a(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,n=e.allowedIntervals;if(!n||n.length<1)return null;!0===n.includes("quarter")&&n.splice(n.indexOf("quarter"),1);var a={hour:Object(o.__)("By hour","funnel-builder"),day:Object(o.__)("By day","funnel-builder"),week:Object(o.__)("By week","funnel-builder"),month:Object(o.__)("By month","funnel-builder"),quarter:Object(o.__)("By quarter","funnel-builder"),year:Object(o.__)("By year","funnel-builder")};return Object(r.createElement)(f.SelectControl,{value:t,options:n.map((function(e){return{value:e,label:a[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,n=e.mode,r=e.isViewportWide;return t||(r&&"time-comparison"===n?"top":r&&"item-comparison"===n?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,n=e.visibleKeys,a=e.width,c=this.props,l=c.baseValue,p=c.chartType,b=c.data,m=c.dateParser,h=c.emptyMessage,v=c.filterParam,g=c.interactiveLegend,O=c.interval,w=c.isRequesting,j=c.isViewportLarge,_=c.itemsLabel,E=c.mode,S=c.query,x=c.screenReaderFormat,C=c.showHeaderControls,N=c.title,T=c.tooltipLabelFormat,D=c.tooltipValueFormat,I=c.tooltipTitle,M=c.valueType,A=c.xFormat,R=c.x2Format,F=c.yBelow1Format,L=c.yFormat,B=c.hideTypeSelect,q=c.className,z=c.customHeaderItem,U=c.showLegend,Y=c.height,V=c.emptyText,H=c.chartMeta,G=c.chartId,X=c.customFooter,K=c.isProFeatureLocked,$=c.toopTipComponent,W=c.donutEmptyState,Z=v?Object(y.e)(S[v]):[],Q=this.getOrderedKeys(t,n,Z),J=w||Object(u.isEmpty)(b)?null:this.getVisibleData(b,Q),ee=this.getLegendPosition(),te="top"===ee?"row":"column",ne="side"===ee?"row":"column",re=Y||this.getChartHeight(),oe=w||!U?null:"donut"===p?this.getDonutLegends():Object(r.createElement)(tt,{colorScheme:d.a,data:Q,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:g,legendDirection:te,legendValueFormat:D,totalLabel:Object(o.sprintf)(_,Q.length)}),ae=L,ie=F;if(!L)switch(M){case"average":ae=",.0f";break;case"currency":ae="$.3~s",ie="$.3~f";break;case"number":ae=",.0f"}return Object(r.createElement)("div",rt({className:i()("bwf-chart",q)},G&&{id:G}),C&&Object(r.createElement)("div",{className:"bwf-chart-header"},Object(r.createElement)("div",{className:"bwf-chart-title"},N),"top"===ee&&oe,z,this.renderIntervalSelector(),!B&&Object(r.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===p}),title:Object(o.__)("Line chart","funnel-builder"),"aria-checked":"line"===p,role:"menuitemradio",tabIndex:"line"===p?0:-1,onClick:Object(u.partial)(this.handleTypeToggle,"line")},Object(r.createElement)(s.a,{icon:"line-graph"})),Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===p}),title:Object(o.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===p,role:"menuitemradio",tabIndex:"bar"===p?0:-1,onClick:Object(u.partial)(this.handleTypeToggle,"bar")},Object(r.createElement)(s.a,{icon:"stats-alt"})))),Object(r.createElement)(P.b,{component:!1},Object(r.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(ne)),ref:this.chartBodyRef},"donut"===p&&W&&Object(r.createElement)("div",{className:"bwf-donut-chart-empty-state"},W),"side"===ee&&oe,w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(k,{height:re})),!w&&!Object(u.isEmpty)(J)&&a>0&&Object(r.createElement)(He,{baseValue:l,chartType:p,colorScheme:d.a,data:J,dateParser:m,height:re,emptyMessage:h,interval:O,margin:{bottom:50,left:50,right:30,top:0},mode:E,orderedKeys:Q,screenReaderFormat:x,tooltipLabelFormat:T,tooltipValueFormat:D,tooltipPosition:j?"over":"below",tooltipTitle:I,valueType:M,width:"row"===ne?a-320:a,xFormat:A,x2Format:R,yBelow1Format:ie,yFormat:ae,emptyText:V,chartMeta:H,chartId:G,isProFeatureLocked:K,toopTipComponent:$})),"bottom"===ee&&Object(r.createElement)("div",{className:"bwf-chart-footer"},oe)),X)}}])&&it(n.prototype,a),l&&it(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,l}(r.Component);t.a=Object(b.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(Object(Re.a)(dt,{baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:"",showLegend:!0}))},,,,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(15),i=n.n(a),c=n(6),u=n.n(c),l=(n(488),n(339)),s=n(1),f=n(289);function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return y(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(y(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,y(f,"constructor",l),y(l,"constructor",u),u.displayName="GeneratorFunction",y(l,o,"GeneratorFunction"),y(f),y(f,o,"Generator"),y(f,r,(function(){return this})),y(f,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:a,m:d}})()}function y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(y=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){y(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function m(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function g(e,t,n){return t=O(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var _=function(e){function t(e){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=g(this,t,[e]),r=n,a=!0,(o=j(o="mounted"))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n.state={options:[]},n.appendFreeTextSearch=n.appendFreeTextSearch.bind(n),n.fetchOptions=n.fetchOptions.bind(n),n.updateSelected=n.updateSelected.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(o=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===h(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var o={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(o)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return t?this.getAutocompleter().options(t,this.props.searchHelper).then(function(){var e,r=(e=b().m((function e(r){var o;return b().w((function(e){for(;;)switch(e.n){case 0:if(!n.mounted){e.n=1;break}return o=n.getFormattedOptions(r,t),n.setState({options:o}),e.a(2,o);case 1:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,c,"next",e)}function c(e){m(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return e.value?n.getOptionCompletion(e.value):e})))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props,r=n.allowFreeTextSearch,o=n.emptySearchText,a=void 0===o?Object(s.__)("Not Found","funnel-builder"):o;if(!t||!t.length)return[];if(!r)return e.length>0?e:[{label:a,key:"",notFound:!0}];if(!r)return e;var i=this.getAutocompleter();return[].concat(d(i.getFreeTextOptions(t,e)),d(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,o=t.inlineTags,a=t.placeholder,i=t.selected,c=t.showClearButton,s=t.staticResults,f=t.disabled,d=(t.multiple,this.state.options),p=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(l.a,{className:u()("bwf-search",n,{"is-static-results":s}),disabled:f,hideBeforeSearch:!0,inlineTags:o,isSearchable:!0,label:a,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:a,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:d,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:p,selected:i,showClearButton:c,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&v(n.prototype,o),a&&v(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);_.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool,searchHelper:i.a.object};var E={allowFreeTextSearch:!1,onChange:o.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1,searchHelper:{}};t.a=Object(f.a)(_,E)},function(e,t,n){"use strict";var r=n(0),o=n(8),a=n(1),i=n(2),c=(n(489),n(14));function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,l=e.title,s=e.updateDetail,f=e.isLoading,d=e.pageUrlSlug,p=u(Object(r.useState)(l),2),b=p[0],y=p[1],m=u(Object(r.useState)(d),2),h=m[0],v=m[1],g=u(Object(r.useState)(""),2),O=g[0],w=g[1],j=Object(i.isEmpty)(null==b?void 0:b.trim())||Object(i.isEmpty)(null==h?void 0:h.trim()),_=Object(r.useRef)();return Object(r.useEffect)((function(){var e,n=null==t?void 0:t.split("/");_.current=null==n||null===(e=n.slice(0,Object(i.isEmpty)(n[n.length-1])?-2:-1))||void 0===e?void 0:e.join("/"),w(t)}),[t]),Object(r.createElement)(o.Modal,{title:Object(a.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Name","funnel-builder")),Object(r.createElement)(o.TextControl,{value:b,onChange:function(e){y(e)},className:Object(i.size)(null==b?void 0:b.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(j)return;s(b,h)}}}),Object(i.size)(null==b?void 0:b.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(a.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(o.TextControl,{value:h,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),w(_.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(i.size)(null==h?void 0:h.trim())?"":"bwf-error-border"}),Object(i.size)(null==h?void 0:h.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(a.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},O))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(c.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(c.a,{isPrimary:!0,onClick:function(){return s(b,h)},disabled:j,isBusy:f,className:j?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},,function(e,t,n){var r=n(451),o=n(452);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var l=t[c],s=a?a(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),i?o(n,l,s):r(n,l,s)}return n}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(6),a=n.n(o),i=n(2),c=n(8),u=n(43),l=n(1),s=n(288),f=(n(449),n(5));function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=[{label:Object(l.__)("Product","funnel-builder"),value:"product"},{label:Object(l.__)("Custom","funnel-builder"),value:"custom"}],g=function(e){var t,n=e.onChange,o=e.value,d=e.label,p=e.className,y=Object(u.useInstanceId)(g),h="inspector-bump-image-".concat(y),O=a()("components-bump-image",p),w=m(Object(r.useState)(o.type),2),j=w[0],_=w[1],E=m(Object(r.useState)(o.custom_url),2),S=E[0],x=E[1],k=Object(r.useRef)(document.body.classList.contains("modal-open")),P=function(e){n(e)},C=function(e,n){e.preventDefault(),t||((t=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();P(b(b({},o),{},{custom_url:e.url,type:"custom"})),x(e.url)})),t.on("close",(function(){k.current&&!document.body.classList.contains("modal-open")&&document.body.classList.add("modal-open")}))),t.open()};return Object(r.createElement)(c.BaseControl,{label:d,className:O,id:h},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(i.isEmpty)(v)&&Object(r.createElement)(c.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},v.map((function(e,t){return Object(r.createElement)(c.Button,{key:t,variant:e.value===j?"primary":"",onClick:function(){_(e.value),"product"===e.value?(delete o.custom_url,P(b(b({},o),{},{type:e.value}))):Object(i.isEmpty)(S)||P(b(b({},o),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===j?Object(r.createElement)("img",{src:null==o?void 0:o.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){x(""),P(b(b({},o),{},{type:"product",custom_url:""}))}},Object(r.createElement)(f.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:C},Object(r.createElement)(f.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:C},Object(r.createElement)(f.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(l.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(c.TextControl,{type:"number",label:Object(l.__)("Width (px)","funnel-builder"),max:400,value:null==o?void 0:o.width,onChange:function(e){P(b(b({},o),{},{width:e}))}}),Object(r.createElement)(s.b,{label:Object(l.__)("Image Position","funnel-builder"),options:[{label:Object(l.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(l.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(l.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==o?void 0:o.position,onChange:function(e){P(b(b({},o),{},{position:e}))}})))))};t.a=g},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){var r=n(491),o=n(685),a=n(686),i=n(687),c=n(688),u=n(689);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=c,l.prototype.set=u,e.exports=l},function(e,t,n){var r=n(452),o=n(416),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(533);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},,function(e,t,n){var r=n(693)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(499),o=n(711)(r);e.exports=o},function(e,t,n){var r=n(502),o=n(457);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},,function(e,t,n){var r=n(370),o=n(566),a=n(567);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){var r=n(416),o=n(353),a=n(493),i=n(322);e.exports=function(e,t,n){if(!i(n))return!1;var c=typeof t;return!!("number"==c?o(n)&&a(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";var r=n(294);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(o){var a=e.node(o);if(r.has(t,o))return a.rank;t[o]=!0;var i=r.min(r.map(e.outEdges(o),(function(t){return n(t.w)-e.edge(t).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),a.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(321);e.exports=o;function o(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function i(e,t){--e[t]||delete e[t]}function c(e,t,n,o){var a=""+t,i=""+n;if(!e&&a>i){var c=a;a=i,i=c}return a+""+i+""+(r.isUndefined(o)?"\0":o)}function u(e,t,n,r){var o=""+t,a=""+n;if(!e&&o>a){var i=o;o=a,a=i}var c={v:o,w:a};return r&&(c.name=r),c}function l(e,t){return c(e,t.v,t.w,t.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},o.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},o.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,(function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this},o.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return r.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t="\0";else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},o.prototype.children=function(e){if(r.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if("\0"===e)return this.nodes();if(this.hasNode(e))return[]}},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,function e(r){var a=n.parent(r);return void 0===a||t.hasNode(a)?(o[r]=a,a):a in o?o[a]:e(a)}(e))})),t},o.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,(function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},o.prototype.setEdge=function(){var e,t,n,o,i=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,n=l.name,2===arguments.length&&(o=arguments[1],i=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var s=c(this._isDirected,e,t,n);if(r.has(this._edgeLabels,s))return i&&(this._edgeLabels[s]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=i?o:this._defaultEdgeLabelFn(e,t,n);var f=u(this._isDirected,e,t,n);return e=f.v,t=f.w,Object.freeze(f),this._edgeObjs[s]=f,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][s]=f,this._out[e][s]=f,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,n){var o=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},o.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],i(this._preds[t],e),i(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.v===t})):o}},o.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.w===t})):o}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},,function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},,,function(e,t,n){var r=n(539),o=n(540),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(544);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(500),o=n(352);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t,n){var r=n(710)();e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},,,function(e,t,n){var r=n(496),o=n(741);e.exports=function e(t,n,a,i,c){var u=-1,l=t.length;for(a||(a=o),c||(c=[]);++u<l;){var s=t[u];n>0&&a(s)?n>1?e(s,n-1,a,i,c):r(c,s):i||(c[c.length]=s)}return c}},function(e,t,n){var r=n(443);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],c=t(i);if(null!=c&&(void 0===u?c==c&&!r(c):n(c,u)))var u=c,l=i}return l}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(43),a=n(15),i=n.n(a),c=n(8),u=n(6),l=n.n(u);n(529);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled","trafficError"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function y(e,t,n){return t=m(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,t,[e])).state={isFocused:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(o=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,o=t.value,a=t.help,i=t.className,u=t.instanceId,s=t.onChange,p=t.onClick,b=t.prefix,y=t.suffix,m=t.type,h=void 0===m?"text":m,v=t.disabled,g=t.trafficError,O=void 0!==g&&g,w=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,f),j=(this.state.isFocused,"inspector-text-control-with-affixes-".concat(u)),_=[];a&&_.push("".concat(j,"__help")),b&&_.push("".concat(j,"__prefix")),y&&_.push("".concat(j,"__suffix"));var E=l()(i,{"with-value":""!==o,empty:""===o}),S=l()("text-control-with-affixes",{"text-control-with-prefix":b,"text-control-with-suffix":y,disabled:v});return Object(r.createElement)(c.BaseControl,{label:n,id:j,help:a,className:E,onClick:function(t){return e.handleOnClick(t,p)}},Object(r.createElement)("div",{className:S},b&&Object(r.createElement)("span",{id:"".concat(j,"__prefix"),className:"text-control-with-affixes__prefix"},b),Object(r.createElement)("input",d({className:"components-text-control__input ".concat(O?"bwf-error":""),type:h,id:j,value:o,onChange:function(e){return s(e.target.value)},"aria-describedby":_.join(" "),disabled:v,onFocus:function(){return e.setState({isFocused:!0})}},w)),y&&Object(r.createElement)("span",{id:"".concat(j,"__suffix"),className:"text-control-with-affixes__suffix"},y)))}}])&&p(n.prototype,o),a&&p(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);v.propTypes={label:i.a.string,help:i.a.string,type:i.a.string,value:i.a.string.isRequired,className:i.a.string,onChange:i.a.func.isRequired,prefix:i.a.node,suffix:i.a.node,disabled:i.a.bool},t.a=Object(o.compose)([o.withInstanceId,c.withFocusOutside])(v)},function(e,t,n){},,function(e,t,n){var r=n(450),o=n(492),a=n(451),i=n(690),c=n(694),u=n(537),l=n(538),s=n(697),f=n(698),d=n(542),p=n(699),b=n(419),y=n(701),m=n(702),h=n(546),v=n(305),g=n(418),O=n(706),w=n(322),j=n(708),_=n(352),E=n(369),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,n,x,k,P,C){var N,T=1&n,D=2&n,I=4&n;if(x&&(N=P?x(t,k,P,C):x(t)),void 0!==N)return N;if(!w(t))return t;var M=v(t);if(M){if(N=y(t),!T)return l(t,N)}else{var A=b(t),R="[object Function]"==A||"[object GeneratorFunction]"==A;if(g(t))return u(t,T);if("[object Object]"==A||"[object Arguments]"==A||R&&!P){if(N=D||R?{}:h(t),!T)return D?f(t,c(N,t)):s(t,i(N,t))}else{if(!S[A])return P?t:{};N=m(t,A,T)}}C||(C=new r);var F=C.get(t);if(F)return F;C.set(t,N),j(t)?t.forEach((function(r){N.add(e(r,n,x,r,t,C))})):O(t)&&t.forEach((function(r,o){N.set(o,e(r,n,x,o,t,C))}));var L=M?void 0:(I?D?p:d:D?E:_)(t);return o(L||t,(function(r,o){L&&(r=t[o=r]),a(N,o,e(r,n,x,o,t,C))})),N}},,function(e,t,n){var r=n(470),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(691),o=n(472),a=n(305),i=n(418),c=n(493),u=n(453),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),f=!n&&!s&&i(e),d=!n&&!s&&!f&&u(e),p=n||s||f||d,b=p?r(e.length,String):[],y=b.length;for(var m in e)!t&&!l.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||c(m,y))||b.push(m);return b}},,,function(e,t,n){(function(e){var r=n(362),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(624)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(496),o=n(454),a=n(495),i=n(540),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=c},function(e,t,n){var r=n(543),o=n(495),a=n(352);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(496),o=n(305);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t,n){var r=n(362).Uint8Array;e.exports=r},function(e,t,n){var r=n(497);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(547),o=n(454),a=n(515);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(322),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){e.exports=n(549)},function(e,t,n){var r=n(492),o=n(455),a=n(550),i=n(305);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},function(e,t,n){var r=n(370);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(539),o=n(712),a=n(342),i=n(305);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},function(e,t,n){var r=n(715),o=n(344);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},function(e,t,n){var r=n(554),o=n(718),a=n(555);e.exports=function(e,t,n,i,c,u){var l=1&n,s=e.length,f=t.length;if(s!=f&&!(l&&f>s))return!1;var d=u.get(e),p=u.get(t);if(d&&p)return d==t&&p==e;var b=-1,y=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++b<s;){var h=e[b],v=t[b];if(i)var g=l?i(v,h,b,t,e,u):i(h,v,b,e,t,u);if(void 0!==g){if(g)continue;y=!1;break}if(m){if(!o(t,(function(e,t){if(!a(m,t)&&(h===e||c(h,e,n,i,u)))return m.push(t)}))){y=!1;break}}else if(h!==v&&!c(h,v,n,i,u)){y=!1;break}}return u.delete(e),u.delete(t),y}},function(e,t,n){var r=n(532),o=n(716),a=n(717);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(322);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},,function(e,t,n){var r=n(726),o=n(727);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},,function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(503),o=n(342),a=n(564),i=n(305);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},function(e,t,n){var r=n(455),o=n(353);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}},function(e,t,n){var r=n(731),o=n(455),a=n(342),i=n(732),c=n(305);e.exports=function(e,t,n){var u=c(e)?r:i,l=arguments.length<3;return u(e,a(t,4),n,l,o)}},function(e,t,n){var r=n(742),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,c=o(a.length-t,0),u=Array(c);++i<c;)u[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=n(u),r(e,this,l)}}},function(e,t,n){var r=n(743),o=n(744)(r);e.exports=o},function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},function(e,t,n){var r=n(353),o=n(344);e.exports=function(e){return o(e)&&r(e)}},function(e,t,n){var r=n(753),o=n(352);e.exports=function(e){return null==e?[]:r(e,o(e))}},function(e,t,n){var r=n(321),o=n(572);e.exports=function(e,t,n,r){return function(e,t,n,r){var a,i,c={},u=new o,l=function(e){var t=e.v!==a?e.v:e.w,r=c[t],o=n(e),l=i.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);l<r.distance&&(r.distance=l,r.predecessor=a,u.decrease(t,l))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;c[e]={distance:n},u.add(e,n)}));for(;u.size()>0&&(a=u.removeMin(),(i=c[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return c}(e,String(t),n||a,r||function(t){return e.outEdges(t)})};var a=r.constant(1)},function(e,t,n){var r=n(321);function o(){this._arr=[],this._keyIndices={}}e.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,a=o.length;return n[e]=a,o.push({key:e,priority:t}),this._decrease(a),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],a=n[t];n[e]=a,n[t]=o,r[a.key]=e,r[o.key]=t}},function(e,t,n){var r=n(321);e.exports=function(e){var t=0,n=[],o={},a=[];return e.nodes().forEach((function(i){r.has(o,i)||function i(c){var u=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach((function(e){r.has(o,e)?o[e].onStack&&(u.lowlink=Math.min(u.lowlink,o[e].index)):(i(e),u.lowlink=Math.min(u.lowlink,o[e].lowlink))})),u.lowlink===u.index){var l,s=[];do{l=n.pop(),o[l].onStack=!1,s.push(l)}while(c!==l);a.push(s)}}(i)})),a}},function(e,t,n){var r=n(321);function o(e){var t={},n={},o=[];if(r.each(e.sinks(),(function i(c){if(r.has(n,c))throw new a;r.has(t,c)||(n[c]=!0,t[c]=!0,r.each(e.predecessors(c),i),delete n[c],o.push(c))})),r.size(t)!==e.nodeCount())throw new a;return o}function a(){}e.exports=o,o.CycleException=a,a.prototype=new Error},function(e,t,n){var r=n(321);e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],i={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,o,a,i,c){r.has(a,n)||(a[n]=!0,o||c.push(n),r.each(i(n),(function(n){e(t,n,o,a,i,c)})),o&&c.push(n))}(e,t,"post"===n,i,o,a)})),a}},function(e,t,n){var r=n(653);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(504);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(452),o=n(416);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){"use strict";var r=n(294),o=n(324).Graph,a=n(460).slack;function i(e,t){return r.forEach(e.nodes(),(function n(o){r.forEach(t.nodeEdges(o),(function(r){var i=r.v,c=o===i?r.w:i;e.hasNode(c)||a(t,r)||(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))}))})),e.nodeCount()}function c(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return a(t,n)}))}function u(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new o({directed:!1}),l=e.nodes()[0],s=e.nodeCount();r.setNode(l,{});for(;i(r,e)<s;)t=c(r,e),n=r.hasNode(t.v)?a(e,t):-a(e,t),u(r,e,n);return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={graphlib:n(324),layout:n(765),debug:n(822),util:{time:n(313).time,notime:n(313).notime},version:n(823)}},function(e,t,n){var r=n(683);e.exports={Graph:r.Graph,json:n(755),alg:n(756),version:r.version}},function(e,t,n){e.exports={Graph:n(490),version:n(754)}},function(e,t,n){var r=n(531);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(491);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(491),o=n(621),a=n(532);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(417),o=n(352);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},,,function(e,t,n){var r=n(417),o=n(369);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(322),o=n(515),a=n(696),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var c in e)("constructor"!=c||!t&&i.call(e,c))&&n.push(c);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(417),o=n(495);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(417),o=n(541);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(543),o=n(541),a=n(369);e.exports=function(e){return r(e,a,o)}},,function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(497),o=n(703),a=n(704),i=n(705),c=n(545);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Set]":return new u;case"[object Symbol]":return i(e)}}},function(e,t,n){var r=n(497);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(404),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},function(e,t,n){var r=n(707),o=n(494),a=n(535),i=a&&a.isMap,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(419),o=n(344);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(709),o=n(494),a=n(535),i=a&&a.isSet,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(419),o=n(344);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),c=i.length;c--;){var u=i[e?c:++o];if(!1===n(a[u],u,a))break}return t}}},function(e,t,n){var r=n(353);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,c=Object(n);(t?i--:++i<a)&&!1!==o(c[i],i,c););return n}}},function(e,t,n){var r=n(455);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},function(e,t,n){var r=n(714),o=n(722),a=n(557);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(450),o=n(552);e.exports=function(e,t,n,a){var i=n.length,c=i,u=!a;if(null==e)return!c;for(e=Object(e);i--;){var l=n[i];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<c;){var s=(l=n[i])[0],f=e[s],d=l[1];if(u&&l[2]){if(void 0===f&&!(s in e))return!1}else{var p=new r;if(a)var b=a(f,d,s,e,t,p);if(!(void 0===b?o(d,f,3,a,p):b))return!1}}return!0}},function(e,t,n){var r=n(450),o=n(553),a=n(719),i=n(721),c=n(419),u=n(305),l=n(418),s=n(453),f="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,b,y){var m=u(e),h=u(t),v=m?"[object Array]":c(e),g=h?"[object Array]":c(t),O=(v="[object Arguments]"==v?f:v)==f,w=(g="[object Arguments]"==g?f:g)==f,j=v==g;if(j&&l(e)){if(!l(t))return!1;m=!0,O=!1}if(j&&!O)return y||(y=new r),m||s(e)?o(e,t,n,p,b,y):a(e,t,v,n,p,b,y);if(!(1&n)){var _=O&&d.call(e,"__wrapped__"),E=w&&d.call(t,"__wrapped__");if(_||E){var S=_?e.value():e,x=E?t.value():t;return y||(y=new r),b(S,x,n,p,y)}}return!!j&&(y||(y=new r),i(e,t,n,p,b,y))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(404),o=n(544),a=n(416),i=n(553),c=n(720),u=n(501),l=r?r.prototype:void 0,s=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=c;case"[object Set]":var b=1&r;if(p||(p=u),e.size!=t.size&&!b)return!1;var y=d.get(e);if(y)return y==t;r|=2,d.set(e,t);var m=i(p(e),p(t),r,l,f,d);return d.delete(e),m;case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(542),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var u=1&n,l=r(e),s=l.length;if(s!=r(t).length&&!u)return!1;for(var f=s;f--;){var d=l[f];if(!(u?d in t:o.call(t,d)))return!1}var p=c.get(e),b=c.get(t);if(p&&b)return p==t&&b==e;var y=!0;c.set(e,t),c.set(t,e);for(var m=u;++f<s;){var h=e[d=l[f]],v=t[d];if(a)var g=u?a(v,h,d,t,e,c):a(h,v,d,e,t,c);if(!(void 0===g?h===v||i(h,v,n,a,c):g)){y=!1;break}m||(m="constructor"==d)}if(y&&!m){var O=e.constructor,w=t.constructor;O==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof w&&w instanceof w||(y=!1)}return c.delete(e),c.delete(t),y}},function(e,t,n){var r=n(556),o=n(352);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},function(e,t,n){var r=n(552),o=n(724),a=n(559),i=n(558),c=n(556),u=n(557),l=n(457);e.exports=function(e,t){return i(e)&&c(t)?u(l(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,3)}}},function(e,t,n){var r=n(456);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},,function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},,function(e,t,n){var r=n(560),o=n(729),a=n(558),i=n(457);e.exports=function(e){return a(e)?r(i(e)):o(e)}},function(e,t,n){var r=n(456);e.exports=function(e){return function(t){return r(t,e)}}},,function(e,t){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},function(e,t){e.exports=function(e,t,n,r,o){return o(e,(function(e,o,a){n=r?(r=!1,e):t(n,e,o,a)})),n}},function(e,t,n){var r=n(536),o=n(419),a=n(353),i=n(734),c=n(735);e.exports=function(e){if(null==e)return 0;if(a(e))return i(e)?c(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},function(e,t,n){var r=n(409),o=n(305),a=n(344);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(736),o=n(737),a=n(738);e.exports=function(e){return o(e)?a(e):r(e)}},function(e,t,n){var r=n(560)("length");e.exports=r},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[a,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),s="(?:"+[a+r+"?",r,i,c,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+s+l,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},function(e,t,n){var r=n(492),o=n(547),a=n(499),i=n(342),c=n(454),u=n(305),l=n(418),s=n(471),f=n(322),d=n(453);e.exports=function(e,t,n){var p=u(e),b=p||l(e)||d(e);if(t=i(t,4),null==n){var y=e&&e.constructor;n=b?p?new y:[]:f(e)&&s(y)?o(c(e)):{}}return(b?r:a)(e,(function(e,r,o){return t(n,e,r,o)})),n}},function(e,t,n){var r=n(504),o=n(458),a=n(745),i=n(569),c=o((function(e){return a(r(e,1,i,!0))}));e.exports=c},function(e,t,n){var r=n(404),o=n(472),a=n(305),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(498),o=n(533),a=n(370),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(554),o=n(746),a=n(750),i=n(555),c=n(751),u=n(501);e.exports=function(e,t,n){var l=-1,s=o,f=e.length,d=!0,p=[],b=p;if(n)d=!1,s=a;else if(f>=200){var y=t?null:c(e);if(y)return u(y);d=!1,s=i,b=new r}else b=t?[]:p;e:for(;++l<f;){var m=e[l],h=t?t(m):m;if(m=n||0!==m?m:0,d&&h==h){for(var v=b.length;v--;)if(b[v]===h)continue e;t&&b.push(h),p.push(m)}else s(b,h,n)||(b!==p&&b.push(h),p.push(m))}return p}},function(e,t,n){var r=n(747);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(568),o=n(748),a=n(749);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,o,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(700),o=n(752),a=n(501),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(503);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t){e.exports="2.1.8"},function(e,t,n){var r=n(321),o=n(490);function a(e){return r.map(e.nodes(),(function(t){var n=e.node(t),o=e.parent(t),a={v:t};return r.isUndefined(n)||(a.value=n),r.isUndefined(o)||(a.parent=o),a}))}function i(e){return r.map(e.edges(),(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return r.isUndefined(t.name)||(o.name=t.name),r.isUndefined(n)||(o.value=n),o}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:i(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},function(e,t,n){e.exports={components:n(757),dijkstra:n(571),dijkstraAll:n(758),findCycles:n(759),floydWarshall:n(760),isAcyclic:n(761),postorder:n(762),preorder:n(763),prim:n(764),tarjan:n(573),topsort:n(574)}},function(e,t,n){var r=n(321);e.exports=function(e){var t,n={},o=[];function a(o){r.has(n,o)||(n[o]=!0,t.push(o),r.each(e.successors(o),a),r.each(e.predecessors(o),a))}return r.each(e.nodes(),(function(e){t=[],a(e),t.length&&o.push(t)})),o}},function(e,t,n){var r=n(571),o=n(321);e.exports=function(e,t,n){return o.transform(e.nodes(),(function(o,a){o[a]=r(e,a,t,n)}),{})}},function(e,t,n){var r=n(321),o=n(573);e.exports=function(e){return r.filter(o(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},function(e,t,n){var r=n(321);e.exports=function(e,t,n){return function(e,t,n){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var o=n.v===e?n.w:n.v,a=t(n);r[e][o]={distance:a,predecessor:e}}))})),o.forEach((function(e){var t=r[e];o.forEach((function(n){var a=r[n];o.forEach((function(n){var r=a[e],o=t[n],i=a[n],c=r.distance+o.distance;c<i.distance&&(i.distance=c,i.predecessor=o.predecessor)}))}))})),r}(e,t||o,n||function(t){return e.outEdges(t)})};var o=r.constant(1)},function(e,t,n){var r=n(574);e.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},function(e,t,n){var r=n(575);e.exports=function(e,t){return r(e,t,"post")}},function(e,t,n){var r=n(575);e.exports=function(e,t){return r(e,t,"pre")}},function(e,t,n){var r=n(321),o=n(490),a=n(572);e.exports=function(e,t){var n,i=new o,c={},u=new a;function l(e){var r=e.v===n?e.w:e.v,o=u.priority(r);if(void 0!==o){var a=t(e);a<o&&(c[r]=n,u.decrease(r,a))}}if(0===e.nodeCount())return i;r.each(e.nodes(),(function(e){u.add(e,Number.POSITIVE_INFINITY),i.setNode(e)})),u.decrease(e.nodes()[0],0);var s=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(c,n))i.setEdge(n,c[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(l)}return i}},function(e,t,n){"use strict";var r=n(294),o=n(801),a=n(804),i=n(805),c=n(313).normalizeRanks,u=n(807),l=n(313).removeEmptyRanks,s=n(808),f=n(809),d=n(810),p=n(811),b=n(820),y=n(313),m=n(324).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?y.time:y.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new m({multigraph:!0,compound:!0}),n=x(e.graph());return t.setGraph(r.merge({},v,S(n,h),r.pick(n,g))),r.forEach(e.nodes(),(function(n){var o=x(e.node(n));t.setNode(n,r.defaults(S(o,O),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var o=x(e.edge(n));t.setEdge(n,r.merge({},_,S(o,j),r.pick(o,E)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){o.run(e)})),t("    nestingGraph.run",(function(){s.run(e)})),t("    rank",(function(){i(y.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};y.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){l(e)})),t("    nestingGraph.cleanup",(function(){s.cleanup(e)})),t("    normalizeRanks",(function(){c(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){a.run(e)})),t("    parentDummyChains",(function(){u(e)})),t("    addBorderSegments",(function(){f(e)})),t("    order",(function(){p(e)})),t("    insertSelfEdges",(function(){!function(e){var t=y.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,o){var a=e.node(t);a.order=o+n,r.forEach(a.selfEdges,(function(t){y.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:a.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete a.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){d.adjust(e)})),t("    position",(function(){b(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,c=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-c},{x:o+5*i/6,y:a-c},{x:o+i,y:a},{x:o+5*i/6,y:a+c},{x:o+2*i/3,y:a+c}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),a=e.node(n.borderBottom),i=e.node(r.last(n.borderLeft)),c=e.node(r.last(n.borderRight));n.width=Math.abs(c.x-i.x),n.height=Math.abs(a.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){a.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){d.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,a=0,i=e.graph(),c=i.marginx||0,u=i.marginy||0;function l(e){var r=e.x,i=e.y,c=e.width,u=e.height;t=Math.min(t,r-c/2),n=Math.max(n,r+c/2),o=Math.min(o,i-u/2),a=Math.max(a,i+u/2)}r.forEach(e.nodes(),(function(t){l(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&l(n)})),t-=c,o-=u,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=o})),r.forEach(e.edges(),(function(n){var a=e.edge(n);r.forEach(a.points,(function(e){e.x-=t,e.y-=o})),r.has(a,"x")&&(a.x-=t),r.has(a,"y")&&(a.y-=o)})),i.width=n-t+c,i.height=a-o+u}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,o=e.edge(t),a=e.node(t.v),i=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=a),o.points.unshift(y.intersectRect(a,n)),o.points.push(y.intersectRect(i,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){o.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(e.edges(),(function(n){var o=e.edge(n),a=t.edge(n);o.points=a.points,r.has(a,"x")&&(o.x=a.x,o.y=a.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var h=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],O=["width","height"],w={width:0,height:0},j=["minlen","weight","width","height","labeloffset"],_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function S(e,t){return r.mapValues(r.pick(e,t),Number)}function x(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},function(e,t,n){var r=n(531);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(458),o=n(416),a=n(459),i=n(369),c=Object.prototype,u=c.hasOwnProperty,l=r((function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(r=1);++n<r;)for(var s=t[n],f=i(s),d=-1,p=f.length;++d<p;){var b=f[d],y=e[b];(void 0===y||o(y,c[b])&&!u.call(e,b))&&(e[b]=s[b])}return e}));e.exports=l},function(e,t,n){var r=n(769)(n(770));e.exports=r},function(e,t,n){var r=n(342),o=n(353),a=n(352);e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var u=r(n,3);t=a(t),n=function(e){return u(c[e],e,c)}}var l=e(t,n,i);return l>-1?c[u?t[l]:l]:void 0}}},function(e,t,n){var r=n(568),o=n(342),a=n(771),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var u=null==n?0:a(n);return u<0&&(u=i(c+u,0)),r(e,o(t,3),u)}},function(e,t,n){var r=n(576);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(500),o=n(550),a=n(369);e.exports=function(e,t){return null==e?e:r(e,o(t),a)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(452),o=n(499),a=n(342);e.exports=function(e,t){var n={};return t=a(t,3),o(e,(function(e,o,a){r(n,o,t(e,o,a))})),n}},function(e,t,n){var r=n(505),o=n(776),a=n(370);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(778),o=n(782)((function(e,t,n){r(e,t,n)}));e.exports=o},function(e,t,n){var r=n(450),o=n(578),a=n(500),i=n(779),c=n(322),u=n(369),l=n(579);e.exports=function e(t,n,s,f,d){t!==n&&a(n,(function(a,u){if(d||(d=new r),c(a))i(t,n,u,s,e,f,d);else{var p=f?f(l(t,u),a,u+"",t,n,d):void 0;void 0===p&&(p=a),o(t,u,p)}}),u)}},function(e,t,n){var r=n(578),o=n(537),a=n(545),i=n(538),c=n(546),u=n(472),l=n(305),s=n(569),f=n(418),d=n(471),p=n(322),b=n(780),y=n(453),m=n(579),h=n(781);e.exports=function(e,t,n,v,g,O,w){var j=m(e,n),_=m(t,n),E=w.get(_);if(E)r(e,n,E);else{var S=O?O(j,_,n+"",e,t,w):void 0,x=void 0===S;if(x){var k=l(_),P=!k&&f(_),C=!k&&!P&&y(_);S=_,k||P||C?l(j)?S=j:s(j)?S=i(j):P?(x=!1,S=o(_,!0)):C?(x=!1,S=a(_,!0)):S=[]:b(_)||u(_)?(S=j,u(j)?S=h(j):p(j)&&!d(j)||(S=c(_))):x=!1}x&&(w.set(_,S),g(S,_,v,O,w),w.delete(_)),r(e,n,S)}}},function(e,t,n){var r=n(409),o=n(454),a=n(344),i=Function.prototype,c=Object.prototype,u=i.toString,l=c.hasOwnProperty,s=u.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==s}},function(e,t,n){var r=n(417),o=n(369);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(458),o=n(459);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,i)}return t}))}},function(e,t,n){var r=n(505),o=n(580),a=n(370);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t,n){var r=n(505),o=n(342),a=n(580);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),a):void 0}},function(e,t,n){var r=n(786),o=n(789)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},function(e,t,n){var r=n(787),o=n(559);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},function(e,t,n){var r=n(456),o=n(788),a=n(502);e.exports=function(e,t,n){for(var i=-1,c=t.length,u={};++i<c;){var l=t[i],s=r(e,l);n(s,l)&&o(u,a(l,e),s)}return u}},function(e,t,n){var r=n(451),o=n(502),a=n(493),i=n(322),c=n(457);e.exports=function(e,t,n,u){if(!i(e))return e;for(var l=-1,s=(t=o(t,e)).length,f=s-1,d=e;null!=d&&++l<s;){var p=c(t[l]),b=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=f){var y=d[p];void 0===(b=u?u(y,p,d):void 0)&&(b=i(y)?y:a(t[l+1])?[]:{})}r(d,p,b),d=d[p]}return e}},function(e,t,n){var r=n(577),o=n(566),a=n(567);e.exports=function(e){return a(o(e,void 0,r),e+"")}},function(e,t,n){var r=n(791)();e.exports=r},function(e,t,n){var r=n(792),o=n(459),a=n(576);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&o(t,n,i)&&(n=i=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),i=void 0===i?t<n?1:-1:a(i),r(t,n,i,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,o,a){for(var i=-1,c=r(n((t-e)/(o||1)),0),u=Array(c);c--;)u[a?c:++i]=e,e+=o;return u}},function(e,t,n){var r=n(504),o=n(794),a=n(458),i=n(459),c=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=c},function(e,t,n){var r=n(503),o=n(456),a=n(342),i=n(564),c=n(795),u=n(494),l=n(796),s=n(370),f=n(305);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return f(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[s];var d=-1;t=r(t,u(a));var p=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return c(p,(function(e,t){return l(e,t,n)}))}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(797);e.exports=function(e,t,n){for(var o=-1,a=e.criteria,i=t.criteria,c=a.length,u=n.length;++o<c;){var l=r(a[o],i[o]);if(l)return o>=u?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(443);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e==e,i=r(e),c=void 0!==t,u=null===t,l=t==t,s=r(t);if(!u&&!s&&!i&&e>t||i&&c&&l&&!u&&!s||o&&c&&l||!n&&l||!a)return 1;if(!o&&!i&&!s&&e<t||s&&n&&a&&!o&&!i||u&&n&&a||!c&&a||!l)return-1}return 0}},function(e,t,n){var r=n(725),o=0;e.exports=function(e){var t=++o;return r(e)+t}},function(e,t,n){var r=n(451),o=n(800);e.exports=function(e,t){return o(e||[],t||[],r)}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=e.length,a=t.length,i={};++r<o;){var c=r<a?t[r]:void 0;n(i,e[r],c)}return i}},function(e,t,n){"use strict";var r=n(294),o=n(802);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?o(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},o={};function a(i){r.has(o,i)||(o[i]=!0,n[i]=!0,r.forEach(e.outEdges(i),(function(e){r.has(n,e.w)?t.push(e):a(e.w)})),delete n[i])}return r.forEach(e.nodes(),a),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},function(e,t,n){var r=n(294),o=n(324).Graph,a=n(803);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new o,i=0,c=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,o=t(e),a=r+o;n.setEdge(e.v,e.w,a),c=Math.max(c,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w).in+=o)}));var l=r.range(c+i+3).map((function(){return new a})),s=i+1;return r.forEach(n.nodes(),(function(e){u(l,s,n.node(e))})),{graph:n,buckets:l,zeroIdx:s}}(e,t||i),l=function(e,t,n){var r,o=[],a=t[t.length-1],i=t[0];for(;e.nodeCount();){for(;r=i.dequeue();)c(e,t,n,r);for(;r=a.dequeue();)c(e,t,n,r);if(e.nodeCount())for(var u=t.length-2;u>0;--u)if(r=t[u].dequeue()){o=o.concat(c(e,t,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(l,(function(t){return e.outEdges(t.v,t.w)})),!0)};var i=r.constant(1);function c(e,t,n,o,a){var i=a?[]:void 0;return r.forEach(e.inEdges(o.v),(function(r){var o=e.edge(r),c=e.node(r.v);a&&i.push({v:r.v,w:r.w}),c.out-=o,u(t,n,c)})),r.forEach(e.outEdges(o.v),(function(r){var o=e.edge(r),a=r.w,i=e.node(a);i.in-=o,u(t,n,i)})),e.removeNode(o.v),i}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},function(e,t){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}},function(e,t,n){"use strict";var r=n(294),o=n(313);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,a,i=t.v,c=e.node(i).rank,u=t.w,l=e.node(u).rank,s=t.name,f=e.edge(t),d=f.labelRank;if(l===c+1)return;for(e.removeEdge(t),a=0,++c;c<l;++a,++c)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:t,rank:c},n=o.addDummyNode(e,"edge",r,"_d"),c===d&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),e.setEdge(i,n,{weight:f.weight},s),0===a&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,u,{weight:f.weight},s)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)}))}}},function(e,t,n){"use strict";var r=n(460).longestPath,o=n(581),a=n(806);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":c(e);break;case"tight-tree":!function(e){r(e),o(e)}(e);break;case"longest-path":i(e);break;default:c(e)}};var i=r;function c(e){a(e)}},function(e,t,n){"use strict";var r=n(294),o=n(581),a=n(460).slack,i=n(460).longestPath,c=n(324).alg.preorder,u=n(324).alg.postorder,l=n(313).simplify;function s(e){e=l(e),i(e);var t,n=o(e);for(p(n),f(n,e);t=y(n);)h(n,e,t,m(n,e,t))}function f(e,t){var n=u(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=d(e,t,n)}(e,t,n)}))}function d(e,t,n){var o=e.node(n).parent,a=!0,i=t.edge(n,o),c=0;return i||(a=!1,i=t.edge(o,n)),c=i.weight,r.forEach(t.nodeEdges(n),(function(r){var i,u,l=r.v===n,s=l?r.w:r.v;if(s!==o){var f=l===a,d=t.edge(r).weight;if(c+=f?d:-d,i=n,u=s,e.hasEdge(i,u)){var p=e.edge(n,s).cutvalue;c+=f?-p:p}}})),c}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),b(e,{},1,t)}function b(e,t,n,o,a){var i=n,c=e.node(o);return t[o]=!0,r.forEach(e.neighbors(o),(function(a){r.has(t,a)||(n=b(e,t,n,a,o))})),c.low=i,c.lim=n++,a?c.parent=a:delete c.parent,n}function y(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function m(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var c=e.node(o),u=e.node(i),l=c,s=!1;c.lim>u.lim&&(l=u,s=!0);var f=r.filter(t.edges(),(function(t){return s===v(e,e.node(t.v),l)&&s!==v(e,e.node(t.w),l)}));return r.minBy(f,(function(e){return a(t,e)}))}function h(e,t,n,o){var a=n.v,i=n.w;e.removeEdge(a,i),e.setEdge(o.v,o.w,{}),p(e),f(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),o=c(e,n);o=o.slice(1),r.forEach(o,(function(n){var r=e.node(n).parent,o=t.edge(n,r),a=!1;o||(o=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?o.minlen:-o.minlen)}))}(e,t)}function v(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=s,s.initLowLimValues=p,s.initCutValues=f,s.calcCutValue=d,s.leaveEdge=y,s.enterEdge=m,s.exchangeEdges=h},function(e,t,n){var r=n(294);e.exports=function(e){var t=function(e){var t={},n=0;function o(a){var i=n;r.forEach(e.children(a),o),t[a]={low:i,lim:n++}}return r.forEach(e.children(),o),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),o=r.edgeObj,a=function(e,t,n,r){var o,a,i=[],c=[],u=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);o=n;do{o=e.parent(o),i.push(o)}while(o&&(t[o].low>u||l>t[o].lim));a=o,o=r;for(;(o=e.parent(o))!==a;)c.push(o);return{path:i.concat(c.reverse()),lca:a}}(e,t,o.v,o.w),i=a.path,c=a.lca,u=0,l=i[u],s=!0;n!==o.w;){if(r=e.node(n),s){for(;(l=i[u])!==c&&e.node(l).maxRank<r.rank;)u++;l===c&&(s=!1)}if(!s){for(;u<i.length-1&&e.node(l=i[u+1]).minRank<=r.rank;)u++;l=i[u]}e.setParent(n,l),n=e.successors(n)[0]}}))}},function(e,t,n){var r=n(294),o=n(313);e.exports={run:function(e){var t=o.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};return r.forEach(e.children(),(function(n){!function n(o,a){var i=e.children(o);i&&i.length&&r.forEach(i,(function(e){n(e,a+1)}));t[o]=a}(n,1)})),t}(e),a=r.max(r.values(n))-1,i=2*a+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=i}));var c=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(u){!function e(t,n,a,i,c,u,l){var s=t.children(l);if(!s.length)return void(l!==n&&t.setEdge(n,l,{weight:0,minlen:a}));var f=o.addBorderNode(t,"_bt"),d=o.addBorderNode(t,"_bb"),p=t.node(l);t.setParent(f,l),p.borderTop=f,t.setParent(d,l),p.borderBottom=d,r.forEach(s,(function(r){e(t,n,a,i,c,u,r);var o=t.node(r),s=o.borderTop?o.borderTop:r,p=o.borderBottom?o.borderBottom:r,b=o.borderTop?i:2*i,y=s!==p?1:c-u[l]+1;t.setEdge(f,s,{weight:b,minlen:y,nestingEdge:!0}),t.setEdge(p,d,{weight:b,minlen:y,nestingEdge:!0})})),t.parent(l)||t.setEdge(n,f,{weight:0,minlen:c+u[l]})}(e,t,i,c,a,n,u)})),e.graph().nodeRankFactor=i},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},function(e,t,n){var r=n(294),o=n(313);function a(e,t,n,r,a,i){var c={width:0,height:0,rank:i,borderType:t},u=a[t][i-1],l=o.addDummyNode(e,"border",c,n);a[t][i]=l,e.setParent(l,r),u&&e.setEdge(u,l,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var o=e.children(n),i=e.node(n);if(o.length&&r.forEach(o,t),r.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var c=i.minRank,u=i.maxRank+1;c<u;++c)a(e,"borderLeft","_bl",n,i,c),a(e,"borderRight","_br",n,i,c)}}))}},function(e,t,n){"use strict";var r=n(294);function o(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){a(e.edge(t))}))}function a(e){var t=e.width;e.width=e.height,e.height=t}function i(e){e.y=-e.y}function c(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){i(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,i),r.has(n,"y")&&i(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){c(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,c),r.has(n,"x")&&c(n)}))}(e),o(e))}}},function(e,t,n){"use strict";var r=n(294),o=n(812),a=n(813),i=n(814),c=n(818),u=n(819),l=n(324).Graph,s=n(313);function f(e,t,n){return r.map(t,(function(t){return c(e,t,n)}))}function d(e,t){var n=new l;r.forEach(e,(function(e){var o=e.graph().root,a=i(e,o,n,t);r.forEach(a.vs,(function(t,n){e.node(t).order=n})),u(e,n,a.vs)}))}function p(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=s.maxRank(e),n=f(e,r.range(1,t+1),"inEdges"),i=f(e,r.range(t-1,-1,-1),"outEdges"),c=o(e);p(e,c);for(var u,l=Number.POSITIVE_INFINITY,b=0,y=0;y<4;++b,++y){d(b%2?n:i,b%4>=2),c=s.buildLayerMatrix(e);var m=a(e,c);m<l&&(y=0,u=r.cloneDeep(c),l=m)}p(e,u)}},function(e,t,n){"use strict";var r=n(294);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),o=r.max(r.map(n,(function(t){return e.node(t).rank}))),a=r.map(r.range(o+1),(function(){return[]}));var i=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(i,(function n(o){if(r.has(t,o))return;t[o]=!0;var i=e.node(o);a[i.rank].push(o),r.forEach(e.successors(o),n)})),a}},function(e,t,n){"use strict";var r=n(294);function o(e,t,n){for(var o=r.zipObject(n,r.map(n,(function(e,t){return t}))),a=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:o[t.w],weight:e.edge(t).weight}})),"pos")})),!0),i=1;i<n.length;)i<<=1;var c=2*i-1;i-=1;var u=r.map(new Array(c),(function(){return 0})),l=0;return r.forEach(a.forEach((function(e){var t=e.pos+i;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;l+=e.weight*n}))),l}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=o(e,t[r-1],t[r]);return n}},function(e,t,n){var r=n(294),o=n(815),a=n(816),i=n(817);e.exports=function e(t,n,c,u){var l=t.children(n),s=t.node(n),f=s?s.borderLeft:void 0,d=s?s.borderRight:void 0,p={};f&&(l=r.filter(l,(function(e){return e!==f&&e!==d})));var b=o(t,l);r.forEach(b,(function(n){if(t.children(n.v).length){var o=e(t,n.v,c,u);p[n.v]=o,r.has(o,"barycenter")&&(a=n,i=o,r.isUndefined(a.barycenter)?(a.barycenter=i.barycenter,a.weight=i.weight):(a.barycenter=(a.barycenter*a.weight+i.barycenter*i.weight)/(a.weight+i.weight),a.weight+=i.weight))}var a,i}));var y=a(b,c);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(y,p);var m=i(y,u);if(f&&(m.vs=r.flatten([f,m.vs,d],!0),t.predecessors(f).length)){var h=t.node(t.predecessors(f)[0]),v=t.node(t.predecessors(d)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+h.order+v.order)/(m.weight+2),m.weight+=2}return m}},function(e,t,n){var r=n(294);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var o=r.reduce(n,(function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))}},function(e,t,n){"use strict";var r=n(294);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var a=e.pop();t.push(a),r.forEach(a.in.reverse(),n(a)),r.forEach(a.out,o(a))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},function(e,t,n){var r=n(294),o=n(313);function a(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}e.exports=function(e,t){var n=o.partition(e,(function(e){return r.has(e,"barycenter")})),i=n.lhs,c=r.sortBy(n.rhs,(function(e){return-e.i})),u=[],l=0,s=0,f=0;i.sort((d=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i})),f=a(u,c,f),r.forEach(i,(function(e){f+=e.vs.length,u.push(e.vs),l+=e.barycenter*e.weight,s+=e.weight,f=a(u,c,f)}));var d;var p={vs:r.flatten(u,!0)};s&&(p.barycenter=l/s,p.weight=s);return p}},function(e,t,n){var r=n(294),o=n(324).Graph;e.exports=function(e,t,n){var a=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),i=new o({compound:!0}).setGraph({root:a}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(o){var c=e.node(o),u=e.parent(o);(c.rank===t||c.minRank<=t&&t<=c.maxRank)&&(i.setNode(o),i.setParent(o,u||a),r.forEach(e[n](o),(function(t){var n=t.v===o?t.w:t.v,a=i.edge(n,o),c=r.isUndefined(a)?0:a.weight;i.setEdge(n,o,{weight:e.edge(t).weight+c})})),r.has(c,"minRank")&&i.setNode(o,{borderLeft:c.borderLeft[t],borderRight:c.borderRight[t]}))})),i}},function(e,t,n){var r=n(294);e.exports=function(e,t,n){var o,a={};r.forEach(n,(function(n){for(var r,i,c=e.parent(n);c;){if((r=e.parent(c))?(i=a[r],a[r]=c):(i=o,o=c),i&&i!==c)return void t.setEdge(i,c);c=r}}))}},function(e,t,n){"use strict";var r=n(294),o=n(313),a=n(821).positionX;e.exports=function(e){(function(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,a=0;r.forEach(t,(function(t){var o=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=a+o/2})),a+=o+n}))})(e=o.asNonCompoundGraph(e)),r.forEach(a(e),(function(t,n){e.node(n).x=t}))}},function(e,t,n){"use strict";var r=n(294),o=n(324).Graph,a=n(313);function i(e,t){var n={};return r.reduce(t,(function(t,o){var a=0,i=0,c=t.length,l=r.last(o);return r.forEach(o,(function(t,s){var f=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=f?e.node(f).order:c;(f||t===l)&&(r.forEach(o.slice(i,s+1),(function(t){r.forEach(e.predecessors(t),(function(r){var o=e.node(r),i=o.order;!(i<a||d<i)||o.dummy&&e.node(t).dummy||u(n,r,t)}))})),i=s+1,a=d)})),o})),n}function c(e,t){var n={};function o(t,o,a,i,c){var l;r.forEach(r.range(o,a),(function(o){l=t[o],e.node(l).dummy&&r.forEach(e.predecessors(l),(function(t){var r=e.node(t);r.dummy&&(r.order<i||r.order>c)&&u(n,t,l)}))}))}return r.reduce(t,(function(t,n){var a,i=-1,c=0;return r.forEach(n,(function(r,u){if("border"===e.node(r).dummy){var l=e.predecessors(r);l.length&&(a=e.node(l[0]).order,o(n,c,u,i,a),c=u,i=a)}o(n,c,n.length,a,t.length)})),n})),n}function u(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function l(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function s(e,t,n,o){var a={},i={},c={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){a[e]=e,i[e]=e,c[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var u=o(e);if(u.length)for(var s=((u=r.sortBy(u,(function(e){return c[e]}))).length-1)/2,f=Math.floor(s),d=Math.ceil(s);f<=d;++f){var p=u[f];i[e]===e&&t<c[p]&&!l(n,e,p)&&(i[p]=e,i[e]=a[e]=a[p],t=c[p])}}))})),{root:a,align:i}}function f(e,t,n,a,i){var c={},u=function(e,t,n,a){var i=new o,c=e.graph(),u=function(e,t,n){return function(o,a,i){var c,u=o.node(a),l=o.node(i),s=0;if(s+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":c=-u.width/2;break;case"r":c=u.width/2}if(c&&(s+=n?c:-c),c=0,s+=(u.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=l.width/2;break;case"r":c=-l.width/2}return c&&(s+=n?c:-c),c=0,s}}(c.nodesep,c.edgesep,a);return r.forEach(t,(function(t){var o;r.forEach(t,(function(t){var r=n[t];if(i.setNode(r),o){var a=n[o],c=i.edge(a,r);i.setEdge(a,r,Math.max(u(e,t,o),c||0))}o=t}))})),i}(e,t,n,i),l=i?"borderLeft":"borderRight";function s(e,t){for(var n=u.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return s((function(e){c[e]=u.inEdges(e).reduce((function(e,t){return Math.max(e,c[t.v]+u.edge(t))}),0)}),u.predecessors.bind(u)),s((function(t){var n=u.outEdges(t).reduce((function(e,t){return Math.min(e,c[t.w]-u.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(c[t]=Math.max(c[t],n))}),u.successors.bind(u)),r.forEach(a,(function(e){c[e]=c[n[e]]})),c}function d(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var a=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+a,n),o=Math.min(t-a,o)})),n-o}))}function p(e,t){var n=r.values(t),o=r.min(n),a=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(i){var c,u=n+i,l=e[u];if(l!==t){var s=r.values(l);(c="l"===i?o-r.min(s):a-r.max(s))&&(e[u]=r.mapValues(l,(function(e){return e+c})))}}))}))}function b(e,t){return r.mapValues(e.ul,(function(n,o){if(t)return e[t.toLowerCase()][o];var a=r.sortBy(r.map(e,o));return(a[1]+a[2])/2}))}e.exports={positionX:function(e){var t,n=a.buildLayerMatrix(e),o=r.merge(i(e,n),c(e,n)),u={};r.forEach(["u","d"],(function(a){t="u"===a?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var i=("u"===a?e.predecessors:e.successors).bind(e),c=s(e,t,o,i),l=f(e,t,c.root,c.align,"r"===n);"r"===n&&(l=r.mapValues(l,(function(e){return-e}))),u[a+n]=l}))}));var l=d(e,u);return p(u,l),b(u,e.graph().align)},findType1Conflicts:i,findType2Conflicts:c,addConflict:u,hasConflict:l,verticalAlignment:s,horizontalCompaction:f,alignCoordinates:p,findSmallestWidthAlignment:d,balance:b}},function(e,t,n){var r=n(294),o=n(313),a=n(324).Graph;e.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var o="layer"+t;n.setNode(o,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},function(e,t){e.exports="0.8.5"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(3),a=n.n(o),i=n(32),c=n.n(i);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=s(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function f(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var d="function"==typeof Symbol&&Symbol.observable||"@@observable",p=function(){return Math.random().toString(36).substring(7).split("").join(".")},b={INIT:"@@redux/INIT"+p(),REPLACE:"@@redux/REPLACE"+p(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+p()}};function y(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function m(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(f(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(f(1));return n(m)(e,t)}if("function"!=typeof e)throw new Error(f(2));var o=e,a=t,i=[],c=i,u=!1;function l(){c===i&&(c=i.slice())}function s(){if(u)throw new Error(f(3));return a}function p(e){if("function"!=typeof e)throw new Error(f(4));if(u)throw new Error(f(5));var t=!0;return l(),c.push(e),function(){if(t){if(u)throw new Error(f(6));t=!1,l();var n=c.indexOf(e);c.splice(n,1),i=null}}}function h(e){if(!y(e))throw new Error(f(7));if(void 0===e.type)throw new Error(f(8));if(u)throw new Error(f(9));try{u=!0,a=o(a,e)}finally{u=!1}for(var t=i=c,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error(f(10));o=e,h({type:b.REPLACE})}function g(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(f(11));function n(){e.next&&e.next(s())}return n(),{unsubscribe:t(n)}}})[d]=function(){return this},e}return h({type:b.INIT}),(r={dispatch:h,subscribe:p,getState:s,replaceReducer:v})[d]=g,r}function h(e,t){return function(){return t(e.apply(this,arguments))}}function v(e,t){if("function"==typeof e)return h(e,t);if("object"!=typeof e||null===e)throw new Error(f(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=h(o,t))}return n}function g(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var O={exports:{}},w={exports:{}},j={},_="function"==typeof Symbol&&Symbol.for,E=_?Symbol.for("react.element"):60103,S=_?Symbol.for("react.portal"):60106,x=_?Symbol.for("react.fragment"):60107,k=_?Symbol.for("react.strict_mode"):60108,P=_?Symbol.for("react.profiler"):60114,C=_?Symbol.for("react.provider"):60109,N=_?Symbol.for("react.context"):60110,T=_?Symbol.for("react.async_mode"):60111,D=_?Symbol.for("react.concurrent_mode"):60111,I=_?Symbol.for("react.forward_ref"):60112,M=_?Symbol.for("react.suspense"):60113,A=_?Symbol.for("react.suspense_list"):60120,R=_?Symbol.for("react.memo"):60115,F=_?Symbol.for("react.lazy"):60116,L=_?Symbol.for("react.block"):60121,B=_?Symbol.for("react.fundamental"):60117,q=_?Symbol.for("react.responder"):60118,z=_?Symbol.for("react.scope"):60119;function U(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case E:switch(e=e.type){case T:case D:case x:case P:case k:case M:return e;default:switch(e=e&&e.$$typeof){case N:case I:case F:case R:case C:return e;default:return t}}case S:return t}}}function Y(e){return U(e)===D}j.AsyncMode=T,j.ConcurrentMode=D,j.ContextConsumer=N,j.ContextProvider=C,j.Element=E,j.ForwardRef=I,j.Fragment=x,j.Lazy=F,j.Memo=R,j.Portal=S,j.Profiler=P,j.StrictMode=k,j.Suspense=M,j.isAsyncMode=function(e){return Y(e)||U(e)===T},j.isConcurrentMode=Y,j.isContextConsumer=function(e){return U(e)===N},j.isContextProvider=function(e){return U(e)===C},j.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===E},j.isForwardRef=function(e){return U(e)===I},j.isFragment=function(e){return U(e)===x},j.isLazy=function(e){return U(e)===F},j.isMemo=function(e){return U(e)===R},j.isPortal=function(e){return U(e)===S},j.isProfiler=function(e){return U(e)===P},j.isStrictMode=function(e){return U(e)===k},j.isSuspense=function(e){return U(e)===M},j.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===x||e===D||e===P||e===k||e===M||e===A||"object"==typeof e&&null!==e&&(e.$$typeof===F||e.$$typeof===R||e.$$typeof===C||e.$$typeof===N||e.$$typeof===I||e.$$typeof===B||e.$$typeof===q||e.$$typeof===z||e.$$typeof===L)},j.typeOf=U,w.exports=j;var V=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;function X(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign,Function.call.bind(Object.prototype.hasOwnProperty);function K(e,t,n,r,o){}K.resetWarningCache=function(){0};w.exports;function $(){}function W(){}W.resetWarningCache=$;O.exports=function(){function e(e,t,n,r,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:W,resetWarningCache:$};return n.PropTypes=n,n}();O.exports;var Z=a.a.createContext(null);var Q=function(e){e()},J=function(){return Q};var ee={notify:function(){},get:function(){return[]}};function te(e,t){var n,r=ee;function o(){i.onStateChange&&i.onStateChange()}function a(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=J(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ee)},getListeners:function(){return r}};return i}var ne="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;function re(e){var t=e.store,n=e.context,r=e.children,i=Object(o.useMemo)((function(){var e=te(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(o.useMemo)((function(){return t.getState()}),[t]);ne((function(){var e=i.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,c]);var u=n||Z;return a.a.createElement(u.Provider,{value:i},r)}var oe=w.exports,ae={};ae[oe.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ae[oe.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var ie={},ce=60103,ue=60106,le=60107,se=60108,fe=60114,de=60109,pe=60110,be=60112,ye=60113,me=60120,he=60115,ve=60116,ge=60121,Oe=60122,we=60117,je=60129,_e=60131;if("function"==typeof Symbol&&Symbol.for){var Ee=Symbol.for;ce=Ee("react.element"),ue=Ee("react.portal"),le=Ee("react.fragment"),se=Ee("react.strict_mode"),fe=Ee("react.profiler"),de=Ee("react.provider"),pe=Ee("react.context"),be=Ee("react.forward_ref"),ye=Ee("react.suspense"),me=Ee("react.suspense_list"),he=Ee("react.memo"),ve=Ee("react.lazy"),ge=Ee("react.block"),Oe=Ee("react.server.block"),we=Ee("react.fundamental"),je=Ee("react.debug_trace_mode"),_e=Ee("react.legacy_hidden")}function Se(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ce:switch(e=e.type){case le:case fe:case se:case ye:case me:return e;default:switch(e=e&&e.$$typeof){case pe:case be:case ve:case he:case de:return e;default:return t}}case ue:return t}}}var xe=de,ke=ce,Pe=be,Ce=le,Ne=ve,Te=he,De=ue,Ie=fe,Me=se,Ae=ye;function Re(){return Object(o.useContext)(Z)}function Fe(e){void 0===e&&(e=Z);var t=e===Z?Re:function(){return Object(o.useContext)(e)};return function(){return t().store}}ie.ContextConsumer=pe,ie.ContextProvider=xe,ie.Element=ke,ie.ForwardRef=Pe,ie.Fragment=Ce,ie.Lazy=Ne,ie.Memo=Te,ie.Portal=De,ie.Profiler=Ie,ie.StrictMode=Me,ie.Suspense=Ae,ie.isAsyncMode=function(){return!1},ie.isConcurrentMode=function(){return!1},ie.isContextConsumer=function(e){return Se(e)===pe},ie.isContextProvider=function(e){return Se(e)===de},ie.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ce},ie.isForwardRef=function(e){return Se(e)===be},ie.isFragment=function(e){return Se(e)===le},ie.isLazy=function(e){return Se(e)===ve},ie.isMemo=function(e){return Se(e)===he},ie.isPortal=function(e){return Se(e)===ue},ie.isProfiler=function(e){return Se(e)===fe},ie.isStrictMode=function(e){return Se(e)===se},ie.isSuspense=function(e){return Se(e)===ye},ie.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===le||e===fe||e===je||e===se||e===ye||e===me||e===_e||"object"==typeof e&&null!==e&&(e.$$typeof===ve||e.$$typeof===he||e.$$typeof===de||e.$$typeof===pe||e.$$typeof===be||e.$$typeof===we||e.$$typeof===ge||e[0]===Oe)},ie.typeOf=Se;var Le=Fe();function Be(e){void 0===e&&(e=Z);var t=e===Z?Le:Fe(e);return function(){return t().dispatch}}var qe=Be(),ze=function(e,t){return e===t};function Ue(e){void 0===e&&(e=Z);var t=e===Z?Re:function(){return Object(o.useContext)(e)};return function(e,n){void 0===n&&(n=ze);var r=t(),a=function(e,t,n,r){var a,i=Object(o.useReducer)((function(e){return e+1}),0)[1],c=Object(o.useMemo)((function(){return te(n,r)}),[n,r]),u=Object(o.useRef)(),l=Object(o.useRef)(),s=Object(o.useRef)(),f=Object(o.useRef)(),d=n.getState();try{if(e!==l.current||d!==s.current||u.current){var p=e(d);a=void 0!==f.current&&t(p,f.current)?f.current:p}else a=f.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return ne((function(){l.current=e,s.current=d,f.current=a,u.current=void 0})),ne((function(){function e(){try{var e=n.getState();if(e===s.current)return;var r=l.current(e);if(t(r,f.current))return;f.current=r,s.current=e}catch(e){u.current=e}i()}return c.onStateChange=e,c.trySubscribe(),e(),function(){return c.tryUnsubscribe()}}),[n,c]),a}(e,n,r.store,r.subscription);return Object(o.useDebugValue)(a),a}}var Ye,Ve=Ue();function He(e,t){return{type:e,payload:t}}Ye=i.unstable_batchedUpdates,Q=Ye;var Ge=Object.freeze({__proto__:null,setOnConnect:function(e){return He("SET_ON_CONNECT",{onConnect:e})},setOnConnectStart:function(e){return He("SET_ON_CONNECT_START",{onConnectStart:e})},setOnConnectStop:function(e){return He("SET_ON_CONNECT_STOP",{onConnectStop:e})},setOnConnectEnd:function(e){return He("SET_ON_CONNECT_END",{onConnectEnd:e})},setElements:function(e){return He("SET_ELEMENTS",e)},updateNodeDimensions:function(e){return He("UPDATE_NODE_DIMENSIONS",e)},updateNodePos:function(e){return He("UPDATE_NODE_POS",e)},updateNodePosDiff:function(e){return He("UPDATE_NODE_POS_DIFF",e)},setUserSelection:function(e){return He("SET_USER_SELECTION",e)},updateUserSelection:function(e){return He("UPDATE_USER_SELECTION",e)},unsetUserSelection:function(){return He("UNSET_USER_SELECTION")},setSelection:function(e){return He("SET_SELECTION",{selectionActive:e})},unsetNodesSelection:function(){return He("UNSET_NODES_SELECTION",{nodesSelectionActive:!1})},resetSelectedElements:function(){return He("RESET_SELECTED_ELEMENTS",{selectedElements:null})},setSelectedElements:function(e){return He("SET_SELECTED_ELEMENTS",e)},addSelectedElements:function(e){return He("ADD_SELECTED_ELEMENTS",e)},updateTransform:function(e){return He("UPDATE_TRANSFORM",{transform:e})},updateSize:function(e){return He("UPDATE_SIZE",{width:e.width||500,height:e.height||500})},initD3Zoom:function(e){return He("INIT_D3ZOOM",e)},setMinZoom:function(e){return He("SET_MINZOOM",e)},setMaxZoom:function(e){return He("SET_MAXZOOM",e)},setTranslateExtent:function(e){return He("SET_TRANSLATEEXTENT",e)},setConnectionPosition:function(e){return He("SET_CONNECTION_POSITION",{connectionPosition:e})},setConnectionNodeId:function(e){return He("SET_CONNECTION_NODEID",e)},setSnapToGrid:function(e){return He("SET_SNAPTOGRID",{snapToGrid:e})},setSnapGrid:function(e){return He("SET_SNAPGRID",{snapGrid:e})},setInteractive:function(e){return He("SET_INTERACTIVE",{nodesDraggable:e,nodesConnectable:e,elementsSelectable:e})},setNodesDraggable:function(e){return He("SET_NODES_DRAGGABLE",{nodesDraggable:e})},setNodesConnectable:function(e){return He("SET_NODES_CONNECTABLE",{nodesConnectable:e})},setElementsSelectable:function(e){return He("SET_ELEMENTS_SELECTABLE",{elementsSelectable:e})},setMultiSelectionActive:function(e){return He("SET_MULTI_SELECTION_ACTIVE",{multiSelectionActive:e})},setConnectionMode:function(e){return He("SET_CONNECTION_MODE",{connectionMode:e})},setNodeExtent:function(e){return He("SET_NODE_EXTENT",e)}});function Xe(e){var t=qe(),n=e(Ge);return Object(o.useMemo)((function(){return v(n,t)}),[t,n])}var Ke=Ve,$e=function(){return Le()};function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function Qe(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var et=function(e){var t=null==e?void 0:e.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(null==t?void 0:t.nodeName)||(null==t?void 0:t.hasAttribute("contenteditable"))},tt=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},rt=function(e,t){return{x:nt(e.x,t[0][0],t[1][0]),y:nt(e.y,t[0][1],t[1][1])}},ot=function(e){var t=Je(Object(o.useState)(!1),2),n=t[0],r=t[1];return Object(o.useEffect)((function(){if(void 0!==e){var t=function(t){et(t)||t.key!==e&&t.keyCode!==e||(t.preventDefault(),r(!0))},n=function(t){et(t)||t.key!==e&&t.keyCode!==e||r(!1)},o=function(){return r(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("blur",o),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("blur",o)}}}),[e,r]),n};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=function(e){return"id"in e&&"source"in e&&"target"in e},ut=function(e){return"id"in e&&!("source"in e)&&!("target"in e)},lt=function(e,t,n,r){var o=e.x,a=e.y,i=Je(t,3),c=i[0],u=i[1],l=i[2],s=Je(r,2),f=s[0],d=s[1],p={x:(o-c)/l,y:(a-u)/l};return n?{x:f*Math.round(p.x/f),y:d*Math.round(p.y/d)}:p},st=function(e){return function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return lt(t,r,o,a)}},ft=function(e,t){var n,r;return it(it({},e),{},{id:e.id.toString(),type:e.type||"default",__rf:{position:rt(e.position,t),width:(null===(n=e.style)||void 0===n?void 0:n.width)||null,height:(null===(r=e.style)||void 0===r?void 0:r.height)||null,handleBounds:{},isDragging:!1}})},dt=function(e){return it(it({},e),{},{source:e.source.toString(),target:e.target.toString(),sourceHandle:e.sourceHandle?e.sourceHandle.toString():null,targetHandle:e.targetHandle?e.targetHandle.toString():null,id:e.id.toString(),type:e.type||"default"})},pt=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},bt=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},yt=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},mt=function(e){var t=e.reduce((function(e,t){var n=t.__rf,r=(n=void 0===n?{}:n).position,o=n.width,a=n.height;return pt(e,bt(it(it({},r),{},{width:o,height:a})))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return yt(t)},ht=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=Je(n,3),o=r[0],a=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=bt({x:(t.x-o)/i,y:(t.y-a)/i,width:t.width/i,height:t.height/i});return e.filter((function(e){var t=e.selectable,n=void 0===t||t,r=e.__rf,o=r.position,a=r.width,i=r.height,s=r.isDragging;if(u&&!n)return!1;var f=bt(it(it({},o),{},{width:a,height:i})),d=Math.max(0,Math.min(l.x2,f.x2)-Math.max(l.x,f.x)),p=Math.max(0,Math.min(l.y2,f.y2)-Math.max(l.y,f.y)),b=Math.ceil(d*p);return!(null!==a&&null!==i&&!s)||(c?b>0:b>=a*i)}))},vt=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},gt=function(e,t){return[].concat(Qe(e.map((function(e){var t=it({},e);return t.position=t.__rf.position,delete t.__rf,t}))),Qe(t.map((function(e){return it({},e)}))))},Ot=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges;return gt(r,void 0===o?[]:o)}},wt=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges,a=void 0===o?[]:o,i=t.transform;return{elements:gt(r,a),position:[i[0],i[1]],zoom:i[2]}}},jt=function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,i=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(i,c),l=nt(u,r,o),s=e.x+e.width/2,f=e.y+e.height/2,d=t/2-s*l,p=n/2-f*l;return[d,p,l]},_t={value:()=>{}};function Et(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new St(r)}function St(e){this._=e}function xt(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function kt(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function Pt(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=_t,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}St.prototype=Et.prototype={constructor:St,on:function(e,t){var n,r=this._,o=xt(e+"",r),a=-1,i=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<i;)if(n=(e=o[a]).type)r[n]=Pt(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Pt(r[n],e.name,null);return this}for(;++a<i;)if((n=(e=o[a]).type)&&(n=kt(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new St(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};var Ct="http://www.w3.org/1999/xhtml",Nt={svg:"http://www.w3.org/2000/svg",xhtml:Ct,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Nt.hasOwnProperty(t)?{space:Nt[t],local:e}:e}function Dt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ct&&t.documentElement.namespaceURI===Ct?t.createElement(e):t.createElementNS(n,e)}}function It(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mt(e){var t=Tt(e);return(t.local?It:Dt)(t)}function At(){}function Rt(e){return null==e?At:function(){return this.querySelector(e)}}function Ft(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Lt(){return[]}function Bt(e){return null==e?Lt:function(){return this.querySelectorAll(e)}}function qt(e){return function(){return this.matches(e)}}function zt(e){return function(t){return t.matches(e)}}var Ut=Array.prototype.find;function Yt(){return this.firstElementChild}var Vt=Array.prototype.filter;function Ht(){return Array.from(this.children)}function Gt(e){return new Array(e.length)}function Xt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Kt(e){return function(){return e}}function $t(e,t,n,r,o,a){for(var i,c=0,u=t.length,l=a.length;c<l;++c)(i=t[c])?(i.__data__=a[c],r[c]=i):n[c]=new Xt(e,a[c]);for(;c<u;++c)(i=t[c])&&(o[c]=i)}function Wt(e,t,n,r,o,a,i){var c,u,l,s=new Map,f=t.length,d=a.length,p=new Array(f);for(c=0;c<f;++c)(u=t[c])&&(p[c]=l=i.call(u,u.__data__,c,t)+"",s.has(l)?o[c]=u:s.set(l,u));for(c=0;c<d;++c)l=i.call(e,a[c],c,a)+"",(u=s.get(l))?(r[c]=u,u.__data__=a[c],s.delete(l)):n[c]=new Xt(e,a[c]);for(c=0;c<f;++c)(u=t[c])&&s.get(p[c])===u&&(o[c]=u)}function Zt(e){return e.__data__}function Qt(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Jt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function en(e){return function(){this.removeAttribute(e)}}function tn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nn(e,t){return function(){this.setAttribute(e,t)}}function rn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function on(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function an(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function un(e){return function(){this.style.removeProperty(e)}}function ln(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sn(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fn(e,t){return e.style.getPropertyValue(t)||cn(e).getComputedStyle(e,null).getPropertyValue(t)}function dn(e){return function(){delete this[e]}}function pn(e,t){return function(){this[e]=t}}function bn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function yn(e){return e.trim().split(/^|\s+/)}function mn(e){return e.classList||new hn(e)}function hn(e){this._node=e,this._names=yn(e.getAttribute("class")||"")}function vn(e,t){for(var n=mn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function gn(e,t){for(var n=mn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function On(e){return function(){vn(this,e)}}function wn(e){return function(){gn(this,e)}}function jn(e,t){return function(){(t.apply(this,arguments)?vn:gn)(this,e)}}function _n(){this.textContent=""}function En(e){return function(){this.textContent=e}}function Sn(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function xn(){this.innerHTML=""}function kn(e){return function(){this.innerHTML=e}}function Pn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Cn(){this.nextSibling&&this.parentNode.appendChild(this)}function Nn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tn(){return null}function Dn(){var e=this.parentNode;e&&e.removeChild(this)}function In(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function An(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Rn(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Fn(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var i=0,c=o.length;i<c;++i)if((r=o[i]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Ln(e,t,n){var r=cn(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Bn(e,t){return function(){return Ln(this,e,t)}}function qn(e,t){return function(){return Ln(this,e,t.apply(this,arguments))}}Xt.prototype={constructor:Xt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},hn.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var zn=[null];function Un(e,t){this._groups=e,this._parents=t}function Yn(){return new Un([[document.documentElement]],zn)}function Vn(e){return"string"==typeof e?new Un([[document.querySelector(e)]],[document.documentElement]):new Un([[e]],zn)}function Hn(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}Un.prototype=Yn.prototype={constructor:Un,select:function(e){"function"!=typeof e&&(e=Rt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,c=t[o],u=c.length,l=r[o]=new Array(u),s=0;s<u;++s)(a=c[s])&&(i=e.call(a,a.__data__,s,c))&&("__data__"in a&&(i.__data__=a.__data__),l[s]=i);return new Un(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return Ft(e.apply(this,arguments))}}(e):Bt(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,c=t[a],u=c.length,l=0;l<u;++l)(i=c[l])&&(r.push(e.call(i,i.__data__,l,c)),o.push(i));return new Un(r,o)},selectChild:function(e){return this.select(null==e?Yt:function(e){return function(){return Ut.call(this.children,e)}}("function"==typeof e?e:zt(e)))},selectChildren:function(e){return this.selectAll(null==e?Ht:function(e){return function(){return Vt.call(this.children,e)}}("function"==typeof e?e:zt(e)))},filter:function(e){"function"!=typeof e&&(e=qt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,u=r[o]=[],l=0;l<c;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&u.push(a);return new Un(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Zt);var n=t?Wt:$t,r=this._parents,o=this._groups;"function"!=typeof e&&(e=Kt(e));for(var a=o.length,i=new Array(a),c=new Array(a),u=new Array(a),l=0;l<a;++l){var s=r[l],f=o[l],d=f.length,p=Qt(e.call(s,s&&s.__data__,l,r)),b=p.length,y=c[l]=new Array(b),m=i[l]=new Array(b),h=u[l]=new Array(d);n(s,f,y,m,h,p,t);for(var v,g,O=0,w=0;O<b;++O)if(v=y[O]){for(O>=w&&(w=O+1);!(g=m[w])&&++w<b;);v._next=g||null}}return(i=new Un(i,r))._enter=c,i._exit=u,i},enter:function(){return new Un(this._enter||this._groups.map(Gt),this._parents)},exit:function(){return new Un(this._exit||this._groups.map(Gt),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),c=new Array(o),u=0;u<i;++u)for(var l,s=n[u],f=r[u],d=s.length,p=c[u]=new Array(d),b=0;b<d;++b)(l=s[b]||f[b])&&(p[b]=l);for(;u<o;++u)c[u]=n[u];return new Un(c,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Jt);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,c=n[a],u=c.length,l=o[a]=new Array(u),s=0;s<u;++s)(i=c[s])&&(l[s]=i);l.sort(t)}return new Un(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,c=a.length;i<c;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=Tt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?tn:en:"function"==typeof t?n.local?an:on:n.local?rn:nn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?un:"function"==typeof t?sn:ln)(e,t,null==n?"":n)):fn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?dn:"function"==typeof t?bn:pn)(e,t)):this.node()[e]},classed:function(e,t){var n=yn(e+"");if(arguments.length<2){for(var r=mn(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?jn:t?On:wn)(n,t))},text:function(e){return arguments.length?this.each(null==e?_n:("function"==typeof e?Sn:En)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?xn:("function"==typeof e?Pn:kn)(e)):this.node().innerHTML},raise:function(){return this.each(Cn)},lower:function(){return this.each(Nn)},append:function(e){var t="function"==typeof e?e:Mt(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Mt(e),r=null==t?Tn:"function"==typeof t?t:Rt(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Dn)},clone:function(e){return this.select(e?Mn:In)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=An(e+""),i=a.length;if(!(arguments.length<2)){for(c=t?Fn:Rn,r=0;r<i;++r)this.each(c(a[r],t,n));return this}var c=this.node().__on;if(c)for(var u,l=0,s=c.length;l<s;++l)for(r=0,u=c[l];r<i;++r)if((o=a[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?qn:Bn)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};const Gn={capture:!0,passive:!1};function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}function Kn(e){var t=e.document.documentElement,n=Vn(e).on("dragstart.drag",Xn,Gn);"onselectstart"in t?n.on("selectstart.drag",Xn,Gn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $n(e,t){var n=e.document.documentElement,r=Vn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xn,Gn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Wn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qn(){}var Jn="\\s*([+-]?\\d+)\\s*",er="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,rr=new RegExp("^rgb\\("+[Jn,Jn,Jn]+"\\)$"),or=new RegExp("^rgb\\("+[tr,tr,tr]+"\\)$"),ar=new RegExp("^rgba\\("+[Jn,Jn,Jn,er]+"\\)$"),ir=new RegExp("^rgba\\("+[tr,tr,tr,er]+"\\)$"),cr=new RegExp("^hsl\\("+[er,tr,tr]+"\\)$"),ur=new RegExp("^hsla\\("+[er,tr,tr,er]+"\\)$"),lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sr(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function dr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?pr(t):3===n?new hr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?br(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?br(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=rr.exec(e))?new hr(t[1],t[2],t[3],1):(t=or.exec(e))?new hr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ar.exec(e))?br(t[1],t[2],t[3],t[4]):(t=ir.exec(e))?br(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cr.exec(e))?wr(t[1],t[2]/100,t[3]/100,1):(t=ur.exec(e))?wr(t[1],t[2]/100,t[3]/100,t[4]):lr.hasOwnProperty(e)?pr(lr[e]):"transparent"===e?new hr(NaN,NaN,NaN,0):null}function pr(e){return new hr(e>>16&255,e>>8&255,255&e,1)}function br(e,t,n,r){return r<=0&&(e=t=n=NaN),new hr(e,t,n,r)}function yr(e){return e instanceof Qn||(e=dr(e)),e?new hr((e=e.rgb()).r,e.g,e.b,e.opacity):new hr}function mr(e,t,n,r){return 1===arguments.length?yr(e):new hr(e,t,n,null==r?1:r)}function hr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function vr(){return"#"+Or(this.r)+Or(this.g)+Or(this.b)}function gr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Or(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function wr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _r(e,t,n,r)}function jr(e){if(e instanceof _r)return new _r(e.h,e.s,e.l,e.opacity);if(e instanceof Qn||(e=dr(e)),!e)return new _r;if(e instanceof _r)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,c=a-o,u=(a+o)/2;return c?(i=t===a?(n-r)/c+6*(n<r):n===a?(r-t)/c+2:(t-n)/c+4,c/=u<.5?a+o:2-a-o,i*=60):c=u>0&&u<1?0:i,new _r(i,c,u,e.opacity)}function _r(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Er(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Wn(Qn,dr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHsl:function(){return jr(this).formatHsl()},formatRgb:fr,toString:fr}),Wn(hr,mr,Zn(Qn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new hr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new hr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vr,formatHex:vr,formatRgb:gr,toString:gr})),Wn(_r,(function(e,t,n,r){return 1===arguments.length?jr(e):new _r(e,t,n,null==r?1:r)}),Zn(Qn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new _r(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new _r(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new hr(Er(e>=240?e-240:e+120,o,r),Er(e,o,r),Er(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Sr=e=>()=>e;function xr(e){return 1==(e=+e)?kr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Sr(isNaN(t)?n:t)}}function kr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Sr(isNaN(e)?t:e)}var Pr=function e(t){var n=xr(t);function r(e,t){var r=n((e=mr(e)).r,(t=mr(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=kr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Cr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Nr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tr=new RegExp(Nr.source,"g");function Dr(e,t){var n,r,o,a=Nr.lastIndex=Tr.lastIndex=0,i=-1,c=[],u=[];for(e+="",t+="";(n=Nr.exec(e))&&(r=Tr.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),c[i]?c[i]+=o:c[++i]=o),(n=n[0])===(r=r[0])?c[i]?c[i]+=r:c[++i]=r:(c[++i]=null,u.push({i:i,x:Cr(n,r)})),a=Tr.lastIndex;return a<t.length&&(o=t.slice(a),c[i]?c[i]+=o:c[++i]=o),c.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)c[(n=u[r]).i]=n.x(e);return c.join("")})}var Ir,Mr=180/Math.PI,Ar={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rr(e,t,n,r,o,a){var i,c,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Mr,skewX:Math.atan(u)*Mr,scaleX:i,scaleY:c}}function Fr(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var c=[],u=[];return a=e(a),i=e(i),function(e,r,o,a,i,c){if(e!==o||r!==a){var u=i.push("translate(",null,t,null,n);c.push({i:u-4,x:Cr(e,o)},{i:u-2,x:Cr(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,c,u),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Cr(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,i.rotate,c,u),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Cr(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,i.skewX,c,u),function(e,t,n,r,a,i){if(e!==n||t!==r){var c=a.push(o(a)+"scale(",null,",",null,")");i.push({i:c-4,x:Cr(e,n)},{i:c-2,x:Cr(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,c,u),a=i=null,function(e){for(var t,n=-1,r=u.length;++n<r;)c[(t=u[n]).i]=t.x(e);return c.join("")}}}var Lr=Fr((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ar:Rr(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Br=Fr((function(e){return null==e?Ar:(Ir||(Ir=document.createElementNS("http://www.w3.org/2000/svg","g")),Ir.setAttribute("transform",e),(e=Ir.transform.baseVal.consolidate())?Rr((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ar)}),", ",")",")");function qr(e){return((e=Math.exp(e))+1/e)/2}var zr,Ur,Yr=function e(t,n,r){function o(e,o){var a,i,c=e[0],u=e[1],l=e[2],s=o[0],f=o[1],d=o[2],p=s-c,b=f-u,y=p*p+b*b;if(y<1e-12)i=Math.log(d/l)/t,a=function(e){return[c+e*p,u+e*b,l*Math.exp(t*e*i)]};else{var m=Math.sqrt(y),h=(d*d-l*l+r*y)/(2*l*n*m),v=(d*d-l*l-r*y)/(2*d*n*m),g=Math.log(Math.sqrt(h*h+1)-h),O=Math.log(Math.sqrt(v*v+1)-v);i=(O-g)/t,a=function(e){var r,o=e*i,a=qr(g),s=l/(n*m)*(a*(r=t*o+g,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[c+s*p,u+s*b,l*a/qr(t*o+g)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),Vr=0,Hr=0,Gr=0,Xr=0,Kr=0,$r=0,Wr="object"==typeof performance&&performance.now?performance:Date,Zr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qr(){return Kr||(Zr(Jr),Kr=Wr.now()+$r)}function Jr(){Kr=0}function eo(){this._call=this._time=this._next=null}function to(e,t,n){var r=new eo;return r.restart(e,t,n),r}function no(){Kr=(Xr=Wr.now())+$r,Vr=Hr=0;try{!function(){Qr(),++Vr;for(var e,t=zr;t;)(e=Kr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vr}()}finally{Vr=0,function(){var e,t,n=zr,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:zr=t);Ur=e,oo(r)}(),Kr=0}}function ro(){var e=Wr.now(),t=e-Xr;t>1e3&&($r-=t,Xr=e)}function oo(e){Vr||(Hr&&(Hr=clearTimeout(Hr)),e-Kr>24?(e<1/0&&(Hr=setTimeout(no,e-Wr.now()-$r)),Gr&&(Gr=clearInterval(Gr))):(Gr||(Xr=Wr.now(),Gr=setInterval(ro,1e3)),Vr=1,Zr(no)))}function ao(e,t,n){var r=new eo;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eo.prototype=to.prototype={constructor:eo,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Qr():+n)+(null==t?0:+t),this._next||Ur===this||(Ur?Ur._next=this:zr=this,Ur=this),this._call=e,this._time=n,oo()},stop:function(){this._call&&(this._call=null,this._time=1/0,oo())}};var io=Et("start","end","cancel","interrupt"),co=[];function uo(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(u){var l,s,f,d;if(1!==n.state)return c();for(l in o)if((d=o[l]).name===n.name){if(3===d.state)return ao(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[l])}if(ao((function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(u))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,s=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=d);r.length=s+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=to((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:o,on:io,tween:co,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function lo(e,t){var n=fo(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function so(e,t){var n=fo(e,t);if(n.state>3)throw new Error("too late; already running");return n}function fo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function po(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):i=!1;i&&delete e.__transition}}function bo(e,t){var n,r;return function(){var o=so(this,e),a=o.tween;if(a!==n)for(var i=0,c=(r=n=a).length;i<c;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}o.tween=r}}function yo(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=so(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var c={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=c;break}u===l&&o.push(c)}a.tween=o}}function mo(e,t,n){var r=e._id;return e.each((function(){var e=so(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return fo(e,r).value[t]}}function ho(e,t){var n;return("number"==typeof t?Cr:t instanceof dr?Pr:(n=dr(t))?(t=n,Pr):Dr)(e,t)}function vo(e){return function(){this.removeAttribute(e)}}function go(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oo(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function wo(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function jo(e,t,n){var r,o,a;return function(){var i,c,u=n(this);if(null!=u)return(i=this.getAttribute(e))===(c=u+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,u));this.removeAttribute(e)}}function _o(e,t,n){var r,o,a;return function(){var i,c,u=n(this);if(null!=u)return(i=this.getAttributeNS(e.space,e.local))===(c=u+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,u));this.removeAttributeNS(e.space,e.local)}}function Eo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function So(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xo(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&So(e,o)),n}return o._value=t,o}function ko(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Eo(e,o)),n}return o._value=t,o}function Po(e,t){return function(){lo(this,e).delay=+t.apply(this,arguments)}}function Co(e,t){return t=+t,function(){lo(this,e).delay=t}}function No(e,t){return function(){so(this,e).duration=+t.apply(this,arguments)}}function To(e,t){return t=+t,function(){so(this,e).duration=t}}function Do(e,t){if("function"!=typeof t)throw new Error;return function(){so(this,e).ease=t}}function Io(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?lo:so;return function(){var i=a(this,e),c=i.on;c!==r&&(o=(r=c).copy()).on(t,n),i.on=o}}var Mo=Yn.prototype.constructor;function Ao(e){return function(){this.style.removeProperty(e)}}function Ro(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fo(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Ro(e,a,n)),r}return a._value=t,a}function Lo(e){return function(t){this.textContent=e.call(this,t)}}function Bo(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lo(r)),t}return r._value=e,r}var qo=0;function zo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Uo(){return++qo}var Yo=Yn.prototype;zo.prototype={constructor:zo,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Rt(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var c,u,l=r[i],s=l.length,f=a[i]=new Array(s),d=0;d<s;++d)(c=l[d])&&(u=e.call(c,c.__data__,d,l))&&("__data__"in c&&(u.__data__=c.__data__),f[d]=u,uo(f[d],t,n,d,f,fo(c,n)));return new zo(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Bt(e));for(var r=this._groups,o=r.length,a=[],i=[],c=0;c<o;++c)for(var u,l=r[c],s=l.length,f=0;f<s;++f)if(u=l[f]){for(var d,p=e.call(u,u.__data__,f,l),b=fo(u,n),y=0,m=p.length;y<m;++y)(d=p[y])&&uo(d,t,n,y,p,b);a.push(p),i.push(u)}return new zo(a,i,t,n)},selectChild:Yo.selectChild,selectChildren:Yo.selectChildren,filter:function(e){"function"!=typeof e&&(e=qt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,u=r[o]=[],l=0;l<c;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&u.push(a);return new zo(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),c=0;c<a;++c)for(var u,l=t[c],s=n[c],f=l.length,d=i[c]=new Array(f),p=0;p<f;++p)(u=l[p]||s[p])&&(d[p]=u);for(;c<r;++c)i[c]=t[c];return new zo(i,this._parents,this._name,this._id)},selection:function(){return new Mo(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Uo(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],u=c.length,l=0;l<u;++l)if(i=c[l]){var s=fo(i,t);uo(i,e,n,l,c,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new zo(r,this._parents,e,n)},call:Yo.call,nodes:Yo.nodes,node:Yo.node,size:Yo.size,empty:Yo.empty,each:Yo.each,on:function(e,t){var n=this._id;return arguments.length<2?fo(this.node(),n).on.on(e):this.each(Io(n,e,t))},attr:function(e,t){var n=Tt(e),r="transform"===n?Br:ho;return this.attrTween(e,"function"==typeof t?(n.local?_o:jo)(n,r,mo(this,"attr."+e,t)):null==t?(n.local?go:vo)(n):(n.local?wo:Oo)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Tt(e);return this.tween(n,(r.local?xo:ko)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Lr:ho;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=fn(this,e),i=(this.style.removeProperty(e),fn(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}(e,r)).on("end.style."+e,Ao(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var i=fn(this,e),c=n(this),u=c+"";return null==c&&(this.style.removeProperty(e),u=c=fn(this,e)),i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,c))}}(e,r,mo(this,"style."+e,t))).each(function(e,t){var n,r,o,a,i="style."+t,c="end."+i;return function(){var u=so(this,e),l=u.on,s=null==u.value[i]?a||(a=Ao(t)):void 0;l===n&&o===s||(r=(n=l).copy()).on(c,o=s),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var i=fn(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Fo(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(mo(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Bo(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=fo(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?bo:yo)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Po:Co)(t,e)):fo(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?No:To)(t,e)):fo(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Do(t,e)):fo(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;so(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(a,i){var c={value:i},u={value:function(){0==--o&&a()}};n.each((function(){var n=so(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(c),t._.interrupt.push(c),t._.end.push(u)),n.on=t})),0===o&&a()}))},[Symbol.iterator]:Yo[Symbol.iterator]};var Vo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ho(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Yn.prototype.interrupt=function(e){return this.each((function(){po(this,e)}))},Yn.prototype.transition=function(e){var t,n;e instanceof zo?(t=e._id,e=e._name):(t=Uo(),(n=Vo).time=Qr(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],u=c.length,l=0;l<u;++l)(i=c[l])&&uo(i,e,t,l,c,n||Ho(i,t));return new zo(r,this._parents,e,t)};var Go=e=>()=>e;function Xo(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ko(e,t,n){this.k=e,this.x=t,this.y=n}Ko.prototype={constructor:Ko,scale:function(e){return 1===e?this:new Ko(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ko(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $o=new Ko(1,0,0);function Wo(e){e.stopImmediatePropagation()}function Zo(e){e.preventDefault(),e.stopImmediatePropagation()}function Qo(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Jo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function ea(){return this.__zoom||$o}function ta(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function na(){return navigator.maxTouchPoints||"ontouchstart"in this}function ra(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}var oa,aa,ia,ca,ua,la;!function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(oa||(oa={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(aa||(aa={})),function(e){e.Lines="lines",e.Dots="dots"}(ia||(ia={})),function(e){e.Strict="strict",e.Loose="loose"}(ca||(ca={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(ua||(ua={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(la||(la={}));var sa=function(e){return{x:e.x,y:e.y,zoom:e.k}},fa=function(e){return e.target.closest(".nowheel")},da=function(e){var t,n,r=e.onMove,i=e.onMoveStart,c=e.onMoveEnd,u=e.zoomOnScroll,l=void 0===u||u,s=e.zoomOnPinch,f=void 0===s||s,d=e.panOnScroll,p=void 0!==d&&d,b=e.panOnScrollSpeed,y=void 0===b?.5:b,m=e.panOnScrollMode,h=void 0===m?la.Free:m,v=e.zoomOnDoubleClick,g=void 0===v||v,O=e.selectionKeyPressed,w=e.elementsSelectable,j=e.paneMoveable,_=void 0===j||j,E=e.defaultPosition,S=void 0===E?[0,0]:E,x=e.defaultZoom,k=void 0===x?1:x,P=e.translateExtent,C=e.zoomActivationKeyCode,N=e.preventScrolling,T=void 0===N||N,D=e.children,I=Object(o.useRef)(null),M=Object(o.useRef)({x:0,y:0,zoom:0}),A=$e(),R=Ke((function(e){return e.d3Zoom})),F=Ke((function(e){return e.d3Selection})),L=Ke((function(e){return e.d3ZoomHandler})),B=Xe((function(e){return e.initD3Zoom})),q=Xe((function(e){return e.updateTransform})),z=ot(C);return t=I,n=Xe((function(e){return e.updateSize})),Object(o.useEffect)((function(){var e,r=function(){if(t.current){var e=tt(t.current);0!==e.height&&0!==e.width||console.warn("The React Flow parent container needs a width and a height to render the graph."),n(e)}};return r(),window.onresize=r,t.current&&(e=new ResizeObserver((function(){return r()}))).observe(t.current),function(){window.onresize=null,e&&t.current&&e.unobserve(t.current)}}),[]),Object(o.useEffect)((function(){if(I.current){var e=A.getState(),t=void 0!==P?P:e.translateExtent,n=function(){var e,t,n,r=Qo,o=Jo,a=ra,i=ta,c=na,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Yr,d=Et("start","zoom","end"),p=0,b=10;function y(e){e.property("__zoom",ea).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",E).filter(c).on("touchstart.zoom",S).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Ko(t,e.x,e.y)}function h(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Ko(e.k,r,o)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function g(e,t,n,r){e.on("start.zoom",(function(){O(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){O(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,a=arguments,i=O(e,a).event(r),c=o.apply(e,a),u=null==n?v(c):"function"==typeof n?n.apply(e,a):n,l=Math.max(c[1][0]-c[0][0],c[1][1]-c[0][1]),s=e.__zoom,d="function"==typeof t?t.apply(e,a):t,p=f(s.invert(u).concat(l/s.k),d.invert(u).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=l/t[2];e=new Ko(n,u[0]-t[0]*n,u[1]-t[1]*n)}i.zoom(null,e)}}))}function O(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function j(e,...t){if(r.apply(this,arguments)){var n=O(this,t).event(e),o=this.__zoom,c=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,i.apply(this,arguments)))),s=Hn(e);if(n.wheel)n.mouse[0][0]===s[0]&&n.mouse[0][1]===s[1]||(n.mouse[1]=o.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(o.k===c)return;n.mouse=[s,o.invert(s)],po(this),n.start()}Zo(e),n.wheel=setTimeout(f,150),n.zoom("mouse",a(h(m(o,c),n.mouse[0],n.mouse[1]),n.extent,l))}function f(){n.wheel=null,n.end()}}function _(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=O(this,t,!0).event(e),c=Vn(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",b,!0),u=Hn(e,o),s=e.clientX,f=e.clientY;Kn(e.view),Wo(e),i.mouse=[u,this.__zoom.invert(u)],po(this),i.start()}function d(e){if(Zo(e),!i.moved){var t=e.clientX-s,n=e.clientY-f;i.moved=t*t+n*n>p}i.event(e).zoom("mouse",a(h(i.that.__zoom,i.mouse[0]=Hn(e,o),i.mouse[1]),i.extent,l))}function b(e){c.on("mousemove.zoom mouseup.zoom",null),$n(e.view,i.moved),Zo(e),i.event(e).end()}}function E(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=Hn(e.changedTouches?e.changedTouches[0]:e,this),c=n.invert(i),u=n.k*(e.shiftKey?.5:2),f=a(h(m(n,u),i,c),o.apply(this,t),l);Zo(e),s>0?Vn(this).transition().duration(s).call(g,f,i,e):Vn(this).call(y.transform,f,i,e)}}function S(n,...o){if(r.apply(this,arguments)){var a,i,c,u,l=n.touches,s=l.length,f=O(this,o,n.changedTouches.length===s).event(n);for(Wo(n),i=0;i<s;++i)u=[u=Hn(c=l[i],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),po(this),f.start())}}function x(e,...t){if(this.__zooming){var n,r,o,i,c=O(this,t).event(e),u=e.changedTouches,s=u.length;for(Zo(e),n=0;n<s;++n)o=Hn(r=u[n],this),c.touch0&&c.touch0[2]===r.identifier?c.touch0[0]=o:c.touch1&&c.touch1[2]===r.identifier&&(c.touch1[0]=o);if(r=c.that.__zoom,c.touch1){var f=c.touch0[0],d=c.touch0[1],p=c.touch1[0],b=c.touch1[1],y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y,v=(v=b[0]-d[0])*v+(v=b[1]-d[1])*v;r=m(r,Math.sqrt(y/v)),o=[(f[0]+p[0])/2,(f[1]+p[1])/2],i=[(d[0]+b[0])/2,(d[1]+b[1])/2]}else{if(!c.touch0)return;o=c.touch0[0],i=c.touch0[1]}c.zoom("touch",a(h(r,o,i),c.extent,l))}}function k(e,...r){if(this.__zooming){var o,a,i=O(this,r).event(e),c=e.changedTouches,u=c.length;for(Wo(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),o=0;o<u;++o)a=c[o],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(a=Hn(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<b)){var l=Vn(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return y.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",ea),e!==o?g(e,t,n,r):o.interrupt().each((function(){O(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,r){y.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},y.scaleTo=function(e,t,n,r){y.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,c=r.invert(i),u="function"==typeof t?t.apply(this,arguments):t;return a(h(m(r,u),i,c),e,l)}),n,r)},y.translateBy=function(e,t,n,r){y.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),l)}),null,r)},y.translateTo=function(e,t,n,r,i){y.transform(e,(function(){var e=o.apply(this,arguments),i=this.__zoom,c=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return a($o.translate(c[0],c[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Vn(this.that).datum();d.call(e,this.that,new Xo(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:d}),t)}},y.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:Go(+e),y):i},y.filter=function(e){return arguments.length?(r="function"==typeof e?e:Go(!!e),y):r},y.touchable=function(e){return arguments.length?(c="function"==typeof e?e:Go(!!e),y):c},y.extent=function(e){return arguments.length?(o="function"==typeof e?e:Go([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):o},y.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],y):[u[0],u[1]]},y.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],y):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},y.constrain=function(e){return arguments.length?(a=e,y):a},y.duration=function(e){return arguments.length?(s=+e,y):s},y.interpolate=function(e){return arguments.length?(f=e,y):f},y.on=function(){var e=d.on.apply(d,arguments);return e===d?y:e},y.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,y):Math.sqrt(p)},y.tapDistance=function(e){return arguments.length?(b=+e,y):b},y}().scaleExtent([e.minZoom,e.maxZoom]).translateExtent(t),r=Vn(I.current).call(n),o=nt(S[0],t[0][0],t[1][0]),a=nt(S[1],t[0][1],t[1][1]),i=nt(k,e.minZoom,e.maxZoom),c=$o.translate(o,a).scale(i);n.transform(r,c),B({d3Zoom:n,d3Selection:r,d3ZoomHandler:r.on("wheel.zoom"),transform:[o,a,i]})}}),[]),Object(o.useEffect)((function(){F&&R&&(p&&!z?F.on("wheel",(function(e){if(fa(e))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=F.property("__zoom").k||1;if(e.ctrlKey&&f){var n=Hn(e),r=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,o=t*Math.pow(2,r);R.scaleTo(F,o,n)}else{var a=1===e.deltaMode?20:1,i=h===la.Vertical?0:e.deltaX*a,c=h===la.Horizontal?0:e.deltaY*a;R.translateBy(F,-i/t*y,-c/t*y)}})).on("wheel.zoom",null):void 0!==L&&F.on("wheel",(function(e){if(!T||fa(e))return null;e.preventDefault()})).on("wheel.zoom",L))}),[p,h,F,R,L,z,f,T]),Object(o.useEffect)((function(){R&&(O?R.on("zoom",null):R.on("zoom",(function(e){if(q([e.transform.x,e.transform.y,e.transform.k]),r){var t=sa(e.transform);r(t)}})))}),[O,R,q,r]),Object(o.useEffect)((function(){R&&(i?R.on("start",(function(e){var t=sa(e.transform);M.current=t,i(t)})):R.on("start",null))}),[R,i]),Object(o.useEffect)((function(){R&&(c?R.on("end",(function(e){if(function(e,t){return e.x!==t.x||e.y!==t.y||e.zoom!==t.k}(M.current,e.transform)){var t=sa(e.transform);M.current=t,c(t)}})):R.on("end",null))}),[R,c]),Object(o.useEffect)((function(){R&&R.filter((function(e){var t=z||l,n=f&&e.ctrlKey;return!!(_||t||p||g||f)&&(!O&&(!(!g&&"dblclick"===e.type)&&((!fa(e)||"wheel"!==e.type)&&((!e.target.closest(".react-flow__node")&&!e.target.closest(".react-flow__edge")||"wheel"===e.type)&&((!e.target.closest(".react-flow__nodesselection")||"wheel"===e.type)&&(!(!f&&e.ctrlKey&&"wheel"===e.type)&&(!!(t||p||n||"wheel"!==e.type)&&(!!(_||"mousedown"!==e.type&&"touchstart"!==e.type)&&!(e.ctrlKey&&"wheel"!==e.type||e.button)))))))))}))}),[R,l,f,p,g,_,O,w,z]),a.a.createElement("div",{className:"react-flow__renderer react-flow__zoompane",ref:I},D)};function pa(e){var t=e.target.closest(".react-flow");if(t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}var ba=function(){var e=Ke((function(e){return e.userSelectionRect}));return e.draw?a.a.createElement("div",{className:"react-flow__selection",style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}):null},ya=Object(o.memo)((function(e){var t=e.selectionKeyPressed,n=Ke((function(e){return e.selectionActive})),r=Ke((function(e){return e.elementsSelectable})),o=Xe((function(e){return e.setUserSelection})),i=Xe((function(e){return e.updateUserSelection})),c=Xe((function(e){return e.unsetUserSelection})),u=Xe((function(e){return e.unsetNodesSelection}));if(!r||!(n||t))return null;return a.a.createElement("div",{className:"react-flow__selectionpane",onMouseDown:function(e){var t=pa(e);t&&o(t)},onMouseMove:function(e){if(t&&n){var r=pa(e);r&&i(r)}},onMouseUp:function(){return c()},onMouseLeave:function(){c(),u()}},a.a.createElement(ba,null))})),ma={exports:{}},ha={};function va(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=va(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var ga=g(Object.freeze({__proto__:null,default:function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=va(e))&&(r&&(r+=" "),r+=t);return r}})),Oa={},wa={};Object.defineProperty(wa,"__esModule",{value:!0}),wa.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},wa.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},wa.isNum=function(e){return"number"==typeof e&&!isNaN(e)},wa.int=function(e){return parseInt(e,10)},wa.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var ja={};Object.defineProperty(ja,"__esModule",{value:!0}),ja.getPrefix=Ea,ja.browserPrefixToKey=Sa,ja.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},ja.default=void 0;var _a=["Moz","Webkit","O","ms"];function Ea(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var o=0;o<_a.length;o++)if(Sa(n,_a[o])in r)return _a[o];return""}function Sa(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var xa=Ea();function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ja.default=xa,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.matchesSelector=Aa,Oa.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(Aa(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},Oa.addEvent=function(e,t,n,r){if(!e)return;var o=Da({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},Oa.removeEvent=function(e,t,n,r){if(!e)return;var o=Da({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},Oa.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Pa.int)(n.borderTopWidth),t+=(0,Pa.int)(n.borderBottomWidth)},Oa.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Pa.int)(n.borderLeftWidth),t+=(0,Pa.int)(n.borderRightWidth)},Oa.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Pa.int)(n.paddingTop),t-=(0,Pa.int)(n.paddingBottom)},Oa.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Pa.int)(n.paddingLeft),t-=(0,Pa.int)(n.paddingRight)},Oa.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,a=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:a}},Oa.createCSSTransform=function(e,t){var n=Ra(e,t,"px");return Ia({},(0,Ca.browserPrefixToKey)("transform",Ca.default),n)},Oa.createSVGTransform=function(e,t){return Ra(e,t,"")},Oa.getTranslation=Ra,Oa.getTouch=function(e,t){return e.targetTouches&&(0,Pa.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,Pa.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},Oa.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},Oa.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&Fa(e.body,"react-draggable-transparent-selection")},Oa.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&La(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}},Oa.addClassName=Fa,Oa.removeClassName=La;var Pa=wa,Ca=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==ka(e)&&"function"!=typeof e)return{default:e};var n=Na(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(ja);function Na(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Na=function(e){return e?n:t})(e)}function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){Ia(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ma="";function Aa(e,t){return Ma||(Ma=(0,Pa.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,Pa.isFunction)(e[t])}))),!!(0,Pa.isFunction)(e[Ma])&&e[Ma](t)}function Ra(e,t,n){var r=e.x,o=e.y,a="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var i="".concat("string"==typeof t.x?t.x:t.x+n),c="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(i,", ").concat(c,")")+a}return a}function Fa(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function La(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=Ua(e);if("string"==typeof r){var a,i=o.ownerDocument,c=i.defaultView;if(!((a="parent"===r?o.parentNode:i.querySelector(r))instanceof c.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=a,l=c.getComputedStyle(o),s=c.getComputedStyle(u);r={left:-o.offsetLeft+(0,qa.int)(s.paddingLeft)+(0,qa.int)(l.marginLeft),top:-o.offsetTop+(0,qa.int)(s.paddingTop)+(0,qa.int)(l.marginTop),right:(0,za.innerWidth)(u)-(0,za.outerWidth)(o)-o.offsetLeft+(0,qa.int)(s.paddingRight)-(0,qa.int)(l.marginRight),bottom:(0,za.innerHeight)(u)-(0,za.outerHeight)(o)-o.offsetTop+(0,qa.int)(s.paddingBottom)-(0,qa.int)(l.marginBottom)}}(0,qa.isNum)(r.right)&&(t=Math.min(t,r.right));(0,qa.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,qa.isNum)(r.left)&&(t=Math.max(t,r.left));(0,qa.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},Ba.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]},Ba.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Ba.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Ba.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,za.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=Ua(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,za.offsetXYFromParent)(r||e,a,n.props.scale)},Ba.createCoreData=function(e,t,n){var r=e.state,o=!(0,qa.isNum)(r.lastX),a=Ua(e);return o?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},Ba.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var qa=wa,za=Oa;function Ua(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Ya={},Va={};function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Va,"__esModule",{value:!0}),Va.default=function(){},Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.default=void 0;var Ga=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Ha(e)&&"function"!=typeof e)return{default:e};var n=ei(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(a.a),Xa=Ja(O.exports),Ka=Ja(c.a),$a=Oa,Wa=Ba,Za=wa,Qa=Ja(Va);function Ja(e){return e&&e.__esModule?e:{default:e}}function ei(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ei=function(e){return e?n:t})(e)}function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ni(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=li(e);if(t){var o=li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ci(this,n)}}function ci(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ui(e)}function ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fi={start:"touchstart",move:"touchmove",stop:"touchend"},di={start:"mousedown",move:"mousemove",stop:"mouseup"},pi=di,bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(a,e);var t,n,r,o=ii(a);function a(){var e;ri(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return si(ui(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),si(ui(e),"mounted",!1),si(ui(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,$a.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,$a.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,$a.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var a=(0,Wa.getControlPosition)(t,o,ui(e));if(null!=a){var i=a.x,c=a.y,u=(0,Wa.createCoreData)(ui(e),i,c);(0,Qa.default)("DraggableCore: handleDragStart: %j",u),(0,Qa.default)("calling",e.props.onStart),!1!==e.props.onStart(t,u)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,$a.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:i,lastY:c}),(0,$a.addEvent)(r,pi.move,e.handleDrag),(0,$a.addEvent)(r,pi.stop,e.handleDragStop))}}})),si(ui(e),"handleDrag",(function(t){var n=(0,Wa.getControlPosition)(t,e.state.touchIdentifier,ui(e));if(null!=n){var r=n.x,o=n.y;if(Array.isArray(e.props.grid)){var a=r-e.state.lastX,i=o-e.state.lastY,c=ti((0,Wa.snapToGrid)(e.props.grid,a,i),2);if(a=c[0],i=c[1],!a&&!i)return;r=e.state.lastX+a,o=e.state.lastY+i}var u=(0,Wa.createCoreData)(ui(e),r,o);if((0,Qa.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:r,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(l)}}})),si(ui(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,Wa.getControlPosition)(t,e.state.touchIdentifier,ui(e));if(null!=n){var r=n.x,o=n.y,a=(0,Wa.createCoreData)(ui(e),r,o);if(!1===e.props.onStop(t,a)||!1===e.mounted)return!1;var i=e.findDOMNode();i&&e.props.enableUserSelectHack&&(0,$a.removeUserSelectStyles)(i.ownerDocument),(0,Qa.default)("DraggableCore: handleDragStop: %j",a),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),i&&((0,Qa.default)("DraggableCore: Removing handlers"),(0,$a.removeEvent)(i.ownerDocument,pi.move,e.handleDrag),(0,$a.removeEvent)(i.ownerDocument,pi.stop,e.handleDragStop))}}})),si(ui(e),"onMouseDown",(function(t){return pi=di,e.handleDragStart(t)})),si(ui(e),"onMouseUp",(function(t){return pi=di,e.handleDragStop(t)})),si(ui(e),"onTouchStart",(function(t){return pi=fi,e.handleDragStart(t)})),si(ui(e),"onTouchEnd",(function(t){return pi=fi,e.handleDragStop(t)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,$a.addEvent)(e,fi.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,$a.removeEvent)(t,di.move,this.handleDrag),(0,$a.removeEvent)(t,fi.move,this.handleDrag),(0,$a.removeEvent)(t,di.stop,this.handleDragStop),(0,$a.removeEvent)(t,fi.stop,this.handleDragStop),(0,$a.removeEvent)(e,fi.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,$a.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:Ka.default.findDOMNode(this)}},{key:"render",value:function(){return Ga.cloneElement(Ga.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&oi(t.prototype,n),r&&oi(t,r),a}(Ga.Component);Ya.default=bi,si(bi,"displayName","DraggableCore"),si(bi,"propTypes",{allowAnyClick:Xa.default.bool,disabled:Xa.default.bool,enableUserSelectHack:Xa.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Xa.default.arrayOf(Xa.default.number),handle:Xa.default.string,cancel:Xa.default.string,nodeRef:Xa.default.object,onStart:Xa.default.func,onDrag:Xa.default.func,onStop:Xa.default.func,onMouseDown:Xa.default.func,scale:Xa.default.number,className:Za.dontSetMe,style:Za.dontSetMe,transform:Za.dontSetMe}),si(bi,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),e.default=void 0;var n=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=y(n);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(a.a),r=b(O.exports),o=b(c.a),i=b(ga),u=Oa,l=Ba,s=wa,f=b(Ya),d=b(Va),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function b(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,e);var t,r,a,c=S(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),C(k(t=c.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,l.createDraggableData)(k(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),C(k(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var r=(0,l.createDraggableData)(k(t),n),o={x:r.x,y:r.y};if(t.props.bounds){var a=o.x,i=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var c=w((0,l.getBoundPosition)(k(t),o.x,o.y),2),u=c[0],s=c[1];o.x=u,o.y=s,o.slackX=t.state.slackX+(a-o.x),o.slackY=t.state.slackY+(i-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(o)})),C(k(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,l.createDraggableData)(k(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,a=o.x,i=o.y;r.x=a,r.y=i}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:g({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=s,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:g({},n)})}}],(r=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var r=t.children,o=t.defaultPosition,a=t.defaultClassName,c=t.defaultClassNameDragging,s=t.defaultClassNameDragged,d=t.position,b=t.positionOffset;t.scale;var y=h(t,p),v={},O=null,w=!Boolean(d)||this.state.dragging,j=d||o,_={x:(0,l.canDragX)(this)&&w?this.state.x:j.x,y:(0,l.canDragY)(this)&&w?this.state.y:j.y};this.state.isElementSVG?O=(0,u.createSVGTransform)(_,b):v=(0,u.createCSSTransform)(_,b);var E=(0,i.default)(r.props.className||"",a,(C(e={},c,this.state.dragging),C(e,s,this.state.dragged),e));return n.createElement(f.default,m({},y,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:E,style:g(g({},r.props.style),v),transform:O}))}}])&&_(t.prototype,r),a&&_(t,a),s}(n.Component);e.default=N,C(N,"displayName","Draggable"),C(N,"propTypes",g(g({},f.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),C(N,"defaultProps",g(g({},f.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(ha);var yi=ha.default,mi=ha.DraggableCore;ma.exports=yi,ma.exports.default=yi;var hi=ma.exports.DraggableCore=mi,vi=ma.exports;function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wi=function(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,r=e.onSelectionDragStop,i=e.onSelectionContextMenu,c=Je(Ke((function(e){return e.transform})),3),u=c[0],l=c[1],s=c[2],f=Ke((function(e){return e.selectedNodesBbox})),d=Ke((function(e){return e.selectionActive})),p=Ke((function(e){return e.selectedElements})),b=Ke((function(e){return e.snapToGrid})),y=Ke((function(e){return e.snapGrid})),m=Ke((function(e){return e.nodes})),h=Xe((function(e){return e.updateNodePosDiff})),v=Object(o.useRef)(null),g=Object(o.useMemo)((function(){return b?y:[1,1]}),[b,y]),O=Object(o.useMemo)((function(){return p?p.filter(ut).map((function(e){var t=m.find((function(t){return t.id===e.id}));return Oi(Oi({},t),{},{position:null==t?void 0:t.__rf.position})})):[]}),[p,m]),w=Object(o.useMemo)((function(){return{transform:"translate(".concat(u,"px,").concat(l,"px) scale(").concat(s,")")}}),[u,l,s]),j=Object(o.useMemo)((function(){return{width:f.width,height:f.height,top:f.y,left:f.x}}),[f]),_=Object(o.useCallback)((function(e){null==t||t(e,O)}),[t,O]),E=Object(o.useCallback)((function(e,t){n&&n(e,O),h({diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,O,h]),S=Object(o.useCallback)((function(e){h({isDragging:!1}),null==r||r(e,O)}),[O,r]),x=Object(o.useCallback)((function(e){var t=p?p.filter(ut).map((function(e){return m.find((function(t){return t.id===e.id}))})):[];null==i||i(e,t)}),[i]);return!p||d?null:a.a.createElement("div",{className:"react-flow__nodesselection",style:w},a.a.createElement(vi,{scale:s,grid:g,onStart:function(e){return _(e)},onDrag:function(e,t){return E(e,t)},onStop:function(e){return S(e)},nodeRef:v,enableUserSelectHack:!1},a.a.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:x,style:j})))},ji=function(e){var t=e.children,n=e.onPaneClick,r=e.onPaneContextMenu,i=e.onPaneScroll,c=e.onElementsRemove,u=e.deleteKeyCode,l=e.onMove,s=e.onMoveStart,f=e.onMoveEnd,d=e.selectionKeyCode,p=e.multiSelectionKeyCode,b=e.zoomActivationKeyCode,y=e.elementsSelectable,m=e.zoomOnScroll,h=e.zoomOnPinch,v=e.panOnScroll,g=e.panOnScrollSpeed,O=e.panOnScrollMode,w=e.zoomOnDoubleClick,j=e.paneMoveable,_=e.defaultPosition,E=e.defaultZoom,S=e.translateExtent,x=e.preventScrolling,k=e.onSelectionDragStart,P=e.onSelectionDrag,C=e.onSelectionDragStop,N=e.onSelectionContextMenu,T=Xe((function(e){return e.unsetNodesSelection})),D=Xe((function(e){return e.resetSelectedElements})),I=Ke((function(e){return e.nodesSelectionActive})),M=ot(d);!function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=e.onElementsRemove,a=$e(),i=Xe((function(e){return e.unsetNodesSelection})),c=Xe((function(e){return e.setMultiSelectionActive})),u=Xe((function(e){return e.resetSelectedElements})),l=ot(t),s=ot(n);Object(o.useEffect)((function(){var e=a.getState(),t=e.edges,n=e.selectedElements;if(r&&l&&n){var o=n.filter(ut),c=vt(o,t),s=[].concat(Qe(n),Qe(c)).reduce((function(e,t){return e.set(t.id,t)}),new Map);r(Array.from(s.values())),i(),u()}}),[l]),Object(o.useEffect)((function(){c(s)}),[s])}({onElementsRemove:c,deleteKeyCode:u,multiSelectionKeyCode:p});var A=Object(o.useCallback)((function(e){null==n||n(e),T(),D()}),[n]),R=Object(o.useCallback)((function(e){null==r||r(e)}),[r]),F=Object(o.useCallback)((function(e){null==i||i(e)}),[i]);return a.a.createElement(da,{onMove:l,onMoveStart:s,onMoveEnd:f,selectionKeyPressed:M,elementsSelectable:y,zoomOnScroll:m,zoomOnPinch:h,panOnScroll:v,panOnScrollSpeed:g,panOnScrollMode:O,zoomOnDoubleClick:w,paneMoveable:j,defaultPosition:_,defaultZoom:E,translateExtent:S,zoomActivationKeyCode:b,preventScrolling:x},t,a.a.createElement(ya,{selectionKeyPressed:M}),I&&a.a.createElement(wi,{onSelectionDragStart:k,onSelectionDrag:P,onSelectionDragStop:C,onSelectionContextMenu:N}),a.a.createElement("div",{className:"react-flow__pane",onClick:A,onContextMenu:R,onWheel:F}))};ji.displayName="FlowRenderer";var _i=Object(o.memo)(ji),Ei=function(e){var t=Ke((function(e){return e.transform})),n=Ke((function(e){return e.selectedElements})),r=Ke((function(e){return e.nodesDraggable})),i=Ke((function(e){return e.nodesConnectable})),c=Ke((function(e){return e.elementsSelectable})),u=Ke((function(e){return e.width})),l=Ke((function(e){return e.height})),s=Ke((function(e){return e.nodes})),f=Xe((function(e){return e.updateNodeDimensions})),d=e.onlyRenderVisibleElements?ht(s,{x:0,y:0,width:u,height:l},t,!0):s,p=Object(o.useMemo)((function(){return{transform:"translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")")}}),[t[0],t[1],t[2]]),b=Object(o.useMemo)((function(){return"undefined"==typeof ResizeObserver?null:new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target}}));f(t)}))}),[]);return a.a.createElement("div",{className:"react-flow__nodes",style:p},d.map((function(o){var u=o.type||"default",l=e.nodeTypes[u]||e.nodeTypes.default;e.nodeTypes[u]||console.warn('Node type "'.concat(u,'" not found. Using fallback type "default".'));var s=!!(o.draggable||r&&void 0===o.draggable),f=!!(o.selectable||c&&void 0===o.selectable),d=!!(o.connectable||i&&void 0===o.connectable);return a.a.createElement(l,{key:o.id,id:o.id,className:o.className,style:o.style,type:u,data:o.data,sourcePosition:o.sourcePosition,targetPosition:o.targetPosition,isHidden:o.isHidden,xPos:o.__rf.position.x,yPos:o.__rf.position.y,isDragging:o.__rf.isDragging,isInitialized:null!==o.__rf.width&&null!==o.__rf.height,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onElementClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:t[2],selected:(null==n?void 0:n.some((function(e){return e.id===o.id})))||!1,isDraggable:s,isSelectable:f,isConnectable:d,resizeObserver:b,dragHandle:o.dragHandle})})))};Ei.displayName="NodeRenderer";var Si=Object(o.memo)(Ei),xi=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pi=function(e){var t=e.x,n=e.y,r=e.label,i=e.labelStyle,c=void 0===i?{}:i,f=e.labelShowBg,d=void 0===f||f,p=e.labelBgStyle,b=void 0===p?{}:p,y=e.labelBgPadding,m=void 0===y?[2,4]:y,h=e.labelBgBorderRadius,v=void 0===h?2:h,g=e.children,O=e.className,w=l(e,xi),j=Object(o.useRef)(null),_=Je(Object(o.useState)({x:0,y:0,width:0,height:0}),2),E=_[0],S=_[1],x=s(["react-flow__edge-textwrapper",O]);return Object(o.useEffect)((function(){if(j.current){var e=j.current.getBBox();S({x:e.x,y:e.y,width:e.width,height:e.height})}}),[r]),void 0!==r&&r?a.a.createElement("g",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transform:"translate(".concat(t-E.width/2," ").concat(n-E.height/2,")"),className:x},w),d&&a.a.createElement("rect",{width:E.width+2*m[0],x:-m[0],y:-m[1],height:E.height+2*m[1],className:"react-flow__edge-textbg",style:b,rx:v,ry:v}),a.a.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:j,style:c},r),g):null},Ci=Object(o.memo)(Pi),Ni=function(e,t){return void 0!==t&&t?"url(#".concat(t,")"):void 0!==e?"url(#react-flow__".concat(e,")"):"none"},Ti=[oa.Left,oa.Right],Di=function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=void 0===a?oa.Bottom:a,c=e.targetPosition,u=void 0===c?oa.Top:c,l=Ti.includes(i),s=Ti.includes(u);if(l&&!s||s&&!l){var f=l?Math.abs(r-t):0,d=t>r?t-f:t+f,p=l?0:Math.abs(o-n);return[d,n<o?n+p:n-p,f,p]}var b=Math.abs(r-t)/2,y=r<t?r+b:r-b,m=Math.abs(o-n)/2;return[y,o<n?o+m:o-m,b,m]};function Ii(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?oa.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,u=void 0===c?oa.Top:c,l=e.centerX,s=e.centerY,f=Je(Di({sourceX:t,sourceY:n,targetX:a,targetY:i}),2),d=f[0],p=f[1],b=[oa.Left,oa.Right],y=void 0!==l?l:d,m=void 0!==s?s:p,h="M".concat(t,",").concat(n," C").concat(t,",").concat(m," ").concat(a,",").concat(m," ").concat(a,",").concat(i);return b.includes(o)&&b.includes(u)?h="M".concat(t,",").concat(n," C").concat(y,",").concat(n," ").concat(y,",").concat(i," ").concat(a,",").concat(i):b.includes(u)?h="M".concat(t,",").concat(n," Q").concat(t,",").concat(i," ").concat(a,",").concat(i):b.includes(o)&&(h="M".concat(t,",").concat(n," Q").concat(a,",").concat(n," ").concat(a,",").concat(i)),h}var Mi=Object(o.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourcePosition,c=void 0===i?oa.Bottom:i,u=e.targetPosition,l=void 0===u?oa.Top:u,s=e.label,f=e.labelStyle,d=e.labelShowBg,p=e.labelBgStyle,b=e.labelBgPadding,y=e.labelBgBorderRadius,m=e.style,h=e.arrowHeadType,v=e.markerEndId,g=Je(Di({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:c,targetPosition:l}),2),O=g[0],w=g[1],j=Ii({sourceX:t,sourceY:n,sourcePosition:c,targetX:r,targetY:o,targetPosition:l}),_=s?a.a.createElement(Ci,{x:O,y:w,label:s,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:b,labelBgBorderRadius:y}):null,E=Ni(h,v);return a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{style:m,d:j,className:"react-flow__edge-path",markerEnd:E}),_)})),Ai=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},Ri=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Fi=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},Li=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Bi=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)},qi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},zi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},Ui=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)};function Yi(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?oa.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,u=void 0===c?oa.Top:c,l=e.borderRadius,s=void 0===l?5:l,f=e.centerX,d=e.centerY,p=Je(Di({sourceX:t,sourceY:n,targetX:a,targetY:i}),4),b=p[0],y=p[1],m=p[2],h=p[3],v=Math.min(s,Math.abs(a-t)),g=Math.min(s,Math.abs(i-n)),O=Math.min(v,g,m,h),w=[oa.Left,oa.Right],j=void 0!==f?f:b,_=void 0!==d?d:y,E=null,S=null;return t<=a?(E=n<=i?Ai(t,_,O):qi(t,_,O),S=n<=i?Ui(a,_,O):Li(a,_,O)):(E=n<i?Fi(t,_,O):zi(t,_,O),S=n<i?Bi(a,_,O):Ri(a,_,O)),w.includes(o)&&w.includes(u)?t<=a?(E=n<=i?Ui(j,n,O):Li(j,n,O),S=n<=i?Ai(j,i,O):qi(j,i,O)):(o===oa.Right&&u===oa.Left||o===oa.Left&&u===oa.Right||o===oa.Left&&u===oa.Left)&&(E=n<=i?Bi(j,n,O):Ri(j,n,O),S=n<=i?Fi(j,i,O):zi(j,i,O)):w.includes(o)&&!w.includes(u)?(E=t<=a?n<=i?Ui(a,n,O):Li(a,n,O):n<=i?Bi(a,n,O):Ri(a,n,O),S=""):!w.includes(o)&&w.includes(u)&&(E=t<=a?n<=i?Ai(t,i,O):qi(t,i,O):n<=i?Fi(t,i,O):zi(t,i,O),S=""),"M ".concat(t,",").concat(n).concat(E).concat(S,"L ").concat(a,",").concat(i)}var Vi=Object(o.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,c=e.labelStyle,u=e.labelShowBg,l=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.sourcePosition,b=void 0===p?oa.Bottom:p,y=e.targetPosition,m=void 0===y?oa.Top:y,h=e.arrowHeadType,v=e.markerEndId,g=e.borderRadius,O=void 0===g?5:g,w=Je(Di({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:b,targetPosition:m}),2),j=w[0],_=w[1],E=Yi({sourceX:t,sourceY:n,sourcePosition:b,targetX:r,targetY:o,targetPosition:m,borderRadius:O}),S=Ni(h,v),x=i?a.a.createElement(Ci,{x:j,y:_,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:f}):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{style:d,className:"react-flow__edge-path",d:E,markerEnd:S}),x)})),Hi=function(e){var t=e.connectionNodeId,n=e.connectionHandleId,r=e.connectionHandleType,i=e.connectionLineStyle,c=e.connectionPositionX,u=e.connectionPositionY,l=e.connectionLineType,s=void 0===l?ua.Bezier:l,f=e.nodes,d=void 0===f?[]:f,p=e.transform,b=e.isConnectable,y=e.CustomConnectionLineComponent,m=Je(Object(o.useState)(null),2),h=m[0],v=m[1],g=t,O=n;if(Object(o.useEffect)((function(){var e=d.find((function(e){return e.id===g}))||null;v(e)}),[]),!h||!b)return null;var w=function(e,t,n){var r="source"===n?"target":"source",o=t.__rf.handleBounds[n]||t.__rf.handleBounds[r];return e?o.find((function(t){return t.id===e})):o[0]}(O,h,r),j=w?w.x+w.width/2:h.__rf.width/2,_=w?w.y+w.height/2:h.__rf.height,E=h.__rf.position.x+j,S=h.__rf.position.y+_,x=(c-p[0])/p[2],k=(u-p[1])/p[2],P=(null==w?void 0:w.position)===oa.Left||(null==w?void 0:w.position)===oa.Right?oa.Left:oa.Top;if(y)return a.a.createElement("g",{className:"react-flow__connection"},a.a.createElement(y,{sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P,connectionLineType:s,connectionLineStyle:i,sourceNode:h,sourceHandle:w}));var C="";return C=s===ua.Bezier?Ii({sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P}):s===ua.Step?Yi({sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P,borderRadius:0}):s===ua.SmoothStep?Yi({sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P}):"M".concat(E,",").concat(S," ").concat(x,",").concat(k),a.a.createElement("g",{className:"react-flow__connection"},a.a.createElement("path",{d:C,className:"react-flow__connection-path",style:i}))},Gi=function(e){var t=e.id,n=e.children;return a.a.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},n)},Xi=function(e){var t=e.color;return a.a.createElement("defs",null,a.a.createElement(Gi,{id:"react-flow__arrowclosed"},a.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:t,points:"-5,-4 0,0 -5,4 -5,-4"})),a.a.createElement(Gi,{id:"react-flow__arrow"},a.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})))};function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Xi.displayName="MarkerDefinitions";var Wi=Object(o.memo)((function(e){return a.a.createElement(Vi,$i($i({},e),{},{borderRadius:0}))})),Zi=Object(o.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,c=e.labelStyle,u=e.labelShowBg,l=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.arrowHeadType,b=e.markerEndId,y=Math.abs(o-n)/2,m=o<n?o+y:o-y,h=Math.abs(r-t)/2,v=r<t?r+h:r-h,g=Ni(p,b),O=i?a.a.createElement(Ci,{x:v,y:m,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:f}):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{style:d,className:"react-flow__edge-path",d:"M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),markerEnd:g}),O)}));function Qi(e,t,n,r,o,a,i){var c=i.elementFromPoint(e.clientX,e.clientY),u=(null==c?void 0:c.classList.contains("target"))||!1,l=(null==c?void 0:c.classList.contains("source"))||!1,s={elementBelow:c,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(u||l)&&(s.isHoveringHandle=!0,t!==ca.Strict||(n&&l||!n&&u))){var f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:d,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:d};s.connection=p,s.isValid=a(p)}return s}function Ji(e){null==e||e.classList.remove("react-flow__handle-valid"),null==e||e.classList.remove("react-flow__handle-connecting")}function ec(e,t,n,r,o,a,i,c,u,l,s,f,d,p){var b,y,m,h=e.target.closest(".react-flow"),v=(b=e.target,(null===(y=b.getRootNode)||void 0===y?void 0:y.call(b))||(null===(m=window)||void 0===m?void 0:m.document));if(v){var g=v.elementFromPoint(e.clientX,e.clientY),O=null==g?void 0:g.classList.contains("target"),w=null==g?void 0:g.classList.contains("source");if(h&&(O||w||l)){var j,_=l||(O?"target":"source"),E=h.getBoundingClientRect();o({x:e.clientX-E.left,y:e.clientY-E.top}),r({connectionNodeId:n,connectionHandleId:t,connectionHandleType:_}),null==f||f(e,{nodeId:n,handleId:t,handleType:_}),v.addEventListener("mousemove",S),v.addEventListener("mouseup",(function e(o){var f=Qi(o,u,i,n,t,c,v),b=f.connection,y=f.isValid;null==d||d(o),y&&(null==a||a(b)),null==p||p(o),l&&s&&s(o),Ji(j),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),v.removeEventListener("mousemove",S),v.removeEventListener("mouseup",e)}))}}function S(e){o({x:e.clientX-E.left,y:e.clientY-E.top});var r=Qi(e,u,i,n,t,c,v),a=r.connection,l=r.elementBelow,s=r.isValid;if(!r.isHoveringHandle)return Ji(j);!(a.source===a.target)&&l&&(j=l,l.classList.add("react-flow__handle-connecting"),l.classList.toggle("react-flow__handle-valid",s))}}var tc=function(e,t,n){return n===oa.Left?e-t:n===oa.Right?e+t:e},nc=function(e,t,n){return n===oa.Top?e-t:n===oa.Bottom?e+t:e},rc=function(e){var t=e.className,n=e.position,r=e.centerX,o=e.centerY,i=e.radius,c=void 0===i?10:i;return a.a.createElement("circle",{className:s(["react-flow__edgeupdater",t]),cx:tc(r,c,n),cy:nc(o,c,n),r:c,stroke:"transparent",fill:"transparent"})},oc=function(e){var t=function(t){var n=t.id,r=t.className,i=t.type,c=t.data,u=t.onClick,l=t.onEdgeDoubleClick,f=t.selected,d=t.animated,p=t.label,b=t.labelStyle,y=t.labelShowBg,m=t.labelBgStyle,h=t.labelBgPadding,v=t.labelBgBorderRadius,g=t.style,O=t.arrowHeadType,w=t.source,j=t.target,_=t.sourceX,E=t.sourceY,S=t.targetX,x=t.targetY,k=t.sourcePosition,P=t.targetPosition,C=t.elementsSelectable,N=t.markerEndId,T=t.isHidden,D=t.sourceHandleId,I=t.targetHandleId,M=t.handleEdgeUpdate,A=t.onConnectEdge,R=t.onContextMenu,F=t.onMouseEnter,L=t.onMouseMove,B=t.onMouseLeave,q=t.edgeUpdaterRadius,z=t.onEdgeUpdateStart,U=t.onEdgeUpdateEnd,Y=Xe((function(e){return e.addSelectedElements})),V=Xe((function(e){return e.setConnectionNodeId})),H=Xe((function(e){return e.unsetNodesSelection})),G=Xe((function(e){return e.setConnectionPosition})),X=Ke((function(e){return e.connectionMode})),K=Je(Object(o.useState)(!1),2),$=K[0],W=K[1],Z=!C&&!u,Q=s(["react-flow__edge","react-flow__edge-".concat(i),r,{selected:f,animated:d,inactive:Z,updating:$}]),J=Object(o.useMemo)((function(){var e={id:n,source:w,target:j,type:i};return D&&(e.sourceHandle=D),I&&(e.targetHandle=I),void 0!==c&&(e.data=c),e}),[n,w,j,i,D,I,c]),ee=Object(o.useCallback)((function(e){C&&(H(),Y(J)),null==u||u(e,J)}),[C,J,u]),te=Object(o.useCallback)((function(e){null==l||l(e,J)}),[J,l]),ne=Object(o.useCallback)((function(e){null==R||R(e,J)}),[J,R]),re=Object(o.useCallback)((function(e){null==F||F(e,J)}),[J,R]),oe=Object(o.useCallback)((function(e){null==L||L(e,J)}),[J,R]),ae=Object(o.useCallback)((function(e){null==B||B(e,J)}),[J,R]),ie=Object(o.useCallback)((function(e,t){var n=t?j:w,r=t?I:D,o=t;null==z||z(e,J),ec(e,r,n,V,G,A,o,(function(){return!0}),X,t?"target":"source",U?function(e){return U(e,J)}:void 0)}),[n,w,j,i,D,I,V,G,J,A]),ce=Object(o.useCallback)((function(e){ie(e,!0)}),[n,w,D,ie]),ue=Object(o.useCallback)((function(e){ie(e,!1)}),[n,j,I,ie]),le=Object(o.useCallback)((function(){return W(!0)}),[W]),se=Object(o.useCallback)((function(){return W(!1)}),[W]);return T?null:a.a.createElement("g",{className:Q,onClick:ee,onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ae},a.a.createElement(e,{id:n,source:w,target:j,selected:f,animated:d,label:p,labelStyle:b,labelShowBg:y,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:v,data:c,style:g,arrowHeadType:O,sourceX:_,sourceY:E,targetX:S,targetY:x,sourcePosition:k,targetPosition:P,markerEndId:N,sourceHandleId:D,targetHandleId:I}),M&&a.a.createElement("g",{onMouseDown:ce,onMouseEnter:le,onMouseOut:se},a.a.createElement(rc,{position:k,centerX:_,centerY:E,radius:q})),M&&a.a.createElement("g",{onMouseDown:ue,onMouseEnter:le,onMouseOut:se},a.a.createElement(rc,{position:P,centerX:S,centerY:x,radius:q})))};return t.displayName="EdgeWrapper",Object(o.memo)(t)};function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((null==n?void 0:n.x)||0)+t.__rf.position.x,o=((null==n?void 0:n.y)||0)+t.__rf.position.y,a=(null==n?void 0:n.width)||t.__rf.width,i=(null==n?void 0:n.height)||t.__rf.height;switch(e){case oa.Top:return{x:r+a/2,y:o};case oa.Right:return{x:r+a,y:o+i/2};case oa.Bottom:return{x:r+a/2,y:o+i};case oa.Left:return{x:r,y:o+i/2}}}function uc(e,t){if(!e)return null;var n=null;return 1!==e.length&&t?t&&(n=e.find((function(e){return e.id===t}))):n=e[0],void 0===n?null:n}var lc=function(e){var t=e.edge,n=e.props,r=e.nodes,i=e.selectedElements,c=e.elementsSelectable,u=e.transform,l=e.width,s=e.height,f=e.onlyRenderVisibleElements,d=e.connectionMode,p=t.sourceHandle||null,b=t.targetHandle||null,y=function(e,t){return t.reduce((function(t,n){return n.id===e.source&&(t.sourceNode=n),n.id===e.target&&(t.targetNode=n),t}),{sourceNode:null,targetNode:null})}(t,r),m=y.sourceNode,h=y.targetNode,v=Object(o.useCallback)((function(e){var r;null===(r=n.onEdgeUpdate)||void 0===r||r.call(n,t,e)}),[t,n.onEdgeUpdate]);if(!m)return console.warn("couldn't create edge for source id: ".concat(t.source,"; edge id: ").concat(t.id)),null;if(!h)return console.warn("couldn't create edge for target id: ".concat(t.target,"; edge id: ").concat(t.id)),null;if(!m.__rf.width||!h.__rf.width)return null;var g=t.type||"default",O=n.edgeTypes[g]||n.edgeTypes.default,w=h.__rf.handleBounds,j=d===ca.Strict?w.target:w.target||w.source,_=uc(m.__rf.handleBounds.source,p),E=uc(j,b),S=_?_.position:oa.Bottom,x=E?E.position:oa.Top;if(!_)return console.warn("couldn't create edge for source handle id: ".concat(p,"; edge id: ").concat(t.id)),null;if(!E)return console.warn("couldn't create edge for target handle id: ".concat(b,"; edge id: ").concat(t.id)),null;var k=function(e,t,n,r,o,a){var i=cc(n,e,t),c=cc(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:c.x,targetY:c.y}}(m,_,S,h,E,x),P=k.sourceX,C=k.sourceY,N=k.targetX,T=k.targetY;if(!(!f||function(e){var t=e.sourcePos,n=e.targetPos,r=e.width,o=e.height,a=e.transform,i={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x,n.x),y2:Math.max(t.y,n.y)};i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);var c=bt({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:r/a[2],height:o/a[2]}),u=Math.max(0,Math.min(c.x2,i.x2)-Math.max(c.x,i.x)),l=Math.max(0,Math.min(c.y2,i.y2)-Math.max(c.y,i.y));return Math.ceil(u*l)>0}({sourcePos:{x:P,y:C},targetPos:{x:N,y:T},width:l,height:s,transform:u})))return null;var D=(null==i?void 0:i.some((function(e){return ct(e)&&e.id===t.id})))||!1;return a.a.createElement(O,{key:t.id,id:t.id,className:t.className,type:t.type,data:t.data,onClick:n.onElementClick,selected:D,animated:t.animated,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,style:t.style,arrowHeadType:t.arrowHeadType,source:t.source,target:t.target,sourceHandleId:p,targetHandleId:b,sourceX:P,sourceY:C,targetX:N,targetY:T,sourcePosition:S,targetPosition:x,elementsSelectable:c,markerEndId:n.markerEndId,isHidden:t.isHidden,onConnectEdge:v,handleEdgeUpdate:void 0!==n.onEdgeUpdate,onContextMenu:n.onEdgeContextMenu,onMouseEnter:n.onEdgeMouseEnter,onMouseMove:n.onEdgeMouseMove,onMouseLeave:n.onEdgeMouseLeave,edgeUpdaterRadius:n.edgeUpdaterRadius,onEdgeDoubleClick:n.onEdgeDoubleClick,onEdgeUpdateStart:n.onEdgeUpdateStart,onEdgeUpdateEnd:n.onEdgeUpdateEnd})},sc=function(e){var t=Ke((function(e){return e.transform})),n=Ke((function(e){return e.nodes})),r=Ke((function(e){return e.edges})),o=Ke((function(e){return e.connectionNodeId})),i=Ke((function(e){return e.connectionHandleId})),c=Ke((function(e){return e.connectionHandleType})),u=Ke((function(e){return e.connectionPosition})),l=Ke((function(e){return e.selectedElements})),s=Ke((function(e){return e.nodesConnectable})),f=Ke((function(e){return e.elementsSelectable})),d=Ke((function(e){return e.width})),p=Ke((function(e){return e.height}));if(!d)return null;var b=e.connectionLineType,y=e.arrowHeadColor,m=e.connectionLineStyle,h=e.connectionLineComponent,v=e.onlyRenderVisibleElements,g="translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")"),O=o&&c;return a.a.createElement("svg",{width:d,height:p,className:"react-flow__edges"},a.a.createElement(Xi,{color:y}),a.a.createElement("g",{style:{transform:g}},r.map((function(r){return a.a.createElement(lc,{key:r.id,edge:r,props:e,nodes:n,selectedElements:l,elementsSelectable:f,transform:t,width:d,height:p,onlyRenderVisibleElements:v})})),O&&a.a.createElement(Hi,{nodes:n,connectionNodeId:o,connectionHandleId:i,connectionHandleType:c,connectionPositionX:u.x,connectionPositionY:u.y,transform:t,connectionLineStyle:m,connectionLineType:b,isConnectable:s,CustomConnectionLineComponent:h})))};sc.displayName="EdgeRenderer";var fc=Object(o.memo)(sc),dc={zoomIn:function(){},zoomOut:function(){},zoomTo:function(e){},transform:function(e){},fitView:function(){},setCenter:function(e,t){},fitBounds:function(e){},project:function(e){return e},initialized:!1},pc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)},bc=function(){var e=$e(),t=Ke((function(e){return e.d3Zoom})),n=Ke((function(e){return e.d3Selection}));return Object(o.useMemo)((function(){return n&&t?{zoomIn:function(e){return t.scaleBy(pc(n,e),1.2)},zoomOut:function(e){return t.scaleBy(pc(n,e),1/1.2)},zoomTo:function(e,r){return t.scaleTo(pc(n,r),e)},transform:function(e,r){var o=$o.translate(e.x,e.y).scale(e.zoom);t.transform(pc(n,r),o)},fitView:function(){var r,o,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1,includeHiddenNodes:!1,duration:0},c=e.getState(),u=c.nodes,l=c.width,s=c.height,f=c.minZoom,d=c.maxZoom;if(u.length){var p=mt(i.includeHiddenNodes?u:u.filter((function(e){return!e.isHidden}))),b=jt(p,l,s,null!==(r=i.minZoom)&&void 0!==r?r:f,null!==(o=i.maxZoom)&&void 0!==o?o:d,null!==(a=i.padding)&&void 0!==a?a:.1),y=Je(b,3),m=y[0],h=y[1],v=y[2],g=$o.translate(m,h).scale(v);t.transform(pc(n,i.duration),g)}},setCenter:function(r,o,a,i){var c=e.getState(),u=c.width,l=c.height,s=c.maxZoom,f=void 0!==a?a:s,d=u/2-r*f,p=l/2-o*f,b=$o.translate(d,p).scale(f);t.transform(pc(n,i),b)},fitBounds:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,a=arguments.length>2?arguments[2]:void 0,i=e.getState(),c=i.width,u=i.height,l=i.minZoom,s=i.maxZoom,f=jt(r,c,u,l,s,o),d=Je(f,3),p=d[0],b=d[1],y=d[2],m=$o.translate(p,b).scale(y);t.transform(pc(n,a),m)},project:function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return lt(t,r,o,a)},initialized:!0}:dc}),[t,n])},yc=function(e){var t=e.nodeTypes,n=e.edgeTypes,r=e.onMove,i=e.onMoveStart,c=e.onMoveEnd,u=e.onLoad,l=e.onElementClick,s=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,d=e.onNodeMouseEnter,p=e.onNodeMouseMove,b=e.onNodeMouseLeave,y=e.onNodeContextMenu,m=e.onNodeDragStart,h=e.onNodeDrag,v=e.onNodeDragStop,g=e.onSelectionDragStart,O=e.onSelectionDrag,w=e.onSelectionDragStop,j=e.onSelectionContextMenu,_=e.connectionMode,E=e.connectionLineType,S=e.connectionLineStyle,x=e.connectionLineComponent,k=e.selectionKeyCode,P=e.multiSelectionKeyCode,C=e.zoomActivationKeyCode,N=e.onElementsRemove,T=e.deleteKeyCode,D=e.onConnect,I=e.onConnectStart,M=e.onConnectStop,A=e.onConnectEnd,R=e.snapToGrid,F=e.snapGrid,L=e.onlyRenderVisibleElements,B=e.nodesDraggable,q=e.nodesConnectable,z=e.elementsSelectable,U=e.selectNodesOnDrag,Y=e.minZoom,V=e.maxZoom,H=e.defaultZoom,G=e.defaultPosition,X=e.translateExtent,K=e.preventScrolling,$=e.nodeExtent,W=e.arrowHeadColor,Z=e.markerEndId,Q=e.zoomOnScroll,J=e.zoomOnPinch,ee=e.panOnScroll,te=e.panOnScrollSpeed,ne=e.panOnScrollMode,re=e.zoomOnDoubleClick,oe=e.paneMoveable,ae=e.onPaneClick,ie=e.onPaneScroll,ce=e.onPaneContextMenu,ue=e.onEdgeUpdate,le=e.onEdgeContextMenu,se=e.onEdgeMouseEnter,fe=e.onEdgeMouseMove,de=e.onEdgeMouseLeave,pe=e.edgeUpdaterRadius,be=e.onEdgeUpdateStart,ye=e.onEdgeUpdateEnd,me=Object(o.useRef)(!1),he=Xe((function(e){return e.setOnConnect})),ve=Xe((function(e){return e.setOnConnectStart})),ge=Xe((function(e){return e.setOnConnectStop})),Oe=Xe((function(e){return e.setOnConnectEnd})),we=Xe((function(e){return e.setSnapGrid})),je=Xe((function(e){return e.setSnapToGrid})),_e=Xe((function(e){return e.setNodesDraggable})),Ee=Xe((function(e){return e.setNodesConnectable})),Se=Xe((function(e){return e.setElementsSelectable})),xe=Xe((function(e){return e.setMinZoom})),ke=Xe((function(e){return e.setMaxZoom})),Pe=Xe((function(e){return e.setTranslateExtent})),Ce=Xe((function(e){return e.setNodeExtent})),Ne=Xe((function(e){return e.setConnectionMode})),Te=$e(),De=bc(),Ie=De.zoomIn,Me=De.zoomOut,Ae=De.zoomTo,Re=De.transform,Fe=De.fitView,Le=De.initialized;return Object(o.useEffect)((function(){!me.current&&Le&&(u&&u({fitView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1};return Fe(e)},zoomIn:Ie,zoomOut:Me,zoomTo:Ae,setTransform:Re,project:st(Te),getElements:Ot(Te),toObject:wt(Te)}),me.current=!0)}),[u,Ie,Me,Ae,Re,Fe,Le]),Object(o.useEffect)((function(){D&&he(D)}),[D]),Object(o.useEffect)((function(){I&&ve(I)}),[I]),Object(o.useEffect)((function(){M&&ge(M)}),[M]),Object(o.useEffect)((function(){A&&Oe(A)}),[A]),Object(o.useEffect)((function(){void 0!==R&&je(R)}),[R]),Object(o.useEffect)((function(){void 0!==F&&we(F)}),[F]),Object(o.useEffect)((function(){void 0!==B&&_e(B)}),[B]),Object(o.useEffect)((function(){void 0!==q&&Ee(q)}),[q]),Object(o.useEffect)((function(){void 0!==z&&Se(z)}),[z]),Object(o.useEffect)((function(){void 0!==Y&&xe(Y)}),[Y]),Object(o.useEffect)((function(){void 0!==V&&ke(V)}),[V]),Object(o.useEffect)((function(){void 0!==X&&Pe(X)}),[X]),Object(o.useEffect)((function(){void 0!==$&&Ce($)}),[$]),Object(o.useEffect)((function(){void 0!==_&&Ne(_)}),[_]),a.a.createElement(_i,{onPaneClick:ae,onPaneContextMenu:ce,onPaneScroll:ie,onElementsRemove:N,deleteKeyCode:T,selectionKeyCode:k,multiSelectionKeyCode:P,zoomActivationKeyCode:C,elementsSelectable:z,onMove:r,onMoveStart:i,onMoveEnd:c,zoomOnScroll:Q,zoomOnPinch:J,zoomOnDoubleClick:re,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,paneMoveable:oe,defaultPosition:G,defaultZoom:H,translateExtent:X,onSelectionDragStart:g,onSelectionDrag:O,onSelectionDragStop:w,onSelectionContextMenu:j,preventScrolling:K},a.a.createElement(Si,{nodeTypes:t,onElementClick:l,onNodeDoubleClick:s,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:y,onNodeDragStop:v,onNodeDrag:h,onNodeDragStart:m,selectNodesOnDrag:U,snapToGrid:R,snapGrid:F,onlyRenderVisibleElements:L}),a.a.createElement(fc,{edgeTypes:n,onElementClick:l,onEdgeDoubleClick:f,connectionLineType:E,connectionLineStyle:S,connectionLineComponent:x,connectionMode:_,arrowHeadColor:W,markerEndId:Z,onEdgeUpdate:ue,onlyRenderVisibleElements:L,onEdgeContextMenu:le,onEdgeMouseEnter:se,onEdgeMouseMove:fe,onEdgeMouseLeave:de,onEdgeUpdateStart:be,onEdgeUpdateEnd:ye,edgeUpdaterRadius:pe}))};yc.displayName="GraphView";var mc=Object(o.memo)(yc),hc=function(e){var t=e.elements,n=Xe((function(e){return e.setElements}));return Object(o.useEffect)((function(){n(t)}),[t]),null},vc=Object(o.createContext)(null),gc=vc.Provider;vc.Consumer;var Oc=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jc=function(){return!0},_c=Object(o.forwardRef)((function(e,t){var n=e.type,r=void 0===n?"source":n,i=e.position,c=void 0===i?oa.Top:i,f=e.isValidConnection,d=void 0===f?jc:f,p=e.isConnectable,b=void 0===p||p,y=e.id,m=e.onConnect,h=e.children,v=e.className,g=l(e,Oc),O=Object(o.useContext)(vc),w=Xe((function(e){return e.setConnectionPosition})),j=Xe((function(e){return e.setConnectionNodeId})),_=Ke((function(e){return e.onConnect})),E=Ke((function(e){return e.onConnectStart})),S=Ke((function(e){return e.onConnectStop})),x=Ke((function(e){return e.onConnectEnd})),k=Ke((function(e){return e.connectionMode})),P=y||null,C="target"===r,N=Object(o.useCallback)((function(e){null==_||_(e),null==m||m(e)}),[_,m]),T=Object(o.useCallback)((function(e){ec(e,P,O,j,w,N,C,d,k,void 0,void 0,E,S,x)}),[P,O,j,w,N,C,d,k,E,S,x]),D=s(["react-flow__handle","react-flow__handle-".concat(c),"nodrag",v,{source:!C,target:C,connectable:b}]);return a.a.createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"data-handleid":P,"data-nodeid":O,"data-handlepos":c,className:D,onMouseDown:T,ref:t},g),h)}));_c.displayName="Handle";var Ec=Object(o.memo)(_c),Sc=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,o=void 0===r?oa.Top:r,i=e.sourcePosition,c=void 0===i?oa.Bottom:i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ec,{type:"target",position:o,isConnectable:n}),t.label,a.a.createElement(Ec,{type:"source",position:c,isConnectable:n}))};Sc.displayName="DefaultNode";var xc=Object(o.memo)(Sc),kc=function(e){var t=e.data,n=e.isConnectable,r=e.sourcePosition,o=void 0===r?oa.Bottom:r;return a.a.createElement(a.a.Fragment,null,t.label,a.a.createElement(Ec,{type:"source",position:o,isConnectable:n}))};kc.displayName="InputNode";var Pc=Object(o.memo)(kc),Cc=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,o=void 0===r?oa.Top:r;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ec,{type:"target",position:o,isConnectable:n}),t.label)};Cc.displayName="OutputNode";var Nc=Object(o.memo)(Cc);function Tc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Dc=function(e){var t=function(t){var n=t.id,r=t.type,i=t.data,c=t.scale,l=t.xPos,f=t.yPos,d=t.selected,p=t.onClick,b=t.onMouseEnter,y=t.onMouseMove,m=t.onMouseLeave,h=t.onContextMenu,v=t.onNodeDoubleClick,g=t.onNodeDragStart,O=t.onNodeDrag,w=t.onNodeDragStop,j=t.style,_=t.className,E=t.isDraggable,S=t.isSelectable,x=t.isConnectable,k=t.selectNodesOnDrag,P=t.sourcePosition,C=t.targetPosition,N=t.isHidden,T=t.isInitialized,D=t.snapToGrid,I=t.snapGrid,M=t.isDragging,A=t.resizeObserver,R=t.dragHandle,F=Xe((function(e){return e.updateNodeDimensions})),L=Xe((function(e){return e.addSelectedElements})),B=Xe((function(e){return e.updateNodePosDiff})),q=Xe((function(e){return e.unsetNodesSelection})),z=Object(o.useRef)(null),U=Object(o.useMemo)((function(){return{id:n,type:r,position:{x:l,y:f},data:i}}),[n,r,l,f,i]),Y=Object(o.useMemo)((function(){return D?I:[1,1]}),[D,I]),V=Object(o.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tc(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:d?10:3,transform:"translate(".concat(l,"px,").concat(f,"px)"),pointerEvents:S||E||p||b||y||m?"all":"none",opacity:T?1:0},j)}),[d,l,f,S,E,p,T,j,b,y,m]),H=Object(o.useMemo)((function(){if(b&&!M)return function(e){return b(e,U)}}),[b,M,U]),G=Object(o.useMemo)((function(){if(y&&!M)return function(e){return y(e,U)}}),[y,M,U]),X=Object(o.useMemo)((function(){if(m&&!M)return function(e){return m(e,U)}}),[m,M,U]),K=Object(o.useMemo)((function(){if(h)return function(e){return h(e,U)}}),[h,U]),$=Object(o.useCallback)((function(e){E||(S&&(q(),d||L(U)),null==p||p(e,U))}),[S,d,E,p,U]),W=Object(o.useCallback)((function(e){null==g||g(e,U),k&&S?(q(),d||L(U)):k||d||!S||(q(),L([]))}),[U,d,k,S,g]),Z=Object(o.useCallback)((function(e,t){O&&(U.position.x+=t.deltaX,U.position.y+=t.deltaY,O(e,U)),B({id:n,diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,U,O]),Q=Object(o.useCallback)((function(e){if(!M)return!S||k||d||L(U),void(null==p||p(e,U));B({id:U.id,isDragging:!1}),null==w||w(e,U)}),[U,S,k,p,w,M,d]),J=Object(o.useCallback)((function(e){null==v||v(e,U)}),[U,v]);if(Object(o.useLayoutEffect)((function(){z.current&&!N&&F([{id:n,nodeElement:z.current,forceUpdate:!0}])}),[n,N,P,C]),Object(o.useEffect)((function(){if(z.current){var e=z.current;return null==A||A.observe(e),function(){return null==A?void 0:A.unobserve(e)}}}),[]),N)return null;var ee=s(["react-flow__node","react-flow__node-".concat(r),_,{selected:d,selectable:S}]);return a.a.createElement(hi,{onStart:W,onDrag:Z,onStop:Q,scale:c,disabled:!E,cancel:".nodrag",nodeRef:z,grid:Y,enableUserSelectHack:!1,handle:R},a.a.createElement("div",{className:ee,ref:z,style:V,onMouseEnter:H,onMouseMove:G,onMouseLeave:X,onContextMenu:K,onClick:$,onDoubleClick:J,"data-id":n},a.a.createElement(gc,{value:n},a.a.createElement(e,{id:n,data:i,type:r,xPos:l,yPos:f,selected:d,isConnectable:x,sourcePosition:P,targetPosition:C,isDragging:M,dragHandle:R}))))};return t.displayName="NodeWrapper",Object(o.memo)(t)};function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ac=function(e){var t=e.onSelectionChange,n=Ke((function(e){return e.selectedElements}));return Object(o.useEffect)((function(){t(n)}),[n]),null},Rc=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n};function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lc=function(e,t){var n=e.getBoundingClientRect();return{source:Bc(".source",e,n,t),target:Bc(".target",e,n,t)}},Bc=function(e,t,n,r){var o=t.querySelectorAll(e);return o&&o.length?Array.from(o).map((function(e){var t=e.getBoundingClientRect(),o=tt(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-n.left)/r,y:(t.top-n.top)/r},o)})):null};function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ELEMENTS":var n=t.payload,r={nextNodes:[],nextEdges:[]},o=n.reduce((function(t,n){if(ut(n)){var r=e.nodes.find((function(e){return e.id===n.id}));if(r){var o=zc(zc({},r),n);r.position.x===n.position.x&&r.position.y===n.position.y||(o.__rf.position=n.position),void 0!==n.type&&n.type!==r.type&&(o.__rf.width=null),t.nextNodes.push(o)}else t.nextNodes.push(ft(n,e.nodeExtent))}else if(ct(n)){var a=e.edges.find((function(e){return e.id===n.id}));a?t.nextEdges.push(zc(zc({},a),n)):t.nextEdges.push(dt(n))}return t}),r),a=o.nextNodes,i=o.nextEdges;return zc(zc({},e),{},{nodes:a,edges:i});case"UPDATE_NODE_DIMENSIONS":var c=e.nodes.map((function(n){var r=t.payload.find((function(e){return e.id===n.id}));if(r){var o=tt(r.nodeElement);if(o.width&&o.height&&(n.__rf.width!==o.width||n.__rf.height!==o.height||r.forceUpdate)){var a=Lc(r.nodeElement,e.transform[2]);return zc(zc({},n),{},{__rf:zc(zc(zc({},n.__rf),o),{},{handleBounds:a})})}}return n}));return zc(zc({},e),{},{nodes:c});case"UPDATE_NODE_POS":var u=t.payload,l=u.id,s=u.pos,f=s;if(e.snapToGrid){var d=Je(e.snapGrid,2),p=d[0],b=d[1];f={x:p*Math.round(s.x/p),y:b*Math.round(s.y/b)}}var y=e.nodes.map((function(e){return e.id===l?zc(zc({},e),{},{__rf:zc(zc({},e.__rf),{},{position:f})}):e}));return zc(zc({},e),{},{nodes:y});case"UPDATE_NODE_POS_DIFF":var m=t.payload,h=m.id,v=m.diff,g=m.isDragging,O=e.nodes.map((function(t){var n;if(h===t.id||null!==(n=e.selectedElements)&&void 0!==n&&n.find((function(e){return e.id===t.id}))){var r=zc(zc({},t),{},{__rf:zc(zc({},t.__rf),{},{isDragging:g})});return v&&(r.__rf.position={x:t.__rf.position.x+v.x,y:t.__rf.position.y+v.y}),r}return t}));return zc(zc({},e),{},{nodes:O});case"SET_USER_SELECTION":var w=t.payload;return zc(zc({},e),{},{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:w.x,startY:w.y,x:w.x,y:w.y,draw:!0}});case"UPDATE_USER_SELECTION":var j,_,E=t.payload,S=null!==(j=e.userSelectionRect.startX)&&void 0!==j?j:0,x=null!==(_=e.userSelectionRect.startY)&&void 0!==_?_:0,k=zc(zc({},e.userSelectionRect),{},{x:E.x<S?E.x:S,y:E.y<x?E.y:x,width:Math.abs(E.x-S),height:Math.abs(E.y-x)}),P=ht(e.nodes,k,e.transform,!1,!0),C=vt(P,e.edges),N=[].concat(Qe(P),Qe(C)),T=!Rc(N,e.selectedElements),D=T?{selectedElements:N.length>0?N:null}:{};return zc(zc(zc({},e),D),{},{userSelectionRect:k});case"UNSET_USER_SELECTION":var I,M=null===(I=e.selectedElements)||void 0===I?void 0:I.filter((function(e){return ut(e)&&e.__rf})),A=zc(zc({},e),{},{selectionActive:!1,userSelectionRect:zc(zc({},e.userSelectionRect),{},{draw:!1})});if(M&&0!==M.length){var R=mt(M);A.selectedNodesBbox=R,A.nodesSelectionActive=!0}else A.selectedElements=null,A.nodesSelectionActive=!1;return A;case"SET_SELECTED_ELEMENTS":var F=t.payload,L=Array.isArray(F)?F:[F],B=!Rc(L,e.selectedElements),q=B?L:e.selectedElements;return zc(zc({},e),{},{selectedElements:q});case"ADD_SELECTED_ELEMENTS":var z=e.multiSelectionActive,U=e.selectedElements,Y=t.payload,V=Array.isArray(Y)?Y:[Y],H=V;z&&(H=U?[].concat(Qe(U),Qe(V)):V);var G=!Rc(H,e.selectedElements),X=G?H:e.selectedElements;return zc(zc({},e),{},{selectedElements:X});case"INIT_D3ZOOM":var K=t.payload,$=K.d3Zoom,W=K.d3Selection,Z=K.d3ZoomHandler,Q=K.transform;return zc(zc({},e),{},{d3Zoom:$,d3Selection:W,d3ZoomHandler:Z,transform:Q});case"SET_MINZOOM":var J,ee=t.payload;return null===(J=e.d3Zoom)||void 0===J||J.scaleExtent([ee,e.maxZoom]),zc(zc({},e),{},{minZoom:ee});case"SET_MAXZOOM":var te,ne=t.payload;return null===(te=e.d3Zoom)||void 0===te||te.scaleExtent([e.minZoom,ne]),zc(zc({},e),{},{maxZoom:ne});case"SET_TRANSLATEEXTENT":var re,oe=t.payload;return null===(re=e.d3Zoom)||void 0===re||re.translateExtent(oe),zc(zc({},e),{},{translateExtent:oe});case"SET_NODE_EXTENT":var ae=t.payload;return zc(zc({},e),{},{nodeExtent:ae,nodes:e.nodes.map((function(e){return zc(zc({},e),{},{__rf:zc(zc({},e.__rf),{},{position:rt(e.__rf.position,ae)})})}))});case"SET_ON_CONNECT":case"SET_ON_CONNECT_START":case"SET_ON_CONNECT_STOP":case"SET_ON_CONNECT_END":case"RESET_SELECTED_ELEMENTS":case"UNSET_NODES_SELECTION":case"UPDATE_TRANSFORM":case"UPDATE_SIZE":case"SET_CONNECTION_POSITION":case"SET_CONNECTION_NODEID":case"SET_SNAPTOGRID":case"SET_SNAPGRID":case"SET_INTERACTIVE":case"SET_NODES_DRAGGABLE":case"SET_NODES_CONNECTABLE":case"SET_ELEMENTS_SELECTABLE":case"SET_MULTI_SELECTION_ACTIVE":case"SET_CONNECTION_MODE":return zc(zc({},e),t.payload);default:return e}}function Yc(e){return m(Uc,e)}var Vc={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:ca.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"9.7.4"},Hc=Yc(Vc),Gc=function(e){var t=e.children,n=Object(o.useContext)(Z);return Object(o.useMemo)((function(){var e,t;return null==n||null===(e=n.store)||void 0===e||null===(t=e.getState())||void 0===t?void 0:t.reactFlowVersion}),[n])?a.a.createElement(a.a.Fragment,null,t):a.a.createElement(re,{store:Hc},t)};function Xc(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Gc.displayName="ReactFlowWrapper";Xc(".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__pane,.react-flow__renderer,.react-flow__selectionpane{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow__edges,.react-flow__selection{left:0;position:absolute;top:0}.react-flow__edges{pointer-events:none;z-index:2}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{height:100%;pointer-events:none;width:100%;z-index:3}.react-flow__node,.react-flow__nodes{position:absolute;transform-origin:0 0}.react-flow__node{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{height:100%;left:0;pointer-events:none;position:absolute;top:0;transform-origin:left top;width:100%;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__background{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__controls{bottom:10px;left:10px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:10px;position:absolute;right:10px;z-index:5}");Xc(".react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output{border-radius:3px;border-style:solid;border-width:1px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-input{background:#fff;border-color:#0041d0}.react-flow__node-input.selected,.react-flow__node-input.selected:hover{box-shadow:0 0 0 .5px #0041d0}.react-flow__node-input .react-flow__handle{background:#0041d0}.react-flow__node-default{background:#fff;border-color:#1a192b}.react-flow__node-default.selected,.react-flow__node-default.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle{background:#1a192b}.react-flow__node-output{background:#fff;border-color:#ff0072}.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #ff0072}.react-flow__node-output .react-flow__handle{background:#ff0072}.react-flow__nodesselection-rect{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}");var Kc=["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"];function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zc={input:Pc,default:xc,output:Nc},Qc={default:Mi,straight:Zi,step:Wi,smoothstep:Vi},Jc=Object(o.forwardRef)((function(e,t){var n=e.elements,r=void 0===n?[]:n,i=e.className,c=e.nodeTypes,u=void 0===c?Zc:c,f=e.edgeTypes,d=void 0===f?Qc:f,p=e.onElementClick,b=e.onLoad,y=e.onMove,m=e.onMoveStart,h=e.onMoveEnd,v=e.onElementsRemove,g=e.onConnect,O=e.onConnectStart,w=e.onConnectStop,j=e.onConnectEnd,_=e.onNodeMouseEnter,E=e.onNodeMouseMove,S=e.onNodeMouseLeave,x=e.onNodeContextMenu,k=e.onNodeDoubleClick,P=e.onNodeDragStart,C=e.onNodeDrag,N=e.onNodeDragStop,T=e.onSelectionChange,D=e.onSelectionDragStart,I=e.onSelectionDrag,M=e.onSelectionDragStop,A=e.onSelectionContextMenu,R=e.connectionMode,F=void 0===R?ca.Strict:R,L=e.connectionLineType,B=void 0===L?ua.Bezier:L,q=e.connectionLineStyle,z=e.connectionLineComponent,U=e.deleteKeyCode,Y=void 0===U?"Backspace":U,V=e.selectionKeyCode,H=void 0===V?"Shift":V,G=e.multiSelectionKeyCode,X=void 0===G?"Meta":G,K=e.zoomActivationKeyCode,$=void 0===K?"Meta":K,W=e.snapToGrid,Z=void 0!==W&&W,Q=e.snapGrid,J=void 0===Q?[15,15]:Q,ee=e.onlyRenderVisibleElements,te=void 0!==ee&&ee,ne=e.selectNodesOnDrag,re=void 0===ne||ne,oe=e.nodesDraggable,ae=e.nodesConnectable,ie=e.elementsSelectable,ce=e.minZoom,ue=e.maxZoom,le=e.defaultZoom,se=void 0===le?1:le,fe=e.defaultPosition,de=void 0===fe?[0,0]:fe,pe=e.translateExtent,be=e.preventScrolling,ye=void 0===be||be,me=e.nodeExtent,he=e.arrowHeadColor,ve=void 0===he?"#b1b1b7":he,ge=e.markerEndId,Oe=e.zoomOnScroll,we=void 0===Oe||Oe,je=e.zoomOnPinch,_e=void 0===je||je,Ee=e.panOnScroll,Se=void 0!==Ee&&Ee,xe=e.panOnScrollSpeed,ke=void 0===xe?.5:xe,Pe=e.panOnScrollMode,Ce=void 0===Pe?la.Free:Pe,Ne=e.zoomOnDoubleClick,Te=void 0===Ne||Ne,De=e.paneMoveable,Ie=void 0===De||De,Me=e.onPaneClick,Ae=e.onPaneScroll,Re=e.onPaneContextMenu,Fe=e.children,Le=e.onEdgeUpdate,Be=e.onEdgeContextMenu,qe=e.onEdgeDoubleClick,ze=e.onEdgeMouseEnter,Ue=e.onEdgeMouseMove,Ye=e.onEdgeMouseLeave,Ve=e.onEdgeUpdateStart,He=e.onEdgeUpdateEnd,Ge=e.edgeUpdaterRadius,Xe=void 0===Ge?10:Ge,Ke=e.nodeTypesId,$e=void 0===Ke?"1":Ke,We=e.edgeTypesId,Ze=void 0===We?"1":We,Qe=l(e,Kc),Je=Object(o.useMemo)((function(){return function(e){var t={input:Dc(e.input||Pc),default:Dc(e.default||xc),output:Dc(e.output||Nc)},n=Object.keys(e).filter((function(e){return!["input","default","output"].includes(e)})).reduce((function(t,n){return t[n]=Dc(e[n]||xc),t}),{});return Mc(Mc({},t),n)}(u)}),[$e]),et=Object(o.useMemo)((function(){return function(e){var t={default:oc(e.default||Mi),straight:oc(e.bezier||Zi),step:oc(e.step||Wi),smoothstep:oc(e.step||Vi)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=oc(e[n]||Mi),t}),{});return ic(ic({},t),n)}(d)}),[Ze]),tt=s(["react-flow",i]);return a.a.createElement("div",Wc(Wc({},Qe),{},{ref:t,className:tt}),a.a.createElement(Gc,null,a.a.createElement(mc,{onLoad:b,onMove:y,onMoveStart:m,onMoveEnd:h,onElementClick:p,onNodeMouseEnter:_,onNodeMouseMove:E,onNodeMouseLeave:S,onNodeContextMenu:x,onNodeDoubleClick:k,onNodeDragStart:P,onNodeDrag:C,onNodeDragStop:N,nodeTypes:Je,edgeTypes:et,connectionMode:F,connectionLineType:B,connectionLineStyle:q,connectionLineComponent:z,selectionKeyCode:H,onElementsRemove:v,deleteKeyCode:Y,multiSelectionKeyCode:X,zoomActivationKeyCode:$,onConnect:g,onConnectStart:O,onConnectStop:w,onConnectEnd:j,snapToGrid:Z,snapGrid:J,onlyRenderVisibleElements:te,nodesDraggable:oe,nodesConnectable:ae,elementsSelectable:ie,selectNodesOnDrag:re,minZoom:ce,maxZoom:ue,defaultZoom:se,defaultPosition:de,translateExtent:pe,preventScrolling:ye,nodeExtent:me,arrowHeadColor:ve,markerEndId:ge,zoomOnScroll:we,zoomOnPinch:_e,zoomOnDoubleClick:Te,panOnScroll:Se,panOnScrollSpeed:ke,panOnScrollMode:Ce,paneMoveable:Ie,onPaneClick:Me,onPaneScroll:Ae,onPaneContextMenu:Re,onSelectionDragStart:D,onSelectionDrag:I,onSelectionDragStop:M,onSelectionContextMenu:A,onEdgeUpdate:Le,onEdgeContextMenu:Be,onEdgeDoubleClick:qe,onEdgeMouseEnter:ze,onEdgeMouseMove:Ue,onEdgeMouseLeave:Ye,onEdgeUpdateStart:Ve,onEdgeUpdateEnd:He,edgeUpdaterRadius:Xe}),a.a.createElement(hc,{elements:r}),T&&a.a.createElement(Ac,{onSelectionChange:T}),Fe))}));Jc.displayName="ReactFlow";var eu=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.style,c=e.color,u=e.strokeColor,l=e.strokeWidth,f=e.className,d=e.borderRadius,p=e.shapeRendering,b=i||{},y=b.background,m=b.backgroundColor,h=c||y||m;return a.a.createElement("rect",{className:s(["react-flow__minimap-node",f]),x:t,y:n,rx:d,ry:d,width:r,height:o,fill:h,stroke:u,strokeWidth:l,shapeRendering:p})};eu.displayName="MiniMapNode";var tu=Object(o.memo)(eu),nu=function(e){var t,n=e.style,r=e.className,o=e.nodeStrokeColor,i=void 0===o?"#555":o,c=e.nodeColor,u=void 0===c?"#fff":c,l=e.nodeClassName,f=void 0===l?"":l,d=e.nodeBorderRadius,p=void 0===d?5:d,b=e.nodeStrokeWidth,y=void 0===b?2:b,m=e.maskColor,h=void 0===m?"rgb(240, 242, 243, 0.7)":m,v=Ke((function(e){return e.width})),g=Ke((function(e){return e.height})),O=Je(Ke((function(e){return e.transform})),3),w=O[0],j=O[1],_=O[2],E=Ke((function(e){return e.nodes})),S=s(["react-flow__minimap",r]),x=(null==n?void 0:n.width)||200,k=(null==n?void 0:n.height)||150,P=u instanceof Function?u:function(){return u},C=i instanceof Function?i:function(){return i},N=f instanceof Function?f:function(){return f},T=E&&E.length,D=mt(E),I={x:-w/_,y:-j/_,width:v/_,height:g/_},M=T?(t=I,yt(pt(bt(D),bt(t)))):I,A=M.width/x,R=M.height/k,F=Math.max(A,R),L=F*x,B=F*k,q=5*F,z=M.x-(L-M.width)/2-q,U=M.y-(B-M.height)/2-q,Y=L+2*q,V=B+2*q,H="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return a.a.createElement("svg",{width:x,height:k,viewBox:"".concat(z," ").concat(U," ").concat(Y," ").concat(V),style:n,className:S},E.filter((function(e){return!e.isHidden})).map((function(e){return a.a.createElement(tu,{key:e.id,x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height,style:e.style,className:N(e),color:P(e),borderRadius:p,strokeColor:C(e),strokeWidth:y,shapeRendering:H})})),a.a.createElement("path",{className:"react-flow__minimap-mask",d:"M".concat(z-q,",").concat(U-q,"h").concat(Y+2*q,"v").concat(V+2*q,"h").concat(-Y-2*q,"z\n        M").concat(I.x,",").concat(I.y,"h").concat(I.width,"v").concat(I.height,"h").concat(-I.width,"z"),fill:h,fillRule:"evenodd"}))};nu.displayName="MiniMap";var ru;function ou(){return(ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var au,iu=function(e){return o.createElement("svg",ou({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),ru||(ru=o.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})))};function cu(){return(cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var uu,lu=function(e){return o.createElement("svg",cu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},e),au||(au=o.createElement("path",{d:"M0 0h32v4.2H0z"})))};function su(){return(su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fu,du=function(e){return o.createElement("svg",su({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},e),uu||(uu=o.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})))};function pu(){return(pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var bu,yu=function(e){return o.createElement("svg",pu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),fu||(fu=o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})))};function mu(){return(mu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var hu=function(e){return o.createElement("svg",mu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),bu||(bu=o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"})))},vu=["children","className"];function gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ou=function(e){var t=e.children,n=e.className,r=l(e,vu);return a.a.createElement("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"button",className:s(["react-flow__controls-button",n])},r),t)},wu=function(e){var t=e.style,n=e.showZoom,r=void 0===n||n,i=e.showFitView,c=void 0===i||i,u=e.showInteractive,l=void 0===u||u,f=e.fitViewParams,d=e.onZoomIn,p=e.onZoomOut,b=e.onFitView,y=e.onInteractiveChange,m=e.className,h=e.children,v=Je(Object(o.useState)(!1),2),g=v[0],O=v[1],w=Xe((function(e){return e.setInteractive})),j=bc(),_=j.zoomIn,E=j.zoomOut,S=j.fitView,x=Ke((function(e){return e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable})),k=s(["react-flow__controls",m]),P=Object(o.useCallback)((function(){null==_||_(),null==d||d()}),[_,d]),C=Object(o.useCallback)((function(){null==E||E(),null==p||p()}),[E,p]),N=Object(o.useCallback)((function(){null==S||S(f),null==b||b()}),[S,f,b]),T=Object(o.useCallback)((function(){null==w||w(!x),null==y||y(!x)}),[x,w,y]);return Object(o.useEffect)((function(){O(!0)}),[]),g?a.a.createElement("div",{className:k,style:t},r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ou,{onClick:P,className:"react-flow__controls-zoomin"},a.a.createElement(iu,null)),a.a.createElement(Ou,{onClick:C,className:"react-flow__controls-zoomout"},a.a.createElement(lu,null))),c&&a.a.createElement(Ou,{className:"react-flow__controls-fitview",onClick:N},a.a.createElement(du,null)),l&&a.a.createElement(Ou,{className:"react-flow__controls-interactive",onClick:T},x?a.a.createElement(hu,null):a.a.createElement(yu,null)),h):null};wu.displayName="Controls";var ju,_u=Object(o.memo)(wu);function Eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eu(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xu=(u(ju={},ia.Dots,"#81818a"),u(ju,ia.Lines,"#eee"),ju),ku=function(e){var t=e.variant,n=void 0===t?ia.Dots:t,r=e.gap,i=void 0===r?15:r,c=e.size,u=void 0===c?.4:c,l=e.color,f=e.style,d=e.className,p=Je(Ke((function(e){return e.transform})),3),b=p[0],y=p[1],m=p[2],h=Object(o.useMemo)((function(){return"pattern-".concat(Math.floor(1e5*Math.random()))}),[]),v=s(["react-flow__background",d]),g=i*m,O=b%g,w=y%g,j=n===ia.Lines,_=l||xu[n],E=j?function(e,t,n){return a.a.createElement("path",{stroke:n,strokeWidth:t,d:"M".concat(e/2," 0 V").concat(e," M0 ").concat(e/2," H").concat(e)})}(g,u,_):function(e,t){return a.a.createElement("circle",{cx:e,cy:e,r:e,fill:t})}(u*m,_);return a.a.createElement("svg",{className:v,style:Su(Su({},f),{},{width:"100%",height:"100%"})},a.a.createElement("pattern",{id:h,x:O,y:w,width:g,height:g,patternUnits:"userSpaceOnUse"},E),a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(h,")")}))};ku.displayName="Background";var Pu=Object(o.memo)(ku),Cu=function(e){var t=e.children,n=Object(o.useMemo)((function(){return Yc(Vc)}),[]);return a.a.createElement(re,{store:n},t)};Cu.displayName="ReactFlowProvider";var Nu=n(126),Tu=n(2),Du=n(6),Iu=n.n(Du),Mu=n(1),Au=n(8),Ru=n(4),Fu=n(26);function Lu(e){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Bu=["getStateProp"];function qu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach((function(t){Vu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Lu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hu=function(){var e=Object(Fu.a)("funnelCanvas"),t=e.getStateProp;return Yu(Yu({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Bu)),{},{nodeElements:t("nodes"),isLoading:t("isLoading"),getNodeById:function(e){var n,r={},o=qu(t("nodes"));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.id==e){r=a;break}}}catch(e){o.e(e)}finally{o.f()}return r},getSteps:function(){return t("nodes")},getNodeElements:function(){return t("nodes")},getFunnelId:function(){return t("funnelId")},getStepsList:function(){return t("stepsList")},getFunnelData:function(){return t("funnelData")},isLoadingAnalytics:t("analyticsLoading"),isAnalyticsLoaded:t("analyticsLoaded")})},Gu=n(89),Xu=n(42),Ku=n(54),$u=n(31),Wu=n(5),Zu=n(10),Qu=n.n(Zu),Ju=n(40),el=n(29),tl=n(12),nl=n(14),rl=n(82);function ol(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return al(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?al(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var il=function(e){var t=e.isSuccess,n=void 0===t||t,o=e.onRequestClose,a=e.stepName,i=e.onConfirm,c=e.isLoading,u=e.error,l=e.modalTitle,s=void 0===l?"":l,f=e.isParentOffer,d=void 0!==f&&f,p=e.onBackupChange,b=ol(Object(r.useState)(!0),2),y=b[0],m=b[1],h=Object(r.createElement)(rl.a,{type:"checkbox",checked:y,onChange:function(e){m(e),p(e)},label:Object(Mu.__)("Download this complete funnel before deletion.","funnel-builder"),className:"bwf-mt-16"});return Object(r.createElement)(Au.Modal,{isDismissible:!0,title:!1===n?Object(Mu.__)("Failed","funnel-builder"):""!==s?s:Object(Mu.__)("Delete Step","funnel-builder"),onRequestClose:function(){c||o()},className:"bwf-admin-modal bwf-admin-modal-small",shouldCloseOnClickOutside:!c},n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},d?Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(r.Fragment,null,Object(Mu.__)("You are about to delete parent offer ","funnel-builder"),Object(r.createElement)("strong",null,a),Object(Mu.__)(". The path of dependent offers would need an update.","funnel-builder")):Object(Mu.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(r.Fragment,null,Object(Mu.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,Object($u.decodeEntities)(a)),Object(Mu.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(Mu.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")),h),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(nl.a,{onClick:function(){c||o()},className:"bwf-modal-cancel-btn",disabled:c},Object(Mu.__)("Cancel","funnel-builder")),Object(r.createElement)(nl.a,{isBusy:c,disabled:c,onClick:i,className:Iu()({"is-danger":!d,"is-primary":d})},d?Object(Mu.__)("Update Path to Delete","funnel-builder"):Object(Mu.__)("Delete","funnel-builder")))):!c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},u?u.hasOwnProperty("message")?u.message:u:"")),!c&&!1===n&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(nl.a,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:o},Object(Mu.__)("OK","funnel-builder")))))},cl=n(366),ul=n(63),ll=n(20),sl=n(367);function fl(e){return(fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dl(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return pl(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(pl(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,pl(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,pl(f,"constructor",l),pl(l,"constructor",u),u.displayName="GeneratorFunction",pl(l,o,"GeneratorFunction"),pl(f),pl(f,o,"Generator"),pl(f,r,(function(){return this})),pl(f,"toString",(function(){return"[object Generator]"})),(dl=function(){return{w:a,m:d}})()}function pl(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(pl=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){pl(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ml(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hl(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function vl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gl(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ol={landing:Object(Mu.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(Mu.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(Mu.__)("Add Upsell Page","funnel-builder"),optin:Object(Mu.__)("Add Optin Page","funnel-builder"),optin_ty:Object(Mu.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(Mu.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(Mu.__)("Add Order Bump","funnel-builder"),offer:Object(Mu.__)("Add Offer","funnel-builder")},wl=function(e){e.title;var t=e.type,n=e.funnelId,o=e.stepID,a=e.parent_id,i=e.mainIndex,c=e.stepIndex,u=e.subIndex,l=Object(ll.b)().isProFeatureLocked,s=Object(ll.b)("ul").isProFeatureLocked,f=vl(Object(r.useState)(!1),2),d=f[0],p=f[1],b=vl(Object(r.useState)(!1),2),y=b[0],m=b[1],h=vl(Object(r.useState)({}),2),v=h[0],g=h[1],O=Hu().getStepsList,w=Object(Gu.a)(),j=w.setStepList,_=w.duplicateStepNode,E=O(),S=Object(Ru.kb)(),x=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hl(a,r,o,i,c,"next",e)}function c(e){hl(a,r,o,i,c,"throw",e)}i(void 0)}))}}(dl().m((function e(){var r,l,s,f,d,b,y,h,v,g,O=arguments;return dl().w((function(e){for(;;)switch(e.n){case 0:r=O.length>0&&void 0!==O[0]?O[0]:{},l=r.copyFrom,s=void 0===l?{}:l,f=r.title,d=void 0===f?"":f,(b=s&&s.hasOwnProperty("key")?s.key:0)<1&&(b=s&&s.hasOwnProperty("id")?s.id:0),y="",h={inherit_from:b,title:d,type:t,canvas:{mode:"sibling",insert_after:o}},v=t,e.n="wc_order_bump"===v?1:2;break;case 1:return y=S?Object(Ru.y)("/store-checkout/".concat(n,"/step/").concat(a,"/substeps/")):Object(Ru.y)("/funnels/".concat(n,"/steps/").concat(a,"/substeps/")),e.a(3,3);case 2:return y=Object(Ru.y)("/funnels/".concat(n,"/steps")),e.a(3,3);case 3:return e.p=3,m(!0),e.n=4,Qu()({method:"POST",path:y,data:h}).then((function(e){if(e.hasOwnProperty("status")&&e.status&&e.hasOwnProperty("data")&&!Object(Tu.isEmpty)(e.data)){var n=Object(Tu.cloneDeep)(E),r=e.data,o=r.groups,a=void 0===o?[]:o,l=r.steps_list,s=void 0===l?{}:l;n=yl(yl({},n),s),j(n),_(t,i,c,u,a[0]),p(!1),m(!1)}}));case 4:e.n=6;break;case 5:e.p=5,g=e.v,console.log(g),m(!1);case 6:return e.a(2)}}),e,null,[[3,5]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-add-horizontal-wrap",onClick:function(){"wc_order_bump"===t&&l?g({bump:!0}):"wc_upsells"!==t&&"offer"!==t||!s?p(!0):g({status:!0})}},Object(r.createElement)(ul.a,{toolTipText:Ol.hasOwnProperty(t)?Ol[t]:Object(Mu.__)("Add Step","funnel-builder")},Object(r.createElement)(Wu.a,{icon:"dashed-plus"}))),d&&Object(r.createElement)(Au.Modal,{title:Ol.hasOwnProperty(t)?Ol[t]:Object(Mu.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return p(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(cl.a,{step:{type:t,parent_id:a,title:Object(Ru.sb)(t),is_substep:["wc_order_bump","offer"].includes(t)},requestCreateStep:x,onRequestClose:function(){return p(!1)},isBusy:y})),v.status&&Object(r.createElement)(Ku.a,{isOpen:v.status,onRequestClose:function(){return g({status:!1})},modalContent:v,type:v.type}),v.bump&&Object(r.createElement)(sl.a,{isOpen:v.bump,onRequestClose:function(){return g({status:!1})}}))},jl=n(448),_l=n(415),El=n(65),Sl=n(55),xl=n(75),kl=n(288);function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cl(e){return function(e){if(Array.isArray(e))return Ll(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Tl(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Tl(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Tl(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Tl(f,"constructor",l),Tl(l,"constructor",u),u.displayName="GeneratorFunction",Tl(l,o,"GeneratorFunction"),Tl(f),Tl(f,o,"Generator"),Tl(f,r,(function(){return this})),Tl(f,"toString",(function(){return"[object Generator]"})),(Nl=function(){return{w:a,m:d}})()}function Tl(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Tl=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){Tl(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){Ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ml(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Pl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Al(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Fl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){if(e){if("string"==typeof e)return Ll(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ll(e,t):void 0}}function Ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Bl=function(e){var t=e.setIsOpen,n=void 0===t?function(){}:t,o=e.offerId,a=void 0===o?"":o,i=e.stepGroupData,c=void 0===i?{}:i,u=e.stepList,l=void 0===u?{}:u,s=e.onUpdateDynamicOffer,f=void 0===s?function(){}:s,d=e.orphanNode,p=void 0!==d&&d,b=Rl(Object(r.useState)(!1),2),y=b[0],m=b[1],h=Rl(Object(r.useState)(""),2),v=h[0],g=h[1],O=c.id,w=c.substeps,j=void 0===w?[]:w,_=Rl(Object(r.useState)({}),2),E=_[0],S=_[1],x=Object(r.useMemo)((function(){var e=[];return j.forEach((function(t){var n=t.id,r=void 0===n?"":n;if(""!==r&&l.hasOwnProperty(r)){var o=l[r].title,a=void 0===o?"":o;e.push({key:parseInt(r)>0?parseInt(r):r,label:a})}})),e}),[j]),k=Object(r.useMemo)((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fl(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(j);try{for(n.s();!(e=n.n()).done;){var r=e.value.id,o=void 0===r?"":r;""!==o&&l.hasOwnProperty(o)&&t.push(parseInt(o))}}catch(e){n.e(e)}finally{n.f()}return t.push(0),t}),[j]);Object(r.useEffect)((function(){var e;e={},j.forEach((function(t,n){var r=t.id,o=void 0===r?"":r;if(""!==o&&o!=a){var i=l[o],c=i.accept,u=void 0===c?"":c,s=i.reject,f=void 0===s?"":s;e[o]={accept:""===u||""!==a&&parseInt(u)==a||!k.includes(parseInt(u))?"":parseInt(u),reject:""===f||""!==a&&parseInt(f)==a||!k.includes(parseInt(f))?"":parseInt(f)}}})),S(e)}),[j]);var P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],o=[];return x.map((function(n,a){a>t&&n.key!=e&&(n.label=Object($u.decodeEntities)(n.label),r.push(n),o.push(n.key))})),n?o:r},C=function(){var e=[];if(Object.keys(E).map((function(t){""!==E[t].accept&&""!==E[t].reject||e.push(t)})),e.length>0){var t=e.map((function(e){if(l.hasOwnProperty(e)&&l[e].hasOwnProperty("title"))return l[e].title}));return g(Object(Mu.__)("Please set the path of following offer:","funnel-builder")+" "+t.join(", ")),!1}return g(""),!0},N=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Al(a,r,o,i,c,"next",e)}function c(e){Al(a,r,o,i,c,"throw",e)}i(void 0)}))}}(Nl().m((function e(){var t,n;return Nl().w((function(e){for(;;)switch(e.n){case 0:if(!1!==C()){e.n=1;break}return e.a(2);case 1:return m(!0),t={path:E},a&&!p&&(t=Il(Il({},t),{},{delete:!0,offer_id:a})),e.p=2,e.n=3,Qu()({path:Object(Ru.y)("/funnel-upsell/".concat(O,"/dynamic-path")),method:"POST",data:t}).then((function(e){e.hasOwnProperty("success")&&e.success&&e.hasOwnProperty("data")&&!Object(Tu.isEmpty)(e.data)?f(e.data):g(Object(Mu.__)("Unable to update the offer path.","funnel-builder")),m(!1)}));case 3:e.n=5;break;case 4:e.p=4,n=e.v,g(Object(Mu.__)("Error encountered while making API call.","funnel-builder")),m(!1),console.log(n);case 5:return e.a(2)}}),e,null,[[2,4]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(Au.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwf-dynamic-offer-path-modal bwf-admin-modal-no-header",onRequestClose:function(){return n(!1)},isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(Mu.__)("Dynamic Offer Path","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return N()}},Object(r.createElement)("span",{style:Il({},y&&{visibility:"hidden"})},a&&!p?Object(Mu.__)("Update & Delete","funnel-builder"):Object(Mu.__)("Update","funnel-builder")),y&&Object(r.createElement)(Xu.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(Mu.__)("Close","funnel-builder"),onClick:function(){return n(!1)}},Object(r.createElement)(Wu.a,{icon:"close",height:24,width:24})))),Object(r.createElement)("div",{className:"bwf-dynamic-path-modal-content"},v?Object(r.createElement)("div",{className:"bwf-dynamic-error"},v):Object(r.createElement)("div",{className:"bwf-desc"},Object(Mu.__)("You can set the offer path and redirect users to the acceptance/rejection of an offer","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-wrapper"},j.map((function(e,t){var n=e.id,o=void 0===n?"":n;if(""!==o&&o!=a){var i=l[o].title,c=void 0===i?"":i;return Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item",key:t},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-header"},Object($u.decodeEntities)(c)),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-wrap"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(Mu.__)("On Acceptance","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(kl.b,{options:[{key:"",label:Object(Mu.__)("Select","funnel-builder"),getOptionList:P}].concat(Cl(P(o,t-1)),[{key:0,label:Object(Mu.__)("Thankyou Page","funnel-builder")}]),selected:E.hasOwnProperty(o)?E[o].accept:"",onChange:function(e){var t=Object(Tu.cloneDeep)(E);t[o].accept=e,S(t)},className:E.hasOwnProperty(o)&&""!==E[o].accept?"":"rule-error"}))),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(Mu.__)("On Reject","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(kl.b,{options:[{key:"",label:Object(Mu.__)("Select","funnel-builder")}].concat(Cl(P(o,t-1)),[{key:0,label:Object(Mu.__)("Thankyou Page","funnel-builder")}]),selected:E.hasOwnProperty(o)?E[o].reject:"",onChange:function(e){var t=Object(Tu.cloneDeep)(E);t[o].reject=e,S(t)},className:E.hasOwnProperty(o)&&""!==E[o].reject?"":"rule-error"})))))}})))))},ql=n(87),zl=n(88),Ul={1:Object(Mu.__)("A/B Test Draft","funnel-builder"),2:Object(Mu.__)("A/B Test Running","funnel-builder"),3:Object(Mu.__)("A/B Test Paused","funnel-builder")},Yl={1:"warning",2:"success",3:"default"},Vl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Yl[e]:Ul[e]},Hl=n(22),Gl=n(137),Xl=n(44),Kl=n(136),$l=n(127),Wl=n(45);function Zl(e){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Jl(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Jl(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Jl(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Jl(f,"constructor",l),Jl(l,"constructor",u),u.displayName="GeneratorFunction",Jl(l,o,"GeneratorFunction"),Jl(f),Jl(f,o,"Generator"),Jl(f,r,(function(){return this})),Jl(f,"toString",(function(){return"[object Generator]"})),(Ql=function(){return{w:a,m:d}})()}function Jl(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Jl=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){Jl(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){ns(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ns(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Zl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rs(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return as(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?as(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var is={status:!0,feature:Object(Mu.__)("One Click Upsell","funnel-builder"),proLink:Object(Ru.U)(["Canvas","One","Click","Upsell","Upgrade","Modal"])},cs=function(e){var t=e.setIsOpenModal,n=e.allowedSteps,o=void 0===n?[]:n,a=e.defaultType,i=void 0===a?"":a,c=(e.parentStep,e.mainIndex),u=void 0===c?"":c,l=e.addNodeData,s=void 0===l?{}:l,f=e.newStep,d=void 0!==f&&f,p=e.replaceCurrentStep,b=void 0!==p&&p,y=e.currentParentType,m=e.hasCheckout,h=Object(ll.b)("ul").isProFeatureLocked,v=os(Object(r.useState)(i),2),g=v[0],O=v[1],w=os(Object(r.useState)(!1),2),j=w[0],_=w[1],E=os(Object(r.useState)(null),2),S=E[0],x=E[1],k=Hu(),P=k.getFunnelId,C=k.getStepsList,N=Object(Gu.a)(),T=N.addNewStepGroup,D=N.setStepList,I=N.replaceCurrentStepData,M=N.replaceCurrentSubStepData,A=N.setUpsellStepNode,R=P(),F=C(),L=Object(Ru.kb)(),B=os(Object(r.useState)({}),2),q=B[0],z=B[1],U=s.prevFirstParent,Y=void 0===U?"":U,V=s.lastIteratedStep,H=void 0===V?"":V,G=s.mainIndex,X=void 0===G?"":G,K=s.stepIndex,$=void 0===K?"":K,W=(s.newUpsell,s.upsellEndAddLast),Z=void 0!==W&&W;Object(r.useLayoutEffect)((function(){var e=""==i&&1==o.length?o[0]:i;return"offer"!==e&&"wc_order_bump"!==e||O(e),function(){O("")}}),[]);var Q={landing:Object(Mu.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(Mu.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(Mu.__)("Add Upsell Page","funnel-builder"),optin:Object(Mu.__)("Add Optin Page","funnel-builder"),optin_ty:Object(Mu.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(Mu.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(Mu.__)("Add Order Bump","funnel-builder"),offer:Object(Mu.__)("Add Offer","funnel-builder")},J=[{key:"landing",label:Object(Mu.__)("Sales","funnel-builder")},{key:"wc_checkout",label:Object(Mu.__)("Checkout","funnel-builder")},{key:"wc_upsells",label:Object(Mu.__)("One Click Upsell Offer","funnel-builder")},{key:"wc_thankyou",label:Object(Mu.__)("Thankyou","funnel-builder")},{key:"optin",label:Object(Mu.__)("Optin","funnel-builder")},{key:"optin_ty",label:Object(Mu.__)("Optin Confirmation","funnel-builder")}],ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];switch(g){case"optin":t={type:"optin",steps:[e]};break;case"optin_ty":t={type:"optin_ty",steps:[e]};break;case"wc_thankyou":t={type:"wc_thankyou",steps:[e]};break;case"landing":t={type:"landing",steps:[e]};break;case"wc_checkout":t=b?e:{type:"wc_checkout",steps:[e]};break;case"wc_order_bump":t=e;break;case"wc_upsells":t={type:"wc_upsells",steps:[e]}}return t},te=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rs(a,r,o,i,c,"next",e)}function c(e){rs(a,r,o,i,c,"throw",e)}i(void 0)}))}}(Ql().m((function e(){var n,r,o,a,i,c,l,s,f,p,y,m=arguments;return Ql().w((function(e){for(;;)switch(e.n){case 0:n=m.length>0&&void 0!==m[0]?m[0]:{},r=n.copyFrom,o=void 0===r?{}:r,a=n.title,i=void 0===a?"":a,(c=o&&o.hasOwnProperty("key")?o.key:0)<1&&(c=o&&o.hasOwnProperty("id")?o.id:0),l={inherit_from:c,title:i,type:g,funnel_id:R,canvas:{mode:"start_group",insert_after:H}},"offer"===g&&(l.canvas={empty:!1,position:Z?"end":""}),"wc_order_bump"===g&&(l.canvas.mode="sibling"),d&&(l.canvas.insert_after=""),s="",p=g,e.n="wc_order_bump"===p?1:"offer"===p?2:3;break;case 1:return s=L?Object(Ru.y)("/store-checkout/".concat(R,"/step/").concat(Y,"/substeps/")):Object(Ru.y)("/funnels/".concat(R,"/steps/").concat(Y,"/substeps/")),e.a(3,4);case 2:return s=Object(Ru.y)("/funnel-upsell/".concat(Y,"/offers/")),e.a(3,4);case 3:return s=Object(Ru.y)("/funnels/".concat(R,"/steps/")),e.a(3,4);case 4:return e.p=4,_(!0),e.n=5,Qu()({method:"POST",path:s,data:l}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Tu.isEmpty)(e.data)){var n,r=Object(Tu.cloneDeep)(F),o=e.data,a=o.groups,i=void 0===a?[]:a,c=o.steps_list,l=void 0===c?{}:c;r=ts(ts({},r),l),n=i[0],D(r),"offer"===g?A(X,$,n):"wc_order_bump"===g?M(X,$,0,n):b?I(X,$,g,n):T(u,ee(n)),t(!1)}t(!1)}else{var s;x({add_err:null!==(s=null==e?void 0:e.msg)&&void 0!==s?s:null==e?void 0:e.message})}_(!1)}));case 5:e.n=7;break;case 6:e.p=6,y=e.v,console.log(y),_(!1),x({add_err:null!==(f=null==y?void 0:y.msg)&&void 0!==f?f:null==y?void 0:y.message});case 7:return e.a(2)}}),e,null,[[4,6]])})));return function(){return e.apply(this,arguments)}}(),ne=function(e,t){var n=!(Object(Tu.isEmpty)(o)||o.includes(e.key)||"wc_upsells"===e.key&&h);return Object(r.createElement)("div",{key:t},Object(r.createElement)(nl.a,{isSecondary:!0,style:{width:"100%"},onClick:function(){n||("wc_upsells"===e.key&&h?z(is):O(e.key))},className:Iu()({disabled:n})},Object(r.createElement)("span",{className:"bwf-type-select-icons",key:"bwf-icon"+e.key+"-"+t,"data-type":e.key},Object(r.createElement)(Wu.a,{icon:"".concat(e.key,"-flow")})),Object(r.createElement)("span",{className:"bwf-type-select-label",key:"bwf-label"+e.key+"-"+t},e.label),"wc_upsells"===e.key&&h&&Object(r.createElement)(Hl.b,null)))},re=function(e){var t,n,r;if(Object(Ru.kb)()&&["landing","optin","optin_ty"].includes(e))return Object(Mu.sprintf)(Object(Mu.__)("%s Page is not available in Store Checkout","funnel-builder"),null===(r=J.find((function(t){return t.key===e})))||void 0===r?void 0:r.label);switch(e){case"landing":case"optin":return Object(Mu.sprintf)(Object(Mu.__)("%s Page is not available after %s Step","funnel-builder"),null===(t=J.find((function(t){return t.key===e})))||void 0===t?void 0:t.label,null===(n=J.find((function(e){return e.key===y})))||void 0===n?void 0:n.label);case"wc_checkout":return m?Object(Mu.__)("A Checkout Step is already created, click plus icon next to checkout","funnel-builder"):Object(Mu.__)("Checkout will be available after Sales Step","funnel-builder");case"wc_upsells":return Object(Mu.__)("One Click Upsell will be available after Checkout Step","funnel-builder");case"optin_ty":return Object(Mu.__)("Optin Confirmation will be available after Optin Step","funnel-builder");case"wc_thankyou":return Object(Mu.__)("Thank you will be available after One Click Upsell or Checkout Step","funnel-builder")}};return Object(r.createElement)(r.Fragment,null," ",""===g?Object(r.createElement)(r.Fragment,null,q.status?Object(r.createElement)(Ku.a,{isOpen:q.status,onRequestClose:function(){return z({status:!1})},modalContent:q,type:q.type}):Object(r.createElement)(Wl.a,{onFocusOutside:function(){return t(!1)},position:"bottom center",placement:"bottom-start",className:"bwf-step-type-select-modal",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)("div",{className:"bwf-title-wrap",key:"bwf-step-header-1"},Object(r.createElement)("div",{className:"bwf-title bwf_w_full"},Object(Mu.__)("Add Step","funnel-builder")),Object(r.createElement)("div",{className:"bwf-cross bwf-cursor-pointer",onClick:function(){return t(!1)}},Object(r.createElement)(Wu.a,{icon:"cross",size:20})," ")),Object(r.createElement)("div",{className:"bwf-step-type-wrapper",key:"bwf-step-wrap-2"},J.map((function(e,t){return Object(Tu.isEmpty)(o)||o.includes(e.key)||"wc_upsells"===e.key&&h?ne(e,t):Object(r.createElement)(ul.a,{key:t,toolTipText:re(e.key),noInlineStyle:!0,size:150},ne(e,t))}))))):Object(r.createElement)(Au.Modal,{title:Q.hasOwnProperty(g)?Q[g]:Object(Mu.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){t(!1),x(null)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(cl.a,{step:{type:g,title:Object(Ru.sb)(g),parent_id:Y,is_substep:["wc_order_bump","offer"].includes(g)},requestCreateStep:te,onRequestClose:function(){return t(!1)},isBusy:j,errors:S})))},us=n(58),ls=n(28);function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e){return function(e){if(Array.isArray(e))return ws(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Os(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){bs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ss(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ss(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ss(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return ms(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ms(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ms(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,ms(f,"constructor",l),ms(l,"constructor",u),u.displayName="GeneratorFunction",ms(l,o,"GeneratorFunction"),ms(f),ms(f,o,"Generator"),ms(f,r,(function(){return this})),ms(f,"toString",(function(){return"[object Generator]"})),(ys=function(){return{w:a,m:d}})()}function ms(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(ms=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){ms(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function hs(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function vs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hs(a,r,o,i,c,"next",e)}function c(e){hs(a,r,o,i,c,"throw",e)}i(void 0)}))}}function gs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Os(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Os(e,t){if(e){if("string"==typeof e)return ws(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var js=window.wffn.is_ab_experiment,_s={status:!0,title:Object(Mu.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(Mu.__)("Increased Conversion Rates","funnel-builder"),Object(Mu.__)("Greater Return on Ad Spend","funnel-builder"),Object(Mu.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(Ru.T)()+"AB-testing.png",proLink:Object(Ru.U)(["Canvas","AB_Test","Upgrade","Modal"])},Es=function(e){var t,n=Object(ll.b)("ul").isProFeatureLocked,o=Object(ll.b)().isProFeatureLocked,a=Object(tl.i)(),i=Object(ll.c)().showSnackbar,c=e.data,u=void 0===c?{}:c,l=e.id,s=void 0===l?"":l,f=u.id,d=u.sub_title,p=u.stats,b=u.type,y=void 0===b?"":b,m=(u.tabs,u.control),h=void 0===m?null:m,v=u.edit_link,g=void 0===v?"":v,O=u.parent_id,w=void 0===O?"":O,j=u.links,_=void 0===j?[]:j,E=u.tags,S=void 0===E?["has_rules","end","draft","ab_test"]:E,x=u.mainIndex,k=void 0===x?"":x,P=u.stepIndex,C=void 0===P?"":P,N=u.subIndex,T=void 0===N?"":N,D=u.upsellEnd,I=void 0!==D&&D,M=u._data,A=void 0===M?{}:M,R=u.bwfSourceEdgeType,F=void 0===R?[]:R,L=u.upsellId,B=void 0===L?"":L,q=u.orphanNode,z=void 0!==q&&q,U=u.experiment_status,Y=gs(Object(r.useState)(!1),2),V=Y[0],H=Y[1],G=gs(Object(r.useState)(!1),2),X=G[0],K=G[1],$=gs(Object(r.useState)(!1),2),W=$[0],Z=$[1],Q=gs(Object(r.useState)(!1),2),J=Q[0],ee=Q[1],te=gs(Object(r.useState)({}),2),ne=te[0],re=te[1],oe=gs(Object(r.useState)(!1),2),ae=oe[0],ie=oe[1],ce=gs(Object(r.useState)({}),2),ue=ce[0],le=ce[1],se=A.title,fe=void 0===se?"":se,de=A.status,pe=void 0===de?0:de,be=A.view_link,ye=gs(Object(r.useState)(!1),2),me=ye[0],he=ye[1],ve=gs(Object(r.useState)(!1),2),ge=ve[0],Oe=ve[1],we=Hu(),je=we.getFunnelId,_e=we.getStepsList,Ee=we.getNodeElements,Se=we.isLoadingAnalytics,xe=we.getFunnelData,ke=Object(Ju.a)().setPreviousStep,Pe=gs(Object(r.useState)(!1),2),Ce=Pe[0],Ne=Pe[1],Te=gs(Object(r.useState)(!1),2),De=Te[0],Ie=Te[1],Me=gs(Object(r.useState)(""),2),Ae=Me[0],Re=Me[1],Fe=gs(Object(r.useState)(!1),2),Le=Fe[0],Be=Fe[1],qe=gs(Object(r.useState)(!1),2),ze=qe[0],Ue=qe[1],Ye=gs(Object(r.useState)(!1),2),Ve=Ye[0],He=Ye[1],Ge=gs(Object(r.useState)(!1),2),Xe=Ge[0],Ke=Ge[1],$e=gs(Object(r.useState)(!1),2),We=$e[0],Ze=$e[1],Qe=gs(Object(r.useState)({}),2),Je=Qe[0],et=Qe[1],tt=Object(Gu.a)(),nt=tt.deleteStepNode,rt=tt.updateStepTitle,ot=tt.setStepList,at=tt.setUpsellStepNode,it=tt.setCanvasSingleStepListData,ct=Object(Ru.kb)(),ut=je(),lt=_e(),st=Ee(),ft=Object(el.a)().setStepTitle,dt=Object(ql.a)().setExperimentStatus,pt=Object(us.a)().setStepHeaderData,bt=Object(r.useRef)(!0),yt=null===(t=xe())||void 0===t?void 0:t.title,mt=function(e,t){if(Z(!0),(e=e.trim())===fe&&(null==A?void 0:A.post_name)===t)K(!1),Z(!1);else{var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');Qu()({path:Object(Ru.y)("/funnel-".concat(y,"/save-state/").concat(f,"?funnel_id=").concat(ut)),data:JSON.parse(n),method:"POST"}).then((function(n){if(!n.success)throw new Error(n.msg);rt(f,e,t),K(!1),Z(!1)})).catch((function(e){console.log(e.message?e.message:e)}))}},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Mu.__)("We're downloading funnel before deletion","funnel-builder");et({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(Mu.__)("Please waitâ¦","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-light"},e))})},vt=function(){var e=vs(ys().m((function e(){var t,n;return ys().w((function(e){for(;;)switch(e.n){case 0:return ht(),t="",t=Object(Ru.kb)()?Object(Ru.y)("/store-checkout/export/?ids=".concat(ut)):Object(Ru.y)("/funnels/export/?ids=".concat(ut)),e.p=1,e.n=2,Qu()({path:t,method:"GET"});case 2:n=e.v,Array.isArray(n)&&Object(Ru.r)(n,"FunnelKit-"+yt),e.n=4;break;case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Ce&&(bt.current=!0)}),[Ce]);var gt,Ot,wt,jt=function(){var e=vs(ys().m((function e(){var t,n,r;return ys().w((function(e){for(;;)switch(e.n){case 0:Ie(!0),t="",n=y,e.n="wc_order_bump"===n?1:"offer"===n?2:3;break;case 1:return t=ct?Object(Ru.y)("/store-checkout/".concat(ut,"/step/").concat(w,"/substeps/").concat(f)):Object(Ru.y)("/funnels/".concat(ut,"/steps/").concat(w,"/substeps/").concat(f)),e.a(3,4);case 2:return t=Object(Ru.y)("/funnel-upsell/".concat(f,"/offers")),e.a(3,4);case 3:return t=ct?Object(Ru.y)("/store-checkout/".concat(ut,"/step/").concat(f)):Object(Ru.y)("/funnels/".concat(ut,"/steps/").concat(f)),e.a(3,4);case 4:if(e.p=4,!bt.current){e.n=5;break}return e.n=5,vt();case 5:return e.n=6,Qu()({path:t,method:"DELETE",data:{type:y,parent_id:w}}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if("offer"===y){var t=Object(Tu.cloneDeep)(lt),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,c=void 0===a?{}:a;t=ps(ps({},t),c),ot(t),at(k,C,o[0])}else if(Object(Ru.kb)()&&e.hasOwnProperty("groups")&&!Object(Tu.isEmpty)(e.groups)&&e.hasOwnProperty("steps_list")&&!Object(Tu.isEmpty)(e.steps_list)){var u=Object(Tu.cloneDeep)(lt),l=e.groups,s=void 0===l?[]:l,f=e.steps_list,d=void 0===f?{}:f;u=ps(ps({},u),d),ot(u),at(k,C,s[0],"wc_native")}else nt(k,C,T);Ne(!1)}else Re(e);i(Object(Mu.__)("Step deleted successfully","funnel-builder")),Ie(!1),et({status:!1})}));case 6:e.n=8;break;case 7:e.p=7,r=e.v,Re(r),Ie(!1),i(r.message),et({status:!1}),console.log(r);case 8:return e.a(2)}}),e,null,[[4,7]])})));return function(){return e.apply(this,arguments)}}(),_t=Object(Ru.A)(),Et=function(){return Object(Ru.ab)(ut,y,f,f,!0)},St=function(){var e=vs(ys().m((function e(){var t,n,r,o,a,i,c,u,l,s=arguments;return ys().w((function(e){for(;;)switch(e.n){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(i=r&&r.hasOwnProperty("key")?r.key:0)<1&&(i=r&&r.hasOwnProperty("id")?r.id:0),c={inherit_from:i,title:a,type:"offer",funnel_id:ut,canvas:{empty:!1,position:"before",offer_id:f}},u=Object(Ru.y)("/funnel-upsell/".concat(B,"/offers/")),e.p=1,ee(!0),e.n=2,Qu()({method:"POST",path:u,data:c}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Tu.isEmpty)(e.data)){var t=Object(Tu.cloneDeep)(lt),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,i=void 0===a?{}:a;t=ps(ps({},t),i),ot(t),at(k,C,o[0]),he(!1)}he(!1)}ee(!1)}));case 2:e.n=4;break;case 3:e.p=3,l=e.v,console.log(l),ee(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),xt=Object(r.useMemo)((function(){return!!("offer"!==y||f&&lt.hasOwnProperty(f))}),[lt]),kt=Object(r.useCallback)((function(){return st[k].steps[C]}),[st]),Pt=Object(r.useMemo)((function(){var e=0;return"offer"===y&&st.hasOwnProperty(k)&&st[k].hasOwnProperty("steps")&&st[k].steps.hasOwnProperty(C)&&st[k].steps[C].hasOwnProperty("substeps")&&!Object(Tu.isEmpty)(st[k].steps[C].substeps)&&(e=st[k].steps[C].substeps.length),e}),[st]),Ct=function(){return Object(r.createElement)("div",{className:"bwf-node-not-exists-wrap"},Object(r.createElement)("div",{className:"bwf-node-not-exists-header"},Object(Mu.__)("This offer is not visible to the customers","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-content"},Object(Mu.__)("Because it's tied to the rejection of another offer that you've deleted. To display this offer, set its dynamic offer path.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-btn",onClick:function(){return Oe(!0)}},Object(r.createElement)(Wu.a,{icon:"dynamic-offer-path",width:25,height:24}),Object(r.createElement)("span",{className:"bwf-node-not-exists-btn-text"},Object(Mu.__)("Set Dynamic Offer Path","funnel-builder"))))},Nt=function(){s&&(js&&!o?(dt(U),ft(Object($u.decodeEntities)(fe)+Object(Mu.__)(" A/B Test","funnel-builder")),ke("canvas"),Object(tl.k)({},Object(Ru.kb)()?"/store-checkout/experiments/".concat(f):"/funnels/".concat(ut,"/experiments/").concat(f))):le(_s))},Tt="wc_upsells"!==y?[{title:Object(Mu.__)("A/B Test","funnel-builder"),type:"ab_test",link:Object(Ru.kb)()?Object(Ru.L)("/store-checkout/experiments/".concat(f)):Object(Ru.L)("/funnels/".concat(ut,"/experiments/").concat(f))}]:[],Dt=function(e){Be(!0);var t="";switch(y){case"wc_bump":t="/funnel-bump/save-state/".concat(f,"?funnel_id=").concat(ut);break;case"offer":t="/funnel-offer/save-state/".concat(f,"?funnel_id=").concat(ut);break;default:t="/funnel-".concat(y,"/save-state/").concat(f,"?funnel_id=").concat(ut)}Qu()({path:Object(Ru.y)(t),method:"POST",data:{status:!Number(pe),canvas:!0}}).then((function(e){e.success?(it(f,e.step_list),Be(!1),ie(!1),Ue(!1),re({}),i(Object(Mu.__)("Changes Saved","funnel-builder"))):(Be(!1),Ue(!1),ie(!1))})).catch((function(e){console.log(e),i("Status Updation Failed")}))},It=Object(r.createElement)(ls.a,{h:18,w:36}),Mt=Object(r.useMemo)((function(){return"offer"===y&&(z||F.includes("bwf-orphan"))}),[F,z]);return Object(r.createElement)("div",{className:Iu()("bwf-node-wrapper"),"step-id":s},Object(r.createElement)(Ec,{type:"target",position:"top",isConnectable:!1,className:"bwf-target",style:"offer"===y&&!F.includes("bwf-default")&&xt?{opacity:0}:{}}),xt?Object(r.createElement)("div",{className:Iu()("bwf-inner-wrapper "+"node-type-".concat(y),{"is-orphan":!1}),onClick:function(){Mt&&Ze(!We)},onMouseEnter:function(e){e.currentTarget.classList.contains("bwf-inner-wrapper")&&!e.target.closest(".bwf-add-horizontal-wrap")&&H(!0)},onMouseLeave:function(e){var t;null===(t=e.target.querySelector(".bwf-ellipsis-menu__toggle.is-opened"))||void 0===t||t.click(),H(!1)}},"offer"===y&&!z&&(!F.includes("bwf-default")||!F.includes("bwf-orphan"))&&Object(r.createElement)("div",{className:"bwf-offer-add",onClick:function(){n?le({status:!0}):he(!0)}},Object(r.createElement)(Wu.a,{icon:"plus-circle",size:24,color:"#fff"})),I?"":Object(r.createElement)("div",{className:"bwf-node-hover","data-status":V?"hover":"notHover"},Object(r.createElement)("span",{className:"bwf-options"},!Object(Tu.isEmpty)(_)&&[].concat(fs(_),Tt).map((function(e,t){var n=e.link,o=e.type;return["edit_link","preview","ab_test"].includes(o)?Object(r.createElement)(ul.a,{toolTipText:"edit_link"===o?Object(Mu.__)("Edit","funnel-builder"):"ab_test"===o?Object(Mu.__)("A/B Test","funnel-builder"):Object(Mu.__)("Preview","funnel-builder"),key:t,iconSize:24,position:"bottom center",size:"auto"},Object(r.createElement)("a",{href:"edit_link"===o?Et():Object($u.decodeEntities)(n),onClick:function(e){e.preventDefault(),ke("canvas"),"edit_link"===o?(pt(Object(Ru.bb)(y),f,"offer"===y?f:"",{title:fe,view_link:be,status:1===Number(pe)}),Object(tl.d)().push(Et())):"ab_test"===o?Nt():window.open(Object($u.decodeEntities)(n),"_blank","noreferrer")}},Object(r.createElement)(Wu.a,{icon:"edit_link"===o?"edit":"ab_test"===o?"a/b":"view",size:"24"}))):null})),Object(r.createElement)(xl.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(El.a,{isClickable:!0,onInvoke:function(){t(),K(!0)}},Object(r.createElement)(Sl.a,{justify:"flex-start"},Object(r.createElement)(Sl.c,null,Object(Mu.__)("Rename","funnel-builder")))),"wc_upsells"===y&&Object(r.createElement)(El.a,{isClickable:!0,onInvoke:function(){t(),Oe(!0)}},Object(r.createElement)(Sl.a,{justify:"flex-start"},Object(r.createElement)(Sl.c,null,Object(Mu.__)("Dynamic Offer Path","funnel-builder")))),!(pe&&1===parseInt(pe))&&Object(r.createElement)(El.a,{isClickable:!0,onInvoke:function(){t(),function(){try{re({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(Mu.__)("Please wait! Publishing ".concat(Object($u.decodeEntities)(fe)),"funnel-builder")))}),Dt()}catch(e){console.log(Object(Mu.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Sl.a,{justify:"flex-start"},Object(r.createElement)(Sl.c,null,Object(Mu.__)("Publish","funnel-builder")))),["1",1].includes(pe)&&Object(r.createElement)(El.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(U)?Ue(!0):ie(!0)}},Object(r.createElement)(Sl.a,{justify:"flex-start"},Object(r.createElement)(Sl.c,null,Object(Mu.__)("Draft","funnel-builder")))),Object(r.createElement)(El.a,{isClickable:!0,onInvoke:function(){t(),Ne(!0)},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(Sl.a,{justify:"flex-start"},Object(r.createElement)(Sl.c,null,Object(Mu.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-node-brick is-step-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(Wu.a,{size:36,icon:y?"".concat(y,"-flow"):"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("span",null,"wc_upsells"===y?Object(Mu.__)("One Click Upsell","funnel-builder"):Object(Ru.sb)(y)),Object(r.createElement)("span",null,Object($u.decodeEntities)(d)),Object(r.createElement)("span",{title:Object($u.decodeEntities)(fe)},Object($u.decodeEntities)(fe))),Object(r.createElement)("div",{className:"bwf-node-action"},null!==h&&Object(r.createElement)("span",{className:"bwf-variant-tag","data-tag":!0===h?"original":""},!0===h?Object(Mu.__)("Original","funnel-builder"):Object(Mu.__)("Variant","funnel-builder")),""!==g&&Object(r.createElement)("div",{onClick:function(){return window.open(Et(),"_blank","noreferrer")}},Object(r.createElement)(Wu.a,{icon:"edit"})))),"offer"!==y&&!I&&Object(r.createElement)(wl,{type:y,title:fe,mainIndex:k,stepIndex:C,subIndex:T,funnelId:ut,stepID:f,parent_id:w}),(Object(Tu.size)(S)>0||Mt||!(pe&&1===parseInt(pe))||!Object(Tu.isEmpty)(U)&&"4"!==U)&&Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g8 bwf-flex-wrap"},Object.keys(S).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_bump"===e?o?Ke(!0):He(!0):(ke("canvas"),Object(tl.k)({},S[e].edit,a))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+S[e].label_class},S[e].label))})),Mt&&Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-red bwf-display-flex bwf-cursor-pointer",style:{position:"relative"},onClick:function(){return Ze((function(e){return!e}))}},Object(r.createElement)(Wu.a,{icon:"step-warning",size:12,color:"#E15334"}),Object(Mu.__)("Not Visible","funnel-builder"),We&&Object(r.createElement)("div",{className:"bwf-orphan-offer-wrap"},Ct())),!I&&!Object(Tu.isEmpty)(U)&&"4"!==U&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Nt()}},Object(r.createElement)(Hl.c,{content:(gt=U,wt="warning"===(Ot=Vl(gt,!0))?"#B68F40":"success"===Ot?"#09B29C":"default"===Ot?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(zl.a,{fill:wt}),Object(r.createElement)("span",{className:"".concat(void 0!==wt?"bwf-mr-4":"")},Vl(gt)))),type:Vl(U,!0)})),!I&&!(pe&&1===parseInt(pe))&&Object(r.createElement)("div",{className:"bwf--tag bwf-cursor-default is-warning"},Object(Mu.__)("Draft","funnel-builder"))),!Object(Tu.isEmpty)(p)&&"wc_upsells"!==y&&Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf_w_full bwf-position-relative"},Object(r.createElement)("div",{className:"bwf-node-data-desc"},Se?It:Object(r.createElement)("span",null,!o&&p.hasOwnProperty("views")&&null!=p.views?p.views:"0"),Object(r.createElement)("span",null,Object(Mu.__)("Views","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},Se?It:Object(r.createElement)("span",null,!o&&p.hasOwnProperty("conversions")&&null!=p.conversions?"".concat(p.conversions):"-"),Object(r.createElement)("span",null,"landing"===y?Object(Mu.__)("Clicks","funnel-builder"):Object(Mu.__)("Conversion","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},Se?It:Object(r.createElement)("span",null,!o&&p.hasOwnProperty("revenue")&&null!=p.revenue?_t.formatAmount(p.revenue):"-"),Object(r.createElement)("span",null,Object(Mu.__)("Revenue","funnel-builder"))),o&&Object(r.createElement)($l.b,{hideContent:!0,modalContent:{feature:Object(Mu.__)("Step Analytics","funnel-builder"),proLink:Object(Ru.U)(["Canvas","Step","Analytics","Upgrade","Modal"])}}))):Object(r.createElement)("div",{className:"bwf-inner-wrapper bwf-offer-node-not-exists"},Ct()),me&&Object(r.createElement)(Au.Modal,{title:Object(Mu.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return he(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(cl.a,{step:{type:"offer",upsellId:B,is_substep:!0},requestCreateStep:St,onRequestClose:function(){return he(!1)},isBusy:J})),X&&("wc_upsells"==y?Object(r.createElement)(jl.a,{renameTitle:"Edit Details",title:Object($u.decodeEntities)(fe),onclose:function(){return K(!1)},updateTitle:function(e){return mt(e)},isLoading:W}):Object(r.createElement)(_l.a,{pageUrl:null==A?void 0:A.view_link,pageUrlSlug:null==A?void 0:A.post_name,renameTitle:"Step",title:Object($u.decodeEntities)(fe),onclose:function(){return K(!1)},updateDetail:function(e,t){return mt(e,t)},isLoading:W})),Object(r.createElement)(Ec,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}),Je.status?Object(r.createElement)(Xl.a,{isOpen:Je.status,content:Je.content,isLoading:Je.loading,onRequestClose:function(){return et({status:!1})}}):Ce&&Object(r.createElement)(il,{onRequestClose:function(){Re(""),Ne(!1)},onConfirm:function(){"offer"===y&&Pt>1?Oe(!0):jt()},isLoading:De,stepName:fe,isSuccess:!Ae,modalTitle:"offer"===y?Object(Mu.__)("Delete Offer?","funnel-builder"):"",isParentOffer:"offer"===y&&Pt>1,onBackupChange:function(e){bt.current=e}}),ge&&Object(r.createElement)(Bl,{setIsOpen:Oe,offerId:"offer"===y&&!z&&f?f:"",stepData:u,stepList:lt,stepGroupData:kt(),onUpdateDynamicOffer:function(e){var t=e.groups,n=void 0===t?[]:t,r=e.steps_list,o=void 0===r?{}:r,a=Object(Tu.cloneDeep)(lt);a=ps(ps({},a),o),ot(a),at(k,C,n[0]),Oe(!1)},orphanNode:z}),ze&&Object(r.createElement)(Gl.a,{isPublishLoading:Le,onAction:function(){Dt()},onclose:function(){return Ue(!1)}}),ae&&Object(r.createElement)(Kl.a,{isPublishLoading:Le,onAction:function(){return Dt()},onclose:function(){return ie(!1)}}),Object(r.createElement)(Xl.a,{className:Iu()("bwf-admin-modal-squeezy",ne.className),confirmText:ne.confirmText,confirmButtonText:ne.buttonConfirm,cancelButtonText:ne.buttonCancel,onConfirm:ne.onConfirm,isLoading:ne.loading,successMessage:ne.success,errorMessage:ne.error,content:ne.content,onRequestClose:function(){return re({status:!1})},modalTitle:ne.modalTitle,isOpen:ne.status,closeIcon:ne.closeIcon}),ue.status&&Object(r.createElement)(Ku.a,{isOpen:ue.status,onRequestClose:function(){return le({status:!1})},modalContent:ue,type:ue.type}),Ve&&Object(r.createElement)(cs,{setIsOpenModal:function(){return He(!1)},defaultType:"wc_order_bump",parentStep:s,addNodeData:u}),Xe&&Object(r.createElement)(sl.a,{isOpen:Xe,onRequestClose:function(){return Ke(!1)}}))},Ss=function(e){e.data,e.selected;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-end"},Object(r.createElement)(Ec,{type:"target",position:"top",style:{opacity:0},isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},"End")))},xs=function(){return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-start"},Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(Mu.__)("Funnel Start","funnel-builder"))),Object(r.createElement)(Ec,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source",style:{opacity:0}}))},ks=function(e){var t=e.id;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-merger-node","step-id":t},Object(r.createElement)(Ec,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)(Ec,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function Ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ns=function(e){var t=Object(ll.b)("ul").isProFeatureLocked,n=e.data,o=void 0===n?{}:n,a=e.id,i=void 0===a?"":a,c=Ps(Object(r.useState)(!1),2),u=c[0],l=c[1],s=Ps(Object(r.useState)(!1),2),f=s[0],d=s[1],p=o.allowedSteps,b=void 0===p?[]:p,y=o.mainIndex,m=void 0===y?"":y,h=o.currentParentType,v=o.hasCheckout,g=1===(null==b?void 0:b.length)&&b[0];return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-add-node"},Object(r.createElement)(Ec,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-add-node-content",onClick:function(){"offer"===g&&t?d({status:!0}):l(!0)}},Object(r.createElement)(ul.a,{toolTipText:Object(Mu.__)("Add Step","funnel-builder")},Object(r.createElement)(Wu.a,{icon:"plus-circle",size:24,color:"#fff"})))),Object(r.createElement)(Ec,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),u&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(cs,{setIsOpenModal:l,allowedSteps:b,parentStep:i,mainIndex:m,addNodeData:o,currentParentType:h,hasCheckout:v})),f.status&&Object(r.createElement)(Ku.a,{isOpen:f.status,onRequestClose:function(){return d({status:!1})},modalContent:f,type:f.type}))},Ts=n(18);function Ds(e){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Ms(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Ms(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ms(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Ms(f,"constructor",l),Ms(l,"constructor",u),u.displayName="GeneratorFunction",Ms(l,o,"GeneratorFunction"),Ms(f),Ms(f,o,"Generator"),Ms(f,r,(function(){return this})),Ms(f,"toString",(function(){return"[object Generator]"})),(Is=function(){return{w:a,m:d}})()}function Ms(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Ms=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){Ms(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach((function(t){Fs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ds(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ds(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ds(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ls(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zs={landing:Object(Mu.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(Mu.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(Mu.__)("Add Upsell Page","funnel-builder"),optin:Object(Mu.__)("Add Optin Page","funnel-builder"),optin_ty:Object(Mu.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(Mu.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(Mu.__)("Add Order Bump","funnel-builder"),offer:Object(Mu.__)("Add Offer","funnel-builder")},Us={status:!0,title:Object(Mu.__)("Add Offer","funnel-builder"),proLink:Object(Ru.U)(["Canvas","Add","Offer","Upgrade","Modal"])},Ys=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.id,n.title),a=void 0===o?"Add":o,i=n.type,c=void 0===i?"":i,u=n.icon,l=void 0===u?"":u,s=n.prevFirstParent,f=void 0===s?"":s,d=n.mainIndex,p=void 0===d?"":d,b=n.stepIndex,y=void 0===b?"":b,m=Object(ll.b)().isProFeatureLocked,h=Object(ll.b)("ul").isProFeatureLocked,v=Bs(Object(r.useState)(!1),2),g=v[0],O=v[1],w=Bs(Object(r.useState)(!1),2),j=w[0],_=w[1],E=Hu(),S=E.getStepsList,x=E.getFunnelId,k=S(),P=Object(Ru.kb)(),C=x(),N=Bs(Object(r.useState)({}),2),T=N[0],D=N[1],I=Object(Gu.a)(),M=I.setStepList,A=I.replaceCurrentSubStepData,R=I.setUpsellStepNode,F=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ls(a,r,o,i,c,"next",e)}function c(e){Ls(a,r,o,i,c,"throw",e)}i(void 0)}))}}(Is().m((function e(){var t,n,r,o,a,i,u,l,s,d,b=arguments;return Is().w((function(e){for(;;)switch(e.n){case 0:t=b.length>0&&void 0!==b[0]?b[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(i=r&&r.hasOwnProperty("key")?r.key:0)<1&&(i=r&&r.hasOwnProperty("id")?r.id:0),u={inherit_from:i,title:a,type:c,funnel_id:C,canvas:{mode:"start_group",insert_after:f}},"offer"===c&&(u.canvas={empty:!0,position:"",upsell:f}),"wc_order_bump"===c&&(u.canvas.mode="sibling"),l="",s=c,e.n="wc_order_bump"===s?1:"offer"===s?2:3;break;case 1:return l=P?Object(Ru.y)("/store-checkout/".concat(C,"/step/").concat(f,"/substeps/")):Object(Ru.y)("/funnels/".concat(C,"/steps/").concat(f,"/substeps/")),e.a(3,4);case 2:return l=Object(Ru.y)("/funnel-upsell/".concat(f,"/offers/")),e.a(3,4);case 3:return l=Object(Ru.y)("/funnels/".concat(C,"/steps/")),e.a(3,4);case 4:return e.p=4,_(!0),e.n=5,Qu()({method:"POST",path:l,data:u}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Tu.isEmpty)(e.data)){var t=Object(Tu.cloneDeep)(k),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,i=void 0===a?{}:a;switch(t=Rs(Rs({},t),i),M(t),c){case"wc_order_bump":A(p,y,0,o[0]);break;case"offer":R(p,y,o[0])}O(!1)}O(!1)}_(!1)}));case 5:e.n=7;break;case 6:e.p=6,d=e.v,console.log(d),_(!1);case 7:return e.a(2)}}),e,null,[[4,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-button-node"},Object(r.createElement)(Ec,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-btn-node-content",onClick:function(){"wc_order_bump"===c&&m?D({bump:!0}):"offer"===c&&h?D(Us):O(!0)}},l&&Object(r.createElement)(Wu.a,{icon:l,size:"24",color:Ts.TEXT_COLOR_2}),Object($u.decodeEntities)(a),"wc_order_bump"===c&&m&&Object(r.createElement)(Hl.b,null))),g&&Object(r.createElement)(Au.Modal,{title:zs.hasOwnProperty(c)?zs[c]:Object(Mu.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return O(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(cl.a,{step:{type:c,prevFirstParent:f,is_substep:["wc_order_bump","offer"].includes(c)},requestCreateStep:F,onRequestClose:function(){return O(!1)},isBusy:j})),Object(r.createElement)(Ec,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),T.bump&&Object(r.createElement)(sl.a,{isOpen:T.bump,onRequestClose:function(){return D({status:!1})}}),T.status&&Object(r.createElement)(Ku.a,{isOpen:T.status,onRequestClose:function(){return D({status:!1})},modalContent:T,type:T.type}))};function Vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Gs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(!1),n=Vs(t,2),o=n[0],a=n[1],i=e.data||{},c=i.emptyNodeLabel,u=void 0===c?Object(Mu.__)("Create New Step","funnel-builder"):c,l=i.allowedSteps,s=void 0===l?["optin","landing","wc_checkout"]:l,f=i.replaceCurrentStep,d=void 0!==f&&f;return Object(r.createElement)("div",{className:Iu()("bwf-node-wrapper is-empty-node-wrapper")},Object(r.createElement)(Ec,{type:"target",position:"top",isConnectable:!1,style:{opacity:0},className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-inner-wrapper",onClick:function(){return a(!0)}},Object(r.createElement)("div",{className:"bwf-node-brick is-empty-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(Wu.a,{icon:"page",size:"24"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-label"},u)))),Object(r.createElement)(Ec,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0},className:"bwf-source"}),o&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(cs,{setIsOpenModal:a,allowedSteps:s,replaceCurrentStep:d,addNodeData:i})))},Xs=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.selected,n.title),a=(n.sub_title,n.type);return Object(r.createElement)("div",{className:Iu()("bwf-node-wrapper bwf-condition",["bwf-condition-".concat(a)])},Object(r.createElement)(Ec,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:Iu()("bwf-node-content")},Object($u.decodeEntities)(o)),Object(r.createElement)(Ec,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function Ks(e){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $s(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Ws(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Ws(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ws(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Ws(f,"constructor",l),Ws(l,"constructor",u),u.displayName="GeneratorFunction",Ws(l,o,"GeneratorFunction"),Ws(f),Ws(f,o,"Generator"),Ws(f,r,(function(){return this})),Ws(f,"toString",(function(){return"[object Generator]"})),($s=function(){return{w:a,m:d}})()}function Ws(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Ws=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){Ws(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){Js(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Js(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ks(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ks(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ks(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ef(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function tf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rf={status:!0,title:Object(Mu.__)("Add Offer","funnel-builder"),proLink:Object(Ru.U)(["Canvas","Add","Offer","Upgrade","Modal"])},of=function(e){var t=Object(ll.b)("ul").isExpired,n=e.id,o=e.sourceX,a=e.sourceY,i=e.targetX,c=e.targetY,u=e.sourcePosition,l=e.targetPosition,s=e.style,f=void 0===s?{}:s,d=e.data,p=void 0===d?{}:d,b=e.arrowHeadType,y=e.markerEndId,m=Ii({sourceX:o,sourceY:a,sourcePosition:u,targetX:i,targetY:c,targetPosition:l}),h=Ni(b,y),v=tf(Di({sourceX:o,sourceY:a,targetX:i,targetY:c}),2),g=v[0],O=v[1],w=Object(Gu.a)(),j=w.setStepList,_=w.setUpsellStepNode,E=tf(Object(r.useState)(!1),2),S=E[0],x=E[1],k=tf(Object(r.useState)({}),2),P=k[0],C=k[1],N=p.offer,T=void 0===N?"":N,D=p.branch,I=void 0===D?"":D,M=p.upsellId,A=void 0===M?"":M,R=p.mainIndex,F=void 0===R?"":R,L=p.stepIndex,B=void 0===L?"":L,q=Hu(),z=q.getFunnelId,U=q.getStepsList,Y=tf(Object(r.useState)(!1),2),V=Y[0],H=Y[1],G=z(),X=U(),K=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ef(a,r,o,i,c,"next",e)}function c(e){ef(a,r,o,i,c,"throw",e)}i(void 0)}))}}($s().m((function e(){var t,n,r,o,a,i,c,u,l,s=arguments;return $s().w((function(e){for(;;)switch(e.n){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(i=r&&r.hasOwnProperty("key")?r.key:0)<1&&(i=r&&r.hasOwnProperty("id")?r.id:0),c={inherit_from:i,title:a,type:"offer",funnel_id:G,canvas:{empty:!1,position:I,offer_id:T}},u=Object(Ru.y)("/funnel-upsell/".concat(A,"/offers/")),e.p=1,x(!0),e.n=2,Qu()({method:"POST",path:u,data:c}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Tu.isEmpty)(e.data)){var t=Object(Tu.cloneDeep)(X),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,i=void 0===a?{}:a;t=Qs(Qs({},t),i),j(t),_(F,B,o[0]),H(!1)}H(!1)}x(!1)}));case 2:e.n=4;break;case 3:e.p=3,l=e.v,console.log(l),x(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:n,style:f,className:"react-flow__edge-path",d:m,markerEnd:h}),Object(r.createElement)("foreignObject",{width:24,height:24,style:{borderRadius:"50%",overflow:"visible",position:"relative"},x:g-12,y:O-12,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(r.createElement)("div",{className:"wffn-node-add",onClick:function(){t?C(rf):H(!0)}},Object(r.createElement)(ul.a,{toolTipText:Object(Mu.__)("Add Offer","funnel-builder")},Object(r.createElement)(Wu.a,{icon:"dashed-plus",size:28})))),V&&Object(r.createElement)(Au.Modal,{title:Object(Mu.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return H(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(cl.a,{step:{type:"offer",upsellId:A,is_substep:!0},requestCreateStep:K,onRequestClose:function(){return H(!1)},isBusy:S})),P.status&&Object(r.createElement)(Ku.a,{isOpen:P.status,onRequestClose:function(){return C({status:!1})},modalContent:P,type:P.type}))},af=function(e){var t=e.id,n=e.sourceX,o=e.sourceY,a=e.targetX,i=e.targetY,c=e.sourcePosition,u=e.targetPosition,l=e.style,s=void 0===l?{}:l,f=e.arrowHeadType,d=e.markerEndId,p=Ii({sourceX:n,sourceY:o,sourcePosition:c,targetX:a,targetY:i,targetPosition:u}),b=Ni(f,d);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:t,style:s,className:"react-flow__edge-path",d:p,markerEnd:b}))};n(668),n(669);var cf=n(83),uf=n(13),lf=n.n(uf),sf=(n(408),n(670),n(15)),ff=n.n(sf),df=n(146),pf=n(480),bf=n.n(pf),yf=n(320),mf=n.n(yf),hf=n(84),vf=n(355),gf=n(23);function Of(e){var t="",n=function(e){if(Object(Tu.isString)(e)||Object(Tu.isNumber)(e))t+=e;else if(Object(Tu.isArray)(e))e.forEach(n);else if(e&&e.props){var r=e.props.children;Object(Tu.isArray)(r)?r.forEach(n):n(r)}};return n(e),t}function wf(e){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ef(r.key),r)}}function Ef(e){var t=function(e,t){if("object"!=wf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wf(t)?t:t+""}function Sf(e,t,n){return t=xf(t),function(e,t){if(t&&("object"==wf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],xf(e).constructor):t.apply(e,n))}function xf(e){return(xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kf(e,t){return(kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Pf=function(e){function t(e){var n,r=e.filter,o=e.config,a=e.onFilterChange;jf(this,t),n=Sf(this,t,arguments);var i=o.input.options;return n.state={options:i},n.updateOptions=n.updateOptions.bind(n),!i&&o.input.getOptions&&o.input.getOptions().then(n.updateOptions).then((function(e){if(!r.value){var t=Object(tl.c)(o,e);a(r.key,"value",t)}})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kf(e,t)}(t,e),function(e,t,n){return t&&_f(e.prototype,t),n&&_f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var n=Object(Tu.find)(t.rules,{value:e.rule})||{},o=Object(Tu.find)(t.input.options,{value:e.value})||{};return Of(mf()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,o.label),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,i=e.isEnglish,c=this.state.options,u=o.key,l=o.rule,s=o.value,f=n.labels,d=n.rules,p=mf()({mixedString:f.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Au.SelectControl,{className:Iu()(t,"bwf-filters-advanced-rule"),options:d,value:l,onChange:Object(Tu.partial)(a,u,"rule"),"aria-label":f.rule}),filter:c?Object(r.createElement)(Au.SelectControl,{className:Iu()(t,"bwf-filters-advanced-input"),options:c,value:s,onChange:Object(Tu.partial)(a,o.key,"value"),"aria-label":f.filter}):Object(r.createElement)(Xu.a,{size:"xl"})}}),b=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},f.add||""),Object(r.createElement)("div",{className:Iu()("bwf-filters-advanced-fieldset",{"is-english":i})},p),b&&Object(r.createElement)("span",{className:"screen-reader-text"},b))}}])}(r.Component);Pf.propTypes={config:ff.a.shape({labels:ff.a.shape({rule:ff.a.string,title:ff.a.string,filter:ff.a.string}),rules:ff.a.arrayOf(ff.a.object),input:ff.a.object}).isRequired,filter:ff.a.shape({key:ff.a.string,rule:ff.a.string,value:ff.a.string}).isRequired,onFilterChange:ff.a.func.isRequired};var Cf=Pf,Nf=n(414);function Tf(e){return(Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function If(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Df(Object(n),!0).forEach((function(t){Mf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Df(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mf(e,t,n){return(t=Ff(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Af(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ff(r.key),r)}}function Ff(e){var t=function(e,t){if("object"!=Tf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tf(t)?t:t+""}function Lf(e,t,n){return t=Bf(t),function(e,t){if(t&&("object"==Tf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Bf(e).constructor):t.apply(e,n))}function Bf(e){return(Bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qf(e,t){return(qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zf=function(e){function t(e){var n,r=e.filter,o=e.config,a=e.query;return Af(this,t),(n=Lf(this,t,arguments)).onSearchChange=n.onSearchChange.bind(n),n.state={selected:[]},n.updateLabels=n.updateLabels.bind(n),r.value.length&&o.input.getLabels(r.value,a).then((function(e){var t=e.map((function(e){return If({key:e.id},e)}));n.updateLabels(t)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qf(e,t)}(t,e),function(e,t,n){return t&&Rf(e.prototype,t),n&&Rf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.filter,o=t.query,a=e.filter;if(r.value.length&&!Object(Tu.isEqual)(a,r)){var i=this.state.selected.map((function(e){return e.key}));Object(tl.e)(r.value).every((function(e){return!i.includes(e)}))&&n.input.getLabels(r.value,o).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),n=e.map((function(e){return e.key}));Object(Tu.isEqual)(n.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e});var t=this.props,n=t.filter,r=t.onFilterChange,o=e.map((function(e){return e.key})).join(",");r(n.key,"value",o)}},{key:"getScreenReaderText",value:function(e,t){var n=this.state.selected;if(0===n.length)return"";var o=Object(Tu.find)(t.rules,{value:e.rule})||{},a=n.map((function(e){return e.label})).join(", ");return Of(mf()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,a),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,i=e.isEnglish,c=this.state.selected,u=o.key,l=o.rule,s=n.input,f=n.labels,d=n.rules,p=mf()({mixedString:f.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Au.SelectControl,{className:Iu()(t,"bwf-filters-advanced-rule"),options:d,value:l,onChange:Object(Tu.partial)(a,u,"rule"),"aria-label":f.rule}),filter:Object(r.createElement)(Nf.a,{className:Iu()(t,"bwf-filters-advanced-input"),onChange:this.onSearchChange,type:s.type,placeholder:f.placeholder,selected:c,inlineTags:!0,"aria-label":f.filter})}}),b=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},f.add||""),Object(r.createElement)("div",{className:Iu()("bwf-filters-advanced-fieldset",{"is-english":i})},p),b&&Object(r.createElement)("span",{className:"screen-reader-text"},b))}}])}(r.Component);zf.propTypes={config:ff.a.shape({labels:ff.a.shape({placeholder:ff.a.string,rule:ff.a.string,title:ff.a.string}),rules:ff.a.arrayOf(ff.a.object),input:ff.a.object}).isRequired,filter:ff.a.shape({key:ff.a.string,rule:ff.a.string,value:ff.a.string}).isRequired,onFilterChange:ff.a.func.isRequired,query:ff.a.object};var Uf=zf,Yf=n(528);function Vf(e){return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$f(r.key),r)}}function $f(e){var t=function(e,t){if("object"!=Vf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vf(t)?t:t+""}function Wf(e,t,n){return t=Zf(t),function(e,t){if(t&&("object"==Vf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Zf(e).constructor):t.apply(e,n))}function Zf(e){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qf(e,t){return(Qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Jf=function(e){function t(){return Xf(this,t),Wf(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qf(e,t)}(t,e),function(e,t,n){return t&&Kf(e.prototype,t),n&&Kf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"getBetweenString",value:function(){return Object(Mu._x)("{{rangeStart /}}{{span}} and {{/span}}{{rangeEnd /}}","Numerical range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=this.props.currency,o=Object(Tu.find)(t.rules,{value:e.rule})||{},a=Hf(Object(Tu.isArray)(e.value)?e.value:[e.value],2),i=a[0],c=a[1];if(!i||"between"===o.value&&!c)return"";if("currency"===Object(Tu.get)(t,["input","type"],"number")){var u=Object(df.a)(n).formatAmount;i=u(i),c=u(c)}var l=i;return"between"===o.value&&(l=mf()({mixedString:this.getBetweenString(),components:{rangeStart:Object(r.createElement)(r.Fragment,null,i),rangeEnd:Object(r.createElement)(r.Fragment,null,c),span:Object(r.createElement)(r.Fragment,null)}})),Of(mf()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,l),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,n=e.value,o=e.label,a=e.onChange,i=e.currencySymbol,c=e.symbolPosition;return"currency"===t?0===c.indexOf("right")?Object(r.createElement)(Yf.a,{suffix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(Yf.a,{prefix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(Au.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,n=e.filter,r=e.onFilterChange,o=e.currency,a=o.symbol,i=o.symbolPosition;if("between"===n.rule)return this.getRangeInput();var c=Object(Tu.get)(t,["input","type"],"number"),u=Hf(Object(Tu.isArray)(n.value)?n.value:[n.value],2),l=u[0],s=u[1];Boolean(s)&&r(n.key,"value",l||s);var f="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return f="lessthan"===n.rule?Object(Mu._x)("%(field)s maximum amount","maximum value input","funnel-builder"):Object(Mu._x)("%(field)s minimum amount","minimum value input","funnel-builder"),this.getFormControl({type:c,value:l||s,label:Object(Mu.sprintf)(f,{field:Object(Tu.get)(t,["labels","add"])}),onChange:Object(Tu.partial)(r,n.key,"value"),currencySymbol:a,symbolPosition:i})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,n=e.filter,o=e.onFilterChange,a=e.currency,i=a.symbol,c=a.symbolPosition,u=Object(Tu.get)(t,["input","type"],"number"),l=Hf(Object(Tu.isArray)(n.value)?n.value:[n.value],2),s=l[0],f=l[1];return mf()({mixedString:this.getBetweenString(),components:{rangeStart:this.getFormControl({type:u,value:s||"",label:Object(Mu.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(Mu.__)("%(field)s range start","funnel-builder"),{field:Object(Tu.get)(t,["labels","add"])}),onChange:function(e){o(n.key,"value",[e,f])},currencySymbol:i,symbolPosition:c}),rangeEnd:this.getFormControl({type:u,value:f||"",label:Object(Mu.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(Mu.__)("%(field)s range end","funnel-builder"),{field:Object(Tu.get)(t,["labels","add"])}),onChange:function(e){o(n.key,"value",[s,e])},currencySymbol:i,symbolPosition:c}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,i=e.isEnglish,c=o.key,u=o.rule,l=n.labels,s=n.rules,f=mf()({mixedString:l.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Au.SelectControl,{className:Iu()(t,"bwf-filters-advanced-rule"),options:s,value:u,onChange:Object(Tu.partial)(a,c,"rule"),"aria-label":l.rule}),filter:Object(r.createElement)("div",{className:Iu()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===u})},this.getFilterInputs())}}),d=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},l.add||""),Object(r.createElement)("div",{className:Iu()("bwf-filters-advanced-fieldset",{"is-english":i})},f),d&&Object(r.createElement)("span",{className:"screen-reader-text"},d))}}])}(r.Component),ed=n(315);function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nd(e,t,n){return(t=cd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return od(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?od(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function od(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ad(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cd(r.key),r)}}function cd(e){var t=function(e,t){if("object"!=td(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=td(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==td(t)?t:t+""}function ud(e,t,n){return t=ld(t),function(e,t){if(t&&("object"==td(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],ld(e).constructor):t.apply(e,n))}function ld(e){return(ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sd(e,t){return(sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var fd=Object(Mu.__)("MMM D, YYYY","funnel-builder"),dd=Object(Mu.__)("MM/DD/YYYY","funnel-builder"),pd=function(e){function t(e){var n,r=e.filter;ad(this,t),n=ud(this,t,arguments);var o=Array.isArray(r.value)?r.value:[null,r.value],a=rd(o,2),i=a[0],c=a[1],u=i?Object(cf.i)(cf.h,i):null,l=c?Object(cf.i)(cf.h,c):null;return n.state={before:l,beforeText:l?l.format(dd):"",beforeError:null,after:u,afterText:u?u.format(dd):"",afterError:null},n.onSingleDateChange=n.onSingleDateChange.bind(n),n.onRangeDateChange=n.onRangeDateChange.bind(n),n.onRuleChange=n.onRuleChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sd(e,t)}(t,e),function(e,t,n){return t&&id(e.prototype,t),n&&id(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"getBetweenString",value:function(){return Object(Mu._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=Object(Tu.find)(t.rules,{value:e.rule})||{},o=this.state,a=o.before,i=o.after;if(!a||"between"===n.value&&!i)return"";var c=a.format(fd);return"between"===n.value&&(c=mf()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(r.Fragment,null,i.format(fd)),before:Object(r.createElement)(r.Fragment,null,a.format(fd)),span:Object(r.createElement)(r.Fragment,null)}})),Of(mf()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,c),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,n=e.text,r=e.error,o=this.props,a=o.filter,i=o.onFilterChange;this.setState({before:t,beforeText:n,beforeError:r}),t&&i(a.key,"value",t.format(cf.h))}},{key:"onRangeDateChange",value:function(e,t){var n=t.date,r=t.text,o=t.error,a=this.props,i=a.filter,c=a.onFilterChange;if(this.setState(nd(nd(nd({},e,n),e+"Text",r),e+"Error",o)),n){var u=this.state,l=u.before,s=u.after,f=null,d=null;"after"===e&&(f=n.format(cf.h),d=l?l.format(cf.h):null),"before"===e&&(f=s?s.format(cf.h):null,d=n.format(cf.h)),f&&d&&c(i.key,"value",[f,d])}}},{key:"isFutureDate",value:function(e){return lf()().isBefore(lf()(e),"day")}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,n=t.before,o=t.beforeText,a=t.beforeError,i=t.after,c=t.afterText,u=t.afterError;return"between"===e.rule?mf()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(ed.b,{date:i,text:c,error:u,onUpdate:Object(Tu.partial)(this.onRangeDateChange,"after"),dateFormat:dd,isInvalidDate:this.isFutureDate}),before:Object(r.createElement)(ed.b,{date:n,text:o,error:a,onUpdate:Object(Tu.partial)(this.onRangeDateChange,"before"),dateFormat:dd,isInvalidDate:this.isFutureDate}),span:Object(r.createElement)("span",{className:"separator"})}}):Object(r.createElement)(ed.b,{date:n,text:o,error:a,onUpdate:this.onSingleDateChange,dateFormat:dd,isInvalidDate:this.isFutureDate})}},{key:"onRuleChange",value:function(e){var t=this.props,n=t.onFilterChange,r=t.filter,o=t.updateFilter,a=this.state.before;"between"===r.rule&&"between"!==e?o({key:r.key,rule:e,value:a?a.format(cf.h):void 0}):n(r.key,"rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.isEnglish,i=o.rule,c=n.labels,u=n.rules,l=this.getScreenReaderText(o,n),s=mf()({mixedString:c.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Au.SelectControl,{className:Iu()(t,"bwf-filters-advanced-rule"),options:u,value:i,onChange:this.onRuleChange,"aria-label":c.rule}),filter:Object(r.createElement)("div",{className:Iu()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},c.add||""),Object(r.createElement)("div",{className:Iu()("bwf-filters-advanced-fieldset",{"is-english":a})},s),l&&Object(r.createElement)("span",{className:"screen-reader-text"},l))}}])}(r.Component),bd=n(339);function yd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return md(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?md(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var hd=function(e){var t=e.className,n=e.config,o=e.filter,a=e.isEnglish,i=e.onFilterChange,c=o.key,u=o.rule,l=o.value,s=n.labels,f=n.rules,d=yd(Object(r.useState)([]),2),p=d[0],b=d[1];Object(r.useEffect)((function(){Qu()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(b)}),[]);var y=yd(Object(r.useState)(Array.isArray(l)?l[0]:""),2),m=y[0],h=y[1];Object(r.useEffect)((function(){Array.isArray(l)&&h(l[0])}),[l]);var v=yd(Object(r.useState)([]),2),g=v[0],O=v[1];Object(r.useEffect)((function(){m&&(O([]),Qu()({path:"/wc/v3/products/attributes/".concat(m,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(O))}),[m]);var w=yd(Object(r.useState)(Array.isArray(l)&&l[1]||""),2),j=w[0],_=w[1],E=function(e){var t=e.attributes,n=e.attributeTerms,o=e.config,a=e.filter,i=e.selectedAttribute,c=e.selectedAttributeTerm;if(0===t.length||0===n.length||""===i||""===c)return"";var u=Array.isArray(o.rules)&&o.rules.find((function(e){return e.value===a.rule}))||{},l=t.find((function(e){return e.key===i})).label,s=n.find((function(e){return e.key===c})).label,f=mf()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(Mu.__)("{{attribute /}} {{equals /}} {{value /}}","funnel-builder"),components:{attribute:Object(r.createElement)(r.Fragment,null,l),equals:Object(r.createElement)(r.Fragment,null,u.label),value:Object(r.createElement)(r.Fragment,null,s)}});return Of(mf()({mixedString:o.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,f),rule:Object(r.createElement)(r.Fragment,null),title:Object(r.createElement)(r.Fragment,null)}}))}({attributes:p,attributeTerms:g,config:n,filter:o,selectedAttribute:m,selectedAttributeTerm:j});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},s.add||""),Object(r.createElement)("div",{className:Iu()("bwf-filters-advanced-fieldset",{"is-english":a})},mf()({mixedString:s.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Au.SelectControl,{className:Iu()(t,"bwf-filters-advanced-rule"),options:f,value:u,onChange:Object(Tu.partial)(i,c,"rule"),"aria-label":s.rule}),filter:Object(r.createElement)("div",{className:Iu()(t,"bwf-filters-advanced-attribute-fieldset")},p.length>0?Object(r.createElement)(bd.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(Mu.__)("Attribute name","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:p,selected:m,onChange:function(e){"string"!=typeof e&&(e=""),h(e),_(""),i(c,"value",[e])}}):Object(r.createElement)(Xu.a,{size:"xl"}),p.length>0&&""!==m&&(g.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(r.createElement)(bd.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(Mu.__)("Attribute value","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:g,selected:j,onChange:function(e){"string"!=typeof e&&(e=""),_(e),i(c,"value",[m,e])}})):Object(r.createElement)(Xu.a,{size:"xl"})))}})),E&&Object(r.createElement)("span",{className:"screen-reader-text"},E))};hd.propTypes={config:ff.a.shape({labels:ff.a.shape({rule:ff.a.string,title:ff.a.string,filter:ff.a.string}),rules:ff.a.arrayOf(ff.a.object),input:ff.a.object}).isRequired,filter:ff.a.shape({key:ff.a.string,rule:ff.a.string,value:ff.a.arrayOf(ff.a.oneOfType([ff.a.string,ff.a.number]))}).isRequired,onFilterChange:ff.a.func.isRequired};var vd=hd,gd=(n(671),n(289));function Od(e){return(Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){Sd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _d(e){return function(e){if(Array.isArray(e))return Ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ed(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ed(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Sd(e,t,n){return(t=Pd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pd(r.key),r)}}function Pd(e){var t=function(e,t){if("object"!=Od(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Od(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Od(t)?t:t+""}function Cd(e,t,n){return t=Nd(t),function(e,t){if(t&&("object"==Od(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Nd(e).constructor):t.apply(e,n))}function Nd(e){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Td(e,t){return(Td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Dd=[{value:"all",label:Object(Mu.__)("All","funnel-builder")},{value:"any",label:Object(Mu.__)("Any","funnel-builder")}],Id=function(e){function t(e){var n,o=e.query,a=e.config;return xd(this,t),(n=Cd(this,t,arguments)).state={match:o.match||"all",activeFilters:Object(tl.b)(o,a.filters)},n.filterListRef=Object(r.createRef)(),n.onMatchChange=n.onMatchChange.bind(n),n.onFilterChange=n.onFilterChange.bind(n),n.getAvailableFilterKeys=n.getAvailableFilterKeys.bind(n),n.addFilter=n.addFilter.bind(n),n.removeFilter=n.removeFilter.bind(n),n.clearFilters=n.clearFilters.bind(n),n.getUpdateHref=n.getUpdateHref.bind(n),n.updateFilter=n.updateFilter.bind(n),n.onFilter=n.onFilter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Td(e,t)}(t,e),function(e,t,n){return t&&kd(e.prototype,t),n&&kd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.query,o=e.query;Object(Tu.isEqual)(o,r)||this.setState({activeFilters:Object(tl.b)(r,n.filters)})}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,n){var r=this.state.activeFilters.map((function(r){return e===r.key?Object.assign({},r,Sd({},t,n)):r}));this.setState({activeFilters:r})}},{key:"updateFilter",value:function(e){var t=this.state.activeFilters.map((function(t){return e.key===t.key?e:t}));this.setState({activeFilters:t})}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,n=_d(this.state.activeFilters),r=Object(Tu.findIndex)(n,(function(t){return t.key===e}));(t("remove",n[r]),n.splice(r,1),this.setState({activeFilters:n}),0===n.length)&&Object(tl.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return mf()({mixedString:t.title,components:{select:Object(r.createElement)(Au.SelectControl,{className:"bwf-filters-advanced-title-select",options:Dd,value:e,onChange:this.onMatchChange,"aria-label":Object(Mu.__)("Choose to apply any or all filters","funnel-builder")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key}));return Object(Tu.difference)(Object.keys(e.filters),t)}},{key:"addFilter",value:function(e,t){var n=this,r=this.props,o=r.onAdvancedFilterAction,a=r.config.filters[e],i={key:e};Array.isArray(a.rules)&&a.rules.length&&(i.rule=a.rules[0].value),a.input&&a.input.options&&(i.value=Object(tl.c)(a,a.input.options)),a.input&&"Search"===a.input.component&&(i.value=""),this.setState((function(e){return{activeFilters:[].concat(_d(e.activeFilters),[i])}})),o("add",i),t(),setTimeout((function(){n.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"})}},{key:"getUpdateHref",value:function(e,t){var n=this.props,r=n.path,o=n.query,a=n.config,i=Object(tl.j)(e,o,a.filters),c="all"===t?void 0:t;return Object(tl.f)(jd(jd({},i),{},{match:c}),r,o)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,n=e.query,r=e.config,o=this.state,a=o.activeFilters,i=o.match;t("filter",jd(jd({},Object(tl.j)(a,n,r.filters)),{},{match:i}))}},{key:"orderFilters",value:function(e,t){var n=window.location.search,r=n.indexOf(e.key),o=n.indexOf(t.key);return-1===r||-1===o?0:r-o}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,o=t.query,a=t.currency,i=this.state,c=i.activeFilters,u=i.match,l=this.getAvailableFilterKeys(),s=this.getUpdateHref(c,u),f="admin.php"+window.location.search===s||0===c.length,d=this.isEnglish();return Object(r.createElement)(vf.a,{className:"bwf-filters-advanced bwf-analytics-card",title:this.getTitle()},Object(r.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},c.sort(this.orderFilters).map((function(t){var i=t.key,c=n.filters[i],u=c.input,l=c.labels;return Object(r.createElement)("li",{className:"bwf-filters-advanced-list-item",key:i},"SelectControl"===u.component&&Object(r.createElement)(Cf,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d}),"Search"===u.component&&Object(r.createElement)(Uf,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o}),"Number"===u.component&&Object(r.createElement)(Jf,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o,currency:a}),"Currency"===u.component&&Object(r.createElement)(Jf,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:jd(jd({},n.filters[i]),{input:{type:"currency",component:"Currency"}}),onFilterChange:e.onFilterChange,isEnglish:d,query:o,currency:a}),"Date"===u.component&&Object(r.createElement)(pd,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o,updateFilter:e.updateFilter}),"ProductAttribute"===u.component&&Object(r.createElement)(vd,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o,updateFilter:e.updateFilter}),Object(r.createElement)(Au.Button,{className:Iu()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:l.remove,onClick:Object(Tu.partial)(e.removeFilter,i)},Object(r.createElement)(bf.a,{icon:"cross-small"})))}))),l.length>0&&Object(r.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(r.createElement)(hf.a,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return Object(r.createElement)(Au.Button,{className:"bwf-filters-advanced-add-button",onClick:n,"aria-expanded":t},Object(r.createElement)(bf.a,{icon:"add-outline"}),Object(Mu.__)("Add a Filter","funnel-builder"))},renderContent:function(t){var o=t.onClose;return Object(r.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},l.map((function(t){return Object(r.createElement)("li",{key:t},Object(r.createElement)(Au.Button,{onClick:Object(Tu.partial)(e.addFilter,t,o)},n.filters[t].labels.add))})))}})),Object(r.createElement)("div",{className:"bwf-filters-advanced-controls"},f&&Object(r.createElement)(Au.Button,{isPrimary:!0,disabled:!0,className:"bwf-no-ripple"},Object(Mu.__)("Filter","funnel-builder")),!f&&Object(r.createElement)(gf.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:s,onClick:this.onFilter},Object(Mu.__)("Filter","funnel-builder")),c.length>0&&Object(r.createElement)(gf.a,{type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(Mu.__)("Clear all filters","funnel-builder"))))}}])}(r.Component);Id.propTypes={config:ff.a.shape({title:ff.a.string,filters:ff.a.objectOf(ff.a.shape({labels:ff.a.shape({add:ff.a.string,remove:ff.a.string,rule:ff.a.string,title:ff.a.string,filter:ff.a.string}),rules:ff.a.arrayOf(ff.a.object),input:ff.a.object}))}).isRequired,path:ff.a.string.isRequired,query:ff.a.object,onAdvancedFilterAction:ff.a.func,siteLocale:ff.a.string,currency:ff.a.object.isRequired};var Md=Object(gd.a)(Id,{query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"}),Ad=function(e){var t=e.className,n=e.count,o=e.children,a=e.disabled,i=e.helpText,c=e.onClick;return!a&&n<2?Object(r.createElement)(Au.Tooltip,{text:i},Object(r.createElement)("span",{className:t},Object(r.createElement)(Au.Button,{className:"bwf-compare-button",disabled:!0,isSecondary:!0},o))):Object(r.createElement)(Au.Button,{className:Iu()("bwf-compare-button",t),onClick:c,disabled:a,isSecondary:!0},o)};Ad.propTypes={className:ff.a.string,count:ff.a.number.isRequired,children:ff.a.node.isRequired,helpText:ff.a.string.isRequired,onClick:ff.a.func.isRequired,disabled:ff.a.bool};var Rd=Ad;function Fd(e){return(Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ld(e,t,n){return(t=zd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zd(r.key),r)}}function zd(e){var t=function(e,t){if("object"!=Fd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fd(t)?t:t+""}function Ud(e,t,n){return t=Yd(t),function(e,t){if(t&&("object"==Fd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Yd(e).constructor):t.apply(e,n))}function Yd(e){return(Yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vd(e,t){return(Vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Hd=function(e){function t(e){var n,r=e.getLabels,o=e.param,a=e.query;return Bd(this,t),(n=Ud(this,t,arguments)).state={selected:[]},n.clearQuery=n.clearQuery.bind(n),n.updateQuery=n.updateQuery.bind(n),n.updateLabels=n.updateLabels.bind(n),a[o]&&r(a[o],a).then(n.updateLabels),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vd(e,t)}(t,e),function(e,t,n){return t&&qd(e.prototype,t),n&&qd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidUpdate",value:function(e,t){var n=e.param,r=e.query,o=t.selected,a=this.props,i=a.getLabels,c=a.param,u=a.query,l=this.state.selected;if(n!==c||o.length>0&&0===l.length)this.clearQuery();else{var s=Object(tl.e)(r[c]),f=Object(tl.e)(u[c]);Object(Tu.isEqual)(s.sort(),f.sort())||i(u[c],u).then(this.updateLabels)}}},{key:"clearQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query;this.setState({selected:[]}),Object(tl.k)(Ld({},t,void 0),n,r)}},{key:"updateLabels",value:function(e){this.setState({selected:e})}},{key:"updateQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query,o=this.state.selected.map((function(e){return e.key}));Object(tl.k)(Ld({},t,o.join(",")),n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,o=t.type,a=this.state.selected;return Object(r.createElement)(vf.a,{title:n.title,className:"bwf-filters-compare bwf-analytics-card"},Object(r.createElement)("div",{className:"bwf-filters-compare-body"},Object(r.createElement)(Nf.a,{type:o,selected:a,placeholder:n.placeholder,onChange:function(t){e.setState({selected:t})}})),Object(r.createElement)("div",{className:"bwf-filters-compare-footer"},Object(r.createElement)(Rd,{count:a.length,helpText:n.helpText,onClick:this.updateQuery},n.update),a.length>0&&Object(r.createElement)(Au.Button,{isLink:!0,onClick:this.clearQuery},Object(Mu.__)("Clear all","funnel-builder"))))}}])}(r.Component);Hd.propTypes={getLabels:ff.a.func.isRequired,labels:ff.a.shape({placeholder:ff.a.string,title:ff.a.string,update:ff.a.string}),param:ff.a.string.isRequired,path:ff.a.string.isRequired,query:ff.a.object,type:ff.a.string.isRequired};var Gd=Object(gd.a)(Hd,{labels:{},query:{}});n(386),n(672);function Xd(e){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t,n){return(t=Zd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zd(r.key),r)}}function Zd(e){var t=function(e,t){if("object"!=Xd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xd(t)?t:t+""}function Qd(e,t,n){return t=Jd(t),function(e,t){if(t&&("object"==Xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Jd(e).constructor):t.apply(e,n))}function Jd(e){return(Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ep(e,t){return(ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var tp=function(e){function t(){return $d(this,t),Qd(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ep(e,t)}(t,e),function(e,t,n){return t&&Wd(e.prototype,t),n&&Wd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.options,o=e.selected,a=e.onSelect,i=e.name,c=e.legend;return Object(r.createElement)("fieldset",{className:"bwf-segment-selection"},Object(r.createElement)("legend",{className:"screen-reader-text"},c),Object(r.createElement)("div",{className:Iu()(t,"bwf-segment-selection-container")},n.map((function(e){var t=e.value,n=e.label;if(!t||!n)return null;var c=Object(Tu.uniqueId)("".concat(t,"_"));return Object(r.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(r.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:i,id:c,checked:o===t,onChange:Object(Tu.partial)(a,Kd({},i,t))}),Object(r.createElement)("label",{htmlFor:c},Object(r.createElement)("span",{className:"bwf-segment-selection-label"},n)))}))))}}])}(r.Component);tp.propTypes={className:ff.a.string,options:ff.a.arrayOf(ff.a.shape({value:ff.a.string.isRequired,label:ff.a.string.isRequired})).isRequired,selected:ff.a.string,onSelect:ff.a.func.isRequired,name:ff.a.string.isRequired,legend:ff.a.string.isRequired};var np=tp;function rp(e){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function op(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ap(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ip(r.key),r)}}function ip(e){var t=function(e,t){if("object"!=rp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rp(t)?t:t+""}function cp(e,t,n){return t=up(t),function(e,t){if(t&&("object"==rp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],up(e).constructor):t.apply(e,n))}function up(e){return(up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t){return(lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var sp=function(e){function t(){return op(this,t),cp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lp(e,t)}(t,e),function(e,t,n){return t&&ap(e.prototype,t),n&&ap(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.compare;return Object(r.createElement)(np,{options:dp,selected:n,onSelect:t,name:"compare",legend:Object(Mu.__)("compare to","funnel-builder")})}}])}(r.Component);sp.propTypes={onSelect:ff.a.func.isRequired,compare:ff.a.string};var fp=sp,dp=[{value:"previous_period",label:Object(Mu.__)("Previous Period","funnel-builder")},{value:"previous_year",label:Object(Mu.__)("Previous Year","funnel-builder")}],pp=(Object(Mu.__)("Invalid date","funnel-builder"),Object(Mu.__)("Select a date in the past","funnel-builder"),Object(Mu.__)("Start date must be before end date","funnel-builder"),Object(Mu.__)("Start date must be before end date","funnel-builder"),n(329),n(330),n(441)),bp=n(182),yp=(n(296),n(314)),mp=n(347);function hp(e){return(hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vp(e,t,n){return(t=Op(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Op(r.key),r)}}function Op(e){var t=function(e,t){if("object"!=hp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hp(t)?t:t+""}function wp(e,t,n){return t=jp(t),function(e,t){if(t&&("object"==hp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],jp(e).constructor):t.apply(e,n))}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _p(e,t){return(_p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ep=function(){return"rtl"===document.documentElement.dir},Sp=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wp(this,t,[e])).onDatesChange=n.onDatesChange.bind(n),n.onFocusChange=n.onFocusChange.bind(n),n.onInputChange=n.onInputChange.bind(n),n.nodeRef=Object(r.createRef)(),n.keepFocusInside=n.keepFocusInside.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_p(e,t)}(t,e),function(e,t,n){return t&&gp(e.prototype,t),n&&gp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var n=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var r=this.nodeRef.current.querySelector(".DayPickerNavigation_button");r&&r.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&n&&n.contains(t.relatedTarget))return;var o=this.nodeRef.current.querySelector(".DayPicker_focusRegion");o&&o.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,n=e.endDate,r=this.props,o=r.onUpdate,a=r.shortDateFormat;o({after:t,before:n,afterText:t?t.format(a):"",beforeText:n?n.format(a):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var n=t.target.value,r=this.props,o=r.after,a=r.before,i=r.shortDateFormat,c=Object(cf.j)(e,n,a,o,i),u=c.date,l=c.error;this.props.onUpdate(vp(vp(vp({},e,u),e+"Text",n),e+"Error",n.length>0?l:null))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var n=t||lf()();return e?n.clone().subtract(1,"month"):n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.after,o=t.before,a=t.focusedInput,i=t.afterText,c=t.beforeText,u=t.afterError,l=t.beforeError,s=t.shortDateFormat,f=t.isViewportMobile,d=t.isViewportSmall,p=t.isInvalidDate,b=f&&!d;return Object(r.createElement)("div",{className:Iu()("bwf-calendar",{"is-mobile":f})},Object(r.createElement)("div",{className:"bwf-calendar-inputs"},Object(r.createElement)(yp.a,{value:i,onChange:Object(Tu.partial)(this.onInputChange,"after"),dateFormat:s,label:Object(Mu.__)("Start Date","funnel-builder"),error:u,describedBy:Object(Mu.sprintf)(Object(Mu.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),s),onFocus:function(){return e.onFocusChange("startDate")}}),Object(r.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(Mu.__)("to","funnel-builder")),Object(r.createElement)(yp.a,{value:c,onChange:Object(Tu.partial)(this.onInputChange,"before"),dateFormat:s,label:Object(Mu.__)("End Date","funnel-builder"),error:l,describedBy:Object(Mu.sprintf)(Object(Mu.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),s),onFocus:function(){return e.onFocusChange("endDate")}})),Object(r.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(Tu.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(r.createElement)(pp.DayPickerRangeController,{onNextMonthClick:Object(Tu.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(Tu.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:n,endDate:o,orientation:"horizontal",numberOfMonths:b?2:1,isOutsideRange:function(e){return p&&p(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:Ep(),initialVisibleMonth:this.setTnitialVisibleMonth(b,o),phrases:mp.a}),Object(r.createElement)(pp.DayPickerRangeController,{onNextMonthClick:Object(Tu.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(Tu.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:n,endDate:o,orientation:"horizontal",numberOfMonths:b?2:1,isOutsideRange:function(e){return p&&p(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:Ep(),initialVisibleMonth:this.setTnitialVisibleMonth(b,o),phrases:mp.a})))}}])}(r.Component);Sp.propTypes={after:ff.a.object,afterError:ff.a.string,afterText:ff.a.string,before:ff.a.object,beforeError:ff.a.string,beforeText:ff.a.string,focusedInput:ff.a.string,isInvalidDate:ff.a.func,onUpdate:ff.a.func.isRequired,shortDateFormat:ff.a.string.isRequired,losesFocusTo:ff.a.instanceOf(Element)};var xp=Object(bp.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(Sp),kp=n(300);function Pp(e){return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tp(r.key),r)}}function Tp(e){var t=function(e,t){if("object"!=Pp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pp(t)?t:t+""}function Dp(e,t,n){return t=Ip(t),function(e,t){if(t&&("object"==Pp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Ip(e).constructor):t.apply(e,n))}function Ip(e){return(Ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mp(e,t){return(Mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ap=function(e){function t(){return Cp(this,t),Dp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mp(e,t)}(t,e),function(e,t,n){return t&&Np(e.prototype,t),n&&Np(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.period;return Object(r.createElement)(np,{options:Object(Tu.filter)(Fp,(function(e){return"custom"!==e.value})),selected:n,onSelect:t,name:"period",legend:Object(Mu.__)("select a preset period","funnel-builder")})}}])}(r.Component);Ap.propTypes={onSelect:ff.a.func.isRequired,period:ff.a.string};var Rp=Ap,Fp=[{value:"today",label:Object(Mu.__)("Today","funnel-builder")},{value:"yesterday",label:Object(Mu.__)("Yesterday","funnel-builder")},{value:"week",label:Object(Mu.__)("Week to Date","funnel-builder")},{value:"last_week",label:Object(Mu.__)("Last Week","funnel-builder")},{value:"month",label:Object(Mu.__)("Month to Date","funnel-builder")},{value:"last_month",label:Object(Mu.__)("Last Month","funnel-builder")},{value:"quarter",label:Object(Mu.__)("Quarter to Date","funnel-builder")},{value:"last_quarter",label:Object(Mu.__)("Last Quarter","funnel-builder")},{value:"year",label:Object(Mu.__)("Year to Date","funnel-builder")},{value:"last_year",label:Object(Mu.__)("Last Year","funnel-builder")},{value:"custom",label:Object(Mu.__)("Custom","funnel-builder")}];function Lp(e){return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qp(r.key),r)}}function qp(e){var t=function(e,t){if("object"!=Lp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lp(t)?t:t+""}function zp(e,t,n){return t=Up(t),function(e,t){if(t&&("object"==Lp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Up(e).constructor):t.apply(e,n))}function Up(e){return(Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yp(e,t){return(Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Vp=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=zp(this,t)).onTabSelect=e.onTabSelect.bind(e),e.controlsRef=Object(r.createRef)(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yp(e,t)}(t,e),function(e,t,n){return t&&Bp(e.prototype,t),n&&Bp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"onTabSelect",value:function(e){var t=this.props,n=t.onUpdate,r=t.period;"period"===e&&"custom"===r&&n({period:"today"})}},{key:"isFutureDate",value:function(e){return lf()().isBefore(lf()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,n=t.period,o=t.compare,a=t.hideCompare,i=t.after,c=t.before,u=t.onUpdate,l=t.onClose,s=t.onSelect,f=t.isValidSelection,d=t.resetCustomValues,p=t.focusedInput,b=t.afterText,y=t.beforeText,m=t.afterError,h=t.beforeError,v=t.shortDateFormat,g=t.disablePresets;return Object(r.createElement)("div",null,Object(r.createElement)(kp.a,{className:"screen-reader-text",tabIndex:"0"},Object(Mu.__)("Select date range and comparison","funnel-builder")),Object(r.createElement)(kp.b,{component:!1},Object(r.createElement)(kp.a,{className:"bwf-filters-date-text"},Object(Mu.__)("select a date range","funnel-builder")),Object(r.createElement)(Au.TabPanel,{tabs:[{name:"period",title:Object(Mu.__)("Presets","funnel-builder"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(Mu.__)("Custom","funnel-builder"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===n||g?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(r.createElement)(r.Fragment,null,"period"===t.name&&Object(r.createElement)(Rp,{onSelect:u,period:n}),"custom"===t.name&&Object(r.createElement)(xp,{after:i,before:c,onUpdate:u,isInvalidDate:e.isFutureDate,focusedInput:p,afterText:b,beforeText:y,afterError:m,beforeError:h,shortDateFormat:v,losesFocusTo:e.controlsRef.current}),Object(r.createElement)("div",{className:Iu()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!a&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(kp.a,{className:"bwf-filters-date-text"},Object(Mu.__)("compare to","funnel-builder")),Object(r.createElement)(fp,{onSelect:u,compare:o})),Object(r.createElement)("div",{className:Iu()("bwf-filters-date-button-group",{"bwf-has-reset-filter":"custom"===t.name})},"custom"===t.name&&Object(r.createElement)(Au.Button,{className:"bwf-filters-date-button bwf-modal-cancel-btn bwf-no-ripple",onClick:d,disabled:!(i||c)},Object(Mu.__)("Reset","funnel-builder")),f(t.name)?Object(r.createElement)(Au.Button,{className:"bwf-filters-date-button",onClick:s(t.name,l),isPrimary:!0},Object(Mu.__)("Update","funnel-builder")):Object(r.createElement)(Au.Button,{className:"bwf-filters-date-button bwf-no-ripple",isPrimary:!0,disabled:!0},Object(Mu.__)("Update","funnel-builder")))))}))))}}])}(r.Component);Vp.propTypes={period:ff.a.string.isRequired,compare:ff.a.string.isRequired,onUpdate:ff.a.func.isRequired,onClose:ff.a.func.isRequired,onSelect:ff.a.func.isRequired,resetCustomValues:ff.a.func.isRequired,focusedInput:ff.a.string,afterText:ff.a.string,beforeText:ff.a.string,afterError:ff.a.string,beforeError:ff.a.string,shortDateFormat:ff.a.string.isRequired};var Hp=Vp,Gp=n(351);n(673);function Xp(e){return(Xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$p(r.key),r)}}function $p(e){var t=function(e,t){if("object"!=Xp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xp(t)?t:t+""}function Wp(e,t,n){return t=Zp(t),function(e,t){if(t&&("object"==Xp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Zp(e).constructor):t.apply(e,n))}function Zp(e){return(Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qp(e,t){return(Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Jp=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Wp(this,t,[e])).state=n.getResetState(),n.update=n.update.bind(n),n.onSelect=n.onSelect.bind(n),n.isValidSelection=n.isValidSelection.bind(n),n.resetCustomValues=n.resetCustomValues.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qp(e,t)}(t,e),function(e,t,n){return t&&Kp(e.prototype,t),n&&Kp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,n=e.compare,r=e.before,o=e.after;return{period:t,compare:n,before:r,after:o,focusedInput:"startDate",afterText:this.formatDate(o,Object(Ru.Z)()),beforeText:this.formatDate(r,Object(Ru.Z)()),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var n=this,r=this.props,o=r.isoDateFormat,a=r.onRangeSelect;return function(r){var i=n.state,c=i.period,u=i.compare,l=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:u};"custom"===e?(f.after=n.formatDate(l,o),f.before=n.formatDate(s,o)):(f.after=void 0,f.before=void 0),a(f),t(r)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,n=e.secondaryDate,r=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||r.push("".concat(Object(Mu.__)("vs.","funnel-builder")," ").concat(n.label," (").concat(n.range,")")),r}},{key:"isValidSelection",value:function(e){var t=this.state,n=t.compare,r=t.after,o=t.before;return"custom"!==e||n&&r&&o}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.period,o=t.compare,a=t.after,i=t.before,c=t.focusedInput,u=t.afterText,l=t.beforeText,s=t.afterError,f=t.beforeError,d=this.props.disablePresets,p=void 0!==d&&d;return Object(r.createElement)("div",{className:Iu()("bwf-filters-filter",{"bwf-presets-disable":p})},Object(r.createElement)(hf.a,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(Gp.a,{onClick:o,isOpen:n,labels:e.getButtonLabel()})},renderContent:function(t){var d=t.onClose;return Object(r.createElement)(Hp,{period:n,compare:o,hideCompare:e.props.hideCompare,after:a,before:i,onUpdate:e.update,onClose:d,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:c,afterText:u,beforeText:l,afterError:s,beforeError:f,shortDateFormat:Ru.c,disablePresets:p})}}))}}])}(r.Component);Jp.propTypes={onRangeSelect:ff.a.func.isRequired,dateQuery:ff.a.shape({period:ff.a.string.isRequired,compare:ff.a.string.isRequired,before:ff.a.object,after:ff.a.object,primaryDate:ff.a.shape({label:ff.a.string.isRequired,range:ff.a.string.isRequired}).isRequired,secondaryDate:ff.a.shape({label:ff.a.string.isRequired,range:ff.a.string.isRequired}).isRequired}).isRequired};var eb=Jp,tb=n(275),nb=n(612),rb=n(51),ob=Object(r.createElement)(rb.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(rb.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),ab=n(287),ib=n(179);n(674);function cb(e){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ub(){return(ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sb(r.key),r)}}function sb(e){var t=function(e,t){if("object"!=cb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cb(t)?t:t+""}function fb(e,t,n){return t=db(t),function(e,t){if(t&&("object"==cb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],db(e).constructor):t.apply(e,n))}function db(e){return(db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pb(e,t){return(pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var bb=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=fb(this,t)).state={animate:null},e.container=Object(r.createRef)(),e.onExited=e.onExited.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pb(e,t)}(t,e),function(e,t,n){return t&&lb(e.prototype,t),n&&lb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"onExited",value:function(){var e=this.props.onExited;e&&e(this.container.current)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.animationKey,o=e.animate,a=Iu()("bwf-slide-animation",o&&"animate-".concat(o));return Object(r.createElement)("div",{className:a,ref:this.container},Object(r.createElement)(ab.a,null,Object(r.createElement)(ib.a,ub({timeout:200,classNames:"slide",key:n},this.props,{onExited:this.onExited}),(function(e){return t({status:e})}))))}}])}(r.Component);bb.propTypes={children:ff.a.func.isRequired,animationKey:ff.a.any.isRequired,animate:ff.a.oneOf([null,"left","right"]),onExited:ff.a.func};var yb=bb;n(675);function mb(e){return(mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hb(Object(n),!0).forEach((function(t){gb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gb(e,t,n){return(t=_b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ob(e){return function(e){if(Array.isArray(e))return wb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wb(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_b(r.key),r)}}function _b(e){var t=function(e,t){if("object"!=mb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mb(t)?t:t+""}function Eb(e,t,n){return t=Sb(t),function(e,t){if(t&&("object"==mb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Sb(e).constructor):t.apply(e,n))}function Sb(e){return(Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xb(e,t){return(xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var kb=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=Eb(this,t,[e])).getFilter();if(n.state={nav:r.path||[],animate:null,selectedTag:null},n.selectSubFilter=n.selectSubFilter.bind(n),n.getVisibleFilters=n.getVisibleFilters.bind(n),n.updateSelectedTag=n.updateSelectedTag.bind(n),n.onTagChange=n.onTagChange.bind(n),n.onContentMount=n.onContentMount.bind(n),n.goBack=n.goBack.bind(n),r.settings&&r.settings.getLabels){var o=n.props.query,a=r.settings,i=a.param;(0,a.getLabels)(o[i],o).then(n.updateSelectedTag)}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xb(e,t)}(t,e),function(e,t,n){return t&&jb(e.prototype,t),n&&jb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidUpdate",value:function(e){var t=e.query,n=this.props,r=n.query,o=n.config;if(t[o.param]!==r[[o.param]]){var a=this.getFilter();if(a&&"Search"===a.component){this.setState({nav:a.path||[]});var i=a.settings,c=i.param;(0,i.getLabels)(r[c],r).then(this.updateSelectedTag)}}}},{key:"updateSelectedTag",value:function(e){this.setState({selectedTag:e[0]})}},{key:"getFilter",value:function(e){var t=this.props,n=t.config,r=t.query,o=Object(tl.a)(n.filters);return e=e||r[n.param]||n.defaultValue||"all",Object(Tu.find)(o,{value:e})||{}}},{key:"getButtonLabel",value:function(e){if("Search"===e.component){var t=this.state.selectedTag;return[t&&t.label,Object(Tu.get)(e,"settings.labels.button")]}return e?[e.label]:[]}},{key:"getVisibleFilters",value:function(e,t){if(0===t.length)return e;var n=t[0],r=Object(Tu.find)(e,{value:n});return this.getVisibleFilters(r&&r.subFilters,t.slice(1))}},{key:"selectSubFilter",value:function(e){this.setState((function(t){return{nav:[].concat(Ob(t.nav),[e]),animate:"left"}}))}},{key:"goBack",value:function(){this.setState((function(e){return{nav:e.nav.slice(0,-1),animate:"right"}}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.path,o=n.query,a=n.config,i=n.onFilterSelect,c=Object(tl.h)(o),u=vb(gb({},a.param,(a.defaultValue||"all")===e?void 0:e),t);a.staticParams.forEach((function(e){u[e]=o[e]})),Object(tl.k)(u,r,c),i(u)}},{key:"onTagChange",value:function(e,t,n,r){var o=Object(Tu.last)(r),a=e.value,i=e.settings.param;o?(this.update(a,gb({},i,o.key)),t()):this.update(n.defaultValue||"all"),this.updateSelectedTag([o])}},{key:"renderButton",value:function(e,t,n){var o=this;if(e.component){var a=e.settings,i=a.type,c=a.labels,u=this.getFilter().value===e.value?this.state.selectedTag:null;return Object(r.createElement)(Nf.a,{className:"bwf-filters-filter-search",type:i,placeholder:c.placeholder,selected:u?[u]:[],onChange:Object(Tu.partial)(this.onTagChange,e,t,n),inlineTags:!0,staticResults:!0})}var l=Object(Tu.partial)(this.selectSubFilter,e.value),s=this.getFilter(),f=s.value===e.value||s.path&&Object(Tu.includes)(s.path,e.value);return Object(r.createElement)(Au.Button,{className:"bwf-filters-filter-button",onClick:function(n){f?t(n):e.subFilters?l(n):function(n){t(n),o.update(e.value,e.query||{}),o.setState({selectedTag:null})}(n)}},e.label)}},{key:"onContentMount",value:function(e){var t=this.state.nav,n=!!t.length&&this.getFilter(t[t.length-1])?1:0,r=tb.focus.tabbable.find(e)[n];setTimeout((function(){r.focus()}),0)}},{key:"render",value:function(){var e=this,t=this.props.config,n=this.state,o=n.nav,a=n.animate,i=this.getVisibleFilters(t.filters,o),c=!!o.length&&this.getFilter(o[o.length-1]),u=this.getFilter();return Object(r.createElement)("div",{className:"bwf-filters-filter"},t.label&&Object(r.createElement)("span",{className:"bwf-filters-label"},t.label,":"),Object(r.createElement)(hf.a,{contentClassName:"bwf-filters-filter-content",position:"bottom",expandOnMobile:!0,headerTitle:Object(Mu.__)("filter report to show:","funnel-builder"),renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(Gp.a,{onClick:o,isOpen:n,labels:e.getButtonLabel(u)})},renderContent:function(n){var l=n.onClose;return Object(r.createElement)(yb,{animationKey:o,animate:a,onExited:e.onContentMount},(function(){return Object(r.createElement)("ul",{className:"bwf-filters-filter-content-list"},c&&Object(r.createElement)("li",{className:"bwf-filters-filter-content-list-item"},Object(r.createElement)(Au.Button,{className:"bwf-filters-filter-button",onClick:e.goBack},Object(r.createElement)(nb.a,{icon:ob}),c.label)),i.map((function(n){return Object(r.createElement)("li",{key:n.value,className:Iu()("bwf-filters-filter-content-list-item",{"is-selected":u.value===n.value||u.path&&Object(Tu.includes)(u.path,n.value)})},e.renderButton(n,l,t))})))}))}}))}}])}(r.Component);kb.propTypes={config:ff.a.shape({label:ff.a.string,staticParams:ff.a.array.isRequired,param:ff.a.string.isRequired,defaultValue:ff.a.string,showFilters:ff.a.func.isRequired,filters:ff.a.arrayOf(ff.a.shape({chartMode:ff.a.oneOf(["item-comparison","time-comparison"]),component:ff.a.string,label:ff.a.string,path:ff.a.string,subFilters:ff.a.array,value:ff.a.string.isRequired}))}).isRequired,path:ff.a.string.isRequired,query:ff.a.object,onFilterSelect:ff.a.func};var Pb=Object(gd.a)(kb,{query:{},onFilterSelect:function(){}});n(676);function Cb(e){return(Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nb(){return(Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Db(r.key),r)}}function Db(e){var t=function(e,t){if("object"!=Cb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cb(t)?t:t+""}function Ib(e,t,n){return t=Mb(t),function(e,t){if(t&&("object"==Cb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Mb(e).constructor):t.apply(e,n))}function Mb(e){return(Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ab(e,t){return(Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Rb=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ib(this,t)).renderCard=e.renderCard.bind(e),e.onRangeSelect=e.onRangeSelect.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ab(e,t)}(t,e),function(e,t,n){return t&&Tb(e.prototype,t),n&&Tb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"renderCard",value:function(e){var t=this.props,n=t.siteLocale,o=t.advancedFilters,a=t.query,i=t.path,c=t.onAdvancedFilterAction,u=t.currency,l=e.filters,s=e.param;if(!a[s])return null;if(0===a[s].indexOf("compare")){var f=Object(Tu.find)(l,{value:a[s]});if(!f)return null;var d=f.settings,p=void 0===d?{}:d;return Object(r.createElement)("div",{key:s,className:"bwf-filters-advanced-filters"},Object(r.createElement)(Gd,Nb({path:i,query:a},p)))}return"advanced"===a[s]?Object(r.createElement)("div",{key:s,className:"bwf-filters-advanced-filters"},Object(r.createElement)(Md,{siteLocale:n,currency:u,config:o,path:i,query:a,onAdvancedFilterAction:c})):void 0}},{key:"onRangeSelect",value:function(e){var t=this.props,n=t.query,r=t.path,o=t.onDateSelect,a=t.updateQuery,i=void 0===a||a;e.after&&(e.after=lf()(Object(cf.a)(lf()(e.after),"start")).format("YYYY-MM-DD HH:mm:ss")),e.before&&(lf()(lf()().format("YYYY-MM-DD")).isSame(e.before)?e.before=lf()(Object(cf.a)(lf()(e.before),"now")).format("YYYY-MM-DD HH:mm:ss"):e.before=lf()(Object(cf.a)(lf()(e.before),"end")).format("YYYY-MM-DD HH:mm:ss")),i&&Object(tl.k)(e,r,n),o(e)}},{key:"getDateQuery",value:function(e){var t=Object(cf.e)(e),n=t.period,r=t.compare,o=t.before,a=t.after,i=Object(cf.d)(e);return{period:n,compare:r,before:o,after:a,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"render",value:function(){var e=this.props,t=e.dateQuery,n=e.filters,o=e.query,a=e.path,i=e.showDatePicker,c=e.onFilterSelect,u=e.isoDateFormat,l=e.hideCompare;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(kp.a,{className:"screen-reader-text"},Object(Mu.__)("Filters","funnel-builder")),Object(r.createElement)(kp.b,{component:"div",className:"bwf-filters"},Object(r.createElement)("div",{className:"bwf-filters-basic-filters"},i&&Object(r.createElement)(eb,{key:JSON.stringify(o),dateQuery:t||this.getDateQuery(o),onRangeSelect:this.onRangeSelect,isoDateFormat:u,hideCompare:l}),n.map((function(e){return e.showFilters(o)?Object(r.createElement)(Pb,{key:e.param,config:e,query:o,path:a,onFilterSelect:c}):null}))),n.map(this.renderCard)))}}])}(r.Component);Rb.propTypes={siteLocale:ff.a.string,advancedFilters:ff.a.object,filters:ff.a.array,path:ff.a.string.isRequired,query:ff.a.object,showDatePicker:ff.a.bool,onDateSelect:ff.a.func,onFilterSelect:ff.a.func,onAdvancedFilterAction:ff.a.func,currency:ff.a.object,dateQuery:ff.a.shape({period:ff.a.string.isRequired,compare:ff.a.string.isRequired,before:ff.a.object,after:ff.a.object,primaryDate:ff.a.shape({label:ff.a.string.isRequired,range:ff.a.string.isRequired}).isRequired,secondaryDate:ff.a.shape({label:ff.a.string.isRequired,range:ff.a.string.isRequired})}),hideCompare:ff.a.bool,isoDateFormat:ff.a.string};var Fb={siteLocale:"en_US",advancedFilters:{},filters:[],query:{},showDatePicker:!0,onDateSelect:function(){},currency:Object(df.a)().getCurrencyConfig(),hideCompare:!1};Object(gd.a)(Rb,Fb),n(25);n(318),n(677);n(297);n(678);n(679);n(680);var Lb=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.selected,n.title),a=n.sub_title,i=n.type,c=void 0===i?"":i;return Object(r.createElement)("div",{className:Iu()("bwf-node-wrapper bwf-section-node")},Object(r.createElement)(Ec,{type:"target",position:"top",isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-brick is-section-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(Wu.a,{size:36,icon:c.includes("landing")?"landing-flow":c.includes("bump")?"wc_order_bump-flow":c.includes("checkout")?"wc_checkout-flow":c.includes("offer")?"offer-flow":c.includes("upsell")?"upsells-flow":c.includes("wc_thankyou")?"wc_thankyou-flow":c.includes("optin_ty")?"optin_ty-flow":"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object($u.decodeEntities)(a)),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object($u.decodeEntities)(o))))),Object(r.createElement)(Ec,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}))},Bb=n(681),qb=n.n(Bb);function zb(e){return(zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ub=["sourceEdgeType"];function Yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yb(Object(n),!0).forEach((function(t){Hb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zb(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gb(e){return function(e){if(Array.isArray(e))return Xb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xb(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.id,o=void 0===r?"":r,a=e.data,i=void 0===a?{}:a,c=n.hasOwnProperty("maparr")&&n.maparr.hasOwnProperty(o)?n.maparr[o]:[],u=1==c.length?c[0]:0,l=0!=u&&n.hasOwnProperty("source")&&n.source.hasOwnProperty(u)?n.source[u]:[],s=i.type,f=void 0===s?"":s,d=0;switch(e.type){case"step":d=122;var p=i._data,b=void 0===p?{}:p,y=i.tags,m=void 0===y?[]:y,h=i.experiment_status,v=void 0===h?"":h,g=b.status,O=void 0===g?"":g;Object(Tu.isEmpty)(m)&&O&&1===parseInt(O)&&(Object(Tu.isEmpty)(v)||"4"===v)||(d+=42),["wc_upsells"].includes(f)&&(d-=58);break;case"rule":d=110;break;case"condition":d=115;break;case"conditional-alter":var w=Object(Tu.flatten)(e.data.sidebarValues).length,j=w-1;d=w?32*w+29*j+100:150;break;case"addNode":d=24;break;case"btnNode":d=45;break;case"sectionNode":d=90;break;case"start":d=30;break;case"end":d=25;break;case"merger":d=0;break;default:d=95}return c.length>2&&(d+=10*c.length),l.length>2&&(d+=20*l.length),d+t},$b=function(e){if(!e||!e.type)return 325;switch(e.type){case"rule":return 75;case"step":default:return 325}},Wb=function(e){var t=new qb.a.graphlib.Graph;t.setDefaultEdgeLabel((function(){return{}})),t.setGraph({rankdir:"TB",ranksep:80,nodesep:100});var n=function(e){var t=[],n=[],r=[];return e.map((function(e){if(e.hasOwnProperty("source")&&e.hasOwnProperty("target")){t.hasOwnProperty(e.source)?t[e.source].includes(e.target)||(t[e.source]=[e.target].concat(Gb(t[e.source]))):t[e.source]=[e.target],n.hasOwnProperty(e.target)?n[e.target].includes(e.source)||(n[e.target]=[e.source].concat(Gb(n[e.target]))):n[e.target]=[e.source];var o=e.type?e.type:"default";r.hasOwnProperty(e.target)?r[e.target].includes(e.type)||(r[e.target]=[o].concat(Gb(r[e.target]))):r[e.target]=[o]}})),{source:n,maparr:t,sourceEdgeType:r}}(e),r=n.sourceEdgeType,o=void 0===r?{}:r,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,Ub);return e.forEach((function(e){ut(e)?t.setNode(e.id,{width:325,height:Kb(e,0,a)}):t.setEdge(e.source,e.target)})),qb.a.layout(t),e.map((function(e){if(ut(e)){var n=t.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var r=Kb(e,"condition"===e.type?50:100);e.position={x:n.x-$b(e)/2+Math.random()/1e3,y:n.y-r/2};var a={};a=o.hasOwnProperty(e.id)?{bwfSourceEdgeType:o[e.id],orphanNode:!1}:{orphanNode:!0},e.data=Vb(Vb({},e.data),a)}else e.type;return e}))};function Zb(e){return(Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qb(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(Zb(e)+" is not iterable")}function Jb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||oy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ey(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oy(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function ty(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return ny(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ny(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ny(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,ny(f,"constructor",l),ny(l,"constructor",u),u.displayName="GeneratorFunction",ny(l,o,"GeneratorFunction"),ny(f),ny(f,o,"Generator"),ny(f,r,(function(){return this})),ny(f,"toString",(function(){return"[object Generator]"})),(ty=function(){return{w:a,m:d}})()}function ny(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(ny=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){ny(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function ry(e){return function(e){if(Array.isArray(e))return ay(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oy(e,t){if(e){if("string"==typeof e)return ay(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ay(e,t):void 0}}function ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach((function(t){uy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Zb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zb(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ly(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function sy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ly(a,r,o,i,c,"next",e)}function c(e){ly(a,r,o,i,c,"throw",e)}i(void 0)}))}}var fy={expired:{label:Object(Mu.__)("License Expired","funnel-builder"),label_class:"bwf-st-c-badge-red"}},dy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o={},a={},i=function(e,n,c,u,l,s){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";return new Promise(function(){var b=sy(ty().m((function b(y){var m,h,v,g,O,w,j,_,E,S,x,k,P,C,N,T,D,I,M,A,R,F,L,B,q,z,U,Y,V,H,G;return ty().w((function(b){for(;;)switch(b.n){case 0:if(m=[],v="node-".concat(h=n,"-offer-").concat(e),++h,a[v]=p,g="node-".concat(e,"-accept"),O="node-".concat(e,"-reject"),m.push({type:"step",id:v,data:cy(cy({},t[e]),{},{type:"offer",upsellId:d,mainIndex:u,stepIndex:l},r&&{tags:cy({},fy)})},{type:"condition",id:g,data:{type:"success",title:"Accept"}},{id:"edge-id-".concat(e,"-accept-").concat(u,"-").concat(l,"-").concat(s),source:v,target:g},{type:"condition",id:O,data:{type:"error",title:"Reject"}},{id:"edge-id-".concat(e,"-reject-").concat(u,"-").concat(l,"-").concat(s),source:v,target:O}),w=t&&t[e]&&t[e].hasOwnProperty("accept")&&!["","automatic","terminate"].includes(t[e].accept)&&parseInt(t[e].accept)!==parseInt(e)?t[e].accept:"",j=t&&t[e]&&t[e].hasOwnProperty("reject")&&!["","automatic","terminate"].includes(t[e].reject)&&parseInt(t[e].reject)!==parseInt(e)?t[e].reject:"",""!==w||""!==j){b.n=1;break}_=c,m.push({id:"edge-id-".concat(e,"-afteraccept-").concat(u,"-").concat(l,"-").concat(s),source:"node-".concat(e,"-accept"),type:"bwf-default",target:_,data:{offer:e,branch:"accept",upsellId:d,mainIndex:u,stepIndex:l}}),m.push({id:"edge-id-".concat(e,"-afterreject-").concat(u,"-").concat(l,"-").concat(s),source:"node-".concat(e,"-reject"),type:"bwf-default",target:_,data:{offer:e,branch:"reject",upsellId:d,mainIndex:u,stepIndex:l}}),b.n=13;break;case 1:if(""===w||""===j||w!=j||0==w){b.n=5;break}if(E="node-offer-".concat(e,"-merger"),m.push({type:"merger",id:E,data:{offerCommon:!0,offerId:e,upsellId:d,mainIndex:u,stepIndex:l}}),m.push({id:"edge-id-".concat(e,"-afteraccept-").concat(u,"-").concat(l,"-").concat(s),source:"node-".concat(e,"-accept"),type:"bwf-default",target:E,data:{offer:e,branch:"accept",upsellId:d,mainIndex:u,stepIndex:l}}),m.push({id:"edge-id-".concat(e,"-afterreject-").concat(u,"-").concat(l,"-").concat(s),source:"node-".concat(e,"-reject"),type:"bwf-default",target:E,data:{offer:e,branch:"reject",upsellId:d,mainIndex:u,stepIndex:l}}),!o||!o.hasOwnProperty(w)){b.n=2;break}m.push({id:"edge-".concat(g,"-").concat(o[w],"-offeredge"),source:E,target:o[w]}),a.hasOwnProperty(o[w])&&delete a[o[w]],b.n=4;break;case 2:return b.n=3,i(parseInt(t[e].accept),h,c,u,l,s,f,d,p);case 3:S=b.v,x=S.offerNode,k=void 0===x?[]:x,P=S.newNodeCount,C=void 0===P?0:P,N=S.offerSource,T=void 0===N?"":N,Object(Tu.isEmpty)(k)||m.push.apply(m,ry(Object(Tu.cloneDeep)(k))),o[e]=v,m.push({id:"edge-id-".concat(e,"-after-accept-").concat(t[e].accept,"-").concat(u,"-").concat(l,"-").concat(s),source:E,target:T}),a.hasOwnProperty(T)&&delete a[T],C>0&&(h=C);case 4:b.n=13;break;case 5:if(D=c,""!=w&&0!=w){b.n=6;break}m.push({id:"edge-id-".concat(e,"-afteraccept-").concat(u,"-").concat(l,"-").concat(s),source:"node-".concat(e,"-accept"),type:"bwf-default",target:f,data:{offer:e,branch:"accept",upsellId:d,mainIndex:u,stepIndex:l}}),b.n=9;break;case 6:if(!o||!o.hasOwnProperty(t[e].accept)){b.n=7;break}m.push({id:"edge-".concat(g,"-").concat(o[t[e].accept],"-offeredge"),source:g,target:o[t[e].accept],type:"bwf-default",data:{offer:e,branch:"accept",upsellId:d,mainIndex:u,stepIndex:l}}),a.hasOwnProperty(o[t[e].accept])&&delete a[o[t[e].accept]],b.n=9;break;case 7:return b.n=8,i(parseInt(t[e].accept),h,D,u,l,s,f,d,p);case 8:I=b.v,M=I.offerNode,A=void 0===M?[]:M,R=I.newNodeCount,F=void 0===R?0:R,L=I.offerSource,B=void 0===L?"":L,Object(Tu.isEmpty)(A)||m.push.apply(m,ry(Object(Tu.cloneDeep)(A))),m.push({id:"edge-id-".concat(e,"-after-accept-").concat(t[e].accept,"-").concat(u,"-").concat(l,"-").concat(s),source:g,target:B,type:"bwf-default",data:{offer:e,branch:"accept",upsellId:d,mainIndex:u,stepIndex:l}}),a.hasOwnProperty(B)&&delete a[B],F>0&&(h=F);case 9:if(""!=j&&0!=j){b.n=10;break}m.push({id:"edge-id-".concat(e,"-afterreject-").concat(u,"-").concat(l,"-").concat(s),source:"node-".concat(e,"-reject"),type:"bwf-default",target:f,data:{offer:e,branch:"reject",upsellId:d,mainIndex:u,stepIndex:l}}),b.n=13;break;case 10:if(!o.hasOwnProperty(t[e].reject)){b.n=11;break}m.push({id:"edge-".concat(O,"-").concat(o[t[e].reject],"-offeredge"),source:O,target:o[t[e].reject],type:"bwf-default",data:{offer:e,branch:"reject",upsellId:d,mainIndex:u,stepIndex:l}}),a.hasOwnProperty(o[t[e].reject])&&delete a[o[t[e].reject]],b.n=13;break;case 11:return b.n=12,i(parseInt(t[e].reject),h,D,u,l,s,f,d,p);case 12:q=b.v,z=q.offerNode,U=void 0===z?[]:z,Y=q.newNodeCount,V=void 0===Y?0:Y,H=q.offerSource,G=void 0===H?"":H,Object(Tu.isEmpty)(U)||m.push.apply(m,ry(Object(Tu.cloneDeep)(U))),m.push({id:"edge-id-".concat(e,"-after-reject-").concat(t[e].reject,"-").concat(u,"-").concat(l,"-").concat(s),source:O,target:G,type:"bwf-default",data:{offer:e,branch:"reject",upsellId:d,mainIndex:u,stepIndex:l}}),a.hasOwnProperty(G)&&delete a[G],V>0&&(h=V);case 13:o[e]=v,y({offerNode:m,newNodeCount:h,offerSource:v});case 14:return b.a(2)}}),b)})));return function(e){return b.apply(this,arguments)}}())},c=function(){var e=sy(ty().m((function e(c){var u,l,s,f,d,p,b,y,m,h,v,g,O,w,j,_,E,S,x,k,P;return ty().w((function(e){for(;;)switch(e.n){case 0:if(u=[],!Object(Tu.isEmpty)(c)){e.n=1;break}u=[{type:"start",id:"start"},{type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"},{id:"edge-id-1",source:"fb-empty",target:"end"},{type:"end",id:"end"}],e.n=9;break;case 1:l="start",s=1,f=!1,u=[{type:"start",id:"start"}],d=Object(Ru.kb)()?"start":"node-".concat(s),l=d,++s,p=!1,b=!1,y=!1,m=ey(c);try{for(m.s();!(h=m.n()).done;)"wc_upsells"===(v=h.value).type&&(p=!0),"wc_checkout"===v.type&&(b=!0),"wc_thankyou"===v.type&&(y=!0)}catch(e){m.e(e)}finally{m.f()}g=ey(c.entries()),e.p=2,w=ty().m((function e(){var c,d,m,h,v,g,w,j,_,E,S,x,k,P,C,N,T,D,I,M,A,R,F,L,B,q,z,U,Y,V,H,G,X,K,$,W,Z,Q,J,ee,te,ne,re,oe,ae,ie,ce,ue,le,se,fe,de,pe,be,ye,me,he,ve,ge;return ty().w((function(e){for(;;)switch(e.n){case 0:c=Jb(O.value,2),d=c[0],m=c[1],h=m.type,v=void 0===h?"":h,g=m.steps,w=void 0===g?[]:g,j="start",he=v,e.n="optin"===he||"optin_ty"===he||"wc_thankyou"===he||"landing"===he?1:"wc_native"===he||"wc_checkout"===he?2:"wc_upsells"===he?3:23;break;case 1:if(!Object(Tu.isEmpty)(w)){_="node-".concat(s),"wc_thankyou"===v?(f=!0,_="end"):++s,E="",S="",x=ey(w.entries());try{for(x.s();!(k=x.n()).done;)P=Jb(k.value,2),C=P[0],N=P[1],T=N.id,E=D=void 0===T?"":T,j=D,0==C&&(S=D),I="node-".concat(s),u.push({type:"step",id:I,data:cy(cy({},t[D]),{},{mainIndex:d,stepIndex:C,subIndex:""})},{id:"edge-".concat(l,"-").concat(I),source:l,target:I},{id:"edge-".concat(I,"-").concat(_),source:I,target:_}),++s}catch(e){x.e(e)}finally{x.f()}"wc_thankyou"!==v&&(M=["optin","landing"],"optin"===v&&M.push("optin_ty"),b||M.push("wc_checkout"),u.push({type:"addNode",id:_,data:{mainIndex:d,lastParentId:E,prevFirstParent:S,currentParentType:v,lastIteratedStep:j,allowedSteps:M,hasCheckout:b}})),l=_}return e.a(3,23);case 2:return Object(Tu.isEmpty)(w)||(A="node-".concat(s),R="",++s,F="",w.map((function(e,r){var o=e.id,a=void 0===o?"":o,i=e.substeps,c=void 0===i?[]:i;R=a,j=a,0===r&&(F=a);var f="node-".concat(s);++s,Object(Tu.isEmpty)(c)?(t[a].tags.hasOwnProperty("no_bump")||(t[a].tags.no_bump={label:Object(Mu.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}),u.push({type:"wc_native"===v?"emptyNode":"step",id:f,data:cy(cy({},t[a]),{},{mainIndex:d,stepIndex:r,subIndex:"",emptyNodeLabel:"wc_native"===v?"Add Checkout":"",allowedSteps:"wc_native"===v?["wc_checkout"]:[],replaceCurrentStep:!0,prevFirstParent:R,type:v})},{id:"edge-".concat(l,"-").concat(f),source:l,target:f},{type:"btnNode",id:"bump-".concat(f),data:{title:"Add Order Bump",type:"wc_order_bump",icon:"order-bump",prevFirstParent:R,mainIndex:d,stepIndex:r}},{id:"edge-".concat(f,"-bump-").concat(f),source:f,target:"bump-".concat(f)},{id:"edge-bump-".concat(f,"-").concat(A),source:"bump-".concat(f),target:A})):(delete t[a].tags.no_bump,u.push({type:"wc_native"===v?"emptyNode":"step",id:f,data:cy(cy({},t[a]),{},{mainIndex:d,stepIndex:r,prevFirstParent:R,emptyNodeLabel:"wc_native"===v?"Add Checkout":"",allowedSteps:"wc_native"===v?["wc_checkout"]:[],replaceCurrentStep:!0})},{id:"edge-".concat(l,"-").concat(f),source:l,target:f}),c.map((function(e,o){var a=e.id,i=void 0===a?"":a,c=(e.tags,"node-".concat(s));++s,u.push({type:"step",id:c,data:cy(cy({},t[i]),{},{mainIndex:d,stepIndex:r,subIndex:o,parent_id:R},n&&{tags:cy({},fy)})},{id:"edge-".concat(f,"-").concat(c),source:f,target:c},{id:"edge-".concat(c,"-").concat(A),source:c,target:A})})))})),L=[],p||L.push("wc_upsells"),p||y||L.push("wc_thankyou"),u.push({type:0===L.length?"merger":"addNode",id:A,data:{mainIndex:d,lastParentId:R,currentParentType:v,prevFirstParent:F,lastIteratedStep:j,allowedSteps:L,newUpsell:!0}}),l=A),e.a(3,23);case 3:if(Object(Tu.isEmpty)(w)){e.n=22;break}B="",q="node-".concat(s),++s,z=ey(w.entries()),e.p=4,z.s();case 5:if((U=z.n()).done){e.n=18;break}if(Y=Jb(U.value,2),V=Y[0],H=Y[1],G=H.id,X=void 0===G?"":G,K=H.substeps,$=void 0===K?[]:K,B=parseInt(X),j=X,W="node-".concat(s,"-upsell-start-").concat(V),++s,Z=cy({},t[parseInt(X)]),(Z=cy(cy({},Z),{},{mainIndex:d,stepIndex:V})).hasOwnProperty("tags")?Z.tags=cy(cy({start:{label:Object(Mu.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&fy),Z.tags):Z.tags=cy({start:{label:Object(Mu.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&fy),u.push({type:"step",id:W,data:cy({},Z)},{id:"edge-".concat(l,"-").concat(W),source:l,target:W}),++s,Q="node-".concat(s,"-upsell-end-").concat(V),++s,!Object(Tu.isEmpty)($)){e.n=6;break}J="node-".concat(s),++s,u.push({type:"btnNode",id:J,data:{title:"Add Offer",type:"offer",mainIndex:d,stepIndex:0,icon:"offer-flow",prevFirstParent:B}},{id:"edge-".concat(W,"-").concat(J),source:W,target:J},{id:"edge-".concat(J,"-").concat(Q),source:J,target:Q}),u.push({type:"step",id:Q,data:cy(cy({},t[parseInt(X)]),{},{upsellEnd:!0,mainIndex:d,tags:cy({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&fy)})},{id:"edge-".concat(Q,"-").concat(q),source:Q,target:q}),e.n=17;break;case 6:ee=ey($.entries()),e.p=7,ee.s();case 8:if((te=ee.n()).done){e.n=13;break}if(ne=Jb(te.value,2),re=ne[0],oe=ne[1],ae=oe.id,ie=void 0===ae?"":ae,ce="",!o||!o.hasOwnProperty(parseInt(ie))){e.n=9;break}ce=o[parseInt(ie)],e.n=11;break;case 9:return e.n=10,i(parseInt(ie),s,Q,d,V,re,Q,B,W);case 10:ue=e.v,le=ue.offerNode,se=void 0===le?[]:le,fe=ue.newNodeCount,de=void 0===fe?0:fe,pe=ue.offerSource,be=void 0===pe?"":pe,Object(Tu.isEmpty)(se)||(ye=u).push.apply(ye,ry(Object(Tu.cloneDeep)(se))),de>0&&(s=de),0==parseInt(re)&&(ce=be);case 11:0==parseInt(re)&&""!=ce&&(u.push({id:"edge-".concat(W,"-").concat(ce,"-offeredge"),source:W,target:ce}),a.hasOwnProperty(ce)&&delete a[ce]);case 12:e.n=8;break;case 13:e.n=15;break;case 14:e.p=14,ve=e.v,ee.e(ve);case 15:return e.p=15,ee.f(),e.f(15);case 16:me="node-".concat(s,"-upsell-end-node-").concat(V),s++,u.push({type:"addNode",id:Q,data:{upsellAfterId:parseInt(X),upsellEndAddLast:!0,mainIndex:d,stepIndex:V,prevFirstParent:B,allowedSteps:["offer"]}},{id:"edge-".concat(me,"-").concat(q),source:Q,target:me},{type:"step",id:me,data:cy(cy({},t[parseInt(X)]),{},{upsellEnd:!0,mainIndex:d,tags:cy({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&fy)})},{id:"edge-".concat(me,"-").concat(q,"-2"),source:me,target:q});case 17:e.n=5;break;case 18:e.n=20;break;case 19:e.p=19,ge=e.v,z.e(ge);case 20:return e.p=20,z.f(),e.f(20);case 21:u.push({type:y?"merger":"addNode",id:q,data:{mainIndex:d,lastParentId:B,currentParentType:v,allowedSteps:["wc_thankyou"],lastIteratedStep:j}}),l=q;case 22:return e.a(3,23);case 23:return e.a(2)}}),e,null,[[7,14,15,16],[4,19,20,21]])})),g.s();case 3:if((O=g.n()).done){e.n=5;break}return e.d(Qb(w()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,P=e.v,g.e(P);case 7:return e.p=7,g.f(),e.f(7);case 8:if(l==d?(u.push({type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"}),l="fb-empty"):Object(Ru.kb)()?u.push({id:"edge-start-node-".concat(s),source:"start",target:d}):(j=["optin","landing"],b||j.push("wc_checkout"),u.push({type:"addNode",id:d,data:{mainIndex:"start",allowedSteps:j,prevFirstParent:"start",lastIteratedStep:"start"}},{id:"edge-start-node-".concat(s),source:"start",target:d})),f?u.push({type:"end",id:"end"}):u.push({id:"edge-".concat(l,"-end"),source:l,target:"end"},{type:"end",id:"end"}),!Object(Tu.isEmpty)(a))for(_=Object.keys(a),E=0,S=_;E<S.length;E++)x=S[E],k=a[x],u.push({id:"edge-orphan-node-".concat(s),source:k,target:x,animated:!0,type:"bwf-orphan",data:{bwfSourceEdgeType:"yes"}}),s++;case 9:return e.a(2,u)}}),e,null,[[2,6,7,8]])})));return function(t){return e.apply(this,arguments)}}();return c(e)};function py(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return by(l,"_invoke",function(n,r,o){var a,c,u,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,u=e,d.n=n,i}};function p(n,r){for(c=n,u=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,b=a[2];n>3?(o=b===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,d.n=b,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),c=s,u=b;(t=c<2?e:u)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,u)):d.n=u:d.v=u);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==i)break}catch(t){a=e,c=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),l}var i={};function c(){}function u(){}function l(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(by(t={},r,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,by(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,by(f,"constructor",l),by(l,"constructor",u),u.displayName="GeneratorFunction",by(l,o,"GeneratorFunction"),by(f),by(f,o,"Generator"),by(f,r,(function(){return this})),by(f,"toString",(function(){return"[object Generator]"})),(py=function(){return{w:a,m:d}})()}function by(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(by=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){by(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function yy(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function my(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hy(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vy=function(e){var t=e.fullScreen,n=e.setCanvasFullScreen,o=(e.showExperiment,e.funnelId,bc().setCenter),a=$e(),i=Hu(),c=i.isLoading,u=i.getNodeElements,l=void 0===u?[]:u,s=i.getStepsList,f=my(Object(r.useState)([]),2),d=f[0],p=f[1],b=my(Object(r.useState)(!1),2),y=b[0],m=b[1],h=Object(r.useRef)(),v=my(Object(r.useState)(!1),2),g=v[0],O=v[1],w=l(),j=s(),_=Object(ll.b)().isExpired,E=Object(ll.b)("ul").isExpired,S=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yy(a,r,o,i,c,"next",e)}function c(e){yy(a,r,o,i,c,"throw",e)}i(void 0)}))}}(py().m((function e(t){var n;return py().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,dy(t,j,_,E);case 1:n=e.v,p(Wb(n));case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(el.a)().resetFunnel;Object(r.useEffect)((function(){c||(S(w),O(!0)),g&&x()}),[w,j]);var k=Xe((function(e){return e.setSelectedElements})),P={"bwf-default":of,"bwf-orphan":af},C={start:xs,step:Es,end:Ss,emptyNode:Gs,btnNode:Ys,addNode:Ns,sectionNode:Lb,merger:ks,condition:Xs};return Object(r.useEffect)((function(){Object(Tu.isNull)(document.querySelector("#bwf-funnel-canvas-wrap"))||(h.current=document.querySelector("#bwf-funnel-canvas-wrap").getBoundingClientRect())})),Object(r.useEffect)((function(){if(!y){var e=0,t=0,n=a.getState().nodes;if(n.length&&h.current){var r=n[0];r.hasOwnProperty("__rf")?(e=r.__rf.position.x+140,t=r.__rf.position.y):(e=r.position.x+140,t=r.position.y),t=parseFloat(t)+.4*parseFloat(h.current.height),m(!0),o(e,t,1)}}}),[d,y]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Jc,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:C,nodesConnectable:!1,nodesDraggable:!1,elements:d,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,edgeTypes:P},Object(r.createElement)(_u,{showInteractive:!1},Object(r.createElement)(Ou,{onClick:function(){n(!t),document.body.style.overflow=t?"":"hidden",k([])}},t?Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-exit-alt"}):Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-alt"}))),Object(r.createElement)(Pu,null)))};function gy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oy(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(Nu.useParams)().id,n=e.funnelId,o=void 0===n?t:n,a=e.funnelTitle,i=Hu(),c=i.isLoading,u=i.getNodeElements,l=i.getFunnelId,s=i.getFunnelData,f=i.isAnalyticsLoaded,d=Object(Gu.a)(),p=d.fetchNodes,b=d.setLoading,y=d.fetchAnalytics,m=Object(el.a)(),h=m.setFunnelTitle,v=m.setFunnelLoading,g=gy(Object(r.useState)(!1),2),O=g[0],w=(g[1],gy(Object(r.useState)(!1),2)),j=w[0],_=w[1],E=gy(Object(r.useState)(!1),2),S=E[0],x=E[1],k=l(),P=u(),C=s();Object(Ru.m)(Object(Mu.__)("Funnel Canvas #","funnel-builder")+o),Object(r.useEffect)((function(){!c&&C.hasOwnProperty("title")&&(h(C.title),v(!1),f||Object(Tu.isEmpty)(P)||y(o))}),[c]),Object(r.useEffect)((function(){return(parseInt(k)!==parseInt(o)||Object(Tu.isEmpty)(P))&&(b(!0),p(o,O)),function(){document.body.style.overflow=""}}),[O]);return Object(r.createElement)("div",{id:"bwf-funnel-canvas-wrap",className:Iu()({"full-screen":S})},S&&Object(r.createElement)("div",{className:"bwf-flow-header-wrap"},Object(r.createElement)("div",{className:"bwf-funnel-flow-header"},Object(Ru.kb)()&&Object(r.createElement)("div",{className:"bwf-canvas-funnel-title"},a),!Object(Tu.isEmpty)(P)&&!1)),c?Object(r.createElement)(Xu.a,{size:"xxl",style:{margin:"100px auto"}}):Object(r.createElement)(Cu,null,Object(r.createElement)(vy,{setCanvasFullScreen:function(){x(!S)},fullScreen:S,showExperiment:O,funnelId:o})),!Object(Ru.jb)()&&Object(r.createElement)(Ku.a,{isOpen:j,onRequestClose:function(){return _(!1)},modalContent:{title:Object(Mu.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(Mu.__)("Increased Conversion Rates","funnel-builder"),Object(Mu.__)("Greater Return on Ad Spend","funnel-builder"),Object(Mu.__)("Reduced Bounce Rates","funnel-builder")]},proLink:Object(Ru.U)(["Canvas","Experiment"])}}))}}])]);