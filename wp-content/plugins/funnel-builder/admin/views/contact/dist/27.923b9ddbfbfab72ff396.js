(window.webpackJsonp=window.webpackJsonp||[]).push([[27,5,12],{1193:function(e,t,r){},1194:function(e,t,r){},1195:function(e,t,r){},1210:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(126),a=r(287),i=r(37),c=(r(386),r(25)),l=r(6),u=r.n(l),s=r(1),f=(r(1193),r(346)),d=r(127),b=r(20),p=r(4),m=r(384),y=r(13),v=r.n(y),h=r(2),O=r(83),g=r(10),j=r.n(g),w=r(98);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var l=n&&n.prototype instanceof c?n:c,u=Object.create(l.prototype);return D(u,"_invoke",function(r,n,o){var a,c,l,u=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:b,f:b.bind(e,4),d:function(t,r){return a=t,c=0,l=e,d.n=r,i}};function b(r,n){for(c=r,l=n,t=0;!f&&u&&!o&&t<s.length;t++){var o,a=s[t],b=d.p,p=a[2];r>3?(o=p===n)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=b&&((o=r<2&&b<a[1])?(c=0,d.v=n,d.n=a[1]):b<p&&(o=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,d.n=p,c=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,p),c=s,l=p;(t=c<2?e:l)||!f;){a||(c?c<3?(c>1&&(d.n=-1),b(c,l)):d.n=l:d.v=l);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?l:r.call(n,d))!==i)break}catch(t){a=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(r,o,a),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(D(t={},n,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,D(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,D(f,"constructor",u),D(u,"constructor",l),l.displayName="GeneratorFunction",D(u,o,"GeneratorFunction"),D(f),D(f,o,"Generator"),D(f,n,(function(){return this})),D(f,"toString",(function(){return"[object Generator]"})),(C=function(){return{w:a,m:d}})()}function D(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(D=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var a=function(t,r){D(e,t,(function(e){return this._invoke(t,r,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,r,n)}function x(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,c,"next",e)}function c(e){x(a,n,o,i,c,"throw",e)}i(void 0)}))}}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[{filters:JSON.stringify(e.map((function(e){return"period"===e.filter?"overall"===e.rule?A(A({},e),{},{data:r?{after:v()(new Date(0)).format(p.d),before:t.before.endOf("day").format(p.d)}:{}}):A(A({},e),{},{data:A(A({},e.data),{},{after:t.after.format(p.d),before:t.before.endOf("day").format(p.d)})}):A({},e)})).filter((function(e){return!Object(h.isEmpty)(e.data)})))}];return n},I=new AbortController,M=function(){var e=T(C().m((function e(t){var r;return C().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,j()({path:Object(p.y)("/fkcart-overview/".concat(Object(p.x)(t))),signal:I.signal});case 1:if(!(r=e.v).status){e.n=2;break}return e.a(2,null!=r?r:{});case 2:throw r;case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=T(C().m((function e(t,r,n,o){var a,i,c,l,u,s,f,d,b,m,y,v,O,g,j,w,_;return C().w((function(e){for(;;)switch(e.n){case 0:return a=t.filter,i=t.periodFilter,I.abort(),I=new AbortController,c=i.period,l=void 0===c?"last_30_days":c,u=i.before,s=i.after,f=Object(p.B)(Object(p.Y)({period:l,before:u,after:s,compare:r})),d=f.primary,b=f.secondary,m={},e.p=1,y=R(a,d),v=R(a,b,!0),Object(h.isEmpty)(v),e.n=2,Promise.all([M.apply(void 0,E(y)),M.apply(void 0,E(v))]);case 2:O=e.v,g=S(O,2),j=g[0],w=g[1],m.primary=j.data,m.secondary=w.data,m.filter=a,m.compare=r,m.isLoading=!1,m.conversion_migration_status=j.conversion_migration_status,o(m),e.n=4;break;case 3:e.p=3,"AbortError"!==(_=e.v).name&&o({error:_,isLoading:!1});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,r,n,o){return e.apply(this,arguments)}}(),B=new AbortController,q=function(){var e=T(C().m((function e(t){var r,n;return C().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,j()({path:Object(p.y)("/fkcart-upsell-performance/".concat(Object(p.x)(t))),signal:B.signal});case 1:if(!(r=e.v).status){e.n=2;break}return e.a(2,null!==(n=r.data)&&void 0!==n?n:{});case 2:throw r;case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){return Number(Number(e).toFixed(2).replace(/\.00$/,""))},U=function(){var e=T(C().m((function e(t){var r,n,o,a,i,c,l,u,s,f,d,b,m,y,v,g,j,_,P,k,D,x,T,N,F,I,M,L=arguments;return C().w((function(e){for(;;)switch(e.n){case 0:if(L.length>1&&void 0!==L[1]?L[1]:{data:[]},r=L.length>2?L[2]:void 0,n=L.length>3?L[3]:void 0,o=L.length>4&&void 0!==L[4]?L[4]:{},a=L.length>5&&void 0!==L[5]&&L[5],i=t.filter,c=t.periodFilter,l=t.interval,u=t.compare,s=void 0===u?"none":u,B.abort(),B=new AbortController,e.p=1,f=c.period,d=c.before,b=c.after,m=Object(p.B)(Object(p.Y)({period:f,before:d,after:b,compare:"none"===s?"previous_period":s})),y=m.primary,v=m.secondary,g=R(i,y),j=R(i,v,!0),g[0].interval=l,j[0].interval=l,_={},P={},!a||Object(h.isEmpty)(o)){e.n=2;break}_=Object(h.isEmpty)(o)?{}:o,e.n=6;break;case 2:if("none"===s){e.n=4;break}return e.n=3,Promise.all([q.apply(void 0,E(g)),q.apply(void 0,E(j))]);case 3:k=e.v,D=S(k,2),x=D[0],T=D[1],_.primary=x,_.secondary=T,e.n=6;break;case 4:return e.n=5,Promise.all([q.apply(void 0,E(g))]);case 5:N=e.v,F=S(N,1),I=F[0],_.primary=I;case 6:P.data=Object(h.get)(_,"primary.intervals",[]).map((function(e,t){var r=Object(O.f)(e.start_date,y.after,v.after,s,l),o=Object(h.get)(_,"secondary.intervals[".concat(t,"]"))?Object(h.get)(_,"secondary.intervals[".concat(t,"]"),[]):{subtotals:{total_orders:0,total_revenue:0,free_shipping_orders:0,free_gift_orders:0,discount:0,special_addon:0}};return A({date:Object(w.format)("Y-m-d\\TH:i:s",e.start_date),primary:A(A({label:Object(p.D)(c,!0),labelDate:e.start_date,value:Y(e.subtotals[n.key])},"total_orders"===n.key&&{revenue:Y(e.subtotals.total_revenue)}),"special_addon"===n.key&&{revenue:Y(e.subtotals.special_addon_revenue)})},"none"!==s&&o&&{secondary:{label:Object(p.S)(i,s,!0),labelDate:r.format(p.d),value:Y(o.subtotals[n.key]),revenue:Y(o.subtotals.total_revenue)}})})),P.filter=i,P.isLoading=!1,P.interval_type=_.primary.interval_type,r(P,_),e.n=8;break;case 7:e.p=7,"AbortError"!==(M=e.v).name&&(console.log(M),r({error:M,isLoading:!1}));case 8:return e.a(2)}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),V=new AbortController,z=function(){var e=T(C().m((function e(t){var r;return C().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,j()({path:Object(p.y)("/fkcart-popular-upsells/".concat(Object(p.x)(t))),signal:V.signal});case 1:if(!(r=e.v).status){e.n=2;break}return e.a(2,null!=r?r:{});case 2:throw r;case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=T(C().m((function e(t,r){var n,o,a,i,c,l,u,s,f,d,b,m,y;return C().w((function(e){for(;;)switch(e.n){case 0:return n=t.filter,o=t.periodFilter,a=t.limit,i=t.offset,V.abort(),V=new AbortController,c=o.period,l=o.before,u=o.after,s=Object(p.B)(Object(p.Y)({period:c,before:l,after:u})),f=s.primary,d={},e.p=1,b=R(n,f),e.n=2,z(A(A({},b[0]),{},{limit:a,offset:i}));case 2:m=e.v,d.data=m.data,d.filter=n,d.total=m.total_count,d.isLoading=!1,r(d,m.funnel_data),e.n=4;break;case 3:e.p=3,"AbortError"!==(y=e.v).name&&(console.log(y),r({error:y,isLoading:!1}));case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,r){return e.apply(this,arguments)}}(),H=new AbortController,G=function(){var e=T(C().m((function e(t,r){var n,o;return C().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,j()({path:Object(p.y)("/fkcart-reward-chart".concat(Object(p.x)(t))),signal:r});case 1:if(!(n=e.v).status){e.n=2;break}return e.a(2,null!==(o=n.data)&&void 0!==o?o:{});case 2:throw n;case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=T(C().m((function e(t,r){var n,o,a,i,c,l,u,f,d,b,m;return C().w((function(e){for(;;)switch(e.n){case 0:return n=t.filter,o=t.periodFilter,H.abort(),H=new AbortController,e.p=1,a=o.period,i=o.before,c=o.after,l=Object(p.B)(Object(p.Y)({period:a,before:i,after:c})),u=l.primary,f={data:{}},d=R(n,u),e.n=2,G.apply(void 0,E(d).concat([H.signal]));case 2:b=e.v,f.data=b.map((function(e){return{key:e.key,title:e.title,value:e.percentage,color:$[e.key],tooltip:"\n\t\t\t\t<div>".concat(Object(s.__)("No of times unlocked:","funnel-builder")," ").concat(e.count,"</div><div >").concat(Object(s.__)("Percentage :","funnel-builder")," ").concat(e.percentage,"%</div>")}})),f.filter=n,f.isLoading=!1,r(f),e.n=4;break;case 3:e.p=3,"AbortError"!==(m=e.v).name&&(console.log(m),r({error:m,isLoading:!1}));case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,r){return e.apply(this,arguments)}}(),$={free_shipping:["#C13584","#ffffff"],free_gift:["#DB4437","#ffffff"],discount:["#353030","#ffffff"]},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={data:{}},n=[{key:"free_shipping",title:Object(s.__)("Free Shipping","funnel-builder"),percentage:t?0:20,count:t?0:30},{key:"free_gift",title:Object(s.__)("Free Gift","funnel-builder"),percentage:t?0:35,count:t?0:45},{key:"discount",title:Object(s.__)("Discount","funnel-builder"),percentage:t?0:45,count:t?0:63}];r.data=n.map((function(e){return{key:e.key,title:e.title,value:e.percentage,color:$[e.key],tooltip:"No of times unlocked: ".concat(e.count)}})),r.filter={filter:"overall"},r.isLoading=!1,e(r)},X=r(142),J=r(141),Z=r(358),ee=r(318),te=r(591),re=r(26);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var oe=["getStateProp"];function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le=function(){var e=Object(re.a)("cart-upsell-analytics"),t=e.getStateProp;return ie(ie({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,oe)),{},{getoverviewData:function(){var e;return null!==(e=t("overview"))&&void 0!==e?e:{}},getChartData:function(){var e;return null!==(e=t("chart_data"))&&void 0!==e?e:{}},getChartRawData:function(){var e;return null!==(e=t("chart_raw_data"))&&void 0!==e?e:{}},getStepsData:function(){var e;return null!==(e=t("steps"))&&void 0!==e?e:{}},getRewardsData:function(){var e;return null!==(e=t("rewards"))&&void 0!==e?e:{}},getUpsellsData:function(){var e;return null!==(e=t("upsells"))&&void 0!==e?e:{}},getRewardsChartData:function(){var e;return null!==(e=t("rewards_chart"))&&void 0!==e?e:{}}})},ue={primary:ve(),secondary:ve(),extra:ve(),filter:{period:"overall",after:"",before:""},isLoading:!1},se=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=30,n=10,o=500,a=[],i=new Date(e),c="Last 30 Days (".concat(e," - ").concat(new Date(i.getTime()+24*(r-1)*60*60*1e3).toISOString().slice(0,10),")"),l=0;l<r;l++){var u=new Date(i);u.setDate(u.getDate()+l);var s=u.toISOString().split("T")[0];a.push({date:"".concat(s,"T00:00:00"),primary:{label:c,labelDate:"".concat(s," 00:00:00"),value:t?0:Math.floor(Math.random()*(o-n+1)+n),products:t?0:Math.floor(Math.random()*(o-n+1)+n)}})}return{data:a,filter:{period:"last_30_days",before:"",after:"",compare:"none",interval:"day"},isLoading:!1}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return se("2023-04-19",e)},de={data:[{pid:"255307",name:"Product Name 1",revenue:"8745",conversion_rate:67.96},{pid:"255329",name:"Product Name 2",revenue:"1478",conversion_rate:42.37},{pid:"255308",name:"Product Name 3",revenue:"27540.50",conversion_rate:27.33},{pid:"255323",name:"Product Name 4",revenue:"4896.00",conversion_rate:21.86},{pid:"255323",name:"Product Name 5",revenue:"3215.00",conversion_rate:21.86}],filter:{period:"last_30_days",before:"",after:""},isLoading:!1},be=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{primary:pe("2024-05-27",e)}};function pe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){return e.toISOString().replace("T"," ").substring(0,19)}function n(e){return r(new Date(e.getTime()-6e4*e.getTimezoneOffset()))}for(var o=new Date(e),a=[],i=0;i<30;i++){var c=new Date(o.getTime()+864e5*i),l=c.toISOString().substring(0,10),u=new Date(c);u.setHours(23,59,59),a.push({interval:l,start_date:r(new Date(c.setHours(0,0,0))),date_start_gmt:n(new Date(c.setHours(0,0,0))),end_date:r(u),date_end_gmt:n(u),subtotals:{total_orders:t?0:me(0,100),total_revenue:t?0:ye(0,1e4),conversion_rate:t?0:ye(0,100),free_shipping_orders:t?0:me(0,50),free_gift_orders:t?0:me(0,50),discount:t?0:ye(0,1e3),special_addon:t?0:me(0,20)}})}return a}function me(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function ye(e,t){return(Math.random()*(t-e)+e).toFixed(2)}function ve(){return{total_orders:me(100,1e3),total_revenue:ye(1e3,1e4),conversion_rate:ye(0,100),free_shipping_orders:me(0,100),free_gift_orders:me(0,50),discount:ye(0,100),special_addon:me(0,100),special_addon_conversion_rate:ye(0,100)}}var he=r(22),Oe=r(5);function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var we=function(e){var t,r,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.map((function(e){return delete e.options,e})),i=Object(n.useRef)(a),c=Object(n.useState)(a),l=ge(c,2),u=l[0],s=l[1];Object(n.useEffect)((function(){(o||(a=a.filter((function(e){return"compare"!==e.filter}))),JSON.stringify(a)!==JSON.stringify(i.current))&&(a.find((function(e){return"period"===e.filter}))||(a=a.filter((function(e){return"compare"!==e.filter}))),s(a),i.current=a)}),[e]);var f=(null===(t=u.find((function(e){return"compare"===e.filter})))||void 0===t?void 0:t.data)||"none",d=null===(r=u.find((function(e){return"period"===e.filter})))||void 0===r?void 0:r.data;return{filtersToPass:u,compareFilter:f,periodFilter:d}},_e=r(118);function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Pe=function(e){var t=e.filter,r=Object(b.b)().isProFeatureLocked,o=Object(te.a)().setUpsellsData,a=(0,le().getUpsellsData)(),i=a.data,c=void 0===i?[]:i,l=a.isLoading,u=a.total,f=Object(n.useRef)(!0),d=Ee(Object(n.useState)(5),2),m=d[0],y=d[1],v=Ee(Object(n.useState)(0),2),h=v[0],O=v[1],g=we(t,!1),j=g.filtersToPass,w=g.periodFilter,_=void 0===w?{period:"overall"}:w,E=Object(p.A)(),S=[{key:"name",label:Object(s.__)("Products","funnel-builder"),required:!0,cellClassName:"bwf-word-break bwf-w-1/2"},{key:"revenue",label:Object(s.__)("Revenue","funnel-builder")},{key:"conversion_rate",label:Object(s.__)("Conversion Rate","funnel-builder")}],P=c.map((function(e){return[{display:r?Object(n.createElement)("span",{className:"bwf-link"},e.name):Object(n.createElement)("a",{href:"post.php?post=".concat(e.pid,"&action=edit"),className:"bwf-external-link hover-underline",target:"_blank",rel:"noopener noreferrer"},e.name),value:e.name},{display:Object(n.createElement)(he.c,{type:"success",content:E.formatAmount(e.revenue)}),value:e.revenue},{display:Object(n.createElement)("span",{className:"bwf-flex bwf--g4"},Object(n.createElement)(Oe.a,{icon:"growth",size:"16"}),e.conversion_rate+"%"),value:e.conversion_rate}]}));Object(n.useEffect)((function(){f.current&&!l||(r?o(de):Object(_e.a)()?(o({isLoading:!0}),K({filter:j,periodFilter:_,limit:m,offset:h},(function(e){o(e)}))):o({isLoading:!1,data:[],total:0})),f.current&&(f.current=!1)}),[j,h,m]);var k=function(e){e!==m&&y(e)},C=parseInt(h)/parseInt(m)+1;return Object(n.createElement)(ee.a,{headers:S,rows:P,title:Object(s.__)("Most Popular Cart Upsells","funnel-builder"),isLoading:l,rowsPerPage:m,totalRows:u||0,showMenu:!1,className:"bwf-analytics__popular-upsells-table",perPageOptions:[5],query:{paged:C},onPageChange:function(e,t){O((e-1)*m)},onQueryChange:function(e){return"per_page"!==e?function(){}:k}})},ke=r(8),Ce=r(408);function De(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(e){var t=e.metrics,r=e.filter,o=e.compare,a=e.periodFilter,i=void 0===a?{period:"last_30_days"}:a,c=le(),l=c.getChartData,f=c.getChartRawData,d=l(),m=f(),y=d.data,v=d.isLoading,O=void 0===v||v,g=d.interval_type,j=xe(Object(n.useState)(t[0]),2),w=j[0],_=j[1],E=Object(n.useRef)(!0),S=Object(b.b)().isProFeatureLocked,P=function(e,t){var n=e.compare,o=e.interval,a=e.selectedData,c=e.rawData,l=void 0===c?{}:c,u=e.reset,s=void 0!==u&&u;S&&Object(h.isEmpty)(l)?(C(fe()),D(be())):Object(_e.a)()?(C({isLoading:!0}),U({filter:[].concat(De(r),De("last_30_days"===i.period?[{filter:"period",rule:"last_30_days",data:[]}]:[])),periodFilter:i,interval:o,compare:n},S?fe:s?[]:d,(function(e,t){C(e),D(t)}),a||w,s?[]:l,t)):(C(fe(!0)),D(be(!0)))},k=Object(te.a)(),C=k.setChartData,D=k.setChartRawData;Object(n.useEffect)((function(){E.current&&!O||P({compare:o,interval:Object(p.K)(i),reset:!0}),E.current&&(E.current=!1)}),[r]);var x=Object(p.E)("overall"===i.period?g:Object(p.K)(i),d.length);return Object(n.createElement)(Ce.a,{allowedIntervals:[],interval:"overall"===r.period?g:Object(p.K)(i),isRequesting:O,data:y,chartType:"curve-line",title:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:""},Object(s.__)("Performance"))),layout:"item-comparison",showLegend:"none"!==o,hideTypeSelect:!0,xFormat:x.xFormat,x2Format:x.x2Format,screenReaderFormat:x.screenReaderFormat,tooltipLabelFormat:x.tooltipLabelFormat,tabs:t,height:340,chartMeta:w,toopTipComponent:["total_orders","special_addon"].includes(w.key)&&Fe,customHeaderItem:Object(n.createElement)(n.Fragment,null,t&&Object(h.isArray)(t)&&Object(n.createElement)("div",{className:"bwf-chart-tabs"},t.filter((function(e){return"convert_time"!==e.key})).map((function(e){return Object(n.createElement)(ke.Button,{className:u()({"is-gray-light":w.key!==e.key,"is-secondary-light":w.key===e.key}),key:e.key,onClick:function(){_(e),S||P({compare:o,interval:Object(p.K)(i.period),selectedData:e,rawData:S?be:m},!0)}},e.title)}))))})},Fe=function(e){var t=e.data,r=Object(p.A)();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-cart-upsell-chart-val"},Object(n.createElement)("div",{className:"label"},Object(s.__)("Products","funnel-builder")),Object(n.createElement)("div",{className:"value"},t.value)),Object(n.createElement)("div",{className:"bwf-cart-upsell-chart-val"},Object(n.createElement)("div",{className:"label"},Object(s.__)("Revenue","funnel-builder")),Object(n.createElement)("div",{className:"value"},r.formatAmount(t.revenue))))},Re=r(138),Ie=r(431),Me=function(e){var t=e.value,r=e.decimalSeparator,o=void 0===r?".":r,a=t.lastIndexOf(o);if(!(-1!==a))return t;var i=t.slice(0,a),c=t.slice(a+1);return Object(n.createElement)(n.Fragment,null,i,o,Object(n.createElement)("span",{className:"bwf-analytics__amount-decimal"},c))};function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ze=function(e){var t=e.metrics,r=e.filter,o=e.compare,a=e.periodFilter,i=void 0===a?{period:"overall",after:"",before:""}:a,c=Object(te.a)().setOverviewData,l=(0,le().getoverviewData)(),u=l.isLoading,f=void 0===u||u,d=l.primary,m=void 0===d?{}:d,y=l.secondary,v=void 0===y?{}:y,h=Object(b.b)().isProFeatureLocked,O="none"===o?"previous_period":o,g=Object(n.useRef)(!0),j=Object(p.A)(),w=i.period,_=void 0===w?"":w,E=function(e,t){var r,n,o=t?j.formatAmount(null!==(r=v[e])&&void 0!==r?r:0):null!==(n=v[e])&&void 0!==n?n:0;return o+=" - "+Object(p.S)(i,"overall"===_?{}:O,!1,!0,"overall"===_)},S=function(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o?Object(n.createElement)(Ie.a,{amount:m[e]}):a?Object(n.createElement)(Me,{value:"".concat(null!==(r=m[e])&&void 0!==r?r:0,"%")}):null!==(t=m[e])&&void 0!==t?t:0},P=t.map((function(e){return Ue(Ue({},e),{},{value:S(e.key,e.isCurrency,e.isPercent),delta:(t=e.key,Object(p.n)(Number(m[t]),Number(v[t]))),label:E(e.key,e.isCurrency)});var t}));return Object(n.useEffect)((function(){g.current&&!f||(h?c(ue):Object(_e.a)()?(c({isLoading:!0}),L({filter:[].concat(Be(r),Be("overall"===_?[{filter:"period",rule:"overall",data:[]}]:[])),periodFilter:i},O,l,(function(e){return c(e)}))):c({isLoading:!1,data:{primary:{},secondary:{}}})),g.current&&(g.current=!1)}),[r]),Object(n.createElement)(Re.a,{items:P,title:Object(s.__)("Overview","funnel-builder"),isLoading:f})},Ke=function(e){var t=e.filter,r=Object(te.a)().setRewardsChartData,o=(0,le().getRewardsChartData)(),a=o.data,i=void 0===a?[]:a,c=o.isLoading,l=Object(b.b)().isProFeatureLocked,u=we(t,!1),f=u.filtersToPass,d=u.periodFilter,p=void 0===d?{period:"overall"}:d;return Object(n.useEffect)((function(){l?Q((function(e){r(e)})):Object(_e.a)()?(r({isLoading:!0}),W({filter:f,periodFilter:p},(function(e){return r(e)}))):Q((function(e){r(e)}),!0)}),[f]),Object(n.createElement)(Ce.a,{allowedIntervals:[],interval:"day",isRequesting:c,data:i,chartType:"donut",title:Object(s.__)("Rewards","funnel-builder"),layout:"item-comparison",hideTypeSelect:!0,legendPosition:"bottom",className:"bwf-cart-rewards-chart",height:280,width:280,emptyText:Object(s.__)("No Rewards Created","funnel-builder"),chartId:"cart-rewards-chart"})};function He(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var We=function(e){return[{key:"total_orders",title:Object(s.__)("Cart Upsells","funnel-builder"),icon:"cart"}].concat(He(e?[]:[{key:"total_revenue",title:Object(s.__)("Upsell Revenue","funnel-builder"),icon:"revenue",isCurrency:!0},{key:"conversion_rate",title:Object(s.__)("Upsell Conversion Rate","funnel-builder"),icon:"revenue-user",isPercent:!0}]),[{key:"free_shipping_orders",title:Object(s.__)("Free Shipping Rewards","funnel-builder"),icon:"shipment"},{key:"free_gift_orders",title:Object(s.__)("Free Gift Rewards","funnel-builder"),icon:"cart"},{key:"discount",title:Object(s.__)("Discount Rewards","funnel-builder"),icon:"cart"},{key:"special_addon",title:Object(s.__)("Special Addon","funnel-builder"),icon:"cart"}],He(e?[]:[{key:"special_addon_revenue",title:Object(s.__)("Special Addon Revenue","funnel-builder"),icon:"revenue",isCurrency:!0},{key:"special_addon_conversion_rate",title:Object(s.__)("Special Addon Conversion Rate","funnel-builder"),icon:"revenue-user",isPercent:!0}])).sort((function(e,t){var r,n;return(null!==(r=t.index)&&void 0!==r?r:0)-(null!==(n=e.index)&&void 0!==n?n:0)}))},$e=function(){var e,t=null!==(e=location)&&void 0!==e&&e.search?Object(c.parse)(location.search.substring(1)):{},r=Object(X.a)().getFilters,o=Object(J.a)().setFilters,a=r("cart-upsell-analytics"),i=we(a),l=i.filtersToPass,y=i.compareFilter,v=i.periodFilter,h=Object(b.b)(),O=h.isProFeatureLocked,g=h.isLite,j=Object(n.useMemo)((function(){return e=v||{},[{type:"sticky",rules:[{slug:"cart_upsell",title:Object(s.__)("Cart Upsell","funnel-builder"),op_label:Object(s.__)("Has Purchased","funnel-builder"),operators:{yes:Object(s.__)("Yes","funnel-builder"),no:Object(s.__)("No","funnel-builder")},type:"search",val_label:Object(s.__)("Select Upsell","funnel-builder"),required:["rule","data"],readable_text:"{{rule /}} - {{value /}}",api:"/fkcart-product-search?s={{search}}"},{slug:"period",title:Object(s.__)("Time Period","funnel-builder"),type:"date-range",op_label:Object(s.__)("Time Period","funnel-builder"),required:["rule","data"],readable_text:"{{value /}}",returnPeriod:!0}].concat(E(e.period?[{type:"select",slug:"compare",title:Object(s.__)("Compare","funnel-builder"),required:["data"],readable_text:"{{value /}}",options:{previous_period:Object(s.__)("Previous period","funnel-builder"),previous_year:Object(s.__)("Previous year","funnel-builder")}}]:[]))}];var e}),[l]);return Object(n.createElement)(Z.a,{className:"bwf-analytics__wrap bwf-cart-upsell-analytics__wrap"},!g&&O?Object(n.createElement)(d.b,{onPage:!0,modalContent:{proLink:Object(p.U)(["Cart","Upsell","Analytics","Upgrade","Modal"])}}):null,Object(n.createElement)(f.a,null),Object(n.createElement)("div",{className:u()("bwf-analytics-filters")},Object(n.createElement)("div",{className:"bwf-flex bwf--g12"},Object(n.createElement)(m.a,{filterList:null!=j?j:[],isLoading:!1,filterData:a,setFilterData:function(e){o("cart-upsell-analytics",e)},isLocked:!1}),(null==v?void 0:v.period)&&Object(n.createElement)("div",{className:"bwf-analytics__date-filter-text bwf-no-wrap"},Object(p.D)(v)," ","none"!==y&&Object(n.createElement)(n.Fragment,null,Object(s.__)("v/s","funnel-builder")," ",Object(p.S)(v,y,!1,!1)),"none"!==y&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("br",null),Object(n.createElement)("span",null,Object(s.sprintf)(Object(s.__)("Compared to %s","funnel-builder"),p.ob[y])))))),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ze,{query:t,metrics:We(),filter:l,compare:y,periodFilter:v}),Object(n.createElement)(Ae,{query:t,metrics:We(!0),filter:l,compare:y,periodFilter:v})),Object(n.createElement)("div",{className:"bwf-analytics__popular-tables"},Object(n.createElement)(Pe,{filter:a}),Object(n.createElement)(Ke,{filter:a})))},Qe=r(297),Xe=r(131),Je=r(54),Ze=r(18),et=(r(941),r(426)),tt=[{order_id:101,upsell_name:{89:"Personalized Message",90:"Gift Wrap",91:"VIP Support"},upsell_revenue:250,special_addon:{74:"Extended Warranty",75:"Eco Packaging"},special_addon_revenue:220,free_shipping_orders:"Yes",free_gift:{34:"Personalized Desk",35:"Express Delivery"},discount:10,date:"2023-07-01"},{order_id:102,upsell_name:{90:"Gift Wrap"},upsell_revenue:210,special_addon:{75:"Personalized Message"},special_addon_revenue:230,free_shipping_orders:"-",free_gift:{34:"Extended Warranty"},discount:15,date:"2023-07-02"},{order_id:103,upsell_name:{91:"VIP Support"},upsell_revenue:300,special_addon:{76:"Priority Handling"},special_addon_revenue:250,free_shipping_orders:"Yes",free_gift:"-",discount:5,date:"2023-07-03"},{order_id:104,upsell_name:"-",upsell_revenue:220,special_addon:{77:"Recycled Materials"},special_addon_revenue:210,free_shipping_orders:"Yes",free_gift:{36:"Eco Packaging"},discount:8,date:"2023-07-04"},{order_id:105,upsell_name:{92:"Express Delivery"},upsell_revenue:280,special_addon:{78:"Weekend Delivery"},special_addon_revenue:240,free_shipping_orders:"Yes",free_gift:{37:"Personalized Desk"},discount:12,date:"2023-07-05"},{order_id:106,upsell_name:{93:"Premium Gift Wrap"},upsell_revenue:260,special_addon:{79:"Gift Card"},special_addon_revenue:225,free_shipping_orders:"-",free_gift:{38:"Custom Mug"},discount:20,date:"2023-07-06"},{order_id:107,upsell_name:"-",upsell_revenue:210,special_addon:{80:"Holiday Packaging"},special_addon_revenue:245,free_shipping_orders:"Yes",free_gift:{39:"Reusable Bag"},discount:10,date:"2023-07-07"},{order_id:108,upsell_name:{94:"Gift Card"},upsell_revenue:275,special_addon:"-",special_addon_revenue:0,free_shipping_orders:"-",free_gift:{40:"Decorative Pen"},discount:18,date:"2023-07-08"},{order_id:109,upsell_name:{95:"Priority Service"},upsell_revenue:310,special_addon:{81:"Extended Warranty"},special_addon_revenue:260,free_shipping_orders:"Yes",free_gift:"-",discount:7,date:"2023-07-09"},{order_id:110,upsell_name:"-",upsell_revenue:225,special_addon:{82:"Luxury Packaging"},special_addon_revenue:235,free_shipping_orders:"Yes",free_gift:{41:"Keychain"},discount:11,date:"2023-07-10"},{order_id:111,upsell_name:{96:"Express Shipping"},upsell_revenue:215,special_addon:{83:"Gift Note"},special_addon_revenue:220,free_shipping_orders:"-",free_gift:{42:"Desk Organizer"},discount:14,date:"2023-07-11"},{order_id:112,upsell_name:{97:"Personalized Ribbon"},upsell_revenue:245,special_addon:"-",special_addon_revenue:0,free_shipping_orders:"Yes",free_gift:{43:"Mini Plant"},discount:13,date:"2023-07-12"},{order_id:113,upsell_name:{98:"Custom Gift Box"},upsell_revenue:290,special_addon:{84:"Priority Handling"},special_addon_revenue:250,free_shipping_orders:"-",free_gift:"-",discount:9,date:"2023-07-13"},{order_id:114,upsell_name:"-",upsell_revenue:210,special_addon:{85:"Eco Packaging"},special_addon_revenue:215,free_shipping_orders:"Yes",free_gift:{44:"Personalized Coaster"},discount:8,date:"2023-07-14"},{order_id:115,upsell_name:{99:"Same-Day Delivery"},upsell_revenue:265,special_addon:{86:"Recycled Materials"},special_addon_revenue:230,free_shipping_orders:"-",free_gift:{45:"Travel Mug"},discount:17,date:"2023-07-15"},{order_id:116,upsell_name:{100:"Express Checkout"},upsell_revenue:280,special_addon:"-",special_addon_revenue:0,free_shipping_orders:"Yes",free_gift:{46:"Notepad"},discount:12,date:"2023-07-16"},{order_id:117,upsell_name:"-",upsell_revenue:210,special_addon:{87:"Gift Message"},special_addon_revenue:225,free_shipping_orders:"-",free_gift:{47:"Sticky Notes"},discount:5,date:"2023-07-17"},{order_id:118,upsell_name:{101:"Personalized Sticker"},upsell_revenue:250,special_addon:{88:"Special Wrapping"},special_addon_revenue:240,free_shipping_orders:"Yes",free_gift:"-",discount:10,date:"2023-07-18"},{order_id:119,upsell_name:{102:"Gift Packaging"},upsell_revenue:230,special_addon:"-",special_addon_revenue:0,free_shipping_orders:"-",free_gift:{48:"Bookmark"},discount:16,date:"2023-07-19"},{order_id:120,upsell_name:"-",upsell_revenue:215,special_addon:{89:"Decorative Ribbon"},special_addon_revenue:220,free_shipping_orders:"Yes",free_gift:{49:"Mini Calendar"},discount:6,date:"2023-07-20"},{order_id:121,upsell_name:{103:"Same-Day Pickup"},upsell_revenue:295,special_addon:{90:"Express Warranty"},special_addon_revenue:245,free_shipping_orders:"-",free_gift:{50:"Custom Keyring"},discount:15,date:"2023-07-21"},{order_id:122,upsell_name:{104:"Exclusive Packaging"},upsell_revenue:285,special_addon:{91:"Priority Shipping"},special_addon_revenue:235,free_shipping_orders:"Yes",free_gift:"-",discount:11,date:"2023-07-22"},{order_id:123,upsell_name:"-",upsell_revenue:205,special_addon:{92:"Customized Gift Note"},special_addon_revenue:210,free_shipping_orders:"-",free_gift:{51:"Decorative Magnet"},discount:7,date:"2023-07-23"},{order_id:124,upsell_name:{105:"Priority Packaging"},upsell_revenue:265,special_addon:"-",special_addon_revenue:0,free_shipping_orders:"Yes",free_gift:{52:"Gift Ribbon"},discount:14,date:"2023-07-24"},{order_id:125,upsell_name:{106:"Express Gift"},upsell_revenue:275,special_addon:{93:"Luxury Gift Box"},special_addon_revenue:240,free_shipping_orders:"-",free_gift:{53:"Travel Pouch"},discount:10,date:"2023-07-25"}],rt=[{type:"sticky",rules:[{slug:"period",title:"Date Created",type:"date-range",op_label:"Time Period",required:["rule","data"],readable_text:"{{value /}}"},{slug:"cart_upsell",title:"Cart Upsell",type:"search",operators:{accepted:"Yes",rejected:"No"},api:"/fkcart-product-search?s={{search}}",op_label:"Has Purchased",val_label:"Select Purchased",required:["rule","data"],readable_text:"{{rule /}} - {{value /}}",multiple:!0},{slug:"special_addon",title:"Special Addon",type:"search",operators:{accepted:"Yes",rejected:"No"},api:"/fkcart-product-search?s={{search}}",op_label:"Has Purchased",val_label:"Products (Optional)",required:["rule","data"],readable_text:"{{rule /}} - {{value /}}",multiple:!0},{slug:"rewards",title:"Rewards",type:"select",operators:{free_shipping:"Free Shipping",discount:"Discount",free_gift:"Free Gift"},options:{yes:"Yes",no:"No"},val_label:"Has Earned",op_label:"Type",required:["rule","data"],readable_text:"{{rule /}} - {{value /}}",data_2:{toggler:["rule","discount"],type:"search",api:"/fkcart-coupon-search?s={{search}}",val_label:"Coupons (Optional)",default_options:[]}}]}],nt=(r(1194),r(940)),ot=r(939),at=(r(21),r(82)),it=r(360),ct=r(75),lt=r(44),ut=r(14);function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ft(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ft(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dt=function(e){var t=e.floatingBarProps,r=void 0===t?{}:t,o=e.deleteModal,a=e.setDeleteModal,i=e.doDeleteOrders,c=e.isLoading,l=e.error,u=st(Object(n.useState)([]),2),f=u[0],d=u[1],b=st(Object(n.useState)(0),2),p=b[0],m=b[1];Object(n.useEffect)((function(){if(o){var e=[];Object.keys(r.selected).forEach((function(t){r.selected[t]&&e.push(t)})),d(e)}}),[o]),Object(n.useEffect)((function(){var e=r.selected,t=Object.keys(e).reduce((function(t,r){return e[r]?t+1:t}),0);m(t)}),[r]);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(lt.a,{className:"bwf-admin-modal-squeezy",modalTitle:1===p?Object(s.__)("Delete Order"):Object(s.__)("Delete Orders"),content:Object(n.createElement)(n.Fragment,null,Object(s.__)("You are about to delete ","funnel-builder"),Object(n.createElement)("strong",null,p)," ",Object(s._n)("conversion from analytics. This order will still exist in WooCommerce. This action cannot be undone.","conversions from analytics. These orders will still exist in WooCommerce. This action cannot be undone.",p,"funnel-builder")),confirmButton:Object(n.createElement)(ut.a,{isBusy:c,disabled:c,className:"is-danger",onClick:function(){i(f.map((function(e){return e})))}},Object(s.__)("Delete","funnel-builder")),cancelButtonText:Object(s.__)("Cancel","funnel-builder"),errorMessage:l&&(l&&l.message?l.message:Object(s.__)("Unable to delete Orders","funnel-builder")),onRequestClose:function(){return a(!1)},isOpen:o,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))},bt=function(e){var t=e.onRequestClose,r=void 0===t?function(){}:t,o=e.deleteOrders,a=void 0===o?[]:o,i=e.isOpen,c=e.deleteEntity,l=e.doDeleteOrders,u=e.isLoading,f=e.error,d=function(){u||r()};return i?Object(n.createElement)(ke.Modal,{isDismissible:!0,className:"bwf-admin-modal bwf-admin-modal-squeezy",onRequestClose:d,title:Object(s.__)("Delete Cart Conversion","funnel-builder")},!u&&null!==f&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.error_cross}})),null===f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear"}),Object(n.createElement)("div",{className:"bwf-modal-content"},Object(n.createElement)("div",{className:""},Object(s.__)("You are about to delete cart conversion ","funnel-builder"),Object(n.createElement)("strong",null,c||""),Object(s.__)(" from analytics.","funnel-builder"),Object(s.__)(" This order will still exist in WooCommerce. This action cannot be undone.","funnel-builder"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-t-right"},Object(n.createElement)(ut.a,{onClick:d,className:"bwf-modal-cancel-btn"}," ",Object(s.__)("Cancel","funnel-builder")," "),Object(n.createElement)(ut.a,{className:"is-danger",isBusy:u,disabled:u,onClick:function(){u||l(a)}},Object(s.__)("Delete","funnel-builder")))),!u&&null!==f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf-p"}," ",Object(s.__)("Error: ","funnel-builder")+f.hasOwnProperty("message")?f.message:Object(s.__)("There are some technical difficulties while deleting step. Please contact support","funnel-builder")," ")))):null},pt=r(65);function mt(){return(mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||vt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){if(e){if("string"==typeof e)return ht(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(e,t):void 0}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ot=function(e){return["",0,"0","-"].includes(e)},gt=Object(n.memo)((function(e){e.query;var t=yt(Object(n.useState)(!1),2),r=t[0],o=t[1],a=yt(Object(n.useState)(!1),2),i=a[0],c=a[1],l=yt(Object(n.useState)(!1),2),f=l[0],y=l[1],v=yt(Object(n.useState)(""),2),O=v[0],g=v[1],j=yt(Object(n.useState)([]),2),w=j[0],_=j[1],E=yt(Object(n.useState)(!1),2),S=E[0],P=E[1],k=Object(ot.a)(),C=k.fetch,D=k.setOrders,x=k.setOrderLoading,T=k.setOrdersFiltersList,N=Object(nt.a)(),A=N.getPageNumber,F=N.getPerPageCount,R=N.isOrdersLoading,I=N.getTotalOrders,M=N.getOrders,L=N.getMessage,B=N.getFiltersList,q=N.isOrderFirstTimeLoading,Y=N.getError,U=Object(p.A)(),V=M(),z=A(),K=F(),H=R,G=I(),W=L(),$=Y(),Q=B(),Z=Object(X.a)(),te=Z.getFilters,re=Z.getSearchValue,ne=Object(b.b)(),oe=ne.isProFeatureLocked,ae=ne.isLite,ie=te("upsell-orders"),ce=re("upsell-orders"),le=Object(J.a)(),ue=le.setFilters,se=le.setSearchValue;Object(n.useEffect)((function(){oe?(D(tt,1,5,5),T(rt),x(!1)):Object(_e.a)()?(i||H)&&!1!==q&&C(ce,1,K,ie,!0):x(!1)}),[]),Object(n.useEffect)((function(){H||i||c(!0)}),[H]),Object(n.useEffect)((function(){f&&y(!1),S&&P(!1)}),[V]);var fe=Object(n.useMemo)((function(){var e={};if(Array.isArray(V)){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=vt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(V);try{for(r.s();!(t=r.n()).done;){var n=t.value;e[n.order_id]=n}}catch(e){r.e(e)}finally{r.f()}}return e}),[V]),de=Object(it.b)(fe),be=de.singleSelectProps,pe=de.selectAllProps,me=de.floatingBarProps,ye=de.resetSelection,ve=function(e){return Object(n.createElement)("div",{className:"bwf-flex bwf--g16"},Object(n.createElement)(at.a,mt({type:"checkbox",checked:!1,onChange:function(){}},be[e.order_id],{disabled:ae})),function(e){return Object(n.createElement)(ct.a,{menuPosition:"bottom right",renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(pt.a,{isClickable:!0,onInvoke:function(){y(!0),g("".concat(e.order_id)),_([e.order_id]),r()},className:"bwf-ellipsis-menu__item-delete no-border"},Object(s.__)("Delete","funnel-builder")))},disabled:ae})}(e),(t=e.order_id,r=e.order_number,o=e.order_url,oe?Object(n.createElement)("span",{className:"bwf-external-link icon-hover-opacity"},Object(n.createElement)("span",null,t),Object(n.createElement)(Oe.a,{icon:"external-link",size:16})):Object(n.createElement)("a",{href:Object(p.Q)(o,t),className:"bwf-external-link icon-hover-opacity",target:"__blank"},Object(n.createElement)("span",null,Object(h.isEmpty)(r)?t:r),Object(n.createElement)(Oe.a,{icon:"external-link",size:16}))));var t,r,o},ge=[{key:"menu",label:Object(n.createElement)("div",{className:"bwf-flex bwf--g16"},Object(n.createElement)(at.a,mt({type:"checkbox",checked:!1,onChange:function(){}},pe,{disabled:ae})),Object(n.createElement)("span",{className:"bwf-visibility-hidden"},Object(s.__)("Dot","funnel-builder")),Object(n.createElement)("span",null,Object(s.__)("Order ID","funnel-builder"))),cellClassName:"bwf-col-action bwf-table-col-sticky bwf-sticky-left"},{key:"upsell",label:Object(s.__)("Cart Upsell","funnel-builder"),cellClassName:"bwf-items-col"},{key:"upsell_revenue",label:Object(s.__)("Cart Upsell Revenue","funnel-builder"),cellClassName:""},{key:"special_addon",label:Object(s.__)("Special Addon","funnel-builder"),cellClassName:"bwf-items-col"},{key:"special_addon_revenue",label:Object(s.__)("Special Addon Revenue","funnel-builder"),cellClassName:""},{key:"free_shipping_orders",label:Object(s.__)("Free Shipping Rewards","funnel-builder"),cellClassName:""},{key:"free_gift_order",label:Object(s.__)("Free Gift Rewards","funnel-builder"),cellClassName:"bwf-items-col"},{key:"discount",label:Object(s.__)("Discount","funnel-builder"),cellClassName:""},{key:"date",label:Object(s.__)("Date","funnel-builder"),cellClassName:""}],je=function(e,t){return oe?Object(n.createElement)("span",{key:"upsell-".concat(e),className:"bwf-link"},t):Object(n.createElement)("a",{href:"post.php?post=".concat(e,"&action=edit"),className:"bwf-external-link hover-underline",target:"__blank",key:"upsell-".concat(e)},t)},we=V.map((function(e){var t=Object(h.isObject)(e.upsell_name)?Object.keys(e.upsell_name).map((function(t){return je(t,e.upsell_name[t])})).reduce((function(e,t){return[e,", ",t]})):"-",r=Object(h.isObject)(e.special_addon)?Object.keys(e.special_addon).map((function(t){return je(t,e.special_addon[t])})).reduce((function(e,t){return[e,", ",t]})):"-",o=Object(h.isObject)(e.free_gift)?Object.keys(e.free_gift).map((function(t){return je(t,e.free_gift[t])})).reduce((function(e,t){return[e,", ",t]})):"-";return[{display:ve(e),value:""},{display:t,value:"-"},{display:Ot(e.upsell_revenue)?"-":Object(n.createElement)(he.c,{type:"success",content:U.formatAmount(e.upsell_revenue)}),value:e.upsell_revenue},{display:r,value:"-"},{display:Ot(e.special_addon_revenue)?"-":Object(n.createElement)(he.c,{type:"success",content:U.formatAmount(e.special_addon_revenue)}),value:e.special_addon_revenue},{display:e.free_shipping_orders,value:e.free_shipping_orders},{display:o,value:"-"},{display:e.discount,value:e.discount},{display:Object(p.F)(e.date),value:e.date}]})),Ee=function(e){e!==K&&C(ce,1,e,ie,!0)},Se=u()("bwf-cart-upsell-order-list","bwf-table-list",{"has-search":!0}),Pe=Object(n.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start",key:"table-action"},Object(n.createElement)("div",{className:"bwf-display-flex gap-12 bwf-export-btn"},oe?Object(n.createElement)(ke.Button,{onClick:function(){oe&&o(!0)},className:u()("bwf-btn-gray bwf-export-icon"),isSecondary:!0},Object(n.createElement)(Oe.a,{icon:"king",size:16,color:Ze.NOTICE_YELLOW}),Object(s.__)("Export","funnel-builder")):Object(n.createElement)(et.a,{title:Object(s.__)("Export Cart Upsell","funnel-builder"),type:"cart-conversions",exportType:"cart-conversions",filters:ie,filterList:Q,totalText:(isNaN(G)?0:G)+Object(s.__)(" orders","funnel-builder"),total:isNaN(G)?0:G,isDisabled:H,search:ce,apiPrefix:""}))),Ce=[{type:"icon",data:{content:Object(n.createElement)(Oe.a,{icon:"zero-orders",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(s.__)("No Conversions to show","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(s.__)("Orders will began to show once a conversion is recorded","funnel-builder"),style:{color:"#82838E"}}}];if(!(Object(h.size)(ie)||Object(h.size)(V)||H||Object(h.size)(ce)))return Object(n.createElement)(Qe.a,{data:Ce});var De=function(e){C(ce,1,K,e,!0)},xe=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(m.a,{filterList:null!=Q?Q:[],isLoading:H,filterData:ie,setFilterData:function(e,t){oe||(ue("upsell-orders",t),Object(h.isEmpty)(e)||De(e),Object(h.isEmpty)(e)&&Object(h.isEmpty)(t)&&De([]))},key:"upsell-filter"})),Te=Object.keys(me.selected).reduce((function(e,t){return me.selected[t]?e+1:e}),0);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ee.a,{className:Se+" bwf-choose-filter",rows:we,headers:ge,query:{paged:z},rowsPerPage:K,totalRows:isNaN(G)?0:G,isLoading:H,onPageChange:function(e){C(ce,e,K,ie,!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:Ee},actions:[Object(n.createElement)(n.Fragment,{key:"order-list-filter"},!ae&&oe?Object(n.createElement)(d.b,{onPage:!0,modalContent:{proLink:Object(p.U)(["Cart","Upsell","Analytics","Upgrade","Modal"])}}):null,Object(n.createElement)("div",{className:"bwf-flex bwf--space-between bwf_w_full bwf-mt-1"},Te?Object(n.createElement)("div",{className:"bwf-selected-count-wrap"},Te," ",Object(s._n)("item","items",Te,"funnel-builder"),Object(s.__)(" selected in the list","funnel-builder")," ",Object(n.createElement)(ke.Button,{isLink:!0,onClick:function(){return ye()}},Object(n.createElement)(Oe.a,{icon:"cross",height:"12",width:"12",color:"#0073aa"})," ",Object(s.__)("Clear All","funnel-builder"))," ",Object(n.createElement)(ke.Button,{isSecondary:!0,className:"bwf-btn-gray",onClick:function(){!function(e){switch(e){case"delete":P(!0)}}("delete")},icon:Object(n.createElement)(Oe.a,{icon:"trash",size:16}),iconSize:16,isSmall:!0},Object(s.__)("Delete","funnel-builder"))):Object(n.createElement)(Xe.a,{key:"search",searchTerm:ce,isLoading:H,totalRows:isNaN(G)?0:G,isPlaceholder:!i,setSearchData:function(e){oe||(se("upsell-orders",e),C(e,1,K,ie,!0))}}),!H&&Pe))],rowHeader:!0,showMenu:!1,emptyMessage:W,extraSectionBeforefilterCol:xe}),Object(n.createElement)(dt,{floatingBarProps:me,resetSelection:ye,isLoading:H,deleteModal:S,setDeleteModal:P,error:$,doDeleteOrders:function(e){return C(ce,1,K,ie,!0,!1,e)}}),r&&Object(n.createElement)(Je.a,{isOpen:r,onRequestClose:function(){return o(!1)},modalContent:{title:Object(s.__)("Cart Upsell Export","funnel-builder"),feature:Object(s.__)("Cart Upsell Export","funnel-builder"),proLink:Object(p.U)(["Cart","Upsell","Order","Export","Upgrade","Modal"])}}),Object(n.createElement)(bt,{isOpen:f,isLoading:H,deleteEntity:O,deleteOrders:w,onRequestClose:function(){return y(!1)},onDeleteSuccess:function(){return y(!1)},onDeleteFailed:function(){return y(!1)},closeAnimationInProgress:function(){return y(!1)},error:$,doDeleteOrders:function(e){return C(ce,1,K,ie,!0,!1,e)}}))}));r(1195),t.default=function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(n.Suspense,{fallback:Object(n.createElement)(n.Fragment,null)},Object(n.createElement)(a.a,null,Object(n.createElement)(i.a,{pageKey:"cart-upsell"},(function(e){var t=e.ref;return Object(n.createElement)("div",{ref:t},Object(n.createElement)(o.Switch,null,Object(n.createElement)(o.Route,{exact:!0,path:["/analytics/cart-upsell","/analytics/cart-upsell/overview"],render:function(e){return Object(n.createElement)($e,e)}}),Object(n.createElement)(o.Route,{exact:!0,path:["/analytics/cart-upsell/conversions"],render:function(e){return Object(n.createElement)(gt,e)}}),p.v))})))))}},296:function(e,t,r){},297:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(8),l=r(55),u=(r(304),r(5));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,r=void 0===t?[]:t,o=e.className,d=e.center,b=void 0!==d&&d,p=e.isDismissive,m=void 0!==p&&p,y=e.onDismisal,v=void 0===y?function(){}:y,h=e.isProFeatureLocked;if(Object(i.isEmpty)(r))return!1;return Object(n.createElement)("div",{className:a()("bwf-zero-state",o,{"bwf-block-t-center":b})},m&&Object(n.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return v()},style:{transform:"rotate(45deg)"}},Object(n.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(n.createElement)("div",{className:"bwf-zero-state-wrap"},r.map((function(e,t){return Object(n.createElement)(n.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(n.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(n.createElement)(l.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(n.createElement)(l.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(n.createElement)(l.c,null,Object(n.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(n.createElement)(l.b,{className:"bwf_text_left"},e.heading&&Object(n.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(n.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),h&&Object(n.createElement)("div",{className:"bwf-zero-sec-lock"},Object(n.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(n.createElement)(l.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(n.createElement)(c.Button,f({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:a()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&h&&Object(n.createElement)("span",{className:"bwf-zero-sec-lock"},Object(n.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(n.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},300:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u}));var n=r(0),o=r(15),a=r.n(o),i=["component","children"];var c=Object(n.createContext)(2);function l(e){return Object(n.createElement)(c.Consumer,null,(function(t){var r="h"+Math.min(t,6);return Object(n.createElement)(r,e)}))}function u(e){var t=e.component,r=e.children,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,i),a=t||"div";return Object(n.createElement)(c.Consumer,null,(function(e){return Object(n.createElement)(c.Provider,{value:e+1},!1===t?r:Object(n.createElement)(a,o,r))}))}u.propTypes={component:a.a.oneOfType([a.a.func,a.a.string,a.a.bool]),children:a.a.node}},304:function(e,t,r){},309:function(e,t,r){"use strict";var n=r(0),o=r(1),a=r(5);r(333);t.a=function(e){var t=e.onClose,r=e.title,i=e.isDismissible,c=void 0===i||i;return Object(n.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-modal-title"},r),c&&Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(o.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(n.createElement)(a.a,{icon:"close",size:20})))}},314:function(e,t,r){"use strict";var n=r(0),o=(r(8),r(6)),a=r.n(o),i=r(2),c=r(15),l=r.n(c),u=r(5),s=r(45),f=(r(296),r(289)),d=function(e){var t=e.disabled,r=e.value,o=e.onChange,c=e.dateFormat,l=e.label,f=e.describedBy,d=e.error,b=e.onFocus,p=e.onKeyDown,m=e.errorPosition,y=e.placeHolder,v=a()("bwf-calendar-input",{"is-empty":0===r.length,"is-error":d}),h=Object(i.uniqueId)("_woo-dates-input"),O=Object(n.useRef)(null);return Object(n.createElement)("div",{className:v},Object(n.createElement)("input",{type:"text",ref:O,className:"bwf-calendar-input-text",value:r,onChange:o,"aria-label":l,id:h,"aria-describedby":"".concat(h,"-message"),placeholder:Object(i.isEmpty)(y)?c.toLowerCase():y,onFocus:b,onKeyDown:p,disabled:t}),d&&Object(n.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:m},d),Object(n.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){b(),O.current&&O.current.focus()}},Object(n.createElement)(u.a,{icon:"calender"})),Object(n.createElement)("p",{className:"screen-reader-text",id:"".concat(h,"-message")},d||f))};d.propTypes={disabled:l.a.bool,value:l.a.string,onChange:l.a.func.isRequired,dateFormat:l.a.string.isRequired,label:l.a.string.isRequired,describedBy:l.a.string.isRequired,error:l.a.string,errorPosition:l.a.string,onFocus:l.a.func,onKeyDown:l.a.func};var b={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop};t.a=Object(f.a)(d,b)},315:function(e,t,r){"use strict";r.d(t,"a",(function(){return P}));var n=r(0),o=(r(329),r(330),r(1)),a=r(8),i=r(2),c=r(60),l=r(13),u=r.n(l),s=r(15),f=r.n(s),d=r(83),b=r(6),p=r.n(b),m=(r(296),r(314)),y=r(300),v=r(4),h=r(84);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function w(e,t,r){return t=_(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=w(this,t,[e])).onDateChange=r.onDateChange.bind(r),r.onInputChange=r.onInputChange.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(a=[{key:"handleKeyDown",value:function(e,t,r){var n=r.keyCode;c.TAB===n&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var r=this.props,n=r.onUpdate,o=r.dateFormat,a=u()(t);n({date:a,text:t?a.format(o):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,r=this.props.dateFormat,n=Object(d.i)(r,t),o=n?null:d.b.invalid;this.props.onUpdate({date:n,text:t,error:t.length>0?o:null})}},{key:"render",value:function(){var e=this,t=this.props,r=t.date,a=t.disabled,c=t.text,s=t.dateFormat,f=t.error,d=t.isInvalidDate,b=t.placeHolder,y=t.position,v=void 0===y?"bottom center":y,O=t.hasValue,g=void 0!==O&&O,j=t.className,w=(Object(l.isMoment)(r)?r.isValid():u()(r).isValid())?r:"";return Object(n.createElement)("div",{className:p()("bwf-specific-date",{"bwf-has-value":g})},Object(n.createElement)(h.a,{position:v,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(j),renderToggle:function(t){var r=t.isOpen,l=t.onToggle;return Object(n.createElement)(m.a,{disabled:!!r&&a,value:c,onChange:e.onInputChange,dateFormat:s,label:Object(o.__)("Choose a date","funnel-builder"),error:f,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date in format %s","funnel-builder"),s),onFocus:Object(i.partial)(e.handleFocus,r,l),"aria-expanded":r,focusOnMount:!1,onKeyDown:Object(i.partial)(e.handleKeyDown,r,l),errorPosition:"top center",placeHolder:b})},renderContent:function(t){var r=t.onToggle;return Object(n.createElement)(P,{onToggle:r,date:w,isInvalidDate:d,onDateChange:e.onDateChange})}}))}}])&&g(r.prototype,a),s&&g(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(n.Component),P=function(e){var t=e.onToggle,r=e.date,o=e.onDateChange,c=e.isInvalidDate,l=Object(n.useRef)();return Object(v.ub)(l,(function(){return t()})),Object(n.createElement)("div",{ref:l},Object(n.createElement)(y.b,{component:!1},Object(n.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(n.createElement)(a.DatePicker,{currentDate:r,onChange:Object(i.partial)(o,t),isInvalidDate:c}))))};S.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=S},318:function(e,t,r){"use strict";var n=r(0),o=r(1),a=r(6),i=r.n(a),c=r(2),l=r(15),u=r.n(l),s=r(355),f=r(75),d=r(65),b=function(e){var t=e.children;return Object(n.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};b.propTypes={children:u.a.node};var p=b,m=r(345),y=r(337),v=r(363),h=function(e){var t=e.data;return Object(n.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var r=e.label,o=e.value;return Object(n.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(n.createElement)("span",{className:"bwf-table-summary-value"},o),Object(n.createElement)("span",{className:"bwf-table-summary-label"},r))})))};h.propTypes={data:u.a.array};var O=h,g=(r(390),r(289));function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}function P(e,t,r){return t=k(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(r=P(this,t,[e])).getShowCols(e.headers);return r.state={showCols:n},r.onColumnToggle=r.onColumnToggle.bind(r),r.onPageChange=r.onPageChange.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,(a=[{key:"componentDidUpdate",value:function(e){var t=e.headers,r=e.query,n=this.props,o=n.headers,a=n.onColumnsChange,i=n.query,l=this.state.showCols;if(Object(c.isEqual)(o,t)||this.setState({showCols:this.getShowCols(o)}),i.orderby!==r.orderby&&!l.includes(i.orderby)){var u=l.concat(i.orderby);this.setState({showCols:u}),a(u)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,r=e.visible;return!(void 0!==r&&!r)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var r=e.key;return t.includes(r)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,r=e.rows,n=this.state.showCols;return r.map((function(e){return t.map((function(t,r){var o=t.key;return n.includes(o)&&e[r]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,r=this.props,n=r.headers,o=r.query,a=r.onQueryChange,i=r.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(o.orderby===e){var r=Object(c.find)(n,{defaultSort:!0})||Object(c.first)(n)||{};a("sort")(r.key,"desc")}var l=Object(c.without)(t.showCols,e);return i(l,e),{showCols:l}}var u=[].concat(w(t.showCols),[e]);return i(u,e),{showCols:u}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,r=e.onQueryChange;t&&t.apply(void 0,arguments),r&&r("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,r=t.actions,a=t.className,c=t.isLoading,l=t.onQueryChange,u=t.onSort,b=t.query,h=t.rowHeader,g=t.rowsPerPage,j=t.showMenu,w=t.summary,_=t.title,E=t.totalRows,S=t.rowClasses,P=t.emptyMessage,k=t.filterColumnIcon,C=void 0===k?"":k,D=t.extraSectionBeforefilterCol,x=t.hideHeader,T=t.footer,N=t.showPagination,A=void 0===N||N,F=t.id,R=t.perPageOptions,I=this.state.showCols,M=this.props.headers,L=this.getVisibleHeaders(),B=this.getVisibleRows(),q=i()("bwf-table","bwf-analytics-card",a,{"bwf-table-placeholder":c});return Object(n.createElement)(s.a,{className:q,title:_,action:r,hideHeader:x&&"yes"==x?"yes":"no",footer:T,menu:!(!D&&!j)&&Object(n.createElement)("div",null,D,j&&Object(n.createElement)(f.a,{label:Object(o.__)("Choose which values to display","funnel-builder"),buttonIcon:C,renderContent:function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p,null,Object(o.__)("Columns:","funnel-builder")),M.map((function(t){var r=t.key,o=t.label;return t.required?null:Object(n.createElement)(d.a,{checked:I.includes(r),isCheckbox:!0,isClickable:!0,key:r,onInvoke:e.onColumnToggle(r)},o)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable,id:F},c?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(n.createElement)(v.a,{numberOfRows:g,headers:L,rowHeader:h,caption:_,query:b})):Object(n.createElement)(y.a,{rows:B,headers:L,rowHeader:h,caption:_,query:b,emptyMessage:P,onSort:u||l("sort"),rowClasses:S}),A&&!c&&Object(n.createElement)(m.a,{key:parseInt(b.paged,10)||1,page:parseInt(b.paged,10)||1,perPage:g,total:E,onPageChange:this.onPageChange,onPerPageChange:l("per_page"),perPageOptions:R}),w&&Object(n.createElement)(O,{data:w}))}}])&&E(r.prototype,a),l&&E(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,l}(n.Component);D.propTypes={headers:u.a.arrayOf(u.a.shape({hiddenByDefault:u.a.bool,defaultSort:u.a.bool,isSortable:u.a.bool,key:u.a.string,label:u.a.oneOfType([u.a.string,u.a.node]),required:u.a.bool})),ids:u.a.arrayOf(u.a.number),isLoading:u.a.bool,onQueryChange:u.a.func,onColumnsChange:u.a.func,onSort:u.a.func,query:u.a.object,rowHeader:u.a.oneOfType([u.a.number,u.a.bool]),rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,rowsPerPage:u.a.number.isRequired,showMenu:u.a.bool,summary:u.a.arrayOf(u.a.shape({label:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number])})),totalRows:u.a.oneOfType([u.a.number,u.a.string]).isRequired,rowClasses:u.a.arrayOf(u.a.string),showPagination:u.a.bool};var x={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[],showPagination:!0};t.a=Object(g.a)(D,x)},320:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(r(3)),a=c(r(394)),i=c(r(397));function c(e){return e&&e.__esModule?e:{default:e}}var l=void 0;function u(e,t){var r,i,c,s,f,d,b,p,m=[],y={};for(d=0;d<e.length;d++)if("string"!==(f=e[d]).type){if(!t.hasOwnProperty(f.value)||void 0===t[f.value])throw new Error("Invalid interpolation, missing component node: `"+f.value+"`");if("object"!==n(t[f.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+f.value+"`","\n> "+l);if("componentClose"===f.type)throw new Error("Missing opening component token: `"+f.value+"`");if("componentOpen"===f.type){r=t[f.value],c=d;break}m.push(t[f.value])}else m.push(f.value);return r&&(s=function(e,t){var r,n,o=t[e],a=0;for(n=e+1;n<t.length;n++)if((r=t[n]).value===o.value){if("componentOpen"===r.type){a++;continue}if("componentClose"===r.type){if(0===a)return n;a--}}throw new Error("Missing closing component token `"+o.value+"`")}(c,e),b=u(e.slice(c+1,s),t),i=o.default.cloneElement(r,{},b),m.push(i),s<e.length-1&&(p=u(e.slice(s+1),t),m=m.concat(p))),1===m.length?m[0]:(m.forEach((function(e,t){e&&(y["interpolation-child-"+t]=e)})),(0,a.default)(y))}t.default=function(e){var t=e.mixedString,r=e.components,o=e.throwErrors;if(l=t,!r)return t;if("object"!==(void 0===r?"undefined":n(r))){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var a=(0,i.default)(t);try{return u(a,r)}catch(e){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},333:function(e,t,r){},337:function(e,t,r){"use strict";var n=r(0),o=r(2),a=r(6),i=r.n(a),c=r(15),l=r.n(c),u=r(1),s=r(8),f=r(43),d=r(612),b=r(613),p=r(614),m=r(5),y=r(22),v=r(289);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}function w(e,t,r){return t=_(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=w(this,t,[e])).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},r.container=Object(n.createRef)(),r.sortBy=r.sortBy.bind(r),r.updateTableShadow=r.updateTableShadow.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,r=this.props,n=r.headers,a=r.query;return function(){var r=a.orderby||Object(o.get)(Object(o.find)(n,{defaultSort:!0}),"key",!1),i=a.order||Object(o.get)(Object(o.find)(n,{key:r}),"defaultOrder","desc"),c="desc";e===r&&(c="desc"===i?"asc":"desc"),t.props.onSort(e,c)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,r=t.isScrollableRight,n=t.isScrollableLeft,o=e.scrollWidth-e.scrollLeft<=e.offsetWidth;o&&r?this.setState({isScrollableRight:!1}):o||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var a=e.scrollLeft<=0;a&&n?this.setState({isScrollableLeft:!1}):a||n||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,r=t.ariaHidden,a=t.caption,c=t.classNames,l=t.headers,f=t.instanceId,v=t.query,h=t.rowHeader,g=t.rows,j=t.rowClasses,w=t.emptyMessage,_=this.state,E=_.isScrollableRight,S=_.isScrollableLeft,P=_.tabIndex,k=i()("bwf-table-table",c,{"is-scrollable-right":E,"is-scrollable-left":S,"is-empty-data":!x}),C=v.orderby||Object(o.get)(Object(o.find)(l,{defaultSort:!0}),"key",!1),D=v.order||Object(o.get)(Object(o.find)(l,{key:C}),"defaultOrder","desc"),x=!!g.length;return Object(n.createElement)("div",{className:k,ref:this.container,tabIndex:P,"aria-hidden":r,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(n.createElement)("table",{width:"100%"},Object(n.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},a,"0"===P&&Object(n.createElement)("small",null,Object(u.__)("(scroll to see more)","funnel-builder"))),Object(n.createElement)("tbody",null,Object(n.createElement)("tr",null,l.map((function(t,r){var a=t.cellClassName,c=t.isSortable,l=t.isNumeric,m=t.key,v=t.label,h=t.screenReaderLabel,g=t.isPro,j="header-".concat(f,"-").concat(r),w={className:i()("bwf-table-header",a,{"is-sortable":c,"is-sorted":C===m,"is-numeric":l})};c&&(w["aria-sort"]="none",C===m&&(w["aria-sort"]="asc"===D?"ascending":"descending"));var _=C===m&&"asc"!==D?Object(u.sprintf)(Object(u.__)("Sort by %s in ascending order","funnel-builder"),h):Object(u.sprintf)(Object(u.__)("Sort by %s in descending order","funnel-builder"),h),E=Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{"aria-hidden":Boolean(h)},v),g&&Object(n.createElement)(y.b,null),h&&Object(n.createElement)("span",{className:"screen-reader-text"},h));return Object(n.createElement)("th",O({role:"columnheader",scope:"col",key:r},w),c?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(s.Button,{"aria-describedby":j,onClick:x?e.sortBy(m):o.noop},E,C===m&&"asc"===D?Object(n.createElement)(d.a,{icon:b.a}):Object(n.createElement)(d.a,{icon:p.a})),Object(n.createElement)("span",{className:"screen-reader-text",id:j},_)):E)}))),x?g.map((function(e,t){return Object(n.createElement)("tr",{key:t,className:j[t]},e.map((function(e,t){var o=l[t],a=o.cellClassName,c=(o.isLeftAligned,o.isNumeric),u=o.isPro,s=h===t,f=s?"th":"td",d=i()("bwf-table-item",a,{"is-conversion":"conversion"===l[t].key,"is-numeric":c,"is-sorted":C===l[t].key});return Object(n.createElement)(f,{scope:s?"row":null,key:t,className:d},u&&!r?"-":function(e){return e.display||null}(e))})))})):Object(n.createElement)("tr",{className:"bwf-table-empty"},Object(n.createElement)("td",{className:"bwf-table-empty-item",colSpan:l.length},Object(n.createElement)(m.a,{icon:"no-data",height:"82",width:"112"}),Object(n.createElement)("div",{className:"bwf-no-data"},Object(u.__)("No Data Available","funnel-builder")),w?Object(n.createElement)("div",{className:"bwf-info"},w):null)))))}}])&&g(r.prototype,a),c&&g(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,c}(n.Component);S.propTypes={ariaHidden:l.a.bool,className:l.a.string,headers:l.a.arrayOf(l.a.shape({defaultSort:l.a.bool,defaultOrder:l.a.string,isLeftAligned:l.a.bool,isNumeric:l.a.bool,isSortable:l.a.bool,key:l.a.string,label:l.a.node,required:l.a.bool,screenReaderLabel:l.a.string})),onSort:l.a.func,query:l.a.object,rows:l.a.arrayOf(l.a.arrayOf(l.a.shape({display:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number,l.a.bool])}))).isRequired,rowHeader:l.a.oneOfType([l.a.number,l.a.bool]),rowClasses:l.a.arrayOf(l.a.string)};var P={ariaHidden:!1,headers:[],onSort:o.noop,query:{},rowHeader:0,rowClasses:[]};t.a=Object(f.withInstanceId)(Object(v.a)(S,P))},338:function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},341:function(e,t,r){},345:function(e,t,r){"use strict";var n=r(0),o=r(1),a=r(8),i=r(6),c=r.n(i),l=r(15),u=r.n(l),s=r(2),f=(r(348),r(5)),d=r(288),b=r(289);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function O(e,t,r){return t=g(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w=[10,25,50,75,100],_=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=O(this,t,[e])).state={inputValue:r.props.page},r.previousPage=r.previousPage.bind(r),r.nextPage=r.nextPage.bind(r),r.onInputChange=r.onInputChange.bind(r),r.onInputBlur=r.onInputBlur.bind(r),r.perPageChange=r.perPageChange.bind(r),r.selectInputValue=r.selectInputValue.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),r=t,(i=[{key:"getPerPageOptions",value:function(){var e=this.props.perPageOptions;return[].concat(m(void 0===e?[]:e),w).sort((function(e,t){return e-t}))}},{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,r=t.page,n=t.onPageChange;r-1<1||n(r-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,r=t.page,n=t.onPageChange;r+1>this.pageCount||n(r+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,r=t.onPerPageChange,n=t.onPageChange,o=t.total,a=t.page;r(parseInt(e,10));var i=Math.ceil(o/parseInt(e,10));a>i&&n(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,r=t.onPageChange,n=t.page,o=parseInt(e.target.value,10);o!==n&&Number.isFinite(o)&&o>0&&this.pageCount&&this.pageCount>=o&&r(o,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,r=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var i=c()("bwf-pagination-link",{"is-active":t>1}),l=c()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(n.createElement)("div",{className:"bwf-pagination-page-arrows"},r&&Object(n.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(o.sprintf)(Object(o.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(n.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(n.createElement)(a.Button,{className:i,disabled:!(t>1),onClick:this.previousPage,label:Object(o.__)("Previous Page","funnel-builder")},Object(n.createElement)(f.a,{icon:"arrow-left",width:16})),Object(n.createElement)(a.Button,{className:l,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(o.__)("Next Page","funnel-builder")},Object(n.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=this.getPerPageOptions().map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(n.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(n.createElement)(d.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(n.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(o.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,r=e.perPage,o=e.className,a=e.showPerPagePicker;this.pageCount=Math.ceil(t/r);var i=c()("bwf-pagination",o);return this.pageCount<=1?t>this.getPerPageOptions()[0]&&Object(n.createElement)("div",{className:i},this.renderPerPagePicker())||null:Object(n.createElement)("div",{className:i},this.renderPageArrows(),a&&this.renderPerPagePicker())}}])&&v(r.prototype,i),l&&v(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,l}(n.Component);_.propTypes={page:u.a.number.isRequired,onPageChange:u.a.func,perPage:u.a.number.isRequired,onPerPageChange:u.a.func,total:u.a.oneOfType([u.a.number,u.a.string]).isRequired,className:u.a.string,showPagePicker:u.a.bool,showPerPagePicker:u.a.bool,showPageArrowsLabel:u.a.bool};var E={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0};t.a=Object(b.a)(_,E)},346:function(e,t,r){"use strict";var n=r(0),o=r(15),a=r.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function u(e,t,r){return t=s(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,t,[e])).scrollTo=r.scrollTo.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,window.location.hash?100:250)}},{key:"scrollTo",value:function(){var e=this.props.offset,t=void 0===e?"0":e,r=window.location.hash?window.location.hash.substring(1):null,n=document.getElementById(r);if(n){var o=n.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:o-parseInt(t,10),behavior:"smooth"})}else this.ref.current?window.scrollTo({top:0,behavior:"smooth"}):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(n.createRef)(),Object(n.createElement)("div",{ref:this.ref},e)}}])&&c(r.prototype,o),a&&c(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);d.propTypes={offset:a.a.string},t.a=d},347:function(e,t,r){"use strict";var n=r(1);t.a={calendarLabel:Object(n.__)("Calendar","funnel-builder"),closeDatePicker:Object(n.__)("Close","funnel-builder"),focusStartDate:Object(n.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(n.__)("Clear Date","funnel-builder"),clearDates:Object(n.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(n.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(n.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(n.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(n.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(n.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(n.__)("page up and page down keys","funnel-builder"),homeEnd:Object(n.__)("Home and end keys","funnel-builder"),escape:Object(n.__)("Escape key","funnel-builder"),questionMark:Object(n.__)("Question mark","funnel-builder"),selectFocusedDate:Object(n.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(n.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(n.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(n.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(n.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(n.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(n.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(n.sprintf)(Object(n.__)("Selected. %s","funnel-builder"),t)}}},348:function(e,t,r){},351:function(e,t,r){"use strict";var n=r(0),o=r(8),a=r(31),i=r(15),c=r.n(i),l=r(6),u=r.n(l),s=(r(368),r(5)),f=["labels","isOpen","showIcon","hasValue"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}var b=function(e){var t=e.labels,r=e.isOpen,i=e.showIcon,c=e.hasValue,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,f),b=u()("bwf-dropdown-button",{"is-open":r,"is-multi-line":t.length>1,"has-value":c});return Object(n.createElement)(o.Button,d({className:b,"aria-expanded":r},l),Object(n.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(n.createElement)("span",{key:t},Object(a.decodeEntities)(e))})),i&&Object(n.createElement)(s.a,{icon:"calender"})))};b.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=b},355:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(15),c=r.n(i),l=(r(75),r(300));r(389);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function b(e,t,r){return t=p(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return s(this,t),b(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props,t=e.action,r=e.children,o=e.description,i=e.isInactive,c=e.menu,u=e.title,s=e.hideHeader,f=e.footer,d=e.id,b=a()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(n.createElement)("div",{className:b,id:d},s&&"no"==s&&(!!u||t||c)&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-card-header"},!!u&&Object(n.createElement)("div",{className:"bwf-card-title-wrapper"},Object(n.createElement)("div",{className:"bwf-card-title bwf-card-header-item"},u),o&&Object(n.createElement)("div",{className:"bwf-card-description bwf-card-header-item"},o)),t&&Object(n.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(n.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(n.createElement)(l.b,{className:"bwf-card-body"},r),f&&Object(n.createElement)("div",{className:"bwf-card-footer"},f))}}])&&f(r.prototype,o),i&&f(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(n.Component);y.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])};t.a=y},358:function(e,t,r){"use strict";var n=r(0);t.a=function(e){var t=e.children,r=e.className,o=void 0===r?"":r;return Object(n.createElement)("div",{className:"bwf-c-container"},Object(n.createElement)("div",{className:"bwf-c-content-inner"},Object(n.createElement)("div",{className:"bwf-c-content-body ".concat(o)},t)))}},359:function(e,t,r){"use strict";r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return p}));var n=r(0),o=r(1),a=r(4),i=r(320),c=r.n(i),l=r(2),u=r(13),s=r.n(u),f=function(e,t){return Object(n.createElement)(n.Fragment,null,e.title,":"," ",c()({mixedString:e.operators?e.readable_text:"{{value /}}",components:{key:Object(n.createElement)(n.Fragment,null,e.title),rule:Object(n.createElement)(n.Fragment,null,d(e,t)),value:Object(n.createElement)("strong",{title:Object(n.renderToString)(b(e,t)),className:"bwf-t-overflow-ellipsis"},b(e,t))}}))},d=function(e,t){var r;if(e.operators)return"number"===e.type?e.operators[t.rule]:"search"===e.type?null===(r=e.operators[t.rule])||void 0===r?void 0:r.replace("Is",""):e.operators[t.rule]},b=function(e,t){if("date-range"===e.type)return t.data.period?p[t.data.period]:s()(t.data.after).format(Object(a.Z)())===s()(t.data.before).format(Object(a.Z)())?"".concat(s()(t.data.after).format(Object(a.Z)())):Object(n.createElement)(n.Fragment,null,"".concat(s()(t.data.after).format(Object(a.Z)())," - ").concat(s()(t.data.before).format(Object(a.Z)())));if("select"===e.type)return e.options[t.data];if("number"===e.type||"text"===e.type)return t.data;if("search"===e.type&&Object(l.isArray)(t.data)&&!Object(l.isEmpty)(t.data))return t.data.map((function(e){return e.label})).join(", ");if("search-select"===e.type)return t.data.label;if("checklist"===e.type){if(Object(l.isArray)(t.data))return Object(l.isEmpty)(t.data)||t.data.length!==Object.keys(e.options).length?t.data.map((function(t){return e.options[t]})).join(", "):"All";if(t.data)return e.options[t.data]}return null},p={today:Object(o.__)("Today","funnel-builder"),yesterday:Object(o.__)(" Yesterday","funnel-builder"),week:Object(o.__)("This Week","funnel-builder"),last_week:Object(o.__)("Last Week","funnel-builder"),month:Object(o.__)("This Month","funnel-builder"),last_month:Object(o.__)("Last Month","funnel-builder"),quarter:Object(o.__)("Quarter to Date","funnel-builder"),last_quarter:Object(o.__)("Last Quarter","funnel-builder"),year:Object(o.__)("Year to Date","funnel-builder"),last_year:Object(o.__)("Last Year","funnel-builder"),specificDate:Object(o.__)("On Specific Date","funnel-builder"),custom:Object(o.__)("Custom Date Range","funnel-builder")}},360:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return h}));var n=r(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t=l(Object(n.useState)({}),2),r=t[0],o=t[1],a=Object.keys(r).length>0&&Object.keys(r).reduce((function(e,t){return e&&r[t]}),!0);Object(n.useEffect)((function(){var t={};if(e)for(var r in e)t[r]=!1;o(t)}),[e]);var u=Object(n.useCallback)((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=i(i({},r),{},c({},e,t));o(n)}}),[r]),s=Object(n.useMemo)((function(){var e={};for(var t in r){var n={selected:r[t],checked:r[t],onChange:u(t)};e[t]=n}return e}),[r]),f=Object(n.useCallback)((function(){var e={};for(var t in r)e[t]=!a;o(e)}),[r,a]);return{singleSelectProps:s,selectAllProps:{selected:a,checked:a,onChange:f},floatingBarProps:{items:e,selected:r},resetSelection:Object(n.useCallback)((function(){var e={};for(var t in r)e[t]=!1;o(e)}),[r])}},f=r(8),d=r(1),b=r(5),p=(r(410),r(411),function(e){var t=e.number,r=void 0===t?0:t;return Object(n.createElement)("span",{className:"bwf-count-badge"},r)}),m=r(64);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.selected,r=void 0===t?{}:t,o=e.items,a=void 0===o?{}:o,i=e.actions,c=void 0===i?[]:i,l=e.onAction,u=y(Object(n.useState)(!1),2),s=u[0],v=u[1],h=function(e){return e.length>0?{gridTemplateColumns:e.reduce((function(e){return"".concat(e," auto")}),"")}:{}}(c),O=Object(m.a)().setModalData,g=Object.keys(r).reduce((function(e,t){return r[t]?e+1:e}),0);Object(n.useEffect)((function(){v(g>0)}),[g]);var j=Object.keys(a).filter((function(e){return r[e]})).map((function(e){return a[e]})),w=Object(n.createElement)(n.Fragment,null,Object(n.createElement)(p,{number:g}),Object(n.createElement)("b",{style:{marginLeft:"5px"}},Object(d.__)("Items Selected","funnel-builder")));return s&&Object(n.createElement)("div",{className:"bwf-floating-action-bar-outer"},Object(n.createElement)("div",{className:"bwf-floating-action-bar"},Object(n.createElement)("div",{className:"bwf-floating-action-bar-wrapper"},Object(n.createElement)("span",{className:"bwf-floating-action-bar-count"},w),Object(n.createElement)("div",{className:"bwf-floating-action-bar-actions",style:h},c.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(n.createElement)("span",{key:"bulk-action-".concat(t),title:e.hint?e.hint:"",onClick:function(){if(l){if("delete"===e.id){var t=j.length,r=1===j.length?j[0].title:"";O({title:r,count:t})}l(e.id,j)}}},Object(n.createElement)(b.a,{icon:e.icon}))}))),Object(n.createElement)(f.Button,{isSecondary:!0,onClick:function(){return v(!1)}},Object(d.__)("Close","funnel-builder")))))}},363:function(e,t,r){"use strict";var n=r(0),o=r(2),a=r(15),i=r.n(a),c=r(337);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=["numberOfRows"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function v(e,t,r){return t=h(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return p(this,t),v(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(a=[{key:"render",value:function(){var e=this,t=this.props,r=t.numberOfRows,a=void 0===r?5:r,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,u),l=Object(o.range)(a).map((function(){return e.props.headers.map((function(){return{display:Object(n.createElement)("span",{className:"is-placeholder"})}}))})),f=this.props.headers.map((function(e){return d(d({},e),{},{label:Object(n.createElement)("span",{className:"is-placeholder"})})}));return Object(n.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:l},i,{headers:f}))}}])&&m(r.prototype,a),i&&m(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,i}(n.Component);g.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},t.a=g},368:function(e,t,r){},384:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(1),l=r(8),u=r(5),s=r(84),f=(r(420),r(288)),d=r(10),b=r.n(d),p=r(132),m=r(4),y=r(22);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){e.slug;var t=e.api,r=e.setData,o=e.value,l=e.searchHelper,u=void 0===l?{}:l,s=e.default_options,f=e.operators,d=e.val_label,v=u.funnelId,O=w(Object(n.useState)([]),2),j=O[0],_=O[1],E=w(Object(n.useState)(Object(i.size)(s)?s:[{id:"no-result",name:"No data available"}]),2),S=E[0],P=E[1],k=w(Object(n.useState)(!Object(i.size)(s)&&!Object(i.size)(o)),2),C=k[0],D=k[1],x=w(Object(n.useState)(!1),2),T=x[0],N=x[1],A=w(Object(n.useState)(!1),2),F=A[0],R=A[1],I=w(Object(n.useState)(Object(i.isArray)(o)?o.map((function(e){var t;return g(g({},e),{},{id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString()})})):[]),2),M=I[0],L=I[1],B=Object(n.useRef)(new AbortController),q=function(e){return e.value?Object(n.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(n.createElement)("span",{className:"bwf-t-overflow-ellipsis bwf-w-180",title:e.label||e.name},e.label||e.name),Object(n.createElement)(y.c,{content:e.value})):e.label||e.name},Y=function(e,t){e&&r("",t)},U=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n){B.current=new AbortController,Object(i.size)(e)?D(!0):D(!!r);var o=t.replace("{{search}}",encodeURIComponent(e))+(v?"&funnel_id=".concat(v):"");b()({path:Object(m.y)(o),signal:B.current.signal}).then((function(t){if(t&&Object(i.isArray)(t)&&!Object(i.isEmpty)(t)){var n,o,a;N(null===(n=t[0])||void 0===n?void 0:n.hasOwnProperty("steps"));var c=t.map((function(e){return{name:e.name||e.label,id:e.id.toString(),labelText:q(e),steps:null==e?void 0:e.steps}})),l=t.map((function(e){var t;return{name:(null==e?void 0:e.name)||(null==e?void 0:e.label),id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString()}}));Object(i.size)(e)&&null!==(o=t[0])&&void 0!==o&&o.hasOwnProperty("steps")?(_(c),Y(r,c)):null!==(a=t[0])&&void 0!==a&&a.hasOwnProperty("steps")?(P(c),Y(r,c)):Object(i.size)(e)?(_(l),Y(r,l)):(P(l),Y(r,l))}else Object(i.isEmpty)(e)?_([{id:"no-result",name:"No data available"}]):_([{id:"no-result",name:'No result found for "'.concat(e,'"')}]),Y(r,[{id:"no-result",name:"No data available"}]);D(!1),R(!1)})).catch((function(e){D(!1),console.log(e)}))}};Object(n.useEffect)((function(){Object(i.isEmpty)(s)&&(U("",!!Object(i.isEmpty)(o)),R(!0))}),[]),Object(n.useEffect)((function(){var e;null!==(e=S[0])&&void 0!==e&&e.hasOwnProperty("steps")&&N(!0)}),[S]);var V=Object(i.isArray)(M)?M.map((function(e){return e.id})):[];return Object(n.createElement)(p.a,{conditionLabel:d,values:V,isFirstLoading:F,searchedValue:function(e,t,r){U(e,t,r)},selectedValue:M,onChangeValue:function(){},multiGroup:T,hasDefaultOption:S,onChangeData:function(e){var t=e.map((function(e){var t;return{id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString(),label:e.label||e.name}}));L(h(t)),r(e.map((function(e){return{id:null==e?void 0:e.id,label:e.label||e.name}})))},options:h(j.filter((function(e){return V.findIndex((function(t){return t.id===e.id}))<0}))),defaultOptions:S,className:a()("bwf-filter-search",{"no-operator":Object(i.isEmpty)(f)}),isLoading:C,placeholder:Object(c.__)("Search","funnel-builder"),showInitialList:!1,abortController:B})},P=r(13),k=r.n(P),C=r(315),D=r(15),x=r.n(D),T=r(385),N=r(351);r(341);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}function I(e,t,r){return t=M(t),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],M(e).constructor):t.apply(e,r))}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=I(this,t,[e])).isValidSelection=r.isValidSelection.bind(r),r.popoverRef=Object(n.createRef)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),r=t,(o=[{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,r=e.secondaryDate,n=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||n.push("".concat(Object(c.__)("vs.","funnel-builder")," ").concat(r.label," (").concat(r.range,")")),n}},{key:"isValidSelection",value:function(e){var t=this.state,r=t.compare,n=t.after,o=t.before;return"custom"!==e||r&&n&&o}},{key:"render",value:function(){var e=this,t=this.props,r=t.disablePresets,o=void 0!==r&&r,c=t.hasValue,l=t.showIcon,u=t.onRangeSelect,f=t.dateQuery,d=t.dateRange;return Object(n.createElement)("div",{className:"bwf-range-filter"},Object(n.createElement)("div",{className:a()("bwf-range-filters-container",{"bwf-presets-disable":o})},Object(n.createElement)(s.a,{contentClassName:"bwf-filters-date-content is-from-bottom-only",expandOnMobile:!0,renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return Object(n.createElement)(N.a,{onClick:r,isOpen:t,labels:!Object(i.isEmpty)(d)&&d.hasOwnProperty("after")?["".concat(k()(d.after).format(m.c)," - ").concat(k()(d.before).format(m.c))]:["Start Date ~ End Date"],showIcon:l,hasValue:c})},renderContent:function(t){var r=t.onClose;return Object(n.createElement)(T.a,{hideCompare:e.props.hideCompare,onClose:r,after:d.hasOwnProperty("after")?k()(d.after):null,before:k()(d.before).endOf("day"),isValidSelection:e.isValidSelection,disablePresets:o,value:function(e){return u(e)},dateQuery:f,popoverRef:e.popoverRef})},popoverProps:{ref:this.popoverRef}})))}}])&&F(r.prototype,o),l&&F(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,l}(n.Component);B.propTypes={onRangeSelect:x.a.func,dateQuery:x.a.shape({period:x.a.string,compare:x.a.string,before:x.a.object,after:x.a.object,primaryDate:x.a.shape({label:x.a.string,range:x.a.string}),secondaryDate:x.a.shape({label:x.a.string,range:x.a.string})})};var q=B,Y=r(83),U=r(12);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G=function(e){var t=e.value,r=e.rule,o=e.setData,a=e.returnPeriod,c=Object(n.useRef)(!0),l=Object(U.i)(),u=a&&{period:r};return Object(n.useEffect)((function(){if(Object(i.isEmpty)(r)||"specificDate"===r||"custom"===r)c.current||o("");else{l.period=r;var e=((t=l).compare="previous_year",{primary:Object(Y.d)(t).primary}).primary;o(K({before:e.before.format(m.f),after:e.after.format(m.e)},u))}var t;c.current&&(c.current=!1)}),[r]),Object(n.createElement)(n.Fragment,null,"specificDate"!==r&&"custom"!==r&&Object(n.createElement)("div",{style:{marginTop:-16}}),"specificDate"===r&&Object(n.createElement)(C.b,{dateFormat:m.c,onUpdate:function(e){o(K({before:k()(e.date).endOf("day").format(m.f),after:k()(e.date).startOf("day").format(m.e)},u))},text:t&&t.before?k()(t.before).format(m.c):"Select Date",date:t&&t.before?k()(t.before).format(m.c):k()().format(m.c),hasValue:!(!t||!t.before),iconRight:!0,placeHolder:"Select Date",disabled:!0,position:"bottom right",isInvalidDate:function(e){return k()(e).isAfter(k()(),"day")},className:"is-from-bottom-only"}),"custom"===r&&Object(n.createElement)(q,{key:JSON.stringify(l),dateRange:Object(i.size)(t)?t:{before:k()().endOf("day").format(m.c)},hasValue:!Object(i.isEmpty)(t),onRangeSelect:function(e){o(K({before:k()(e.before).format(m.f),after:k()(e.after).format(m.e)},u))},isoDateFormat:m.c,hideCompare:!0,showIcon:!0}))},W=r(359);function $(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e){var t=e.options,r=e.value,o=e.setData,a=(e.remove,e.multiple),c=void 0!==a&&a;return Object(n.createElement)("div",{className:"bwf-filter-checklist"},Object.keys(t).map((function(e,a){return Object(n.createElement)("div",{key:"bwf-filter-check-item-".concat(a),onClick:function(){c?Object(i.isEmpty)(r)?o([e]):r.includes(e)?o(r.filter((function(t){return t!==e}))):o([].concat($(r),[e])):o(e)}},Object(n.createElement)("span",null,t[e])," ",(c&&Object(i.isArray)(r)&&r.includes(e)||r===e)&&Object(n.createElement)(u.a,{icon:"tick",height:"16",width:"16"}))})))},J=r(55),Z=r(28),ee=function(){return Object(n.createElement)(J.a,{justify:"flex-start"},Object(n.createElement)(J.c,null,Object(n.createElement)(Z.a,{h:24,w:100,br:19})),Object(n.createElement)(J.c,null,Object(n.createElement)(Z.a,{h:24,w:100,br:19})),Object(n.createElement)(J.c,null,Object(n.createElement)(Z.a,{h:24,w:100,br:19})))},te=r(20),re=r(18),ne=r(407),oe=["options"],ae=["options"];function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function le(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function de(){return(de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=function(e){var t=e.label,r=e.icon,o=e.isPrimary,i=void 0!==o&&o,c=e.onClick,l=void 0===c?function(){}:c,s=e.onClear,f=e.isActive,d=e.rule,b=e.isProFeatureLocked,p=e.isLocked,m=e.iconColor;return Object(n.createElement)("div",{className:a()("bwf-filter__tag",{"is-primary":i,"is-active":f,"is-locked":p,"is-pro-locked":(null==d?void 0:d.is_pro)&&b}),onClick:p||b&&null!=d&&d.is_pro?function(){}:l},!f&&(b&&null!=d&&d.is_pro?Object(n.createElement)(y.b,{className:"size-16"}):Object(n.createElement)(u.a,{icon:p?"lock":r,height:"16",width:"16",color:m||re.TEXT_COLOR_2})),Object(n.createElement)("span",null,t),f&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(u.a,{icon:"angle-down",height:"12",width:"12",color:"#212121"}),Object(n.createElement)("span",{className:"remove-icon",onClick:s},Object(n.createElement)(u.a,{icon:"dismiss-circle",height:"16",width:"16",color:"#353030"}))))},ve=function(e){var t=e.rule,r=e.filter,o=e.filterData,a=e.remove,u=e.setFilter,f=e.tempFilters,d=e.updateTempRule,b=e.propsToPass,p=void 0===b?{}:b,y=e.isProFeatureLocked,v=e.isLocked,h=function(e,t){return!(!e.required.includes("data")||!Object(i.isEmpty)(t.data))||!(e.hasOwnProperty("operators")||!e.required.includes("data")||!Object(i.isEmpty)(t.data))},O=Object(n.useRef)(),g=Object(n.useRef)();Object(m.ub)(g,(function(){void 0!==O.current&&O.current()}));var j=f.find((function(e){return e.filter===t.slug})),w=o.find((function(e){return(Object(i.isEmpty)(t.required)||(!t.required.includes("data")||Object(i.size)(e.data))&&(!t.required.includes("rule")||Object(i.size)(e.rule)))&&e.filter===t.slug})),_=Object(n.useMemo)((function(){if(t.data_2)return!t.data_2.toggler||j&&j[t.data_2.toggler[0]]===t.data_2.toggler[1]}),[t,j]);return Object(n.createElement)("div",{className:"bwf-filter__sticky"},Object(n.createElement)(s.a,{contentClassName:"bwf-filter-dropdown",placement:"bottom right",expandOnMobile:!0,focusOnMount:!1,ref:g,flip:!1,renderToggle:function(e){var r=e.isOpen,o=e.onToggle;return Object(n.createElement)(ye,{icon:"add-circle",onClick:function(){r&&w&&d(w),o()},label:w?Object(W.b)(t,w):t.title,isActive:w,rule:t,onClear:function(e){e.stopPropagation(),a(j),r&&o()},isProFeatureLocked:y,isLocked:v})},renderContent:function(e){e.onClose;var o=e.onToggle;return O.current=o,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-heading"},t.title),Object(n.createElement)(ge,de({},t,{filter:r,value:j.rule,setRule:function(e){d(pe(pe({},j),{},{rule:e}))}})),Object(n.createElement)("div",{className:"".concat(!Object(i.isEmpty)(t.operators)&&Object(i.isEmpty)(j.rule)?"bwf-no-operator":"")},Object(n.createElement)(je,de({},t,p,{value:j.data,rule:j.rule,default_options:j.options,setData:function(e,t){Object(i.isEmpty)(t)||d(pe(pe({},j),{},{options:t})),d(pe(pe({},j),{},{data:e}))},remove:function(){return a(j)}}))),_&&Object(n.createElement)("div",{className:"bwf-mt-16"},Object(n.createElement)(je,de({},t.data_2,{value:j.data_2,rule:j.rule,default_options:t.data_2.options,setData:function(e,t){Object(i.isEmpty)(t)||d(pe(pe({},j),{},{options:t})),d(pe(pe({},j),{},{data_2:e}))},remove:function(){return a(j)}}))),Object(n.createElement)(l.Button,{className:"bwf-filter-apply-btn bwf-no-ripple",isPrimary:!0,onClick:function(){u(j),o()},disabled:h(t,j)},Object(c.__)("Apply","woocommerce")))}}))},he=function(e){var t=e.rules,r=e.filterData,o=e.setFilter,a=e.tempFilters,f=e.updateTempRule,d=e.propsToPass,b=void 0===d?{}:d,p=e.isProFeatureLocked,y=e.isLocked,v=ue(Object(n.useState)({}),2),h=v[0],O=v[1],g=a.find((function(e){return e.filter===h.slug})),j=Object(n.useRef)(),w=Object(n.useRef)();Object(m.ub)(w,(function(){void 0!==j.current&&j.current()}));var _=function(e){return r.find((function(t){return Object(i.size)(t.data)&&t.filter===e.slug}))};return Object(n.createElement)("div",{className:"bwf-filter__list"},Object(n.createElement)(s.a,{contentClassName:"bwf-filter-dropdown",placement:"bottom right",expandOnMobile:!0,focusOnMount:!1,ref:w,flip:!1,renderToggle:function(e){e.isOpen;var t=e.onToggle;return Object(n.createElement)(ye,{label:Object(c.__)("Add Filter","funnel-builder"),icon:"filter",onClick:function(){t()},isPrimary:!0,isProFeatureLocked:p,iconColor:re.BLUE_BASE})},renderContent:function(e){var a,s,d=e.isOpen,m=(e.onClose,e.onToggle);return j.current=m,Object(n.createElement)("div",null,Object(n.createElement)("div",{className:"bwf-filter-heading"},Object(c.__)("Filter By","funnel-builder")),Object(i.isEmpty)(h)?Object(n.createElement)("div",{className:"bwf-filter-list-item-wrap"},t.map((function(e,t){return Object(n.createElement)(Oe,de({},e,{key:"list-filter-item-".concat(t),onClick:function(){return O(e)},isSelected:r.findIndex((function(t){return Object(i.size)(t.data)&&t.filter===e.slug}))>-1,isProFeatureLocked:p,isLocked:y}))}))):Object(n.createElement)("div",{className:"bwf-filter-list-item__inner-wrap"},Object(n.createElement)("div",{className:"bwf-filter-list-item__inner-header"},Object(n.createElement)("span",{onClick:function(){d&&_(h)&&f(_(h)),O({})}},Object(n.createElement)(u.a,{icon:"arrow-left",size:"16"})),Object(n.createElement)("span",null,h.title)),Object(n.createElement)(ge,de({},h,{value:g.rule,setRule:function(e){f(pe(pe({},g),{},{rule:e}))}})),Object(n.createElement)("div",{className:"".concat(!Object(i.isEmpty)(h.operators)&&Object(i.isEmpty)(g.rule)?"bwf-no-operator":"")},Object(n.createElement)(je,de({},h,{value:g.data,rule:g.rule,default_options:null==g?void 0:g.options,setData:function(e,t){Object(i.isEmpty)(t)||o(g,t,g.filter),f(pe(pe({},g),{},{data:e}))}},b))),Object(n.createElement)(l.Button,{className:"bwf-filter-apply-btn bwf-no-ripple",isPrimary:!0,disabled:(a=h,s=g,!(!a.required.includes("data")||!Object(i.isEmpty)(s.data))||!(a.hasOwnProperty("operators")||!a.required.includes("data")||!Object(i.isEmpty)(s.data))),onClick:function(){o(g),O({}),m()}},Object(c.__)("Apply","woocommerce"))))}}))},Oe=function(e){var t=e.title,r=e.isSelected,o=e.onClick,a=e.is_pro,i=e.isProFeatureLocked,c=e.isLocked;return Object(n.createElement)("div",{className:"bwf-filter-list-item",onClick:function(e){c||a&&i||o(e)}},c?Object(n.createElement)(u.a,{icon:"lock",size:"16",color:re.TEXT_COLOR_2}):a&&i?Object(n.createElement)(y.b,{className:"size-16"}):Object(n.createElement)(u.a,{icon:r?"checkmark-circle-filled":"add-circle",width:"16",height:"16",color:r?re.BLUE_BASE:re.TEXT_COLOR_2}),Object(n.createElement)("span",null,t))},ge=function(e){var t=e.setRule,r=e.op_label,o=e.value,a=void 0===o?"":o,c=e.operators,l=void 0===c?{}:c,u=(e.op_default,e.type),s=e.hideFilters;if("date-range"===u){var d=Object(i.cloneDeep)(W.a);s&&Object.keys(W.a).forEach((function(e){s.includes(e)&&delete d[e]})),l=d}if(Object(i.isEmpty)(l))return null;var b=Object.keys(l).map((function(e){return{key:e,label:l[e]}}));return Object(n.createElement)("div",{className:"bwf-filter-operator-wrap"},Object(n.createElement)("label",null,r),Object(n.createElement)(f.b,{className:"bwf-filter-operator",options:b,onChange:function(e){t(e)},selected:a,bottomFixed:!0}))},je=function(e){var t,r,o=e.type,i=e.options,u=e.value,s=e.setData,d=e.val_label,b=e.operators,p=e.op_label,m=(e.default_options,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a()(t,{"no-operator":!b})});if("select"===o&&i){var y=Object.keys(i).map((function(e){return{key:e,label:i[e]}}));return Object(n.createElement)("div",{className:m("bwf-filter-select-wrap")},d&&Object(n.createElement)("label",null,d),Object(n.createElement)(f.b,{options:y,selected:u,onChange:function(e){return s(e)}}))}return"search"===o?Object(n.createElement)(S,de({},e,{className:m()})):"number"===o?Object(n.createElement)("input",{type:"number",value:u,placeholder:Object(c.__)("Enter value","funnel-builder"),onChange:function(e){return s(e.target.value)},className:m("bwf-number-control")}):"text"===o?Object(n.createElement)(l.TextControl,{value:u,label:p,onChange:function(e){return s(e)},className:m()}):"date-range"===o?Object(n.createElement)(G,de({},e,{className:m()})):"checklist"===o?Object(n.createElement)(X,de({},e,{className:m()})):"search-select"===o?Object(n.createElement)("div",{className:m("bwf-filter-checklist-dropdown-wrap")},d&&Object(n.createElement)("label",null,d),Object(n.createElement)(ne.a,{options:i,label:Object(n.createElement)("span",{className:"bwf-t-overflow-ellipsis",title:null!==(t=null==u?void 0:u.label)&&void 0!==t?t:Object(c.__)("Select","funnel-builder")},null!==(r=null==u?void 0:u.label)&&void 0!==r?r:Object(c.__)("Select","funnel-builder")),selected:null==u?void 0:u.value,onSelect:function(e){s(e)},className:m()})):void 0};t.a=function(e){var t=e.filterList,r=void 0===t?[]:t,o=e.filterData,a=e.setFilterData,c=e.propsToPass,l=e.isLoading,u=e.isLocked,s=Object(te.b)().isProFeatureLocked,f=ue(Object(n.useState)([]),2),d=f[0],b=f[1],p=ue(Object(n.useState)([]),2),m=p[0],y=p[1];if(Object(n.useEffect)((function(){if(!Object(i.isEmpty)(r)){var e=[];r.forEach((function(t){e.push.apply(e,le(null==t?void 0:t.rules))})),y(e.map((function(e){var t="";e.hasOwnProperty("operators")&&(t=Object.keys(null==e?void 0:e.operators)[0]);var r=o.find((function(t){return t.filter===e.slug}));return r||{filter:e.slug,rule:t,data:""}})))}}),[r,o]),Object(n.useEffect)((function(){if(!Object(i.isEmpty)(o)){var e,t=[],n=null===(e=r.find((function(e){return"list"===e.type})))||void 0===e?void 0:e.rules;o.forEach((function(e){if(n&&n.findIndex((function(t){return t.slug===e.filter}))>-1&&Object(i.size)(null==e?void 0:e.data)){var o,a=(null===(o=r.find((function(e){return"list"===e.type})))||void 0===o?void 0:o.rules).find((function(t){return t.slug===e.filter}));t.push(a)}})),b(t)}}),[o,r]),!Object(i.size)(r)||l)return Object(n.createElement)(ee,null);var v=function(e,t,r){var n,c=o.find((function(t){return t.filter===e.filter})),l=o;n=(l=Object(i.isEmpty)(l)?[e]:c?l.map((function(t){return t.filter===c.filter?e:t})):[].concat(le(l),[e])).map((function(e){return e.filter===r?pe(pe({},e),{},{options:t}):e}));var u=l.map((function(e){e.options;return ce(e,oe)})).filter((function(e){return!Object(i.isEmpty)(e.data)}));a(Object(i.isEmpty)(null==e?void 0:e.data)?[]:u,n)},h=function(e){y((function(t){return t.map((function(t){return t.filter===e.filter?e:t}))}))},O=function(e){e.rule="",e.data="",h(e),b((function(t){return t.filter((function(t){return t.slug!==e.filter}))}));var t,r=o.map((function(e){e.options;return ce(e,ae)})).filter((function(t){return t.filter!==e.filter&&!Object(i.isEmpty)(t.data)}));t=o.filter((function(t){return t.filter!==e.filter&&!Object(i.isEmpty)(t.data)})),a(r,t)},g=r.find((function(e){return"sticky"===e.type})),j=r.find((function(e){return"list"===e.type}));return Object(n.createElement)("div",{className:"bwf-filter-wrap"},g&&[].concat(le(null==g?void 0:g.rules),le(d)).map((function(t,r){return Object(n.createElement)(ve,de({},g,e,{propsToPass:c,rule:t,filterData:o,tempFilters:m,updateTempRule:h,setFilter:v,remove:O,key:"sticky-filter-wrap-".concat(r),isProFeatureLocked:s,isLocked:u}))})),j&&Object(n.createElement)(he,de({},j,e,{filterData:o,tempFilters:m,updateTempRule:h,setFilter:v,remove:O,propsToPass:c,isProFeatureLocked:s,isLocked:u})))}},385:function(e,t,r){"use strict";var n=r(0),o=r(15),a=r.n(o),i=r(13),c=r.n(i),l=(r(386),r(329),r(330),r(1)),u=r(6),s=r.n(u),f=r(441),d=r(2),b=r(182),p=r(83),m=(r(341),r(8)),y=r(5),v=(r(296),function(e){var t=e.disabled,r=void 0!==t&&t,o=e.value,a=e.onChange,i=e.dateFormat,c=e.label,l=e.describedBy,u=e.error,f=e.onFocus,b=void 0===f?function(){}:f,p=e.onKeyDown,v=void 0===p?d.noop:p,h=e.errorPosition,O=void 0===h?"bottom center":h,g=s()("bwf-calendar-input",{"is-empty":0===o.length,"is-error":u}),j=Object(d.uniqueId)("_woo-dates-input");return Object(n.createElement)("div",{className:g},Object(n.createElement)("div",{className:"bwf-date-range-input"},Object(n.createElement)("input",{type:"text",className:"bwf-calendar-input-text",value:o,onChange:a,"aria-label":c,id:j,"aria-describedby":"".concat(j,"-message"),placeholder:i,onFocus:b,onKeyDown:v,disabled:r}),Object(n.createElement)("div",{className:"bwf-label"},c)),u&&Object(n.createElement)(m.Popover,{className:"bwf-calendar-input-error bwf-tooltip",focusOnMount:!1,position:O},u),Object(n.createElement)("span",{className:"bwf-calender-custom-icon"},Object(n.createElement)(y.a,{icon:"calender-1",width:"16",height:"16"})),Object(n.createElement)("p",{className:"screen-reader-text",id:"".concat(j,"-message")},u||l))});v.propTypes={disabled:a.a.bool,value:a.a.string,onChange:a.a.func,dateFormat:a.a.string,label:a.a.string,describedBy:a.a.string,error:a.a.string,errorPosition:a.a.string,onFocus:a.a.func,onKeyDown:a.a.func};var h=v,O=r(347),g=r(4);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}function S(e,t,r){return t=P(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r))}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).state={lastCurrentMonth:c()(),rangeKey:Object(g.w)()},r.onDatesChange=r.onDatesChange.bind(r),r.onFocusChange=r.onFocusChange.bind(r),r.onInputChange=r.onInputChange.bind(r),r.nodeRef=Object(n.createRef)(),r.keepFocusInside=r.keepFocusInside.bind(r),r.handleEndPrevClick=r.handleEndPrevClick.bind(r),r.handleStartPrevClick=r.handleStartPrevClick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),r=t,(o=[{key:"onDatesChange",value:function(e){var t=e.startDate,r=e.endDate,n=this.props,o=n.onUpdate;n.shortDateFormat,o({after:t,before:r,afterText:t?t.format("MM/DD/YYYY"):"",beforeText:r?r.format("MM/DD/YYYY"):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var r=t.target.value,n=this.props,o=n.after,a=n.before,i=(n.shortDateFormat,Object(p.j)(e,r,a,o,"MM/DD/YYYY")),l=i.date,u=i.error;this.setState({lastCurrentMonth:c()(l).add(1,"month")}),this.props.onUpdate(w(w(w({},e,l),e+"Text",r),e+"Error",r.length>0?u:null)),"before"!==e||u||this.setState({rangeKey:Object(g.w)()})}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var r=t||c()();return e?r.clone().subtract(1,"month"):r}}},{key:"keepFocusInside",value:function(e,t){var r=this.props.popoverRef;(!t.relatedTarget||!t.relatedTarget.classList.contains("bwf-calendar-input-text")&&null!=r&&r.current&&null!=r&&r.current.contains(t.relatedTarget))&&this.nodeRef.current.querySelector(".DayPicker_focusRegion").focus({preventScroll:!0})}},{key:"handleStartPrevClick",value:function(e){this.setState({lastCurrentMonth:c()(e).add(1,"month")})}},{key:"handleEndPrevClick",value:function(e){this.setState({lastCurrentMonth:c()(e).add(1,"month")})}},{key:"render",value:function(){var e=this,t=this.props,r=t.after,o=t.before,a=t.focusedInput,i=t.afterText,u=t.beforeText,b=t.afterError,p=t.beforeError,v=(t.shortDateFormat,t.isViewportMobile),g=t.isInvalidDate,j=c()().format("MM");return Object(n.createElement)("div",{className:s()("bwf-calendar bwf-date-range-calender",{"is-mobile":v})},Object(n.createElement)("div",{className:"bwf-calendar-inputs"},Object(n.createElement)(h,{value:i,onChange:Object(d.partial)(this.onInputChange,"after"),dateFormat:"MM/DD/YYYY",label:Object(l.__)("Start Date","funnel-builder"),error:b,describedBy:Object(l.sprintf)(Object(l.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),"MM/DD/YYYY"),onFocus:function(){return e.onFocusChange("startDate")}}),Object(n.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(l.__)("to","funnel-builder")),Object(n.createElement)(h,{value:u,onChange:Object(d.partial)(this.onInputChange,"before"),dateFormat:"MM/DD/YYYY",label:Object(l.__)("End Date","funnel-builder"),error:p,describedBy:Object(l.sprintf)(Object(l.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),"MM/DD/YYYY"),onFocus:function(){return e.onFocusChange("endDate")}})),Object(n.createElement)("div",{className:"bwf-date-picker-container bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(d.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(n.createElement)(f.DayPickerRangeController,{onPrevMonthClick:this.handleStartPrevClick,onNextMonthClick:this.handleEndPrevClick,navNext:this.state.lastCurrentMonth.format("MM")===j?Object(n.createElement)("span",{className:"bwf-cursor-text"},Object(n.createElement)(y.a,{height:16,width:16,icon:"angle-right",color:"#9A9898"})):Object(n.createElement)(y.a,{height:16,width:16,icon:"angle-right",color:"#323232"}),navPrev:Object(n.createElement)(y.a,{height:16,width:16,icon:"angle-left",color:"#323232"}),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:r,endDate:o,orientation:"horizontal",numberOfMonths:2,isOutsideRange:function(e){return g&&g(e.toDate())},maxDate:c()().endOf("month"),minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:Object(l.isRTL)(),initialVisibleMonth:this.setTnitialVisibleMonth(!0,o),phrases:O.a,key:this.state.rangeKey})),Object(n.createElement)("div",{className:"bwf-date-picker-actions"},Object(n.createElement)(m.Button,{isPrimary:!0,disabled:Object(d.isEmpty)(i)||Object(d.isEmpty)(u),className:Object(d.isEmpty)(i)||Object(d.isEmpty)(u)?"bwf-no-ripple":"",onClick:function(){var t={after:i,before:u};e.props.value(t),e.props.onClose()}},Object(l.__)("Done","funnel-builder"))))}}])&&_(r.prototype,o),a&&_(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);C.propTypes={after:a.a.object,afterError:a.a.string,afterText:a.a.string,before:a.a.object,beforeError:a.a.string,beforeText:a.a.string,focusedInput:a.a.string,isInvalidDate:a.a.func,onUpdate:a.a.func.isRequired,shortDateFormat:a.a.string.isRequired,losesFocusTo:a.a.instanceOf(Element)};var D=Object(b.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(C);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function N(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}function A(e,t,r){return t=F(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],F(e).constructor):t.apply(e,r))}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=A(this,t,[e])).state=r.getResetState(),r.onTabSelect=r.onTabSelect.bind(r),r.onUpdate=r.onUpdate.bind(r),r.controlsRef=Object(n.createRef)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),r=t,(o=[{key:"getResetState",value:function(){var e=this.props,t=e.period,r=e.compare,n=e.before,o=e.after;return{period:t,compare:r,before:n,after:o,focusedInput:"startDate",afterText:this.formatDate(o,"MM/DD/YYYY"),beforeText:this.formatDate(n,"MM/DD/YYYY"),afterError:null,beforeError:null}}},{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"onUpdate",value:function(e){this.setState(e)}},{key:"onTabSelect",value:function(e){var t=this.props.period;"period"===e&&"custom"===t&&this.onUpdate({period:"today"})}},{key:"isFutureDate",value:function(e){return c()().isBefore(c()(e),"day")}},{key:"render",value:function(){var e=this.props,t=e.onClose,r=e.value,o=e.popoverRef,a=this.state,i=a.after,c=a.before,l=a.focusedInput,u=a.afterText,s=a.beforeText,f=a.afterError,d=a.beforeError;return Object(n.createElement)(D,{after:i,before:c,onUpdate:this.onUpdate,isInvalidDate:this.isFutureDate,focusedInput:l,afterText:u,beforeText:s,afterError:f,beforeError:d,shortDateFormat:"MM/DD/YYYY",losesFocusTo:this.controlsRef.current,onClose:function(){return t()},value:function(e){return r(e)},popoverRef:o})}}])&&T(r.prototype,o),a&&T(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);I.propTypes={onClose:a.a.func};t.a=I},389:function(e,t,r){},390:function(e,t,r){},394:function(e,t,r){"use strict";var n=r(3),o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,a=r(338),i=r(395),c=r(396),l="function"==typeof Symbol&&Symbol.iterator;function u(e,t){return e&&"object"==typeof e&&null!=e.key?(r=e.key,n={"=":"=0",":":"=2"},"$"+(""+r).replace(/[=:]/g,(function(e){return n[e]}))):t.toString(36);var r,n}function s(e,t,r,n){var a,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===o)return r(n,e,""===t?"."+u(e,0):t),1;var f=0,d=""===t?".":t+":";if(Array.isArray(e))for(var b=0;b<e.length;b++)f+=s(a=e[b],d+u(a,b),r,n);else{var p=function(e){var t=e&&(l&&e[l]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(p){0;for(var m,y=p.call(e),v=0;!(m=y.next()).done;)f+=s(a=m.value,d+u(a,v++),r,n)}else if("object"===c){0;var h=""+e;i(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===h?"object with keys {"+Object.keys(e).join(", ")+"}":h,"")}}return f}var f=/\/+/g;function d(e){return(""+e).replace(f,"$&/")}var b,p,m=y,y=function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)},v=function(e){i(e instanceof this,"Trying to release an instance into a pool of a different type."),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)};function h(e,t,r,n){this.result=e,this.keyPrefix=t,this.func=r,this.context=n,this.count=0}function O(e,t,r){var o,i,c=e.result,l=e.keyPrefix,u=e.func,s=e.context,f=u.call(s,t,e.count++);Array.isArray(f)?g(f,c,r,a.thatReturnsArgument):null!=f&&(n.isValidElement(f)&&(o=f,i=l+(!f.key||t&&t.key===f.key?"":d(f.key)+"/")+r,f=n.cloneElement(o,{key:i},void 0!==o.props?o.props.children:void 0)),c.push(f))}function g(e,t,r,n,o){var a="";null!=r&&(a=d(r)+"/");var i=h.getPooled(t,a,n,o);!function(e,t,r){null==e||s(e,"",t,r)}(e,O,i),h.release(i)}h.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},b=function(e,t,r,n){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)},(p=h).instancePool=[],p.getPooled=b||m,p.poolSize||(p.poolSize=10),p.release=v;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(n.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;i(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var r in e)g(e[r],t,r,a.thatReturnsArgument);return t}},395:function(e,t,r){"use strict";e.exports=function(e,t,r,n,o,a,i,c){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,a,i,c],s=0;(l=new Error(t.replace(/%s/g,(function(){return u[s++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},396:function(e,t,r){"use strict";var n=r(338);e.exports=n},397:function(e,t,r){"use strict";function n(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(n)}},407:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(5),c=(r(421),r(75)),l=r(131),u=r(65),s=r(2),f=r(1);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=[{key:"",label:Object(f.__)("No result found","funnel-builder"),disabled:!0}];t.a=function(e){var t=e.label,r=e.className,o=e.options,f=e.searchText,b=void 0===f?"":f,m=e.onSearch,y=e.isLoading,v=e.selected,h=void 0===v?{}:v,O=e.onSelect,g=void 0===O?function(){}:O,j=e.title,w=d(Object(n.useState)(b),2),_=w[0],E=w[1],S=Object(n.useCallback)((function(e){var t=e.onToggle,r=o.filter((function(e){var t;return-1!==(null===(t=e.label)||void 0===t?void 0:t.toLowerCase().indexOf(null==_?void 0:_.toLowerCase()))}));return(Object(s.isEmpty)(r)?p:r).map((function(e,r){return Object(n.createElement)(u.a,{key:"funnel-".concat(r),isClickable:!e.disabled,onInvoke:function(){g(e),t()},title:e.label},Object(n.createElement)("span",{className:"bwf-whitespace-wrap"},e.label),e.key===h&&Object(n.createElement)(i.a,{icon:"tick",height:"16",width:"16"}))}))}),[h,o,_]);return Object(n.createElement)(c.a,{label:j,menuPosition:"bottom left",classes:"components-button is-secondary-gray",wrapperClasses:a()("bwf-checklist__dropdown is-from-bottom-only",r),buttonLabel:Object(n.createElement)(n.Fragment,null,t,Object(n.createElement)(i.a,{icon:"angle-down",height:"12",width:"12"})),renderContent:function(e){var t=e.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(l.a,{query:{s:null!=b?b:_},setSearchData:function(e){m?m(e):E(e)},showResultCount:!1,isLoading:y}),S({onToggle:t}))}})}},408:function(e,t,r){"use strict";var n=r(0),o=r(1),a=r(6),i=r.n(a),c=r(1213),l=r(2),u=r(480),s=r.n(u),f=r(8),d=r(1227),b=r(524),p=r(182),m=r(12),y=r(15),v=r.n(y),h=r(42);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function _(e,t,r){return t=E(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){return g(this,t),_(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this.props.height,t=void 0===e?0:e;return Object(n.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:t}},Object(n.createElement)(h.a,{size:"xl"}))}}])&&j(r.prototype,o),a&&j(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);P.propTypes={height:v.a.number};var k=P,C=r(300),D=(r(444),r(1228)),x=r(1208);r(445);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function F(e,t,r){return t=R(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],R(e).constructor):t.apply(e,r))}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=F(this,t,[e])).chartRef=Object(n.createRef)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(o=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(l.isEqual)(this.props.data,e.data)||!Object(l.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width||this.props.chartMeta!==e.chartMeta}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(l.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(x.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,r=e.height,n=e.width;this.deleteChart();var o=Object(x.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(n," ").concat(r)).attr("height",r).attr("width",n).attr("preserveAspectRatio","xMidYMid meet");return t&&o.attr("class","".concat(t,"__viewbox")),o.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(n.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&N(r.prototype,o),a&&N(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return Y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}M.propTypes={className:v.a.string,data:v.a.array,orderedKeys:v.a.array,tooltip:v.a.object,chartType:v.a.string};var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]));return B(t).filter((function(e){return"date"!==e}))},z=r(1229),K=r(1212),H=r(1219),G=r(13),W=r.n(G);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(z.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(r?0:.07)},J=function(e,t){return Object(K.a)().domain([W()(e[0],"YYYY-MM-DD HH:mm").toDate(),W()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},Z=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var n=0,o=Object.entries(e);n<o.length;n++){var a=$(o[n],2),i=a[0],c=a[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<r&&(r=c.value)}})),{upper:t,lower:r}}(e),r=t.lower,n=t.upper,o=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;if(0===e&&t>0&&t<=1)return Math.pow(10,Math.floor(Math.log10(t)))/2;var r=Math.max(-e,t),n=3*Math.pow(10,(Math.log(r)*Math.LOG10E+1|0)-2),o=Math.ceil(r/n)*n/3;return t<1&&e>-1?Math.round(4*o)/4:Math.ceil(o)}(r,n),a={lower:0,upper:0,step:o};return(Number.isFinite(r)||r<0)&&(a.lower=Math.floor(r/o)*o,a.lower===r&&0!==r&&(a.lower-=o)),(Number.isFinite(n)||n>0)&&(a.upper=o<=1?4:4*o,a.upper===n&&0!==n&&(a.upper+=o)),a},ee=r(1224),te=function(e){for(var t=[],r=1;r<=Math.floor(Math.sqrt(e));r++)e%r==0&&(t.push(r),e/r!==r&&t.push(e/r));return t.sort((function(e,t){return e-t})),t},re=function(e,t,r,n){var o,a=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,r);return(e.length>=63&&"day"===n||e.length>=9&&"week"===n)&&(e=(o=e).filter((function(e,t){return 0===t||W()(e).toDate().getMonth()!==W()(o[t-1]).toDate().getMonth()}))),e.length<=a||"hour"===n&&function(e){var t=W()(e[0]).toDate(),r=W()(e[e.length-1]).toDate();return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}(e)&&t>783?e:function(e,t){for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r[0]!==e[0]&&r.unshift(e[0]),r}(e,function(e,t){for(var r=[],n=1;r.length<=3;)r=te(e.length-n),n+=1;return r.find((function(r){return e.length/r<t}))}(e,a))},ne=function(e,t,r,n){var o=W()(e).toDate(),a=0!==t?r[t-1]:r[t];return a=a instanceof Date?a:W()(a).toDate(),0===t?n(o):function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),n=e.split(r),o=t.split(r),a=new Array,i=e.length>t.length?n:o,c=0;c<i.length;c++)n[c]!==o[c]&&a.push(o[c]);return a}(n(a),n(o)).join(" ")},oe=r(4);function ae(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ce=function(e,t,r){for(var n=[],o=0;o<e;o++){var a=(o+1)/e*t,i=r?Math.round(a):a;n[n.length-1]!==i&&n.push(i)}return n},le=function(e,t,r){return[0].concat(ae(function(e,t){if(e>=0)return[];var r=Math.ceil(-e/t);return ce(r,e,e<-1)}(e,r)),ae(function(e,t){if(e<=0)return[];var r=Math.ceil(e/t);return ce(r,e,e>1)}(t,r)))},ue=function(e,t,r,n,o,a){Object(oe.A)();var i=le(t.yScale.domain()[0],t.yScale.domain()[1],t.step),c=t.xScale.range()[1],l=o?c+n.left+n.right+35:-n.left/2-15,u=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+u).attr("transform","translate(0, 0)").call(Object(ee.b)(t.yScale).tickValues(i).tickSize(-c-n.left-n.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+l+", 0)").attr("text-anchor","start").call(Object(ee.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[i[0]]:i).tickFormat((function(e){return e>-1&&e<1&&r.yBelow1Format?r.yBelow1Format(e):a&&!a.isCurrency?r.yFormat(e):(t=r.yFormat(e),"left"===(null==(o=null!==(n=wffn_contacts_data.currency)&&void 0!==n?n:{symbol:""})?void 0:o.symbolPosition)?(null==o?void 0:o.symbol)+t:t+(null==o?void 0:o.symbol));var t,n,o})))},se=function(e,t,r,n,o,a,i){!function(e,t,r,n){var o=r.yScale.range()[0],a=re(t.uniqueDates,r.xScale.range()[1],t.mode,t.interval);"line"!==t.chartType&&"curve-line"!==t.chartType||(a=a.map((function(e){return W()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+10,")")).call(Object(ee.a)(r.xScale).tickValues(a).tickFormat((function(e,r){return"hour"===t.interval?n.xFormat(e instanceof Date?e:W()(e).toDate()):ne(e,r,a,n.xFormat)}))),"day"===t.interval&&e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+("day"===t.interval?30:0),")")).call(Object(ee.a)(r.xScale).tickValues(a).tickFormat((function(e,t){return ne(e,t,a,n.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(o,")")).call(Object(ee.a)(r.xScale).tickValues(a).tickSize(5).tickFormat(""))}(e,t,r,n),ue(e,r,n,o,a,i),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},fe=r(1114),de=r(1124);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=function(e,t,r,n,o,a){var i,c,u=n.yScale.range()[0],s=n.xScale.range()[1],f=(i=n.xScale,c=n.yScale,Object(de.a)().x((function(e){return i(W()(e.date).toDate())})).y((function(e){return c(e.value)}))),d=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,r.visibleKeys),b=e.append("g").attr("class","lines").selectAll(".line-g").data(d.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),p=function(e,t,r,n,o){var a=r.slice().reverse();return t.map((function(r,i){var c=Object(l.first)(e.filter((function(e){return e.date===r}))),u=o(W()(r).toDate()),s=o(i>=1?W()(t[i-1]).toDate():W()(t[0]).toDate()),f=i<t.length-1?o(W()(t[i+1]).toDate()):o(W()(t[t.length-1]).toDate()),d=0===i?f-u:u-s,b=0===i?0:u-d/2;return d=0===i||i===t.length-1?d/2:d,{date:r,start:t.length>1?b:0,width:t.length>1?d:n,values:a.map((function(e){var t=e.key,n=c[t];return n?{key:t,value:n.value,date:r}:null})).filter(Boolean)}}))}(t,r.uniqueDates,r.visibleKeys,s,n.xScale),m=s<=1365||r.uniqueDates.length>50?2:3;m=s<=783?1.25:m;var y=s<=1365?4:6;r.uniqueDates.length>1&&b.append("path").attr("fill","none").attr("stroke-width",m).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return r.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/r.uniqueDates.length>36&&b.selectAll("circle").data((function(e,t){return e.values.map((function(r){return me(me({},r),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",y).attr("fill",(function(e){return r.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",m+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return n.xScale(W()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:W()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,r,n){a.show(t.find((function(t){return t.date===e.date})),n[r].parentNode,fe.b.target)})).on("blur",(function(){return a.hide()}));var v=e.append("g").attr("class","focusspaces").selectAll(".focus").data(p).enter().append("g").attr("class","focus"),h=v.append("g").attr("class","focus-grid").attr("opacity","0");h.append("line").attr("x1",(function(e){return n.xScale(W()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return n.xScale(W()(e.date).toDate())})).attr("y2",u),h.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",y+2).attr("fill",(function(e){return r.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",m+2).attr("cx",(function(e){return n.xScale(W()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})),v.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",u).attr("opacity",0).on("mouseover",(function(e,n,o){var i=(0===n||n===p.length-1)&&r.uniqueDates.length>1?0:.5;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,o[n].parentNode,i)})).on("mouseout",(function(){return a.hide()}))},he=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],Oe=function(e,t){return function(r){var n=e.length>5?5:e.length,o=Object(l.findIndex)(e,(function(e){return e.key===r})),a=o<=4?he[n][o]:0;return t(a)}};function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,we(n.key),n)}}function we(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}var _e=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24,this.chartMeta={},this.type="old",this.isProFeatureLocked=!1,this.component=!1},(t=[{key:"calculateXPosition",value:function(e,t,r){var n=this.ref.getBoundingClientRect(),o=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),a=Math.max(o.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-n.width/2-a,o.width-n.width-this.margin));var i=e.left+e.width*r+this.margin-a;return i+n.width+this.margin>o.width?Math.max(this.margin,e.left+e.width*(1-r)-n.width-this.margin-a):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var r=this.ref.getBoundingClientRect(),n=e.top+this.margin-t.top;return n+r.height+this.margin>t.height?Math.max(0,e.top-r.height-this.margin-t.top):n}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=e.getBoundingClientRect(),a=this.chart.getBoundingClientRect(),i=this.ref.getBoundingClientRect();return"below"===this.position&&(t=0),{x:r<50||r>a.width-220?this.calculateXPosition(o,a,t):r-i.width/4,y:n-("new"===this.type?.65*i.height:i.height)}}},{key:"hide",value:function(){Object(x.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(x.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat(W()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,r){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;if(this.visibleKeys.length){Object(x.a)(r).select(".focus-grid, .barfocus").attr("opacity","1");var l=this.calculatePosition(t,a,i,c),u=(this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(o.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(o.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(o.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),this.title?this.title:this.labelFormat(W()(e.date).toDate()),Object(oe.A)()),s=function(e){return"year"===o.interval?W()(e).year():W()(e).format("month"===o.interval?"MMM YYYY":Object(oe.Z)())},f=function(t){var r,a,i,c,l,f,d,b,p,m,y,v=o.visibleKeys[0].key;if(o.component){var h,O=o.component;return'<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t'.concat(Object(n.renderToString)(Object(n.createElement)(O,{data:e[v]})),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t\t\t<div>").concat(s(null===(h=e[v])||void 0===h?void 0:h.labelDate),"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>")}switch(t){case"old":return 1===o.visibleKeys.length?'\n\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t'.concat(o.chartMeta&&!o.chartMeta.isCurrency?e[v].value:u.formatAmount(e[v].value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t\t<div>").concat(s(null===(r=e[v])||void 0===r?void 0:r.labelDate),"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"):'\n\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t<div class="label">'.concat(s(null===(a=e.primary)||void 0===a?void 0:a.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(o.chartMeta&&!o.chartMeta.isCurrency?e.primary.value:u.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t<div class="label">').concat(s(null===(i=e.secondary)||void 0===i?void 0:i.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(o.chartMeta&&!o.chartMeta.isCurrency?e.secondary.value:u.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t<div>").concat(s(null===(c=e.primary)||void 0===c?void 0:c.labelDate),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t");case"new":return 1===o.visibleKeys.length?'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t\t\t'.concat(u.formatAmount(e[v].value),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-sec-values">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Checkout</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(u.formatAmount(null===(l=e[v].data)||void 0===l?void 0:l.checkout),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Order Bump</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(o.isProFeatureLocked?"-":u.formatAmount(null===(f=e[v].data)||void 0===f?void 0:f.orderBump),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Upsell</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(o.isProFeatureLocked?"-":u.formatAmount(null===(d=e[v].data)||void 0===d?void 0:d.upsell),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div>').concat(null===(b=e[v].data)||void 0===b?void 0:b.orders," Orders</div>\n\t\t\t\t\t\t\t\t\t<div>").concat(s(e.date),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"):'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label" >'.concat(s(null===(p=e.primary)||void 0===p?void 0:p.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(u.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">').concat(s(null===(m=e.secondary)||void 0===m?void 0:m.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(u.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t<div>').concat(s(null===(y=e.primary)||void 0===y?void 0:y.labelDate),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t")}};Object(x.a)(this.ref).style("left",l.x+"px").style("top",l.y+"px").style("visibility","visible").html(f(this.type))}}}])&&je(e.prototype,t),r&&je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),Ee=r(1203),Se=r(1204),Pe=r(18);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";switch(e){case 0:t=Pe.BLUE_BASE;break;case 1:t=Pe.NOTICE_YELLOW;break;case 2:t="#F5C452";break;default:t=Pe.BLUE_BASE}return t},Ne=function(e,t,r,n,o,a,i){var c,u,s=n.yScale.range()[0],f=n.xScale.range()[1],d=(c=n.xScale,u=n.yScale,Object(de.a)().curve(Ee.a).x((function(e){return c(W()(e.date).toDate())})).y((function(e){return u(e.value)}))),b=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,r.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(b.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),m=function(e,t,r,n,o){var a=r.slice().reverse();return t.map((function(r,i){var c=Object(l.first)(e.filter((function(e){return e.date===r}))),u=o(W()(r).toDate()),s=o(i>=1?W()(t[i-1]).toDate():W()(t[0]).toDate()),f=i<t.length-1?o(W()(t[i+1]).toDate()):o(W()(t[t.length-1]).toDate()),d=0===i?f-u:u-s,b=0===i?0:u-d/2;return d=0===i||i===t.length-1?d/2:d,{date:r,start:t.length>1?b:0,width:t.length>1?d:n,values:a.map((function(e){var t=e.key,n=c[t];return n?{key:t,value:n.value,date:r}:null})).filter(Boolean)}}))}(t,r.uniqueDates,r.visibleKeys,f,n.xScale),y=p.append("defs");p.append("g").attr("class","line-group").each((function(e,t){var r,o=Object(x.a)(this),a=Object(l.findIndex)(i,(function(t){return t.key===e.key})),c=Te(a),u=(r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null,f="grad-".concat(e.key,"-").concat(t),b=y.append("linearGradient").attr("id",f).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");[{offset:"0%",opacity:.02},{offset:"20%",opacity:.03},{offset:"50%",opacity:.04},{offset:"80%",opacity:.02},{offset:"100%",opacity:0}].forEach((function(e){b.append("stop").attr("offset",e.offset).style("stop-color","rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", ").concat(e.opacity,")"))}));var p=Object(Se.a)().curve(Ee.a).x((function(e){return n.xScale(W()(e.date).toDate())})).y0(s).y1((function(e){return n.yScale(e.value)}));o.append("path").attr("class","area").attr("d",p(e.values)).attr("fill","url(#".concat(f,")")).style("opacity",1),o.append("path").attr("fill","none").attr("stroke-width",2).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",c).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",d(e.values))}));var v=2;v=f<=783?2:v;var h=f<=1365?4:6;f/r.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(r){return De(De({},r),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",h).attr("fill",(function(e){return"#0073aa"})).attr("stroke","#fff").attr("stroke-width","4px").style("opacity",(function(e){e.focus;return 0})).attr("cx",(function(e){return n.xScale(W()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:W()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,t,r){})).on("blur",(function(){return a.hide()}));var O=e.append("g").attr("class","focusspaces").selectAll(".focus").data(m).enter().append("g").attr("class","focus"),g=O.append("g").attr("class","focus-grid").attr("opacity","0");g.selectAll(null).data((function(e){return e.values})).enter().append("line").attr("x1",(function(e){return n.xScale(W()(e.date).toDate())})).attr("y1",(function(e){return n.yScale(e.value)})).attr("x2",(function(e){return n.xScale(W()(e.date).toDate())})).attr("y2",s),g.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",h+2).attr("fill",(function(e){var t=Object(l.findIndex)(i,(function(t){return t.key===e.key}));return Te(t)})).attr("stroke","#fff").style("filter","url(#glow)").attr("stroke-width",v).attr("cx",(function(e){return n.xScale(W()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})),O.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",s).attr("opacity",0).on("mouseover",(function(e,o,c){var l,u,s,f,d,b,p=(0===o||o===m.length-1)&&r.uniqueDates.length>1?0:.5,y=e.values.sort((function(e,t){return(null==i?void 0:i.findIndex((function(t){return(null==t?void 0:t.key)===(null==e?void 0:e.key)})))-(null==i?void 0:i.findIndex((function(e){return(null==e?void 0:e.key)===(null==t?void 0:t.key)})))})),v=null!==(l=null===(u=y[0])||void 0===u?void 0:u.value)&&void 0!==l?l:0,h=null!==(s=null===(f=y[1])||void 0===f?void 0:f.value)&&void 0!==s?s:0,O=null!==(d=null===(b=y[2])||void 0===b?void 0:b.value)&&void 0!==d?d:0;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,c[o].parentNode,p,n.xScale(W()(e.date).toDate()),n.yScale(Math.max(v,h,O)))})).on("mouseout",(function(){return a.hide()}))},Ae=r(1223),Fe=r(1205),Re=r(1122),Ie=r(289);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Be(n.key),n)}}function Be(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:t+""}function qe(e,t,r){return t=Ye(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ye(e).constructor):t.apply(e,r))}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(){return"rtl"===document.documentElement.dir},ze=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=qe(this,t,[e])).drawChart=r.drawChart.bind(r),r.getParams=r.getParams.bind(r),r.tooltipRef=Object(n.createRef)(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(t,e),r=t,(o=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,r=e.xFormat,n=e.x2Format,o=e.yFormat,a=e.yBelow1Format;return{screenReaderFormat:U(t,D.a),xFormat:U(r,D.a),x2Format:U(n,D.a),yBelow1Format:U(a),yFormat:U(o)}}},{key:"getScaleParams",value:function(e){var t=this.props,r=t.data,n=t.height,o=t.orderedKeys,a=t.chartType,i=this.getMargin(),c=n-i.top-i.bottom,l=this.getWidth()-i.left-i.right,u=Z(r),s=u.upper,f=u.lower,d=u.step,b=function(e,t,r){return Object(H.a)().domain([Math.min(t,0),0===r&&0===t?1:Math.max(r,0)]).rangeRound([e,0])}(c,f,s);if("line"===a||"curve-line"===a)return{step:d,xScale:J(e,l),yMax:s,yMin:f,yScale:b};var p=this.shouldBeCompact(),m=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(z.a)().domain(e).range([0,t]).paddingInner(r?0:.1)}(e,l,p);return{step:d,xGroupScale:X(o,m,p),xScale:m,yMax:s,yMin:f,yScale:b}}},{key:"getParams",value:function(e){var t=this.props,r=t.chartType,n=t.colorScheme,o=t.data,a=t.interval,i=t.mode,c=t.orderedKeys||function(e){return V(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,r){return e+r[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(o),l=c.filter((function(e){return e.visible})),u=c.length>5?l:c;return{getColor:Oe(u,n),interval:a,mode:i,chartType:r,uniqueDates:e,visibleKeys:l}}},{key:"createTooltip",value:function(e,t,r){var n=this.props,o=n.tooltipLabelFormat,a=n.tooltipPosition,i=n.tooltipTitle,c=n.tooltipValueFormat,l=n.interval,u=n.chartMeta,s=n.toopTipComponent,f=new _e;f.ref=this.tooltipRef.current,f.type=u?"old":"new",f.chart=e,f.position=a,f.title=i,f.labelFormat=U(o,D.a),f.valueFormat=U(c),f.visibleKeys=r,f.getColor=t,f.interval=l,f.chartMeta=u,f.isProFeatureLocked=this.props.isProFeatureLocked,f.component=s,this.tooltip=f}},{key:"drawChart",value:function(e){var t,r=this.props,n=r.data,o=r.dateParser,a=r.chartType,i=r.emptyText,c=r.chartMeta,u=r.chartId,s=r.orderedKeys,f=this.getMargin(),d=e.attr("id","chart").append("g").attr("transform","translate(".concat(f.left,", ").concat(f.top,")"));if("donut"===a)return null===(t=Object(x.a)("#".concat(u," .d3-donut-tip")).node())||void 0===t||t.remove(),void function(e,t,r){var n=r.width,o=void 0===n?640:n,a=r.height,i=void 0===a?400:a,c=(r.margin,r.emptyText),u=void 0===c?"":c,s=r.chartId,f=r.donutTip,d=Math.min(o,i)/2+35,b=t.reduce((function(e,t){return e+(t.value||0)}),0),p=b?t:[{key:"dummy",value:100,color:["#DEDFEA","#DEDFEA"]}],m=Object(Re.a)().domain(p.map((function(e){return e.key}))).range(p.map((function(e){return e.color&&Object(l.isArray)(e.color)?e.color[0]:Pe.TEXT_COLOR_3}))),y=Object(Ae.a)().sort(null).value((function(e){return e.value}))(p),v=Object(Fe.a)().innerRadius(.52*d).outerRadius(.8*d),h=Object(Fe.a)().innerRadius(.52*(d+2)).outerRadius(.8*(d+8));Object(Fe.a)().innerRadius(.9*d).outerRadius(.9*d),e.attr("transform","translate("+o/2+","+i/2+")");var O=e.append("defs").append("filter").attr("id","drop-shadow").attr("height","130%");O.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),O.append("feFlood").attr("flood-color","#323247").attr("flood-opacity","0.5").attr("result","offsetColor"),O.append("feOffset").attr("in","blur").attr("dx",1).attr("dy",1).attr("result","offsetBlur"),O.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("result","offsetBlur").attr("operator","in");var g=O.append("feMerge");g.append("feMergeNode").attr("in","offsetBlur"),g.append("feMergeNode").attr("in","SourceGraphic");var j=function(e){if(b){Object(x.a)("#slice-"+e.data.key).attr("d",h).attr("filter","url(#drop-shadow");var t=e.data.tooltip;Object(x.a)("#".concat(s," .d3-donut-tip")).style("opacity",1),f.html(t).style("opacity",1).style("left",fe.b.layerX-50+"px").style("top",fe.b.layerY+10+"px")}},w=function(e){Object(x.a)("#slice-"+e.data.key).attr("d",v).attr("filter",""),Object(x.a)("#".concat(s," .d3-donut-tip")).style("opacity",0)};e.selectAll("allSlices").data(y).enter().append("path").attr("id",(function(e){return"slice-"+e.data.key})).attr("d",v).attr("fill",(function(e){return m(e.data.key)})).style("stroke-width","0").on("mousemove",j).on("mouseleave",w),e.selectAll("allValues").data(y).enter().append("text").text((function(e){return e.data.value>4?e.data.value<10&&e.data.value%1?Math.floor(e.data.value)+"%":e.data.value+"%":""})).attr("id",(function(e){return"value-"+e.data.key})).attr("class","slice-value").attr("transform",(function(e){return"translate("+v.centroid(e)+")"})).style("text-anchor","middle").style("fill",(function(e){return e.data.color&&Object(l.isArray)(e.data.color)?e.data.color[1]:"#ffffff"})).on("mousemove",j).on("mouseleave",w),b||e.append("text").attr("class","name-text").text(u).attr("text-anchor","middle").attr("x","0").attr("y","0").attr("width","100").style("fill",Pe.TEXT_COLOR_3).call((function(e){e.each((function(){for(var e=Object(x.a)(this),t=e.text().split(/\s+/).reverse(),r=parseFloat(e.attr("width")),n=parseFloat(e.attr("y")),o=e.attr("x"),a=e.attr("text-anchor"),i=e.text(null).append("tspan").attr("x",o).attr("y",n).attr("text-anchor",a),c=0,l=[],u=t.pop();u;)l.push(u),i.text(l.join(" ")),i.node().getComputedTextLength()>r&&(c+=1,l.pop(),i.text(l.join(" ")),l=[u],i=e.append("tspan").attr("x",o).attr("y",n+20*c).attr("anchor",a).text(u)),u=t.pop()}))}))}(d,n,{height:280,width:280,emptyText:i,chartId:u,donutTip:Object(x.a)("#"+u).append("div").style("opacity",0).attr("class","d3-donut-tip")});var b=function(e,t){var r=Object(D.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return r(e)-r(t)}))}(n,o),p=this.getFormatParams(),m=this.getParams(b),y=this.getScaleParams(b);this.createTooltip(d.node(),m.getColor,m.visibleKeys),se(d,m,y,p,f,Ve(),c),"curve-line"!==a?("line"===a&&ve(d,n,m,y,p,this.tooltip),"bar"===a&&function(e,t,r,n,o,a){var i=n.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(n.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===r.mode?o.screenReaderFormat(e.date instanceof Date?e.date:W()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",n.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,r,n){a.show(t.find((function(t){return t.date===e.date})),fe.b.target,n[r].parentNode)})).on("mouseout",(function(){return a.hide()}));var l=n.yScale(0);c.selectAll(".bar").data((function(e){return r.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return n.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(l,n.yScale(e.value))})).attr("width",n.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(l-n.yScale(e.value))})).attr("fill",(function(e){return r.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var n=e.label||e.key;if("time-comparison"===r.mode){var i=t.find((function(t){return t.date===e.date}));n=o.screenReaderFormat(W()(i[e.key].labelDate).toDate())}return"".concat(n," ").concat(a.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,r,n){var o=e.value>0?fe.b.target:fe.b.target.parentNode;a.show(t.find((function(t){return t.date===e.date})),o,n[r].parentNode)})).on("blur",(function(){return a.hide()}))}(d,n,m,y,p,this.tooltip)):Ne(d,n,m,y,p,this.tooltip,s)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,r=e.chartType,n=e.width;if("bar"!==r)return!1;var o=this.getMargin(),a=n-o.left-o.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return a<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return Ve()?{bottom:e.bottom,left:-30,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,r=e.chartType,n=e.width;if("bar"!==r)return n;var o=this.getMargin(),a=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*a:t.length*(a+1);return Math.max(n,i+o.left+o.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,r=e.data,o=e.emptyMessage;if(o&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<e.length;r++)for(var n=0,o=Object.entries(e[r]);n<o.length;n++){var a=L(o[n],2),i=a[0],c=a[1];if("date"!==i&&!Object(l.isNil)(c.value)&&c.value!==t)return!1}return!0}(r,t))return Object(n.createElement)("div",{className:"d3-chart__empty-message"},o)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.data,o=e.height,a=e.orderedKeys,c=e.chartType,l=e.chartMeta,u=this.getWidth();return Object(n.createElement)("div",{className:i()("d3-chart__container",t)},this.getEmptyMessage(),Object(n.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(n.createElement)(M,{className:i()(t),data:r,drawChart:this.drawChart,chartMeta:l,height:o,orderedKeys:a,tooltip:this.tooltip,chartType:c,width:u}))}}])&&Le(r.prototype,o),a&&Le(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component);ze.propTypes={baseValue:v.a.number,className:v.a.string,colorScheme:v.a.func,data:v.a.array.isRequired,dateParser:v.a.string.isRequired,emptyMessage:v.a.string,height:v.a.number,interval:v.a.oneOf(["hour","day","week","month","quarter","year",""]),margin:v.a.shape({bottom:v.a.number,left:v.a.number,right:v.a.number,top:v.a.number}),mode:v.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:v.a.oneOfType([v.a.string,v.a.func]),orderedKeys:v.a.array,tooltipLabelFormat:v.a.oneOfType([v.a.string,v.a.func]),tooltipValueFormat:v.a.oneOfType([v.a.string,v.a.func]),tooltipPosition:v.a.oneOf(["below","over"]),tooltipTitle:v.a.string,chartType:v.a.oneOf(["bar","line","curve-line","donut"]),width:v.a.number,xFormat:v.a.oneOfType([v.a.string,v.a.func]),x2Format:v.a.oneOfType([v.a.string,v.a.func]),yBelow1Format:v.a.oneOfType([v.a.string,v.a.func]),yFormat:v.a.oneOfType([v.a.string,v.a.func])};var Ke=Object(Ie.a)(ze,{baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"}),He=r(43),Ge=r(82);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qe(n.key),n)}}function Qe(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}function Xe(e,t,r){return t=Je(t),function(e,t){if(t&&("object"==We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Je(e).constructor):t.apply(e,r))}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var et=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Xe(this,t)).listRef=Object(n.createRef)(),e.state={isScrollable:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=(e.colorScheme,e.data),r=e.handleLegendHover,a=e.handleLegendToggle,c=e.interactive,l=e.legendDirection,u=(e.legendValueFormat,e.instanceId),s=e.totalLabel,f=this.state.isScrollable,d=t.filter((function(e){return e.visible})),b=d.length,p="column"===l&&t.length>5&&s;return t.length,Object(n.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(l),{"has-total":p,"is-scrollable":f},this.props.className)},Object(n.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:p?this.updateListScroll:null},t.map((function(e,t){return Object(n.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(u,"__item__").concat(e.key),onMouseEnter:r,onMouseLeave:r,onBlur:r,onFocus:r},Object(n.createElement)("button",{onClick:a,id:"bwf-legend-".concat(u,"__item-button__").concat(e.key),disabled:e.visible&&b<=1||!e.visible&&b>=5||!c,title:b>=5?Object(o.sprintf)(Object(o.__)("You may select up to %d items.","funnel-builder"),5):""},Object(n.createElement)("div",{className:"bwf-legend-item-container"},Object(n.createElement)(Ge.a,{checked:e.visible,onChange:function(){},color:1===t?Pe.NOTICE_YELLOW:Pe.BLUE_BASE}),Object(n.createElement)("span",{className:"bwf-legend-item-title"},e.label))))}))),p&&Object(n.createElement)("div",{className:"bwf-legend-total"},s))}}])&&$e(r.prototype,a),c&&$e(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,c}(n.Component);et.propTypes={className:v.a.string,colorScheme:v.a.func,data:v.a.array.isRequired,handleLegendToggle:v.a.func,handleLegendHover:v.a.func,interactive:v.a.bool,legendDirection:v.a.oneOf(["row","column"]),legendValueFormat:v.a.oneOfType([v.a.string,v.a.func]),totalLabel:v.a.string,instanceId:v.a.number};var tt=Object(He.withInstanceId)(Object(Ie.a)(et,{interactive:!0,legendDirection:"row",legendValueFormat:","}));r(446);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(){return(nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,st(n.key),n)}}function ct(e,t,r){return t=lt(t),function(e,t){if(t&&("object"==rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],lt(e).constructor):t.apply(e,r))}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rt(t)?t:t+""}function ft(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var dt=function(e){function t(e){var r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=ct(this,t,[e]),o=r,i=function(){return Object(n.createElement)("div",{className:"bwf-chart__donut-legends"},r.props.data.map((function(e,t){return Object(n.createElement)("div",{className:"bwf-chart__donut-legend",key:"bwf-chart__donut-legend-".concat(t)},Object(n.createElement)("div",{className:"bwf-chart__donut-legend-color",style:{backgroundColor:e.color[0]}}),e.title)})))},(a=st(a="getDonutLegends"))in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,r.chartBodyRef=Object(n.createRef)();var c=r.getDataKeys();return r.state={focusedKeys:[],visibleKeys:c.slice(0,5),width:0},r.prevDataKeys=c.sort(),r.handleTypeToggle=r.handleTypeToggle.bind(r),r.handleLegendToggle=r.handleLegendToggle.bind(r),r.handleLegendHover=r.handleLegendHover.bind(r),r.updateDimensions=r.updateDimensions.bind(r),r.getVisibleData=Object(b.a)(r.getVisibleData),r.getOrderedKeys=Object(b.a)(r.getOrderedKeys),r.setInterval=r.setInterval.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(t,e),r=t,(a=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,r=e.filterParam,n=e.mode,o=e.query;if("item-comparison"===n){var a=r?Object(m.e)(o[r]):[];return this.getOrderedKeys([],[],a).map((function(e){return e.key}))}return V(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=V(e).sort();if(!Object(l.isEqual)(t,this.prevDataKeys)){var r=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:r.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,r=e.symbolPosition,n=e.decimalSeparator,o=e.thousandSeparator;Object(c.a)({decimal:n,thousands:o,grouping:[3],currency:ft(t,r)})}},{key:"getOrderedKeys",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.props,o=n.data,a=n.legendTotals,i=n.mode;if(!o||0===o.length)return[];var c=o.reduce((function(e,t){return Object.entries(t).forEach((function(t){var r=ot(t,2),n=r[0],o=r[1];"date"===n||e[n]||(e[n]=o.label)})),e}),{}),l=Object.entries(c).map((function(r){var n=ot(r,2),i=n[0],c=n[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:a&&void 0!==a[i]?a[i]:"conversion_rate"!==i?o.reduce((function(e,t){return e+t[i].value}),0):0!==o.reduce((function(e,t){return e+t.conversion.value}),0)?o.reduce((function(e,t){return e+t.conversion.value}),0)/o.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?l.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||r.includes(parseInt(e.key,10))})):l}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,r=t.path,n=t.query,o=t.onChartChange,a=void 0===o?l.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(m.k)({chartType:e},r,n),a(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),r=this.state,n=r.focusedKeys,o=r.visibleKeys;o.includes(t)?this.setState({focusedKeys:Object(l.without)(n,t),visibleKeys:Object(l.without)(o,t)}):this.setState({focusedKeys:n.concat([t]),visibleKeys:o.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.props.width?this.props.width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var r=t.filter((function(e){return e.visible}));return Object(l.isEmpty)(r)?[]:e.map((function(e){var t={date:e.date};return r.forEach((function(r){t[r.key]=e[r.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,r=t.path,n=t.query,o=t.onIntervalChange,a=void 0===o?l.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(m.k)({interval:e},r,n),a(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,r=e.allowedIntervals;if(!r||r.length<1)return null;!0===r.includes("quarter")&&r.splice(r.indexOf("quarter"),1);var a={hour:Object(o.__)("By hour","funnel-builder"),day:Object(o.__)("By day","funnel-builder"),week:Object(o.__)("By week","funnel-builder"),month:Object(o.__)("By month","funnel-builder"),quarter:Object(o.__)("By quarter","funnel-builder"),year:Object(o.__)("By year","funnel-builder")};return Object(n.createElement)(f.SelectControl,{value:t,options:r.map((function(e){return{value:e,label:a[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,r=e.mode,n=e.isViewportWide;return t||(n&&"time-comparison"===r?"top":n&&"item-comparison"===r?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,r=e.visibleKeys,a=e.width,c=this.props,u=c.baseValue,b=c.chartType,p=c.data,y=c.dateParser,v=c.emptyMessage,h=c.filterParam,O=c.interactiveLegend,g=c.interval,j=c.isRequesting,w=c.isViewportLarge,_=c.itemsLabel,E=c.mode,S=c.query,P=c.screenReaderFormat,D=c.showHeaderControls,x=c.title,T=c.tooltipLabelFormat,N=c.tooltipValueFormat,A=c.tooltipTitle,F=c.valueType,R=c.xFormat,I=c.x2Format,M=c.yBelow1Format,L=c.yFormat,B=c.hideTypeSelect,q=c.className,Y=c.customHeaderItem,U=c.showLegend,V=c.height,z=c.emptyText,K=c.chartMeta,H=c.chartId,G=c.customFooter,W=c.isProFeatureLocked,$=c.toopTipComponent,Q=c.donutEmptyState,X=h?Object(m.e)(S[h]):[],J=this.getOrderedKeys(t,r,X),Z=j||Object(l.isEmpty)(p)?null:this.getVisibleData(p,J),ee=this.getLegendPosition(),te="top"===ee?"row":"column",re="side"===ee?"row":"column",ne=V||this.getChartHeight(),oe=j||!U?null:"donut"===b?this.getDonutLegends():Object(n.createElement)(tt,{colorScheme:d.a,data:J,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:O,legendDirection:te,legendValueFormat:N,totalLabel:Object(o.sprintf)(_,J.length)}),ae=L,ie=M;if(!L)switch(F){case"average":ae=",.0f";break;case"currency":ae="$.3~s",ie="$.3~f";break;case"number":ae=",.0f"}return Object(n.createElement)("div",nt({className:i()("bwf-chart",q)},H&&{id:H}),D&&Object(n.createElement)("div",{className:"bwf-chart-header"},Object(n.createElement)("div",{className:"bwf-chart-title"},x),"top"===ee&&oe,Y,this.renderIntervalSelector(),!B&&Object(n.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(n.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===b}),title:Object(o.__)("Line chart","funnel-builder"),"aria-checked":"line"===b,role:"menuitemradio",tabIndex:"line"===b?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"line")},Object(n.createElement)(s.a,{icon:"line-graph"})),Object(n.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===b}),title:Object(o.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===b,role:"menuitemradio",tabIndex:"bar"===b?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"bar")},Object(n.createElement)(s.a,{icon:"stats-alt"})))),Object(n.createElement)(C.b,{component:!1},Object(n.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(re)),ref:this.chartBodyRef},"donut"===b&&Q&&Object(n.createElement)("div",{className:"bwf-donut-chart-empty-state"},Q),"side"===ee&&oe,j&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(n.createElement)(k,{height:ne})),!j&&!Object(l.isEmpty)(Z)&&a>0&&Object(n.createElement)(Ke,{baseValue:u,chartType:b,colorScheme:d.a,data:Z,dateParser:y,height:ne,emptyMessage:v,interval:g,margin:{bottom:50,left:50,right:30,top:0},mode:E,orderedKeys:J,screenReaderFormat:P,tooltipLabelFormat:T,tooltipValueFormat:N,tooltipPosition:w?"over":"below",tooltipTitle:A,valueType:F,width:"row"===re?a-320:a,xFormat:R,x2Format:I,yBelow1Format:ie,yFormat:ae,emptyText:z,chartMeta:K,chartId:H,isProFeatureLocked:W,toopTipComponent:$})),"bottom"===ee&&Object(n.createElement)("div",{className:"bwf-chart-footer"},oe)),G)}}])&&it(r.prototype,a),u&&it(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,u}(n.Component);t.a=Object(p.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(Object(Ie.a)(dt,{baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:"",showLegend:!0}))},410:function(e,t,r){},411:function(e,t,r){},420:function(e,t,r){},421:function(e,t,r){},426:function(e,t,r){"use strict";var n=r(0),o=r(6),a=r.n(o),i=r(2),c=r(8),l=r(1),u=r(14),s=r(359),f=r(309),d=r(5),b=r(10),p=r.n(b),m=r(4),y=(r(461),function(e){var t=e.onclose,r=e.title;return Object(n.createElement)(c.Modal,{className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-fail-modal",isDismissible:!1,onRequestClose:t},Object(n.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(n.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Error! ","funnel-builder")+r),Object(n.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close"),onClick:function(){return t()}},Object(n.createElement)(d.a,{icon:"close",size:20}))),Object(n.createElement)("div",{className:"bwf-content-1"},Object(l.__)("Following reasons while creating file for export","funnel-builder")),Object(n.createElement)("div",{className:"bwf-content-2"},Object(n.createElement)("span",null,Object(l.__)("Unable to create file","funnel-builder")),Object(n.createElement)("span",null,Object(l.__)("Server not working / unstable network","funnel-builder"))))});function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.status,r=e.onRemove,o=e.exportId,i=e.title,c=e.exportPercentage,u=v(Object(n.useState)(!1),2),s=u[0],f=u[1];return Object(n.createElement)(n.Fragment,null,["1","2","3"].includes(t)?Object(n.createElement)("div",{className:a()("bwf-export-status",{"is-danger":"2"===t,"is-success":"3"===t})},Object(n.createElement)(d.a,{icon:"downloading",size:"20"}),Object(n.createElement)("span",{className:"bwf-flex bwf--g16"},Object(n.createElement)("span",{className:"bwf-status-title"},function(){switch(t){case"1":return Object(l.__)("Exporting In Progress","funnel-builder");case"2":return Object(l.__)("Exporting Failed","funnel-builder");case"3":return Object(l.__)("File is Ready","funnel-builder")}}()),"1"===t?Object(n.createElement)("span",{className:"bwf-status-title"},c," %"):null,"2"===t&&Object(n.createElement)("span",{className:"bwf-action",onClick:function(){f(!0)}},Object(l.__)("View Details","funnel-builder")),"3"===t&&Object(n.createElement)("span",{className:"bwf-action",onClick:function(){window.open(wffn_contacts_data.admin_url+"/admin-post.php?action=bwf_contact_export_download&id=".concat(o,"&_nonce=").concat(wffn.nonce_contact_export_download),"_blank")}},Object(l.__)("Download","funnel-builder")),Object(n.createElement)("button",{className:"bwf-no-style-button",onClick:function(){r()}},"1"===t?Object(l.__)("Cancel","funnel-builder"):Object(n.createElement)(d.a,{icon:"close",size:16,color:"#FFFFFF"})))):null,s&&Object(n.createElement)(y,{onclose:function(){return f(!1)},title:i}))},g=r(19);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=["state","setStateProp"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(){var e=Object(g.a)("export"),t=e.state,r=e.setStateProp;return E(E({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,w)),{},{setStateProp:r,setExportData:function(e,n){r(e,E(E({},t),n))}})},k=r(26);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D=["getStateProp"];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(){var e=Object(k.a)("export"),t=e.getStateProp;return T(T({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,D)),{},{getExportData:function(e){var r;return null!==(r=t(e))&&void 0!==r?r:{}}})},F=r(20);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return U(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.filters,r=e.filterList,o=e.title,b=e.funnelId,y=e.type,v=e.total,h=e.exportType,g=e.totalText,j=e.isDisabled,w=e.search,_=void 0===w?"":w,E=Object(n.useMemo)((function(){return t.filter((function(e){return!Object(i.isEmpty)(e.data)}))}),[t]),S=P().setExportData,k=A().getExportData,C=b?"".concat(y,"_").concat(b):y,D=k(C),x=Object(n.useRef)(new AbortController),T=function(e){return S(C,e)},N=q(Object(n.useState)([]),2),R=N[0],I=N[1],L=q(Object(n.useState)(!1),2),Y=L[0],U=L[1],V=q(Object(n.useState)(!1),2),z=V[0],K=V[1],H=q(Object(n.useState)(0),2),G=H[0],W=H[1],$=q(Object(n.useState)(!1),2),Q=$[0],X=$[1],J=Object(n.useRef)(),Z=Object(n.useRef)(),ee=Object(F.c)().showSnackbar,te=function(e){var t=e.rule,r=e.isPrimary,o=void 0!==r&&r,c=null==E?void 0:E.find((function(e){return e.filter===t.slug}));return c&&!Object(i.isEmpty)(c.data)?Object(n.createElement)("div",{className:a()("bwf-filter__tag",{"is-primary":o,"is-active":c})},Object(n.createElement)("span",null,Object(s.b)(t,c))):null};Object(n.useEffect)((function(){if(!Object(i.isEmpty)(E)&&!Object(i.isEmpty)(r)){var e,t=[],n=null==r?void 0:r.find((function(e){return"sticky"===e.type})),o=null==r||null===(e=r.find((function(e){return"list"===e.type})))||void 0===e?void 0:e.rules;E.forEach((function(e){if(o&&o.findIndex((function(t){return t.slug===e.filter}))>-1){var n,a=(null===(n=r.find((function(e){return"list"===e.type})))||void 0===n?void 0:n.rules).find((function(t){return t.slug===e.filter}));t.push(a)}})),I([].concat(B(null==n?void 0:n.rules),t))}}),[E,r]);var re=function(){x.current=new AbortController,clearTimeout(J.current),p()({method:"GET",path:Object(m.y)("/funnels/export/".concat(D.export_id)),signal:x.current.signal}).then((function(e){if(e.status)if("3"!==e.export.status&&T(e.export),"3"===e.export.status)W(100),Z.current=setTimeout((function(){T(e.export),W(0)}),2e3);else if("1"===e.export.status){J.current=setTimeout((function(){re()}),5e3);var t=Number(e.export.count),r=Number(e.export.offset);W(parseInt(r/t*100))}else W(0);else T({export_id:D.export_id,status:"2"})})).catch((function(e){"AbortError"!==(null==e?void 0:e.name)?T({export_id:D.export_id,status:"2"}):console.log(e)}))};return Object(n.useEffect)((function(){D.export_id&&"1"===D.status&&re()}),[parseInt(D.export_id)]),Object(n.useEffect)((function(){return D.export_id||"3"===D.status||D.notFound||(x.current=new AbortController,p()({method:"GET",path:Object(m.y)("/funnels/export/status?export_type=".concat(h).concat(b?"&funnel_id=".concat(b):"")),signal:x.current.signal}).then((function(e){e.status?T(e.last_export_data):T({notFound:!0})})).catch((function(e){console.log(e)}))),function(){clearTimeout(J.current),clearTimeout(Z.current)}}),[]),Object(n.createElement)(n.Fragment,null,!z&&Object(n.createElement)(O,{status:D.status,exportId:D.export_id,onRemove:function(){return function(){var e;X(!0),null===(e=x.current)||void 0===e||e.abort(),clearTimeout(Z.current),x.current=new AbortController;var t=D;T({}),p()({path:Object(m.y)("/funnels/export/delete/?export_ids=".concat(D.export_id)),method:"DELETE"}).then((function(e){e.status||(T(t),ee(Object(l.__)("Failed to remove export.","funnel-builder"))),X(!1)})).catch((function(e){T(t),ee(Object(l.__)("Failed to remove export.","funnel-builder")),X(!1)}))}()},title:o,exportPercentage:G}),Object(n.createElement)(u.a,{onClick:function(){return U(!0)},className:"is-secondary bwf-btn-gray has-icon bwf-export-icon",isSecondary:!0,isSmall:!0,disabled:Q||j||"1"===D.status,icon:Object(n.createElement)(d.a,{icon:"export",size:16})},Object(l.__)("Export","funnel-builder")),Y&&Object(n.createElement)(c.Modal,{className:"bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-alert-modal",isDismissible:!1,onRequestClose:function(){return U(!1)}},Object(n.createElement)(f.a,{title:o,onClose:function(){return U(!1)},isDismissible:!z}),Object(i.isEmpty)(E)?null:Object(n.createElement)("div",{className:"bwf-filter-applied"},Object(n.createElement)(d.a,{icon:"info"}),Object(l.__)("This export has the following filter applied.","funnel-builder")),Object(n.createElement)("div",{className:"bwf-sticky-filters ".concat(Object(i.size)(E)?"bwf-has-filter":"")},R&&R.map((function(e,t){return Object(n.createElement)(te,{rule:e,key:"sticky-filter-wrap-".concat(t)})}))),Object(n.createElement)("div",{className:"bwf-content"},Object(l.sprintf)(Object(l.__)("You have %s in the list.","funnel-builder"),g)),Object(n.createElement)("div",{className:"wf_funnel_right_align bwf-mt-24"},Object(n.createElement)(u.a,{isPrimary:!0,className:"bwf-btn-medium",onClick:function(){0!==v&&(T({status:"1"}),function(){x.current=new AbortController,K(!0);var e=[];Object(i.isEmpty)(E)||e.push.apply(e,B(E)),Object(i.isEmpty)(_)||e.push({filter:"s",data:_}),p()({path:Object(m.y)("".concat("cart-conversions"!==y?"/funnels":"").concat(b?"/".concat(b):"","/").concat(y,"/export/add")),method:"POST",data:M({},!Object(i.isEmpty)(e)&&{filters:e}),signal:x.current.signal}).then((function(e){e.status&&(T({export_id:e.response.export_id,status:"1"}),U(!1)),K(!1)})).catch((function(e){console.log(e),K(!1)}))}())},disabled:0===v||z,isBusy:z},Object(l.__)("Export","funnel-builder")))))}},431:function(e,t,r){"use strict";var n=r(0),o=r(4);t.a=function(e){var t=e.amount,r=Object(o.A)().formatAmount(null!=t?t:0),a=r.lastIndexOf(o.q),i=0===o.o?r:r.slice(0,a),c=r.slice(a+1);return Object(n.createElement)(n.Fragment,null,i,0!==o.o&&-1!==a&&Object(n.createElement)(n.Fragment,null,o.q,Object(n.createElement)("span",{className:"bwf-analytics__amount-decimal"},c)))}},444:function(e,t,r){},445:function(e,t,r){},446:function(e,t,r){},461:function(e,t,r){}}]);