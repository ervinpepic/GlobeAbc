(window.webpackJsonp=window.webpackJsonp||[]).push([[37,22],{1180:function(e,t,n){},1215:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),c=n(25),a=n(126),u=n(2),l=n(12),i=n(119),s=n(4),f=n(148),b=n(8),p=n(10),d=n.n(p),m=n(44),O=n(75),j=n(65),y=n(24),v=n(30),h=n(29),g=n(55),w=n(5),_=n(436),E=n(448),k=n(31),S=n(20),C=n(82);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var l=r&&r.prototype instanceof u?r:u,i=Object.create(l.prototype);return I(i,"_invoke",function(n,r,o){var c,u,l,i=0,s=o||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return c=t,u=0,l=e,b.n=n,a}};function p(n,r){for(u=n,l=r,t=0;!f&&i&&!o&&t<s.length;t++){var o,c=s[t],p=b.p,d=c[2];n>3?(o=d===r)&&(l=c[(u=c[4])?5:(u=3,3)],c[4]=c[5]=e):c[0]<=p&&((o=n<2&&p<c[1])?(u=0,b.v=r,b.n=c[1]):p<d&&(o=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,d){if(i>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),u=s,l=d;(t=u<2?e:l)||!f;){c||(u?u<3?(u>1&&(b.n=-1),p(u,l)):b.n=l:b.v=l);try{if(i=2,c){if(u||(o="next"),t=c[o]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,u<2&&(u=0)}else 1===u&&(t=c.return)&&t.call(c),u<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),u=1);c=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==a)break}catch(t){c=e,u=1,l=t}finally{i=1}}return{value:t,done:f}}}(n,o,c),!0),i}var a={};function u(){}function l(){}function i(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(I(t={},r,(function(){return this})),t),f=i.prototype=u.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,I(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=i,I(f,"constructor",i),I(i,"constructor",l),l.displayName="GeneratorFunction",I(i,o,"GeneratorFunction"),I(f),I(f,o,"Generator"),I(f,r,(function(){return this})),I(f,"toString",(function(){return"[object Generator]"})),(P=function(){return{w:c,m:b}})()}function I(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(I=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var c=function(t,n){I(e,t,(function(e){return this._invoke(t,n,e)}))};c("next",0),c("throw",1),c("return",2)}})(e,t,n,r)}function N(e,t,n,r,o,c,a){try{var u=e[c](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){N(c,r,o,a,u,"next",e)}function u(e){N(c,r,o,a,u,"throw",e)}a(void 0)}))}}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(i)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G=function(e){var t=e.onBackupChange,n=D(Object(r.useState)(!0),2),c=n[0],a=n[1];Object(r.useEffect)((function(){t(!0)}),[]);var u=Object(r.createElement)(C.a,{type:"checkbox",checked:c,onChange:function(e){a(e),t(e)},label:Object(o.__)("Download this complete funnel before deletion.","funnel-builder"),className:"bwf-mt-16"});return Object(r.createElement)(r.Fragment,null,Object(o.__)("You are about to delete Store Checkout. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),u)},B=function(){var e,t=(v.a.getFunnel()||{}).id,n=D(Object(r.useState)(!1),2),c=n[0],a=n[1],u=D(Object(r.useState)({}),2),i=u[0],f=u[1],p=Object(y.a)(),C=p.removeStoreCheckout,T=p.setGlobalCheckout,I=D(Object(r.useState)(!1),2),N=I[0],A=I[1],F=Object(r.useRef)(),R=Object(S.c)().showSnackbar,B=Object(h.a)(),M=B.setFunnelStatus,z=B.setFunnelTitle,U=B.fetch,q=v.a.getFunnelTitle(),$=v.a.getFunnelStatus(),J=v.a.getFunnelLoading(),Y=D(Object(r.useState)({status:!1,isLoading:!1,title:q}),2),K=Y[0],H=Y[1],V=Object(r.useRef)(!0),W=function(e){H((function(t){return L(L({},t),e)}))},Q={status:!0,modalTitle:Object(o.__)("Delete Store Checkout","funnel-builder"),buttonCancel:Object(o.__)("Cancel","funnel-builder"),buttonConfirm:Object(o.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",content:Object(r.createElement)(G,{onBackupChange:function(e){V.current=e}})},X=function(){var e=x(P().m((function e(n){var r,c;return P().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,R(n?Object(o.__)("Enabling Store Checkout","funnel-builder"):Object(o.__)("Disabling Store Checkout","funnel-builder")),e.n=1,d()({method:"POST",path:Object(s.y)("/store-checkout/".concat(t,"/status"))});case 1:(r=e.v).status&&(M(t,n?"Published":"Draft"),R(n?Object(o.__)("Store Checkout Enabled","funnel-builder"):Object(o.__)("Store Checkout Disabled","funnel-builder")),T({funnel_status:r.result},!0)),e.n=3;break;case 2:e.p=2,c=e.v,console.log("toggleStoreCheckoutStatus:",c),R(c.message);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=x(P().m((function e(){var n,r;return P().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,!V.current){e.n=2;break}return ee(Object(o.__)("We're downloading funnel before deletion","funnel-builder")),e.n=1,te(t,q);case 1:e.n=3;break;case 2:f(L(L({},Q),{},{disableConfirm:!0}));case 3:return e.n=4,d()({path:Object(s.y)("/store-checkout/".concat(t)),method:"DELETE"});case 4:if(1!=(n=e.v).status){e.n=5;break}return R(Object(o.__)("Store checkout deleted successfully","funnel-builder")),f({}),C(),Object(l.k)({},"/store-checkout"),e.a(2);case 5:throw Error(n.message);case 6:e.p=6,r=e.v,f({status:!0,error:r.messgae?r.message:Object(o.__)("Something went wrong, Please check your response","funnel-builder")});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(o.__)("We are exporting store checkout.","funnel-builder");f({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(o.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-light"},e))})},te=function(){var e=x(P().m((function e(t,n){var r,o;return P().w((function(e){for(;;)switch(e.n){case 0:return r=Object(s.y)("/store-checkout/export/?ids=".concat(t)),e.p=1,e.n=2,d()({path:r,method:"GET"});case 2:o=e.v,Array.isArray(o)&&(c=o,a="FunnelKit-"+n,u=void 0,l=void 0,i=void 0,b=void 0,p=void 0,m=void 0,u="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),l=document.createElement("a"),i=new Date,b=i.getMonth()+1,p=i.getDate(),m=(b<10?"0":"")+b+"-"+(p<10?"0":"")+p+"-"+i.getFullYear(),l.setAttribute("href",u),l.setAttribute("download",a+"-"+m+".json"),document.body.appendChild(l),l.click(),l.remove(),f({status:!1}),f({status:!1})),e.n=4;break;case 3:throw e.p=3,e.v;case 4:return e.a(2)}var c,a,u,l,i,b,p,m}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=x(P().m((function e(){var t,n,r,o=arguments;return P().w((function(e){for(;;)switch(e.n){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:0,n=o.length>1&&void 0!==o[1]?o[1]:"wf-funnel",ee(),e.p=1,e.n=2,te(t,n);case 2:e.n=4;break;case 3:e.p=3,r=e.v,f({status:!0,error:r.message});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(s.ub)(F,(function(){return A(!1)})),Object(r.createElement)("div",{className:"bwf-flex bwf--g12"},Object(r.createElement)(b.Button,{onClick:function(){Object(l.k)({importType:"step"})},className:"bwf-no-ripple",isPrimary:!0},Object(o.__)("Add New Step","funnel-builder")),Object(r.createElement)(O.a,{menuPosition:"bottom right",classes:"bwf-standard-ellipsis-menu bwf-store-checkout-actions",dropdownClasses:"bwf-standard-ellipsis-dropdown",buttonLabel:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,Object(o.__)("Actions","funnel-builder")),N?Object(r.createElement)(w.a,{icon:"angle-up",size:16}):Object(r.createElement)(w.a,{icon:"angle-down",size:16})),disabled:J,renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){W({status:!0}),n()}},Object(o.__)("Rename","funnel-builder")),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){X("Draft"===$?1:0),n()}},"Draft"===$?Object(o.__)("Enable","funnel-builder"):Object(o.__)("Disable","funnel-builder")),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){f({status:!0,modalTitle:Object(o.__)("Import"),buttonCancel:Object(o.__)("Cancel","funnel-builder"),buttonConfirm:Object(o.__)("Confirm","funnel-builder"),content:Object(r.createElement)(r.Fragment,null,Object(o.__)("The funnel already has a few steps. Importing another funnel would remove the current steps. ","funnel-builder"),Object(r.createElement)("strong",null," ",Object(o.__)("Tip: ","funnel-builder")),Object(o.__)("You can export the current funnel before importing","funnel-builder")),onConfirm:function(){return a(!0)}}),n()}},Object(r.createElement)(g.a,{justify:"flex-start"},Object(r.createElement)(g.c,null,Object(o.__)("Import","funnel-builder")))),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){ne(t,q),n()}},Object(r.createElement)(g.a,{justify:"flex-start"},Object(r.createElement)(g.c,null,Object(o.__)("Export","funnel-builder")))),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){f(L(L({},Q),{},{onConfirm:function(){return Z()}})),n()},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(g.a,{justify:"flex-start"},Object(r.createElement)(g.c,null,Object(o.__)("Delete","funnel-builder")))))}}),Object(r.createElement)(m.a,{confirmText:i.confirmText,confirmButtonText:i.buttonConfirm,confirmButtonClass:i.confirmButtonClass,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,content:i.content,onRequestClose:function(){return f({status:!1})},modalTitle:i.modalTitle,disableConfirm:i.disableConfirm,isOpen:i.status,closeIcon:!0}),c&&Object(r.createElement)(_.a,{modalTitle:Object(o.__)("Import Store Checkout","funnel-builder"),apiPath:"/store-checkout/import?override_existing=yes",onRequestClose:function(){return a(!1)},onSuccess:function(e){e.funnel_id&&(T({funnel_id:e.funnel_id,funnel_status:!1}),U(parseInt(e.funnel_id)))},extraParams:{id:t},showSuccessState:!0,enableClone:!0}),K.status&&Object(r.createElement)(E.a,{renameTitle:"Rename",title:null!==(e=Object(k.decodeEntities)(q))&&void 0!==e?e:"",onclose:function(){return H({status:!1,isLoading:!1})},updateTitle:function(e){(e=e.trim())!==q?(W({isLoading:!0}),d()({path:Object(s.y)("/funnels/".concat(t)),method:"POST",data:{title:e,description:"",funnel_id:t}}).then((function(t){t.id&&(z(e),W({status:!1,isLoading:!1}),R(Object(o.__)("Changes Saved","funnel-builder")))})).catch((function(e){console.log(e),z(q),R("Title Updation Failed")}))):W({status:!1,isLoading:!1})},isLoading:K.isLoading}))},M=n(22),z=n(64),U=n(99),q=n(41),$=n(104),J=n(103),Y=(n(175),n(40)),K=n(106),H=n(93),V=n(92),W=n(87),Q=n(100),X=n(170),Z=n(135),ee=["edit"];function te(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(i)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e,t,n){return decodeURIComponent(Object(l.f)(e,t,n))},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=(arguments.length>4&&void 0!==arguments[4]||Object(r.createElement)(r.Fragment,null),arguments.length>5?arguments[5]:void 0),b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},p=Object(S.b)(),d=p.isProFeatureLocked,m=v.a.getFunnelViewLink(),O=v.a.getFunnelStatus(),j=Object(h.a)(),y=j.fetch,g=v.a.getSteps().length,w=Object(r.useState)(!1),_=ne(w,2),E=_[0],k=(_[1],Object(z.a)()),C=k.setActiveMultiple,T=k.setPageHeader,P=k.setL2NavType,I=k.setL2Nav,N=k.setPageBackLink,x=k.setL2NavAlign,A=k.setIsLoading,L=k.setStepHeader,F=k.setIsStepNavActive,D=k.resetHeaderMenu,R=k.setL2PostTitle,G=Object(H.a)(),re=G.setOrderLoading,ce=G.setOrders,ae=Object(V.a)(),ue=ae.setLeadLoading,le=ae.setLeads,ie=Object(K.a)(),se=ie.getTotalContacts,fe=ie.getMessage,be=Object(Q.a)(),pe=be.setReferrerLoading,de=Object(Z.a)(),me=de.resetAnalyticsData,Oe=Object($.a)(),je=Oe.getTotalOrders,ye=Object(J.a)(),ve=ye.getTotalLeads,he=je(),ge=ve(),we=se(),_e=(fe(),Object(q.a)().getPreviousStep()),Ee=Object(Y.a)(),ke=Ee.setStepData,Se=Ee.setSteps,Ce=Ee.setStepLoading,Te=Ee.setPreviousStep,Pe=Ee.setVariant,Ie=Object(U.a)(),Ne=Ie.control_title,xe=Ie.isLoading,Ae=Object(W.a)(),Le=Ae.setExperimentData,Fe=Ae.setExperimentStatus,De=Object(r.useRef)();Object(r.useEffect)((function(){A(E)}),[E]),Object(r.useEffect)((function(){return function(){A(!1),D()}}),[]),Object(r.useEffect)((function(){ke({}),Se({})}),[]);var Re=location&&location.search?Object(c.parse)(location.search.substring(1)):{},Ge=(Re.edit,te(Re,ee)),Be=Re.path.split("/")&&Re.path.split("/").length>=3?Re.path.split("/")[2].toLowerCase():"steps",Me=Object(a.useParams)(),ze=Me.stepType,Ue=Me.stepId,qe=(Me.subAction,Me.tabId,Me.tab),$e=Object(f.a)(),Je=$e.getContact,Ye=Je(),Ke=null!=Ye?Ye:{},He=Ke.user_info,Ve=void 0===He?{}:He,We=(null==Ve?void 0:Ve.first_name)&&"".concat(null==Ve?void 0:Ve.first_name," ").concat(null==Ve?void 0:Ve.last_name),Qe=function(e){return Object(r.createElement)(i.a,{modalTitle:e,disabled:["publish","edit","preview","stepType","draftContainer","abContainer","draft","action"]})},Xe={funnels:{name:Object(o.__)("Funnels","funnel-builder"),link:oe({},"/store-checkout/analytics/funnels",Ge)},referrers:{name:Object(o.__)("Referrers","funnel-builder"),link:oe({},"/store-checkout/analytics/referrers",Ge),modalContent:{title:Object(o.__)("Referrers","funnel-builder"),content:{}}},"utm-campaigns":{name:Object(o.__)("UTM Campaigns","funnel-builder"),link:oe({},"/store-checkout/analytics/utm-campaigns",Ge)}};Object(r.useEffect)((function(){return function(){re(!0),ce([],1,25),ue(!0),le([],1,25),pe(!0),me(n)}}),[]),Object(r.useEffect)((function(){Le({}),!De.current||"experiments"!==De.current&&"innerStep"!==De.current?isNaN(Number(Ue))?"experiments"===Be&&(De.current="experiments"):De.current="innerStep":(y(parseInt(n)),De.current=!1)}),[Be,Ue]);var Ze=function(){return"orders"===_e?"/store-checkout/orders":"leads"===_e?"/store-checkout/orders/optins":"/store-checkout/orders"},et=[{label:Object(o.__)("List Mode","funnel-builder"),id:"list",link:"/store-checkout"},{label:Object(o.__)("Canvas Mode","funnel-builder"),id:"canvas",link:"/store-checkout/canvas"}];return Object(r.useEffect)((function(){if(isNaN(Number(Ue))&&D(),qe||(I({}),F(!0),C({leftNav:"store-checkout"})),n)if(T(""),P("menu"),x("left"),!ze&&["steps","canvas"].includes(Be)){R(""),Pe("");var e=Re.path.includes("canvas")?"canvas":"list";Ce(!0),Te(""),Fe(null),L(Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12"},Object(r.createElement)("div",{className:"bwf-header-title"},Object(o.__)("Steps","funnel-builder")),Object(r.createElement)(X.a,{list:et,active:e})),"steps"===Be&&Object(r.createElement)(B,null)))}else"experiments"===Be?(R(null),Pe(""),N("admin.php?page=bwf&path=/store-checkout/steps"),L(Qe(Ne?Ne+Object(o.__)(" - A/B Test","funnel-builder"):Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf-mb-12"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-28 bwf-w-300"}))))):"analytics"===Be?(C({leftNav:"store-checkout",rightNav:Ue||"funnels"}),I(Xe),P("menu"),x("left"),L(Object(r.createElement)("div",{className:"bwf-header-title bwf-mb-16"},Object(o.__)("Analytics","funnel-builder"),d&&Object(r.createElement)(M.b,null)))):"settings"===Be?L(Object(r.createElement)("div",{className:"bwf-header-title bwf-mb-16"},Object(o.__)("Settings","funnel-builder"))):"contacts"===Be?void 0!==Ue&&("orders"===_e&&re(!1),"leads"===_e&&ue(!1),N(Object(s.R)({},"".concat(Ze()))),L(Object(r.createElement)(i.a,{modalTitle:Object(o.__)("Details","funnel-builder"),isBack:!0,disabled:["publish","edit","preview","stepType","draftContainer","abContainer","draft","action"]}))):"contact-export"===Be?(N(Object(s.R)({},"/store-checkout/contacts")),L(Qe("Export Contacts"))):["orders"].includes(Be)&&(L(Object(r.createElement)("div",{className:"bwf-header-title bwf-mb-16"},Object(o.__)("Conversions","funnel-builder")," ",!isNaN(he)&&!Object(u.isEmpty)(null==he?void 0:he.toString())&&Object(r.createElement)("span",{className:"bwf-list-count"},"(",he," ",Object(o.sprintf)(Object(o.__)("Order%s","funnel-builder"),Number(he)>1?"s":""),")"))),C({leftNav:"store-checkout",rightNav:Ue||"orders"}),I({}),P("menu"),x("left"));else T(t)}),[e,t,m,l,g,null==b?void 0:b.abTestTitle,n,E,O,ze,We,Ue,xe,qe,he,ge,we]),!0},ae=(n(1180),n(81)),ue=n(463),le=function(e){var t=e.onRequestClose,n=Object(ae.a)(),o=n.setActiveGroup,c=n.setActiveSubFilter,a=Object(y.a)().setGlobalCheckout,i=Object(h.a)().setFunnelTitle,s=Object(l.i)();Object(r.useEffect)((function(){o("wc_checkout")}),[]),Object(r.useEffect)((function(){Object(u.isEmpty)(s.importType)&&Object(l.k)({importType:"wc_checkout"})}),[s.importType]);return Object(r.createElement)(ue.default,{isStoreCheckout:!0,onImportComplete:function(e){i(""),t(),a({funnel_id:e.funnel_id,funnel_name:"",funnel_status:!1}),o("funnel"),c(!1),Object(l.k)({},"/store-checkout",{})},showTemplatesNav:!1})},ie=n(21),se=n(61),fe=n(346),be=n(174),pe=n(167),de=n(173),me=n(85),Oe=n(28),je=n(171),ye=n(37),ve=n(287),he=n(176),ge=n(6),we=n.n(ge),_e=n(18),Ee=n(14);function ke(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var l=r&&r.prototype instanceof u?r:u,i=Object.create(l.prototype);return Se(i,"_invoke",function(n,r,o){var c,u,l,i=0,s=o||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return c=t,u=0,l=e,b.n=n,a}};function p(n,r){for(u=n,l=r,t=0;!f&&i&&!o&&t<s.length;t++){var o,c=s[t],p=b.p,d=c[2];n>3?(o=d===r)&&(l=c[(u=c[4])?5:(u=3,3)],c[4]=c[5]=e):c[0]<=p&&((o=n<2&&p<c[1])?(u=0,b.v=r,b.n=c[1]):p<d&&(o=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,d){if(i>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),u=s,l=d;(t=u<2?e:l)||!f;){c||(u?u<3?(u>1&&(b.n=-1),p(u,l)):b.n=l:b.v=l);try{if(i=2,c){if(u||(o="next"),t=c[o]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,u<2&&(u=0)}else 1===u&&(t=c.return)&&t.call(c),u<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),u=1);c=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==a)break}catch(t){c=e,u=1,l=t}finally{i=1}}return{value:t,done:f}}}(n,o,c),!0),i}var a={};function u(){}function l(){}function i(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Se(t={},r,(function(){return this})),t),f=i.prototype=u.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,Se(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=i,Se(f,"constructor",i),Se(i,"constructor",l),l.displayName="GeneratorFunction",Se(i,o,"GeneratorFunction"),Se(f),Se(f,o,"Generator"),Se(f,r,(function(){return this})),Se(f,"toString",(function(){return"[object Generator]"})),(ke=function(){return{w:c,m:b}})()}function Se(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Se=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var c=function(t,n){Se(e,t,(function(e){return this._invoke(t,n,e)}))};c("next",0),c("throw",1),c("return",2)}})(e,t,n,r)}function Ce(e,t,n,r,o,c,a){try{var u=e[c](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(i)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function(e){var t=e.funnelId,n=e.funnelStatus,c=Object(S.c)().showSnackbar,a=Object(h.a)().setFunnelStatus,u=Object(y.a)().setGlobalCheckout,l=Te(Object(r.useState)(!1),2),i=l[0],f=l[1],b=function(){var e,r=(e=ke().m((function e(){var r,l,i;return ke().w((function(e){for(;;)switch(e.n){case 0:return r=["Draft",!1].includes(n)?"Published":"Draft",e.p=1,f(!0),e.n=2,d()({method:"POST",path:Object(s.y)("/store-checkout/".concat(t,"/status"))});case 2:(l=e.v).status&&(c("Published"===r?Object(o.__)("Store Checkout Enabled","funnel-builder"):Object(o.__)("Store Checkout Disabled","funnel-builder")),a(t,r),u({funnel_status:l.result},!0)),f(!1),e.n=4;break;case 3:e.p=3,i=e.v,console.log("toggleStoreCheckoutStatus:",i),c(i.message),f(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){Ce(c,r,o,a,u,"next",e)}function u(e){Ce(c,r,o,a,u,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(Ee.a,{className:"is-danger",onClick:b,isBusy:i,isSmall:!0},Object(o.__)("Enable Store Checkout","funnel-builder"))},Ne=n(34),xe=function(e){var t=e.className,n=Object(Ne.a)().isStatusLoading,c=(0,Object(ie.a)().getGlobalCheckout)()||{},a=c.funnel_id,u=c.funnel_status;return n||["Published",!0].includes(u)?null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b.Notice,{status:"info",isDismissible:!1,className:we()("bwf-component-notice bwf-store-checkout-header-error-notice",t)},Object(r.createElement)("div",{className:"bwf-flex bwf--g4 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(w.a,{icon:"info",style:{margin:0},color:_e.DANGER_COLOR})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(o.__)("Store Checkout is currently disabled. To make it accessible for customers click","funnel-builder"),Object(r.createElement)("strong",null,Object(o.__)(" “Enable” ","funnel-builder")),Object(o.__)("to activate it.","funnel-builder"))),Object(r.createElement)(Ie,{funnelId:a,funnelStatus:u})))},Ae=n(152),Le=n(58),Fe=n(116);function De(){return(De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(i)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Be=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(8),n.e(40)]).then(n.bind(null,1197))})),Me=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(5),n.e(13),n.e(39)]).then(n.bind(null,1167))})),ze=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(0),n.e(31)]).then(n.bind(null,1218))})),Ue=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(0),n.e(31)]).then(n.bind(null,1222))})),qe=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(8),n.e(11),n.e(42)]).then(n.bind(null,1198))})),$e=Object(r.lazy)((function(){return n.e(38).then(n.bind(null,1170))})),Je=Object(r.lazy)((function(){return Promise.all([n.e(3),n.e(4),n.e(7),n.e(10),n.e(41)]).then(n.bind(null,1196))})),Ye=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(9)]).then(n.bind(null,1211))})),Ke=Object(r.lazy)((function(){return n.e(14).then(n.bind(null,1226))})),He=Object(r.createElement)(a.Route,{component:function(){return Object(r.createElement)(a.Redirect,{to:Object(s.L)("/store-checkout")})}}),Ve=function(e){var t=Object(S.b)().isLite,n=Object(S.b)("ul").isLite,c=e.funnelId,u=e.funnelTitle,l=Re(Object(r.useState)(null),2),i=l[0],f=l[1],b=Object(h.a)().setLanguageData,p=Object(V.a)(),d=p.setLeadLoading,m=p.setLeadsFiltersList,O=p.setLeadsFirstTimeLoading,j=Object(H.a)(),y=j.setOrderLoading,g=j.setOrdersFiltersList,w=j.setOrdersFirstTimeLoading,_=Object(Q.a)().setReferrerLoading,E=Object(Ae.a)().setUtmsLoading,k=v.a.getFunnelLoading(),C=v.a.getIsFunnelLoading(),T=v.a.getIsFunnelEmpty(),P=v.a.getFunnelError(),I=Object(Fe.a)().getError,N=Object(Le.a)().setError,x=I();Object(s.m)(Object(o.__)("Store Checkout","funnel-builder"));var A=Object(je.a)(),L=A.setContacts,F=A.setContactLoading,D=A.setContactsFiltersList,R=(0,Object(ie.a)().getClosedNotices)(),G=(0,Object(q.a)().getLoading)();Object(se.addFilter)("bwf.funnel.experiment.useExperimentNav","wffn/bwf.funnel.experiment.useExperimentNav",(function(e){return Object(s.kb)()?ce:e})),Object(r.useEffect)((function(){return function(){F(!0),L([],1,25),y(!0),d(!0),_(!0),E(!0),D([]),m([]),g([]),w(null),O(null),b({isLoading:!0})}}),[]);var B=Object(a.useParams)(),M=B.tabId,z=void 0===M?"steps":M,U=B.tab,$=B.stepId;return Object(r.useEffect)((function(){C&&!T&&P?f(P):$&&x&&"AbortError"!==(null==x?void 0:x.name)?f(x):$||(N(null),f(null))}),[C,T,P,x,$]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(fe.a,null),Object(r.createElement)("div",{className:"bwf-store-checkout-wrap"},Object(r.createElement)(be.a,{title:u||(k&&!i?Object(r.createElement)(Oe.a,{h:24,w:150}):Object(o.__)("Store Checkout","funnel-builder"))}),Object(r.createElement)(ve.a,null,Object(r.createElement)(ye.a,{pageKey:"canvas"===z?"steps":z},(function(e){var l,f=e.ref;return Object(r.createElement)("div",{ref:f},i?Object(r.createElement)(me.a,{errorMessage:i.hasOwnProperty("message")?i.message:Object(o.__)("Unable to load Store Checkout Steps","funnel-builder")}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(pe.a,{isLoading:!1,funnelId:c,afterTitle:!(U?G:k)&&Object(r.createElement)(xe,null)}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(ve.a,null,Object(r.createElement)(ye.a,{pageKey:null!==(l=null!=U?U:$)&&void 0!==l?l:z},(function(e){var o=e.ref;return Object(r.createElement)("div",{ref:o},Object(r.createElement)(a.Switch,null,Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout","/store-checkout/steps","/store-checkout/templates/:filter/:builder/preview/:templateId","/store-checkout/templates/:filter/:builder/preview/:templateId/:step"],render:function(e){return Object(r.createElement)(Be,De({},e,{funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/contacts/:contactId"],render:function(e){return Object(r.createElement)(Me,De({},e,{funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/orders"],render:function(e){return Object(r.createElement)(ze,De({},e,{funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/orders/:subAction"],render:function(e){return Object(r.createElement)(Ue,De({},e,{funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/analytics","/store-checkout/analytics/:subAction"],render:function(e){return Object(r.createElement)($e,De({},e,{funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:"/store-checkout/canvas",render:function(e){return Object(r.createElement)(Je,De({},e,{funnelTitle:u,funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/settings","/store-checkout/settings/:tabId"],render:function(e){return Object(r.createElement)(qe,De({},e,{funnelId:c}))}}),Object(r.createElement)(a.Route,{exact:!0,path:"/store-checkout/experiments/:stepId",render:function(e){return Object(r.createElement)(Ye,De({},e,{funnelId:c}))}}),Object(s.u)()&&Object(r.createElement)(a.Route,{exact:!0,path:"/store-checkout/languages",render:function(e){return Object(r.createElement)(Ke,De({},e,{funnelId:c}))}}),Object(de.a)(t,n).map((function(e,t){return Object(r.createElement)(a.Route,{key:t,exact:!0,path:e.path,render:e.render})})),He))}))))))})))),!(null!=R&&R.includes("internal_help_tip_dismiss"))&&Object(r.createElement)(he.a,null))},We=n(163),Qe=n(151),Xe=n(39),Ze=n(89);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(i)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=ot(Object(r.useState)(null),2),t=e[0],n=e[1],c=ot(Object(r.useState)(!1),2),u=c[0],i=c[1],s=Object(y.a)().setGlobalCheckout,f=Object(Ne.a)().isStatusLoading,b=Object(ae.a)().setActiveGroup,p=Object(ie.a)(),d=p.getGlobalCheckout,m=p.getLoading,O=d(),j="object"===rt(O)?O:{},g=j.funnel_id,w=void 0===g?0:g,E=j.funnel_name,k=Object(h.a)().resetFunnel,S=Object(We.a)().resetFlowData,C=Object(Ze.a)().resetCanvasData,T=Object(Qe.a)().resetFunnelSettings,P=v.a.getCountData(),I=v.a.getFunnelTitle(),N=v.a.getFunnelLoading(),x=v.a.getIsFunnelEmpty(),A=v.a.getFunnelError(),L=(0,Object(q.a)().getStepsError)(),F=Object(a.useParams)(),D=F.tabId,R=void 0===D?"steps":D,G=(F.builder,F.stepId),B=(Object(l.i)().importType,m()),M=Object(Xe.a)().getPageCountData,U=Object(z.a)().setPageCountData,$=M(),J=Object(Y.a)().setPreviousStep;Object(r.useEffect)((function(){w&&U(tt(tt({},$),P))}),[w,P]),Object(r.useEffect)((function(){return function(){k(),S(),C(),T(),J("")}}),[]);return ce(R,I&&w?I:B?"":E||Object(o.__)("Store Checkout","funnel-builder"),w,!1),Object(r.useEffect)((function(){N&&!x&&A?n(A):G&&L&&n(L)}),[N,x,A,L]),Object(r.createElement)("div",null,!f&&!B&&Object(r.createElement)(r.Fragment,null,w?Object(r.createElement)(Ve,{funnelId:w,error:t,funnelTitle:I}):Object(r.createElement)("div",{className:"bwf-store-checkout-wrap"},Object(r.createElement)(fe.a,null),Object(r.createElement)(le,{onRequestClose:function(){b("funnel")}})),u&&Object(r.createElement)(_.a,{modalTitle:Object(o.__)("Import Store Checkout","funnel-builder"),apiPath:"/store-checkout/import",onRequestClose:function(){return i(!1)},onSuccess:function(e){e.funnel_id&&s({funnel_id:e.funnel_id,funnel_status:!1})},showSuccessState:!0,enableClone:!0})))}},346:function(e,t,n){"use strict";var r=n(0),o=n(15),c=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return t=s(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,t,[e])).scrollTo=n.scrollTo.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,window.location.hash?100:250)}},{key:"scrollTo",value:function(){var e=this.props.offset,t=void 0===e?"0":e,n=window.location.hash?window.location.hash.substring(1):null,r=document.getElementById(n);if(r){var o=r.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:o-parseInt(t,10),behavior:"smooth"})}else this.ref.current?window.scrollTo({top:0,behavior:"smooth"}):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(r.createRef)(),Object(r.createElement)("div",{ref:this.ref},e)}}])&&u(n.prototype,o),c&&u(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,c}(r.Component);b.propTypes={offset:c.a.string},t.a=b},448:function(e,t,n){"use strict";var r=n(0),o=n(8),c=n(1),a=n(2),u=(n(530),n(14));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,u=[],l=!0,i=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(i)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.onclose,n=e.title,i=e.updateTitle,s=e.isLoading,f=e.renameTitle,b=l(Object(r.useState)(n),2),p=b[0],d=b[1],m=Object(a.isEmpty)(p.trim());return Object(r.createElement)(o.Modal,{title:f,className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(c.__)("Title","funnel-builder")),Object(r.createElement)(o.TextControl,{value:p,onChange:function(e){d(e)},className:m?"bwf-error-border":"",onKeyDown:function(e){if("Enter"===e.key){if(m)return;i(p)}}}),m?Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Title is required","funnel-builder")):null,Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions"},Object(r.createElement)(u.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,onClick:function(){return i(p)},disabled:m,isBusy:s,className:m?"bwf-no-ripple":""},Object(c.__)("Update","funnel-builder"))))}},463:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(126),c=n(2),a=n(1),u=n(376),l=n(298),i=n(81),s=n(4),f=n(12),b=function(e){var t=Object(r.useRef)(!0),n=Object(l.a)(),o=n.getTemplates,a=n.getActiveBuilder,u=n.getActiveGroup,i=Object(c.isEmpty)(o()),s=u(),f=a();Object(r.useEffect)((function(){var n,r;t.current||!e.current||i||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[i,s,f]),Object(r.useEffect)((function(){t.current&&!Object(c.isEmpty)(f)&&(window.scrollTo(0,0),t.current=!1)}),[f])},p=n(20),d=n(312);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(p.b)("ul").isProFeatureLocked,n=Object(l.a)(),m=n.getTemplates,O=n.getBuilders,y=(n.getFilters,n.getDefaultBuilder),v=n.templateLoading,h=n.getActiveBuilder,g=n.getActiveSubFilter,w=n.getActiveGroup,_=n.getCurrentTemplate,E=Object(i.a)().setActiveGroup,k=e.onImportComplete,S=e.isStoreCheckout,C=void 0!==S&&S,T=e.scratchConfirmModalData,P=e.storeCheckoutId,I=e.isStoreChekoutExists,N=void 0!==I&&I,x=e.templateListNotice,A=e.showImportNotice,L=e.urlDependency,F=void 0===L||L,D=e.showEditors,R=void 0===D||D,G=e.showTemplatesNav,B=void 0===G||G,M=e.showBuildFromScratch,z=void 0===M||M,U=e.showSelectedTemplates,q=void 0!==U&&U,$=e.previewCustomizeEnabled,J=void 0!==$&&$,Y=e.hideTabs,K=void 0===Y?[]:Y,H=Object(f.i)().importType,V=m(),W=O(),Q=JSON.parse(JSON.stringify(W)),X=y(),Z=h(),ee=v(),te=g(),ne=_(),re=Object(o.useParams)(),oe=re.id,ce=void 0===oe?0:oe,ae=re.filter,ue=void 0===ae?"funnel":ae,le=re.builder,ie=re.templateId,se=re.step,fe=Object(r.useRef)();b(!Object(s.kb)()&&fe);var be,pe=F?ie:ne.id,de=F?se:ne.activeStep,me=C&&P?P:ce,Oe=w(),je=me||C||!F?Oe:ue,ye={funnel:Object(a.__)("All","funnel-builder"),wc_checkout:Object(a.__)("Checkout","funnel-builder"),landing:Object(a.__)("Sales Funnels","funnel-builder"),optin:Object(a.__)("Lead Funnels","funnel-builder")};((me||N||K.includes("wc_checkout"))&&delete ye.wc_checkout,N&&(ye.upsell&&delete ye.upsell,me||(ye.wc_checkout=Object(a.__)("Checkout","funnel-builder"))),!t||me||K.includes("upsell")||(ye.upsell=Object(a.__)("One Click Upsell","funnel-builder")),Q&&Q.wc_checkout&&Q.wc_checkout.customizer&&delete Q.wc_checkout.customizer,"funnel"===H)&&(null===(be=Q[je])||void 0===be||delete be.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var ve=function(){var e=le||X;return Object(c.isEmpty)(Z)||(e=Z),Q&&Q[je]&&!Q[je][e]&&(e=Q[je][X]?X:"elementor"),e},he=["1","2","3","inline","popup"],ge=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&he.includes(te)?V[t][Z][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.kb)()?"/store-checkout":me?"/funnels/".concat(me):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.a,{filters:d.e,templates:V,activeBuilder:ve(),templateCards:function(){if(Object(c.isEmpty)(V)||Object(c.isEmpty)([je]))return{};var e,t=ve(),n={};if("upsell"===je)n=null===(e=V[je])||void 0===e?void 0:e[t];else if("funnel"===je){var r=V[je][t];for(var o in r){var a,u=r[o];if(r[o].hasOwnProperty("group")||q&&!q.includes(u.name))if(!(u.group.includes("sales")||u.group.includes("optin")||null!==(a=r[o])&&void 0!==a&&a.build_from_scratch))continue;n[o]=r[o]}}else for(var l in V.funnel[t]){var i=V.funnel[t][l];(!q||q&&q.includes(i.name))&&("landing"===je&&i.group.includes("sales")||"optin"===je&&i.group.includes("optin")||"wc_checkout"===je&&i.group.includes("wc_checkout"))&&(n[l]=i)}return n}(),editors:Q,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:je,templateGroup:ye,previewData:function(){if(Object(c.isEmpty)(V)||!pe)return{};var e={success:!0},t=[],n=[];try{var r=ve();if("upsell"===je){t=[];var o=r;for(var u in"oxy"===o&&(o="oxygen"),"customizer"===o&&(o="elementor"),V[je][r]){var l=V[je][r][u];if(!l.build_from_scratch){var i={};i.id=u,i.funnel=u,i.slug=u,i.name=l.name,i.thumbnail=l.thumbnail,i.template=pe,i.pro=l.pro,i.preview="https://templates-".concat(o,".funnelswp.com/offer/").concat(null==l?void 0:l.prevslug,"/"),i.group_type={},i.type="upsell",t.push(i),n.push({id:u,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(null==l?void 0:l.prevslug,"/")})}}e.activeTemplate={id:pe,thumbnail:pe,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(V[je][r][pe].prevslug,"/"),slug:pe,prevId:pe,name:V[je][r][pe].name,pro:V[je][r][pe].pro,tempPro:V[je][r][pe].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(je){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=V.funnel[r][pe];t=f.steps?f.steps.map((function(e){var t=V[e.type][r][ge(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+ge(e.slug,e.type));var o="";switch(e.type){case"landing":o=Object(a.__)("Sales Page","funnel-builder");break;case"wc_checkout":o=Object(a.__)("Checkout Page","funnel-builder");break;case"upsell":o=Object(a.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":o=Object(a.__)("Thank You Page","funnel-builder");break;case"optin":o=Object(a.__)("Optin Page","funnel-builder");break;case"optin_ty":o=Object(a.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var o=V[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(o.prevslug),preview:_e(e.type,o,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(pe),slug:ge(e.slug,e.type),funnel:pe,step:e.type,name:o,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var b=f?f.steps.filter((function(e){return e.type===de})):[],p=V[b[0].type][r][ge(b[0].slug,b[0].type)];e.activeTemplate={thumbnail:"".concat(de,"-").concat(pe),prevId:"".concat(de,"-").concat(p.prevslug),preview:_e(b[0].type,p,r),slug:pe,name:V.funnel[r][pe].name,pro:V.funnel[r][pe].pro,tempPro:V.funnel[r][pe].pro,group:"funnel",filters:!!p.group_type&&Object.keys(p.group_type),type:de,funnelGroup:f.group,filter:"wc_checkout"===de?p.no_steps:p.group?p.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:me,onImportComplete:k,templateFilterCheck:function(e){return!me||"funnel"===H||!1===te||!1===te||!(!me||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:C,parentRoute:Ee,showTemplatesNav:B,showBuildFromScratch:!!z&&("funnel"!==H||C&&!me),funnelTitleModalData:j({},C&&{title:Object(a.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:T,importApiPrefix:C?"store-checkout":"funnels",templateListNotice:x,showImportNotice:A,urlDependency:F,showEditors:R,previewCustomizeEnabled:J,listRef:fe}))}},530:function(e,t,n){}}]);