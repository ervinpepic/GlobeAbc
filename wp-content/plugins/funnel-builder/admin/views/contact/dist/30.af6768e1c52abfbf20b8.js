(window.webpackJsonp=window.webpackJsonp||[]).push([[30,8,22,40],{1197:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(126),a=n(2),l=n(25),o=n(10),i=n.n(o),u=n(8),s=n(1),b=(n(663),n(4)),f=n(6),m=n.n(f),d=n(5),p=n(366),O=n(29),j=n(30),y=n(81),v=n(298),g=n(42),w=n(350),h=n(12),_=n(463),E=n(34),S=n(50),k=n(21);function N(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.toStringTag||"@@toStringTag";function a(n,r,c,a){var i=r&&r.prototype instanceof o?r:o,u=Object.create(i.prototype);return C(u,"_invoke",function(n,r,c){var a,o,i,u=0,s=c||[],b=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,o=0,i=e,f.n=n,l}};function m(n,r){for(o=n,i=r,t=0;!b&&u&&!c&&t<s.length;t++){var c,a=s[t],m=f.p,d=a[2];n>3?(c=d===r)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=n<2&&m<a[1])?(o=0,f.v=r,f.n=a[1]):m<d&&(c=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,f.n=d,o=0))}if(c||n>1)return l;throw b=!0,r}return function(c,s,d){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&m(s,d),o=s,i=d;(t=o<2?e:i)||!b;){a||(o?o<3?(o>1&&(f.n=-1),m(o,i)):f.n=i:f.v=i);try{if(u=2,a){if(o||(c="next"),t=a[c]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+c+"' method"),o=1);a=e}else if((t=(b=f.n<0)?i:n.call(r,f))!==l)break}catch(t){a=e,o=1,i=t}finally{u=1}}return{value:t,done:b}}}(n,c,a),!0),u}var l={};function o(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(C(t={},r,(function(){return this})),t),b=u.prototype=o.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,C(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e}return i.prototype=u,C(b,"constructor",u),C(u,"constructor",i),i.displayName="GeneratorFunction",C(u,c,"GeneratorFunction"),C(b),C(b,c,"Generator"),C(b,r,(function(){return this})),C(b,"toString",(function(){return"[object Generator]"})),(N=function(){return{w:a,m:f}})()}function C(e,t,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}(C=function(e,t,n,r){if(t)c?c(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){C(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function P(e,t,n,r,c,a,l){try{var o=e[a](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,c)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){var t=Object(c.useParams)(),n=t.id,a=t.builder,l=e.query,o=e.isOpen,f=e.setModalOpenState,d=e.hasCheckoutStep,g=e.funnelId,C=void 0===g?n:g,T=l.importType,I="wc_checkout"===T?"funnel":T,D=j.a.getAddStepData(),F=Object(O.a)(),B=F.addStep,L=F.addSubStep,z=F.endAddStep,U=F.updateFunnelViewLink,M=F.setCountData,R=F.fetch,q=Object(y.a)(),G=q.setActiveGroup,J=q.setActiveSubFilter,$=(0,Object(v.a)().getActiveGroup)(),H=Object(E.a)().getStatus,Q=Object(S.a)().updateStatus,Y=H(),K=A(Object(r.useState)(null),2),V=K[0],W=K[1],X=l.path.startsWith("/store-checkout"),Z=(0,Object(k.a)().getGlobalCheckout)(),ee=("object"===x(Z)?Z:{}).funnel_id,te=void 0===ee?0:ee,ne=!!a||!!I,re=function(){f(!1),V&&W(null)};Object(r.useEffect)((function(){return function(){z()}}),[]),Object(r.useEffect)((function(){return D&&"type"in D&&(W(D),f(!0)),function(){re()}}),[D]);var ce=function(e,t){var n=V.is_substep,r=V.type,c=V.parent_id;e.status&&"data"in e&&(n?e.data&&(L(e.data,r,parseInt(c),!!t),Object(h.k)({},"".concat(Object(b.kb)()?"/store-checkout/bump":"/funnel-bump","/").concat(e.data.id).concat(t?"/design":"/import","&funnel_id=").concat(C))):B(e.data))},ae=A(Object(r.useState)(!1),2),le=ae[0],oe=ae[1],ie=A(Object(r.useState)(null),2),ue=ie[0],se=ie[1],be=A(Object(r.useState)(!1),2),fe=be[0],me=be[1],de=function(){var e,t=(e=N().m((function e(t){var n,r,c,a,l,o,u,s,f,m,d,p,O,j,y,v;return N().w((function(e){for(;;)switch(e.n){case 0:if(!le){e.n=1;break}return e.a(2);case 1:return me(!0),oe(!0),n=V.type,r=void 0===n?"":n,c=V.parent_id,a=void 0===c?0:c,l=V.is_substep,o=void 0!==l&&l,u=t.copyFrom,s=void 0===u?{}:u,f=t.title,m=void 0===f?"":f,(d=s&&s.hasOwnProperty("key")?s.key:0)<1&&(d=s&&s.hasOwnProperty("id")?s.id:0),p="",o&&parseInt(a)>0&&(p="".concat(a,"/substeps/")),Object(b.kb)()&&"wc_order_bump"===r&&(p="".concat(a,"/substeps/")),O="",O="offer"==r?"/funnel-upsell/".concat(a,"/offers"):"/funnels/".concat(C,"/steps/").concat(p),Object(b.kb)()&&(O="/store-checkout/".concat(C,"/step/").concat(p)),j={title:m,inherit_from:d,type:r},e.p=2,e.n=3,i()({method:"POST",path:Object(b.y)(O),data:j});case 3:(y=e.v).hasOwnProperty("status")&&y.status?ve():se(!1),y.hasOwnProperty("status")&&y.status&&ce(y,d),U(),y.hasOwnProperty("count_data")&&M(y.count_data),p&&"wc_order_bump"===r&&!Y.is_orderbump&&Q({is_orderbump:!0}),oe(!1),pe(!1),e.n=5;break;case 4:e.p=4,v=e.v,console.log("Error While Creating Step: "),console.log(v),se(!1),U(),oe(!1),pe(!1);case 5:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){P(a,r,c,l,o,"next",e)}function o(e){P(a,r,c,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){W(null),z(),me(!1),se(null),f(!1)};if(e)var n=setTimeout((function(){clearTimeout(n),t()}),2e3);else t()},Oe=(V||{}).is_substep,je=!fe&&V&&!(void 0!==Oe&&Oe)&&Object(r.createElement)(u.Button,{icon:"arrow-left-alt wffn-icon",onClick:function(){return W(null)}}),ye=Object(r.createElement)(r.Fragment,null,je,V&&"wc_order_bump"===V.type?Object(s.__)("Add Order Bump","funnel-builder"):V&&"popup_title"in V?V.popup_title:"funnel"===I?X?Object(s.__)("Create Store Checkout","funnel-builder"):Object(s.__)("Funnel Templates","funnel-builder"):Object(s.__)("Add Step","funnel-builder"));Object(r.useEffect)((function(){V||!o&&!ne||"upsell"!==$&&(!I&&!X||a?a||G("landing"):"step"===I?G("wc_checkout"):"funnel"===I&&G("funnel"))}),[o,ne]);var ve=function(){delete l.importType,delete l.group,G("funnel"),J(!1),re(),Object(h.k)({},Object(h.g)(),l)};return Object(r.createElement)(r.Fragment,null,(o||ne)&&Object(r.createElement)(u.Modal,{title:ye,onRequestClose:function(){V&&pe(),ve(),Object(b.kb)()?Object(h.k)({},"/store-checkout"):Object(h.k)({},"/funnels/".concat(C))},className:m()("bwf-admin-modal",{"bwf-admin-modal-full-screen bwf-add-step-modal":!V,"bwf-admin-modal-squeezy bwf-modal-overflow-visible":V}),shouldCloseOnClickOutside:V&&!le,overlayClassName:"wffn_step_template_modal"},!fe&&!V&&I&&("funnel"===I?Object(r.createElement)(_.default,{onImportComplete:function(){ve(),X?(R(parseInt(te)),Object(h.k)({},"/store-checkout")):(R(parseInt(C)),Object(h.k)({},"/funnels/".concat(C)))},isStoreCheckout:X,storeCheckoutId:te}):Object(r.createElement)(w.a,{onImportComplete:function(){ve(),X?(R(parseInt(te)),Object(h.k)({},"/store-checkout")):(R(parseInt(C)),Object(h.k)({},"/funnels/".concat(C)))},isStoreCheckout:X,storeCheckoutId:te,hasCheckoutStep:d})),V&&Object(r.createElement)(p.a,{step:V,requestCreateStep:de,onRequestClose:re,onCreationScreen:fe,clearAndCloseEverything:pe,creationSuccess:ue,isBusy:le})))},D=n(20);function F(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.toStringTag||"@@toStringTag";function a(n,r,c,a){var i=r&&r.prototype instanceof o?r:o,u=Object.create(i.prototype);return B(u,"_invoke",function(n,r,c){var a,o,i,u=0,s=c||[],b=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,o=0,i=e,f.n=n,l}};function m(n,r){for(o=n,i=r,t=0;!b&&u&&!c&&t<s.length;t++){var c,a=s[t],m=f.p,d=a[2];n>3?(c=d===r)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=n<2&&m<a[1])?(o=0,f.v=r,f.n=a[1]):m<d&&(c=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,f.n=d,o=0))}if(c||n>1)return l;throw b=!0,r}return function(c,s,d){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&m(s,d),o=s,i=d;(t=o<2?e:i)||!b;){a||(o?o<3?(o>1&&(f.n=-1),m(o,i)):f.n=i:f.v=i);try{if(u=2,a){if(o||(c="next"),t=a[c]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+c+"' method"),o=1);a=e}else if((t=(b=f.n<0)?i:n.call(r,f))!==l)break}catch(t){a=e,o=1,i=t}finally{u=1}}return{value:t,done:b}}}(n,c,a),!0),u}var l={};function o(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(B(t={},r,(function(){return this})),t),b=u.prototype=o.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,B(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e}return i.prototype=u,B(b,"constructor",u),B(u,"constructor",i),i.displayName="GeneratorFunction",B(u,c,"GeneratorFunction"),B(b),B(b,c,"Generator"),B(b,r,(function(){return this})),B(b,"toString",(function(){return"[object Generator]"})),(F=function(){return{w:a,m:f}})()}function B(e,t,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}(B=function(e,t,n,r){if(t)c?c(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){B(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function L(e,t,n,r,c,a,l){try{var o=e[a](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,c)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.funnelId,n=void 0===t?0:t,c=Object(D.c)().showSnackbar,a=j.a.getDuplicateStepData(),l=a.step,o=a.stepPos,f=a.shouldDuplicate,m=a.substepOf,d=void 0===m?null:m,p=z(Object(r.useState)(!1),2),y=p[0],v=p[1],w=z(Object(r.useState)(null),2),h=w[0],_=w[1],E=z(Object(r.useState)(null),2),S=E[0],k=E[1],N=Object(O.a)(),C=N.addStep,P=N.addSubStep,x=N.endDuplicateStep,A=N.setCountData,T=function(){var e=setTimeout((function(){x(),clearTimeout(e)}),2e3)},I=function(){var e,t=(e=F().m((function e(){var t,r,a,u,f;return F().w((function(e){for(;;)switch(e.n){case 0:return v(!0),e.p=1,r=(t=d&&"id"in d)?"".concat(d.id,"/substeps/"):"",a=Object(b.kb)()&&t?"/store-checkout/".concat(n,"/step/").concat(r):"/funnels/".concat(n,"/steps/").concat(r),"offer"===l.type&&t&&(a="/funnel-upsell/".concat(d.id,"/offers/")),e.n=2,i()({method:"POST",path:Object(b.y)(a),data:{duplicate_id:l.id,type:l.type}});case 2:"status"in(u=e.v)&&u.status?(t?P(u.data,l.type,d.id,!0):C(u.data,o),_(null),x(),u.hasOwnProperty("count_data")&&A(u.count_data),c(Object(s.__)("Changes Saved","funnel-builder"))):(k({message:Object(s.__)("There are some technical difficulties while duplicating step. Contact Support","funnel-builder")}),_(!1)),e.n=4;break;case 3:e.p=3,f=e.v,console.log(f),k(f),_(!1);case 4:v(!1),T();case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){L(a,r,c,l,o,"next",e)}function o(e){L(a,r,c,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){_(null),l&&I()}),[l]),f?Object(r.createElement)(u.Modal,{isDismissible:!1,title:!1===h?Object(s.__)("Failed"):"",onRequestClose:x,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},y&&Object(r.createElement)("div",{className:"bwf-t-center bwf-mt-10"},Object(r.createElement)(g.a,{size:"xxl"}),Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(s.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(s.__)("We are duplicating step in the funnel","funnel-builder"))),!y&&!0===h&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!y&&!0===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(s.__)("Step Duplicated","funnel-builder")))),!y&&!1===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:""},Object(r.createElement)("div",{className:"bwf-p"},Object(s.__)("Error: ","funnel-builder")+S&&"message"in S?S.message:Object(s.__)("There are some technical difficulties while duplicating step. Please contact support","funnel-builder")))),!y&&!1===h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.Button,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:x},Object(s.__)("OK","funnel-builder"))))):null},R=n(169),q=n(301),G=n(54),J=n(24),$=n(18),H={onMouseEnter:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".bwf-f-steps > .bwf-st-c-wrap:not(.bwf-st-c__lite-card)");n&&n.classList.add("is-child-hover")},onMouseLeave:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".bwf-f-steps > .bwf-st-c-wrap:not(.bwf-st-c__lite-card)");n&&n.classList.remove("is-child-hover")}};function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=e.type,n=void 0===t?"upsell":t,c=e.onClick,a=e.modalContent,l=Y(Object(r.useState)(!1),2),o=l[0],u=l[1],f=(Object(O.a)().setShowAddStepModal,Object(y.a)().setActiveGroup),p=Object(J.a)().setStepPromotion;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",Q({className:m()("bwf-st-c-wrap bwf-st-c__lite-card",["bwf-st-lite-".concat(n)])},H),Object(r.createElement)("div",{className:"bwf-st-c bwf-st-c-card-container is-lite-card",onClick:function(){return u(!0)}},Object(r.createElement)("span",{className:"bwf-d-icon-drag",style:{marginTop:"2px"}},Object(r.createElement)(d.a,{icon:"king",color:$.NOTICE_YELLOW,size:20})),Object(r.createElement)("div",{className:"bwf-st-c-title",style:{marginLeft:"-3px",flexDirection:"row"}},Object(r.createElement)("a",{href:"#",onClick:function(e){return e.preventDefault()}},"upsell"===n?Object(s.__)("One Click Upsell Offer","funnel-builder"):Object(s.__)("Order Bump","funnel-builder")),Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-ml-12"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-has-chart bwf-st-c-badge-small bwf-st-c-badge-green bwf-cursor-text"},Object(r.createElement)(d.a,{icon:"chart-increase",width:"14",height:"14",color:"#09B29C"}),Object(r.createElement)("span",null,Object(s.__)("Increases average order value","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("div",{className:"bwf-card-action",onClick:function(){"upsell"===n?(Object(h.k)({importType:"step"}),f("upsell")):c&&c()},role:"button",tabIndex:"-1"},Object(s.__)("View Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-card-action bwf-close-icon",onClick:function(e){var t;e.stopPropagation(),t="/".concat("upsell"===n?"remove-upsell-promotion":"remove-bump-promotion"),p("yes","upsell"===n?"upsell":"bump"),i()({path:Object(b.y)(t),method:"POST",data:{user_id:wffn.current_logged_user}}).then((function(e){e.status||console.log("Failed to remove step promotion.")})).catch((function(e){return console.log(e)}))}},Object(r.createElement)(d.a,{icon:"close",size:12}))))),o&&Object(r.createElement)(G.a,{isOpen:o,onRequestClose:function(){return u(!1)},modalContent:a}))},W=n(31),X=n(55),Z=n(75),ee=n(65),te=n(448),ne=n(22),re=n(88),ce=n(137),ae=n(136),le=n(44),oe=n(64),ie=n(40),ue=n(87),se=n(58),be=(n(664),n(28)),fe={views:{label:Object(s.__)("Views","funnel-builder")},conversions:{label:Object(s.__)("Conversions","funnel-builder")},revenue:{label:Object(s.__)("Revenue","funnel-builder"),isCurrency:!0}},me=function(e){var t=e.items,n=void 0===t?["views","conversions","revenue"]:t,c=e.stats,l=void 0===c?{}:c,o=e.type,i=Object(D.b)().isProFeatureLocked,u=Object(b.A)().formatAmount,f=(0,j.a.getAnalyticsLoading)(),m=Object(b.V)(),d=Object(a.get)(m,"0.modal",{}).primary_action,p=function(e){return!i&&f?Object(r.createElement)("div",{key:e,className:"bwf-funnel-step-analytics__item"},Object(r.createElement)(be.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(be.a,{h:12,w:60,mt:4,ml:"auto",mr:"auto"})):Object(r.createElement)("div",{key:e,className:"bwf-funnel-step-analytics__item"},function(e){return i&&(l[e]=Math.floor(901*Math.random())+100),fe[e].isCurrency?u(l[e]||0):l[e]||0}(e),Object(r.createElement)("br",null),Object(r.createElement)("span",{className:"bwf-text-light bwf-text-bold"},"landing"===o&&"conversions"===e?Object(s.__)("Clicks","funnel-builder"):fe[e].label))};return Object(r.createElement)("div",{className:"bwf-funnel-step-analytics"},function(){if(i)return Object(r.createElement)("div",{className:"bwf-funnel-step-analytics__overlay"},Object(r.createElement)("a",{href:Object(b.U)(["Funnel","Steps","Cards","Analytics"]),target:"_blank",rel:"noreferrer"},Object(r.createElement)(ne.c,{content:d,type:"warning",border:!0})))}(),n.map((function(e){return p(e)})))},de=n(63);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(){return(Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var he=window.wffn.is_ab_experiment,_e=window.wffn.is_ab_experiment_support,Ee={status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("Increased Conversion Rates","funnel-builder"),Object(s.__)("Greater Return on Ad Spend","funnel-builder"),Object(s.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.T)()+"AB-testing.png",proLink:Object(b.U)(["Order","Bump","AB_Test","Upgrade","Modal"])},Se={type:2,status:!0,proLink:Object(b.U)(["Order","Bump","Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")},ke=function(e){var t,n,c,o=e.bump,f=o._data,p=void 0===f?{}:f,y=o.tags,v=o.experiment_status,g=(o.type,o.stats),w=e.bump,_=e.checkoutStep,E=e.checkoutPos,S=e.stepPos,k=e.view,N=e.total,C=e.onSortStart,P=p.title,x=p.status,A=Object(b.G)(),T=j.a.getFunnel(),I=w.id,F=void 0===I?"":I,B=Object(oe.a)().setModalData,L=ge(Object(r.useState)(!1),2),z=L[0],U=L[1],M=ge(Object(r.useState)({}),2),R=M[0],q=M[1],J=ge(Object(r.useState)(!1),2),Q=J[0],Y=J[1],K=ge(Object(r.useState)(!1),2),V=K[0],be=K[1],fe=ge(Object(r.useState)(!1),2),pe=fe[0],je=fe[1],ve=ge(Object(r.useState)(!1),2),we=ve[0],ke=ve[1],Ne=ge(Object(r.useState)(!1),2),Ce=Ne[0],Pe=Ne[1],xe=ge(Object(r.useState)({}),2),Ae=xe[0],Te=xe[1],Ie=Object(O.a)(),De=Ie.startDuplicateStep,Fe=Ie.startDeleteStep,Be=Ie.setStepTitle,Le=Ie.setUpdateFunnel,ze=Object(ie.a)(),Ue=ze.setToggleState,Me=ze.setSubStep,Re=location&&location.search?Object(l.parse)(location.search.substring(1)):{},qe=Object(D.c)().showSnackbar,Ge=Object(ue.a)().setExperimentStatus,Je=Object(se.a)().setStepHeaderData,$e=function(){if(w.hasOwnProperty("id")&&w.id){Be(Object(W.decodeEntities)(P)+Object(s.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(A,"/experiments/").concat(w.id);Object(b.kb)()&&(e="/store-checkout/experiments/".concat(w.id)),Object(h.k)({},e)}},He=function(e){Pe(!0);var t="/funnel-bump/save-state/".concat(w.id,"?funnel_id=").concat(A);i()({path:Object(b.y)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(Ue(!Number(x)),Pe(!1),ke(!1),je(!1),function(e,t){var n=Object(a.cloneDeep)(null==T?void 0:T.steps).map((function(n){return parseInt(n.id)===parseInt(_.id)&&(n.substeps.wc_order_bump=n.substeps.wc_order_bump.map((function(n){return parseInt(n.id)===parseInt(F)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));T.steps=n;var r=JSON.parse(JSON.stringify(T));Le(r)}(Number(x),e),Te({}),qe(Object(s.__)("Changes Saved","funnel-builder"))):(Ue(Number(x)),Pe(!1),ke(!1),je(!1))})).catch((function(e){console.log(e),Ue(Number(x)),qe(Object(s.__)("Status Updation Failed","funnel-builder"))}))},Qe={1:Object(s.__)("A/B Test Draft","funnel-builder"),2:Object(s.__)("A/B Test Running","funnel-builder"),3:Object(s.__)("A/B Test Paused","funnel-builder")},Ye={1:"warning",2:"success",3:"default"},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ye[e]:Qe[e]},Ve=function(e){if(be(!0),(e=e.trim())===P)Y(!1),be(!1);else if(P!==e.trim()){Be(e);var t='{"title":"'.concat(e,'","slug":"').concat(k.match(/([^\/]*)\/*$/)[1],'"}');i()({path:Object(b.y)("/funnel-bump/save-state/".concat(w.id,"?funnel_id=").concat(A)),data:JSON.parse(t),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Y(!1),be(!1),qe(Object(s.__)("Changes Saved","funnel-builder")),function(e,t){var n=T.steps.map((function(n){if(n.id===e){var r=n.substeps.wc_order_bump.map((function(e){if(e.id===w.id){var n=ye(ye({},e._data),{},{title:t});return ye(ye({},e),{},{_data:n})}return e}));return n.substeps.wc_order_bump=r,n}return n}));T.steps=n;var r=JSON.parse(JSON.stringify(T));Le(r)}(e.step_data.checkout_id,e.step_data.title)})).catch((function(e){console.log(e.message?e.message:e),Be(P),qe(Object(s.__)("Title Updation Failed","funnel-builder"))}))}},We=Object(D.b)(),Xe=We.isExpired,Ze=We.isProFeatureLocked,et=We.isBasicFeatureLocked,tt=We.isBasic;return Object(r.createElement)("div",Oe({className:"bwf-st-c"},H),Object(r.createElement)("div",{className:"bwf-st-c-card-container"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===S?"is-disabled":"",onClick:function(){return C("up",S)},title:Object(s.__)("Click here to move up","funnel-builder")},Object(r.createElement)(d.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:S===N-1?"is-disabled":"",onClick:function(){return C("down",S)},title:Object(s.__)("Click here to move down","funnel-builder")},Object(r.createElement)(d.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(s.__)("Order Bump","funnel-builder")),Object(r.createElement)(r.Fragment,null,Xe?Object(r.createElement)(de.a,{toolTipText:Object(s.__)("Because your license is expired your order bump will not appear to the customer","funnel-builder"),size:"280",textAlign:"left"},Object(r.createElement)(ne.c,{content:Object(r.createElement)("div",{className:"bwf-flex bwf--g4"},Object(s.__)("License Expired","funnel-builder"),Object(r.createElement)(d.a,{icon:"info",size:"12",color:$.DANGER_COLOR})),type:"danger"})):Object(r.createElement)(r.Fragment,null,Object(a.size)(y)>0&&Object.keys(y).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"!==e&&"has_rules"!==e||(Je("bump",F,"",{title:P,view_link:k,status:1===Number(x),experiment_status:v}),Object(h.k)({},y[e].edit,Re))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+y[e].label_class},y[e].label))})),!Object(a.isEmpty)(v)&&"4"!==v&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){he&&!Ze?_e?(Ge(v),Me({step:"bump",parentId:_.id}),$e()):U(!0):q(Ee)}},Object(r.createElement)(ne.c,{content:(t=v,c="warning"===(n=Ke(v,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(re.a,{fill:c}),Object(r.createElement)("span",{className:"".concat(void 0!==c?"bwf-mr-4":"")},Ke(t)))),type:Ke(v,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(ne.c,{content:Object(s.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))))),Object(r.createElement)("a",{href:Object(b.ab)(A,"order_bump",_.id,w.id),onClick:function(e){e.preventDefault(),Je("bump",F,"",{title:P,view_link:k,status:1===Number(x),experiment_status:v}),Object(h.k)({page:"bwf",path:Object(b.ab)(A,"order_bump",_.id,w.id,!1)},"/",{})}},Object(W.decodeEntities)(P))),tt?Object(r.createElement)("div",null):Object(r.createElement)(me,{type:"bump",stats:g}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:k,className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(d.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(Z.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),Y(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Te({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(W.decodeEntities)(P)),"funnel-builder")))}),He()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(v)?je(!0):ke(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Draft","funnel-builder")))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){et?q(Se):(t(),De(ye(ye({},w),{},{type:"wc_order_bump"}),0,_))}},Object(r.createElement)(X.a,{justify:"space-between"},Object(r.createElement)(X.c,null,Object(s.__)("Duplicate","funnel-builder")),et&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){!Ze&&he?_e?(Ge(v),Me({step:"bump",parentId:_.id}),$e()):U(!0):q(Ee)}},Object(r.createElement)(X.a,{justify:"space-between"},Object(r.createElement)(X.c,null,Object(s.__)("A/B Test","funnel-builder")),Ze&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),B({title:P}),Fe(ye(ye({},w),{},{type:"wc_order_bump"}),S,ye(ye({},_),{},{stepPos:E}))},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Delete","funnel-builder")))))}})))),z&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return U(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(s.__)("Oops it seems old version of Experiments is activated.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_30"})),R.status&&Object(r.createElement)(G.a,{isOpen:R.status,onRequestClose:function(){return q({status:!1})},modalContent:R,type:R.type}),Q&&Object(r.createElement)(te.a,{renameTitle:"Edit Details",title:Object(W.decodeEntities)(P),onclose:function(){return Y(!1)},updateTitle:function(e){return Ve(e)},isLoading:V}),we&&Object(r.createElement)(ae.a,{isPublishLoading:Ce,onAction:function(){return He()},onclose:function(){return ke(!1)}}),pe&&Object(r.createElement)(ce.a,{isPublishLoading:Ce,onAction:function(){He(!0)},onclose:function(){return je(!1)}}),Object(r.createElement)(le.a,{className:m()("bwf-admin-modal-squeezy",Ae.className),confirmText:Ae.confirmText,confirmButtonText:Ae.buttonConfirm,cancelButtonText:Ae.buttonCancel,onConfirm:Ae.onConfirm,isLoading:Ae.loading,successMessage:Ae.success,errorMessage:Ae.error,content:Ae.content,onRequestClose:function(){return Te({status:!1})},modalTitle:Ae.modalTitle,isOpen:Ae.status,closeIcon:Ae.closeIcon}))},Ne=n(415),Ce=n(367);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(){return(xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Be=window.wffn.is_ab_experiment,Le=window.wffn.is_ab_experiment_support,ze={status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("A/B test product price, page layout, messaging, design & more. Create variants, analyze results & uncover hidden revenue.","funnel-builder")]},image:Object(b.T)()+"AB-testing.png",proLink:Object(b.U)(["Checkout","AB_Test","Upgrade","Modal"])},Ue={type:2,status:!0,proLink:Object(b.U)(["Checkout","Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")},Me={bump:!0},Re=function(e){var t=e.step,n=void 0===t?{}:t,c=n._data,o=void 0===c?{}:c,f=n.tags,p=void 0===f?[]:f,y=(n.experiment,n.substeps),v=(void 0===y?{}:y).wc_order_bump,g=void 0===v?[]:v,w=n.id,_=void 0===w?0:w,E=n.experiment_status,S=n.type,k=n.stats,N=e.step,C=e.stepPos,P=void 0===C?0:C,x=(e.title,e.isOBFake),A=e.dragHandleController,T=Object(D.b)(),I=T.isProFeatureLocked,F=T.isBasicFeatureLocked,B=T.isLite,L=T.isBasic,z=Object(D.c)().showSnackbar,U=j.a.getFunnel(),M=Object(se.a)().setStepHeaderData,R=Object(b.G)(),q=De(Object(r.useState)({}),2),J=q[0],Q=q[1],Y=o.title,K=o.view,te=o.status,be=void 0===te?0:te,fe=Object(oe.a)().setModalData,de=Object(O.a)(),pe=de.startDuplicateStep,Oe=de.startDeleteStep,je=de.startAddStep,ye=de.setShowProModal,ve=de.setShowProModalText,ge=de.setStepTitle,we=(de.fetch,de.sortSubSteps),he=de.setUpdateFunnel,_e=Object(ie.a)(),Ee=_e.setToggleState,Se=(_e.setStepData,Object(ue.a)().setExperimentStatus),Pe=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Ae=De(Object(r.useState)(p),2),Ie=Ae[0],Fe=Ae[1],Re=De(Object(r.useState)(!1),2),qe=Re[0],Ge=Re[1],Je=De(Object(r.useState)(!1),2),$e=Je[0],He=Je[1],Qe=De(Object(r.useState)(!1),2),Ye=Qe[0],Ke=Qe[1],Ve=De(Object(r.useState)(!1),2),We=Ve[0],Xe=Ve[1],Ze=De(Object(r.useState)(!1),2),et=Ze[0],tt=Ze[1],nt=De(Object(r.useState)(!1),2),rt=nt[0],ct=nt[1],at=De(Object(r.useState)({}),2),lt=at[0],ot=at[1];Object(r.useEffect)((function(){B||0!==Object(a.size)(g)||"no_bump"in p||Fe(Te(Te({},Ie),{},{no_bump:{label:Object(s.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[g.length]);var it,ut,st,bt=Object(b.fb)("wc_order_bump"),ft={1:Object(s.__)("A/B Test Draft","funnel-builder"),2:Object(s.__)("A/B Test Running","funnel-builder"),3:Object(s.__)("A/B Test Paused","funnel-builder")},mt={1:"warning",2:"success",3:"default"},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?mt[e]:ft[e]},pt=function(e){null!==bt&&je(Te(Te({},bt),{},{parent_id:parseInt(_),is_substep:!0,title:"Order Bump"})),!bt&&ye(!0),!bt&&ve(Object(s.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()},Ot=function(){if(_){ge(Object(W.decodeEntities)(Y)+Object(s.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(R,"/experiments/").concat(_);Object(b.kb)()&&(e="/store-checkout/experiments/".concat(_)),Object(h.k)({},e)}},jt=function(e){ct(!0);var t="/funnel-".concat(S,"/save-state/").concat(_,"?funnel_id=").concat(R);i()({path:Object(b.y)(t),method:"POST",data:{status:!Number(be)}}).then((function(t){t.success?(Ee(!Number(be)),ct(!1),tt(!1),Xe(!1),function(e,t){var n=null==U?void 0:U.steps.map((function(n){if(n.id===_){var r=Te(Te({},n._data),{},{status:e?"1":"0"});return Te(Te({},n),{},{_data:r,experiment_status:t?"3":n.experiment_status})}return n}));U.steps=n;var r=JSON.parse(JSON.stringify(U));he(r)}(Number(t.step_data.status),e),ot({}),z(Object(s.__)("Changes Saved","funnel-builder"))):(Ee(Number(be)),ct(!1),tt(!1),Xe(!1))})).catch((function(e){console.log(e),Ee(Number(be)),z("Status Updation Failed")}))},yt=function(e,t){var n=[];"up"===e?n=we(_,"wc_order_bump",t,t-1):"down"===e&&(n=we(_,"wc_order_bump",t,t+1)),i()({path:Object(b.y)("/funnels/steps/order/save/".concat(_,"?type=wc_order_bump")),method:"POST",data:{order:n.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))},vt=function(e,t){if(Ke(!0),(e=e.trim())===Y&&(null==o?void 0:o.post_name)===t)He(!1),Ke(!1);else{ge(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');i()({path:Object(b.y)("/funnel-".concat(S,"/save-state/").concat(_,"?funnel_id=").concat(R)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);He(!1),Ke(!1),function(e,t,n){var r=U.steps.map((function(r){return r.id===Number(_)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));U.steps=r;var c=JSON.parse(JSON.stringify(U));he(c)}(e.step_data.title,t,e.step_data.view_link),z(Object(s.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),ge(Y),z(Object(s.__)("Title Updation Failed","funnel-builder"))}))}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-card-container"},A(),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(b.sb)(S)),Object(r.createElement)(r.Fragment,null,Object(a.size)(p)>0&&Object.keys(Ie).map((function(e){return("no_bump"!==e||!B&&0===Object(a.size)(g))&&"global_checkout"!==e&&Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e?(M("checkout",_,"",{title:Y,view_link:K,status:1===Number(be),experiment_status:E}),Object(h.k)({},Ie[e].edit,Pe)):"no_bump"===e&&(I?Q(Me):pt(t))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+Ie[e].label_class},Ie[e].label))})),!Object(a.isEmpty)(E)&&"4"!==E&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Be&&!I?Le?(Se(E),Ot()):Ge(!0):Q(ze)}},Object(r.createElement)(ne.c,{content:(it=E,st="warning"===(ut=dt(E,!0))?"#B68F40":"success"===ut?"#09B29C":"default"===ut?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(re.a,{fill:st}),Object(r.createElement)("span",{className:"".concat(void 0!==st?"bwf-mr-4":"")},dt(it)))),type:dt(E,!0)})),!(be&&1===parseInt(be))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(ne.c,{content:Object(s.__)("Draft","funnel-builder"),className:"bwf-cursor-default",type:"warning"})))),Object(r.createElement)("a",{href:Object(b.ab)(R,"wc_checkout",N.id),onClick:function(e){e.preventDefault(),M("checkout",_,"",{title:Y,view_link:K,status:1===Number(be),experiment_status:E}),Object(h.k)({page:"bwf",path:Object(b.ab)(R,"wc_checkout",N.id,"",!1)},"/",{})}},Object(W.decodeEntities)(Y)," ")),L?Object(r.createElement)("div",null):Object(r.createElement)(me,{type:S,stats:k}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:Object(W.decodeEntities)(K),className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(d.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(Z.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),He(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Edit","funnel-builder")))),!(be&&1===parseInt(be))&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),function(){try{ot({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(W.decodeEntities)(Y)),"funnel-builder")))}),jt()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(be)&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(E)?Xe(!0):tt(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Draft","funnel-builder")))),!Object(b.kb)()&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){F?Q(Ue):(t(),pe(N,P+1))}},Object(r.createElement)(X.a,{justify:"space-between"},Object(r.createElement)(X.c,null,Object(s.__)("Duplicate","funnel-builder")),F&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){!I&&Be?Le?(Se(E),Ot()):Ge(!0):Q(ze)}},Object(r.createElement)(X.a,{justify:"space-between"},Object(r.createElement)(X.c,null,Object(s.__)("A/B Test","funnel-builder")),I&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),fe({title:Y}),Oe(N,P)},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Delete","funnel-builder")))))}})))),J.status&&Object(r.createElement)(G.a,{isOpen:J.status,onRequestClose:function(){return Q({status:!1})},modalContent:J,type:J.type}),qe&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return Ge(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(s.__)("Oops it seems old version of Experiments is activated.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.Button,{variant:"primary",onClick:function(){return Ge(!1)}},Object(s.__)("OK","funnel-builder")))),null!==bt&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(g)>0&&g.map((function(e,t){return Object(r.createElement)(ke,{key:t,bump:e,checkoutStep:N,checkoutPos:P,stepPos:t,total:Object(a.size)(g),view:Object(W.decodeEntities)(K),onSortStart:yt})})),Object(r.createElement)("div",xe({className:"bwf-st-c-sub-st-action-wrap"},H),Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(e){I?Q(Me):pt(e)}},I&&Object(r.createElement)(d.a,{icon:"king",color:$.NOTICE_YELLOW,size:20}),Object(s.__)("Add Order Bump","funnel-builder"))))),x&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(V,{type:"order_bump",onClick:function(){return ye(!0)},modalContent:{title:Object(s.__)("Order Bump","funnel-builder"),content:{benefits:[Object(s.__)("Boost your sales effortlessly with the Order Bumps. Let users add products with just one click on checkout page.","funnel-builder")]},image:Object(b.T)()+"order-bump.png",proLink:Object(b.U)(["Order","Bump","Upgrade","Modal"])}}))),$e&&Object(r.createElement)(Ne.a,{pageUrl:null==o?void 0:o.view_link,pageUrlSlug:null==o?void 0:o.post_name,renameTitle:"Step",title:Object(W.decodeEntities)(Y),onclose:function(){return He(!1)},updateDetail:function(e,t){return vt(e,t)},isLoading:Ye}),et&&Object(r.createElement)(ae.a,{isPublishLoading:rt,onAction:function(){return jt()},onclose:function(){return tt(!1)}}),We&&Object(r.createElement)(ce.a,{isPublishLoading:rt,onAction:function(){jt(!0)},onclose:function(){return Xe(!1)}}),J.bump&&Object(r.createElement)(Ce.a,{isOpen:J.bump,onRequestClose:function(){return Q({status:!1})}}),Object(r.createElement)(le.a,{className:m()("bwf-admin-modal-squeezy",lt.className),confirmText:lt.confirmText,confirmButtonText:lt.buttonConfirm,cancelButtonText:lt.buttonCancel,onConfirm:lt.onConfirm,isLoading:lt.loading,successMessage:lt.success,errorMessage:lt.error,content:lt.content,onRequestClose:function(){return ot({status:!1})},modalTitle:lt.modalTitle,isOpen:lt.status,closeIcon:lt.closeIcon}))};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(){return(Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ke=window.wffn.is_ab_experiment,Ve=window.wffn.is_ab_experiment_support,We={status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("Increased Conversion Rates","funnel-builder"),Object(s.__)("Greater Return on Ad Spend","funnel-builder"),Object(s.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.T)()+"AB-testing.png",proLink:Object(b.U)(["Offer","AB_Test","Upgrade","Modal"])},Xe={type:2,status:!0,proLink:Object(b.U)(["Offer","Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")},Ze=function(e){var t,n,c,o=e.offer,f=o._data,p=void 0===f?{}:f,y=o.tags,v=(o.experiment,o.experiment_status),g=o.stats,w=e.offer,_=e.upsellStep,E=e.upsellPos,S=e.stepPos,k=e.view,N=e.total,C=e.onSortStart,P=p.title,x=p.status,A=w.id,T=void 0===A?"":A,I=Object(b.G)(),F=j.a.getFunnel(),B=Object(oe.a)().setModalData,L=Qe(Object(r.useState)(!1),2),z=L[0],U=L[1],M=Qe(Object(r.useState)({}),2),R=M[0],q=M[1],J=Qe(Object(r.useState)(!1),2),Q=J[0],Y=J[1],K=Qe(Object(r.useState)(!1),2),V=K[0],te=K[1],be=Qe(Object(r.useState)(!1),2),fe=be[0],pe=be[1],Oe=Qe(Object(r.useState)(!1),2),je=Oe[0],ye=Oe[1],ve=Qe(Object(r.useState)(!1),2),ge=ve[0],we=ve[1],he=Qe(Object(r.useState)({}),2),_e=he[0],Ee=he[1],Se=Object(D.b)("ul").isExpired,ke=Object(D.b)(),Ce=ke.isProFeatureLocked,Pe=ke.isBasicFeatureLocked,xe=ke.isBasic,Ae=Object(O.a)(),Te=Ae.startDuplicateStep,Ie=Ae.startDeleteStep,De=Ae.setStepTitle,Fe=Ae.setUpdateFunnel,Be=Object(ie.a)(),Le=Be.setToggleState,ze=Be.setSubStep,Ue=Object(ue.a)().setExperimentStatus,Me=Object(se.a)().setStepHeaderData,Re=location&&location.search?Object(l.parse)(location.search.substring(1)):{},qe=Object(D.c)().showSnackbar,Je=function(){if(w.hasOwnProperty("id")&&w.id){De(Object(W.decodeEntities)(P)+Object(s.__)(" A/B Test"));var e="/funnels/".concat(I,"/experiments/").concat(w.id);Object(b.kb)()&&(e="/store-checkout/experiments/".concat(w.id)),Object(h.k)({},e)}},He={1:Object(s.__)("A/B Test Draft"),2:Object(s.__)("A/B Test Running"),3:Object(s.__)("A/B Test Paused")},Ye={1:"warning",2:"success",3:"default"},Ze=function(e){we(!0);var t="/funnel-".concat("offer","/save-state/",w.id,"?funnel_id=").concat(I);i()({path:Object(b.y)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(Le(!Number(x)),we(!1),ye(!1),pe(!1),function(e,t){var n=Object(a.cloneDeep)(null==F?void 0:F.steps).map((function(n){return parseInt(n.id)===parseInt(_.id)&&(n.substeps.offer=n.substeps.offer.map((function(n){return parseInt(n.id)===parseInt(T)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));F.steps=n;var r=JSON.parse(JSON.stringify(F));Fe(r)}(Number(x),e),Ee({}),qe(Object(s.__)("Changes Saved","funnel-builder"))):(Le(Number(x)),we(!1),ye(!1),pe(!1))})).catch((function(e){console.log(e),Le(Number(x)),qe("Status Updation Failed")}))},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ye[e]:He[e]},tt=function(e,t){if(te(!0),(e=e.trim())===P&&(null==p?void 0:p.post_name)===t)Y(!1),te(!1);else{De(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');i()({path:Object(b.y)("/funnel-".concat("offer","/save-state/",w.id,"?funnel_id=").concat(I)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Y(!1),te(!1),function(e,t,n,r){var c=F.steps.map((function(c){if(c.id===Number(e)){var a=c.substeps.offer.map((function(e){if(e.id===w.id){var c=$e($e({},e._data),{},{title:t,post_name:n,view_link:r});return $e($e({},e),{},{_data:c})}return e}));return c.substeps.offer=a,c}return c}));F.steps=c;var a=JSON.parse(JSON.stringify(F));Fe(a)}(e.step_data.upsell_id,e.step_data.title,t,e.step_data.view_link),qe(Object(s.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),De(P),qe("Title Updation Failed")}))}};return Object(r.createElement)("div",Ge({className:"bwf-st-c"},H),Object(r.createElement)("div",{className:"bwf-st-c-card-container"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===S?"is-disabled":"",onClick:function(){return C("up",S)},title:"Click here to move up"},Object(r.createElement)(d.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:S===N-1?"is-disabled":"",onClick:function(){return C("down",S)},title:"Click here to move down"},Object(r.createElement)(d.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(b.sb)("offer")),Object(r.createElement)(r.Fragment,null,Se?Object(r.createElement)(de.a,{toolTipText:Object(s.__)("Because your license is expired your upsell offers will not appear to the customer","funnel-builder"),size:"280",textAlign:"left"},Object(r.createElement)(ne.c,{content:Object(r.createElement)("div",{className:"bwf-flex bwf--g4"},Object(s.__)("License Expired","funnel-builder"),Object(r.createElement)(d.a,{icon:"info",size:"12",color:$.DANGER_COLOR})),type:"danger"})):Object(r.createElement)(r.Fragment,null,Object(a.size)(y)>0&&Object.keys(y).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"===e&&(Me("offer",T,T,{title:P,view_link:k,status:1===Number(x),experiment_status:v}),Object(h.k)({},y[e].edit,Re))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+y[e].label_class},y[e].label))})),!Object(a.isEmpty)(v)&&"4"!==v&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Ke&&!Ce?Ve?(ze({step:"offer",parentId:_.id}),Ue(v),Je()):U(!0):q(We)}},Object(r.createElement)(ne.c,{content:(t=v,c="warning"===(n=et(v,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(re.a,{fill:c}),Object(r.createElement)("span",{className:"".concat(void 0!==c?"bwf-mr-4":"")},et(t)))),type:et(v,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(ne.c,{content:Object(s.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))))),Object(r.createElement)("a",{href:Object(b.ab)(I,"offer",_.id,w.id),onClick:function(e){e.preventDefault(),Me("offer",T,T,{title:P,view_link:k,status:1===Number(x),experiment_status:v}),Object(h.k)({page:"bwf",path:Object(b.ab)(I,"offer",_.id,w.id,!1)},"/",{})}},Object(W.decodeEntities)(P))),xe?Object(r.createElement)("div",null):Object(r.createElement)(me,{type:"offer",stats:g}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:null==p?void 0:p.view,className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(d.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(Z.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),Y(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ee({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(W.decodeEntities)(P)),"funnel-builder")))}),Ze()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(v)?pe(!0):ye(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Draft","funnel-builder")))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){Pe?q(Xe):(t(),Te($e($e({},w),{},{type:"offer"}),0,_))}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Duplicate","funnel-builder")),Pe&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){!Ce&&Ke?(Ue(v),Ve?(ze({step:"offer",parentId:_.id}),Je()):U(!0)):q(We)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("A/B Test","funnel-builder")),Ce&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),B({title:P}),Ie($e($e({},w),{},{type:"offer"}),S,$e($e({},_),{},{stepPos:E}))},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Delete","funnel-builder")))))}})))),z&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return U(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(s.__)("Oops it seems old version of Experiments is activated.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel."))),Object(r.createElement)("div",{className:"bwf_clear_30"})),R.status&&Object(r.createElement)(G.a,{isOpen:R.status,onRequestClose:function(){return q({status:!1})},modalContent:R,type:R.type}),Q&&Object(r.createElement)(Ne.a,{pageUrl:null==p?void 0:p.view_link,pageUrlSlug:null==p?void 0:p.post_name,renameTitle:"Step",title:Object(W.decodeEntities)(P),onclose:function(){return Y(!1)},updateDetail:function(e,t){return tt(e,t)},isLoading:V}),je&&Object(r.createElement)(ae.a,{isPublishLoading:ge,onAction:function(){return Ze()},onclose:function(){return ye(!1)}}),fe&&Object(r.createElement)(ce.a,{isPublishLoading:ge,onAction:function(){Ze(!0)},onclose:function(){return pe(!1)}}),Object(r.createElement)(le.a,{className:m()("bwf-admin-modal-squeezy",_e.className),confirmText:_e.confirmText,confirmButtonText:_e.buttonConfirm,cancelButtonText:_e.buttonCancel,onConfirm:_e.onConfirm,isLoading:_e.loading,successMessage:_e.success,errorMessage:_e.error,content:_e.content,onRequestClose:function(){return Ee({status:!1})},modalTitle:_e.modalTitle,isOpen:_e.status,closeIcon:_e.closeIcon}))};function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){return(tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ot=window.wffn.is_ab_experiment,it=window.wffn.is_ab_experiment_support,ut=function(e){return{status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("Increased Conversion Rates","funnel-builder"),Object(s.__)("Greater Return on Ad Spend","funnel-builder"),Object(s.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.T)()+"AB-testing.png",proLink:Object(b.U)([e.replace(" ","+"),"AB_Test","Upgrade","Modal"])}},st={status:!0,title:Object(s.__)("Add Offer","funnel-builder"),proLink:Object(b.U)(["Add","Offer","Upgrade","Modal"])},bt=function(e){return{type:2,status:!0,proLink:Object(b.U)([e.replace(" ","+"),"Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")}},ft=function(e){var t=e.step,n=void 0===t?{}:t,c=n._data,o=void 0===c?{}:c,f=n.tags,p=void 0===f?[]:f,v=n.type,g=n.substeps,w=(void 0===g?{}:g).offer,_=void 0===w?[]:w,E=(n.experiment,n.experiment_status),S=n.stats,k=e.stepPos,N=e.step,C=e.title,P=e.dragHandleController,x=o.title,A=o.view,T=o.status,I=Object(b.G)(),F=j.a.getFunnel(),B=at(Object(r.useState)(!1),2),L=B[0],z=B[1],U=at(Object(r.useState)(p),2),M=U[0],R=U[1],q=at(Object(r.useState)(!1),2),J=q[0],Q=q[1],Y=at(Object(r.useState)(!1),2),K=Y[0],V=Y[1],be=at(Object(r.useState)(!1),2),fe=be[0],pe=be[1],Oe=at(Object(r.useState)(!1),2),je=Oe[0],ye=Oe[1],ve=at(Object(r.useState)(!1),2),ge=ve[0],we=ve[1],he=at(Object(r.useState)({}),2),_e=he[0],Ee=he[1],Se=at(Object(r.useState)({}),2),ke=Se[0],Ce=Se[1],Pe=Object(D.b)(),xe=Pe.isProFeatureLocked,Ae=Pe.isBasicFeatureLocked,Te=Pe.isBasic,Ie=Object(D.b)("ul").isExpired,De=Object(O.a)(),Fe=De.startDuplicateStep,Be=De.startDeleteStep,Le=De.setStepTitle,ze=De.sortSubSteps,Ue=De.setUpdateFunnel,Me=Object(ie.a)().setToggleState,Re=Object(se.a)().setStepHeaderData,qe=Object(oe.a)().setModalData,Ge=Object(y.a)(),Je=Ge.setActiveGroup,$e=Ge.setImportOffer,He=Object(ue.a)().setExperimentStatus,Qe=Object(D.c)().showSnackbar,Ye=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Ke=function(){if(N&&N.hasOwnProperty("id")&&N.id){Le(Object(W.decodeEntities)(x)+Object(s.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(I,"/experiments/").concat(N.id);Object(b.kb)()&&(e="/store-checkout/experiments/".concat(N.id)),Object(h.k)({},e)}},Ve=function(e){we(!0);var t="/funnel-".concat(v,"/save-state/").concat(N.id,"?funnel_id=").concat(I);i()({path:Object(b.y)(t),method:"POST",data:{status:!Number(T)}}).then((function(t){t.success?(Me(!Number(T)),we(!1),ye(!1),pe(!1),function(e,t,n){var r=null==F?void 0:F.steps.map((function(r){if(r.id===N.id){r.experiment_status=n;var c=rt(rt({},r._data),{},{status:e?"1":"0",experiment_status:t?"3":r.experiment_status});return rt(rt({},r),{},{_data:c})}return r}));F.steps=r;var c=JSON.parse(JSON.stringify(F));Ue(c)}(Number(t.step_data.status),e,t.step_data.experiment_status),Ee({}),Qe(Object(s.__)("Changes Saved","funnel-builder"))):(Me(Number(T)),we(!1),ye(!1),pe(!1))})).catch((function(e){console.log(e),Me(T),Qe("Status Updation Failed")}))},We={1:Object(s.__)("A/B Test Draft","funnel-builder"),2:Object(s.__)("A/B Test Running","funnel-builder"),3:Object(s.__)("A/B Test Paused","funnel-builder")},Xe={1:"warning",2:"success",3:"default"},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Xe[e]:We[e]};Object(r.useEffect)((function(){0!==Object(a.size)(_)||"wc_upsells"!==v||"no_offers"in p?Object(a.size)(_)>0&&R(p):R(rt(rt({},M),{},{no_offers:{offerlabel:Object(s.__)("No offers","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[_.length]);var nt,ct,lt,ft=function(e){e.preventDefault(),Je("upsell"),$e({parent_id:parseInt(N.id),parent_title:N._data.title}),Object(h.k)({importType:"step"})},mt=function(e,t){if(V(!0),(e=e.trim())!==x||(null==o?void 0:o.post_name)!==t&&"wc_upsells"!=v){Le(e);var n='{"title":"'.concat(e,'","slug":"').concat("wc_upsells"==v?A.match(/([^\/]*)\/*$/)[1]:t,'"}');i()({path:Object(b.y)("/funnel-".concat(v,"/save-state/").concat(N.id,"?funnel_id=").concat(I)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Q(!1),V(!1),function(e,t,n){var r=F.steps.map((function(r){return r.id===Number(N.id)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));F.steps=r;var c=JSON.parse(JSON.stringify(F));Ue(c)}(e.step_data.title,t,e.step_data.view_link),Qe(Object(s.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Le(x),Qe("Title Updation Failed")}))}else Q(!1),V(!1)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-card-container"},P(),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},"wc_upsells"===v?Object(s.__)("One Click Upsell","funnel-builder"):Object(b.sb)(v)),Object(r.createElement)(r.Fragment,null,"wc_upsells"===v&&Ie&&0===Object(a.size)(_)?Object(r.createElement)(de.a,{toolTipText:Object(s.__)("Because your license is expired your upsell offers will not appear to the customer","funnel-builder"),size:"280",textAlign:"left"},Object(r.createElement)(ne.c,{content:Object(r.createElement)("div",{className:"bwf-flex bwf--g4"},Object(s.__)("License Expired","funnel-builder"),Object(r.createElement)(d.a,{icon:"info",size:"12",color:$.DANGER_COLOR})),type:"danger"})):Object(r.createElement)(r.Fragment,null,Object(a.size)(M)>0&&Object.keys(M).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e||"has_rules"===e?(Re(Object(b.bb)(v),N.id,"",{title:x,view_link:A,status:1===Number(T),experiment_status:E}),Object(h.k)({},M[e].edit,Ye)):"no_offers"===e&&ft(t)}},Object(r.createElement)("div",{className:m()("bwf-st-c-badge-small",M[e].label_class)},M[e].hasOwnProperty("offerlabel")?M[e].offerlabel:M[e].label))})),!Object(a.isEmpty)(E)&&"4"!==E&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){!xe&&ot?it?(He(E),Ke()):z(!0):Ce(ut)}},Object(r.createElement)(ne.c,{content:(nt=E,lt="warning"===(ct=et(E,!0))?"#B68F40":"success"===ct?"#09B29C":"default"===ct?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(re.a,{fill:lt}),Object(r.createElement)("span",{className:"".concat(void 0!==lt?"bwf-mr-4":"")},et(nt)))),type:et(E,!0)})),!(T&&1===parseInt(T))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(ne.c,{content:Object(s.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))))),Object(r.createElement)("a",{href:Object(b.ab)(I,v,N.id),className:"bwf-card-action",onClick:function(e){e.preventDefault(),Re(Object(b.bb)(v),N.id,"",{title:x,view_link:A,status:1===Number(T),experiment_status:E}),Object(h.k)({page:"bwf",path:Object(b.ab)(I,v,N.id,"",!1)},"/",{})}},Object(W.decodeEntities)(x))),"wc_upsells"===v||Te?Object(r.createElement)("div",null):Object(r.createElement)(me,{type:v,stats:S}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:Object(W.decodeEntities)(A),className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(d.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action is-ellipsis-menu"},Object(r.createElement)(Z.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),Q(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Edit","funnel-builder")))),!(T&&1===parseInt(T))&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ee({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(W.decodeEntities)(x)),"funnel-builder")))}),Ve()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(T)&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(E)?pe(!0):ye(!0)}},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Draft","funnel-builder")))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){Ae?Ce(bt(C)):(t(),Fe(N,k+1))}},Object(r.createElement)(X.a,{justify:"space-between"},Object(r.createElement)(X.c,null,Object(s.__)("Duplicate","funnel-builder")),Ae&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),"wc_upsells"!==v&&Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){!xe&&ot?it?(Ke(),He(E)):z(!0):Ce(ut(C))}},Object(r.createElement)(X.a,{justify:"space-between"},Object(r.createElement)(X.c,null,Object(s.__)("A/B Test","funnel-builder")),xe&&Object(r.createElement)(X.c,null,Object(r.createElement)(ne.b,null)))),Object(r.createElement)(ee.a,{isClickable:!0,onInvoke:function(){t(),qe({title:x}),Be(N,k)},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(X.a,{justify:"flex-start"},Object(r.createElement)(X.c,null,Object(s.__)("Delete","funnel-builder")))))}})))),ke.status&&Object(r.createElement)(G.a,{isOpen:ke.status,onRequestClose:function(){return Ce({status:!1})},modalContent:ke,type:ke.type}),L&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(s.__)("Oops it seems old version of Experiments is activated."))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.Button,{variant:"primary",onClick:function(){return z(!1)}},Object(s.__)("OK")))),"wc_upsells"==v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(_)>0&&_.map((function(e,t){return Object(r.createElement)(Ze,{key:t,offer:e,upsellStep:N,upsellPos:k,stepPos:t,total:Object(a.size)(_),view:Object(W.decodeEntities)(A),onSortStart:function(e,t){return function(e,t,n){var r=[];"up"===t?r=ze(e,"offer",n,n-1):"down"===t&&(r=ze(e,"offer",n,n+1)),i()({path:Object(b.y)("/funnels/steps/order/save/".concat(e,"?type=offer")),method:"POST",data:{order:r.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))}(N.id,e,t)}})})),Object(r.createElement)("div",tt({className:"bwf-st-c-sub-st-action-wrap"},H),Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(e){Ie?Ce(st):ft(e)}},Ie&&Object(r.createElement)(d.a,{icon:"king",color:$.NOTICE_YELLOW,size:20}),Object(s.__)("Add Offer","funnel-builder"))))),J&&("wc_upsells"==v?Object(r.createElement)(te.a,{renameTitle:"Edit Details",title:Object(W.decodeEntities)(x),onclose:function(){return Q(!1)},updateTitle:function(e){return mt(e)},isLoading:K}):Object(r.createElement)(Ne.a,{pageUrl:null==o?void 0:o.view_link,pageUrlSlug:null==o?void 0:o.post_name,renameTitle:"Step",title:Object(W.decodeEntities)(x),onclose:function(){return Q(!1)},updateDetail:function(e,t){return mt(e,t)},isLoading:K})),je&&Object(r.createElement)(ae.a,{isPublishLoading:ge,onAction:function(){return Ve()},onclose:function(){return ye(!1)}}),fe&&Object(r.createElement)(ce.a,{isPublishLoading:ge,onAction:function(){Ve(!0)},onclose:function(){return pe(!1)}}),Object(r.createElement)(le.a,{className:m()("bwf-admin-modal-squeezy",_e.className),confirmText:_e.confirmText,confirmButtonText:_e.buttonConfirm,cancelButtonText:_e.buttonCancel,onConfirm:_e.onConfirm,isLoading:_e.loading,successMessage:_e.success,errorMessage:_e.error,content:_e.content,onRequestClose:function(){return Ee({status:!1})},modalTitle:_e.modalTitle,isOpen:_e.status,closeIcon:_e.closeIcon}))};function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=mt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vt=function(e){var t=e.step,n=void 0===t?{}:t,l=n._data,o=void 0===l?{}:l,i=n.tags,f=void 0===i?[]:i,m=(n.experiment,n.substeps),p=(void 0===m?{}:m).wc_order_bump,j=void 0===p?[]:p,y=n.id,v=void 0===y?0:y,g=(n.experiment_status,e.step),w=e.stepPos,_=void 0===w?0:w,E=(e.title,e.isOBFake),S=e.dragHandleController,k=Object(D.b)(),N=k.isProFeatureLocked,C=(k.isExpired,k.isLite),P=(Object(c.useParams)().id,o.title,o.view),x=(o.edit,o.status,Object(oe.a)().setModalData,Object(O.a)()),A=x.startAddStep,T=x.setShowProModal,I=x.setShowProModalText,F=x.setShowAddStepModal,B=jt(Object(r.useState)({}),2),L=B[0],z=B[1],U=jt(Object(r.useState)(f),2),M=U[0],R=U[1];Object(r.useEffect)((function(){C||0!==Object(a.size)(j)||"no_bump"in f||R(pt(pt({},M),{},{no_bump:{label:Object(s.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[j.length]);var q=Object(b.fb)("wc_order_bump");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-card-container"},S(),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(s.__)("Checkout","funnel-builder")),Object(r.createElement)("span",{style:{color:"#353030"}},Object(s.__)("No Checkout Created","funnel-builder"))),Object(r.createElement)("div",null),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("span",{className:"bwf-card-action",style:{minWidth:"110px"}}),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)(u.Button,{isSecondary:!0,className:"bwf-btn-small",onClick:function(){Object(h.k)({importType:"step"}),F(!0)}},Object(s.__)("Create Checkout","funnel-builder"))))),null!==q&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(j)>0&&j.map((function(e,t){return Object(r.createElement)(ke,{key:t,bump:e,checkoutStep:g,checkoutPos:_,stepPos:t,view:Object(W.decodeEntities)(P)})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(e){N?z({bump:!0}):function(e){null!==q&&A(pt(pt({},q),{},{parent_id:parseInt(v),is_substep:!0,title:Object(s.__)("Order Bump","funnel-builder")})),!q&&T(!0),!q&&I(Object(s.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()}(e)}},N&&Object(r.createElement)(d.a,{icon:"king",color:$.NOTICE_YELLOW,size:20}),Object(s.__)("Add Order Bump","funnel-builder"))))),E&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(V,{type:"order_bump",onClick:function(){return T(!0)},modalContent:{title:Object(s.__)("Order Bump","funnel-builder"),content:{benefits:[Object(s.__)("Eye-catching bump styles","funnel-builder"),Object(s.__)("Targeted offers based on cart contents","funnel-builder"),Object(s.__)("Increased product discoverability","funnel-builder")]},image:Object(b.T)()+"order-bump.png",proLink:Object(b.U)(["Order","Bump","Upgrade","Modal"])}}))),L.bump&&Object(r.createElement)(Ce.a,{isOpen:L.bump,onRequestClose:function(){return z({status:!1})}}))},gt=["step","step","provided","isDragging"];function wt(){return(wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ht=Object(q.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-d-icon-drag"},Object(r.createElement)(d.a,{icon:"rearrange",size:"16"}))})),_t=function(e){var t=e.step,n=void 0===t?{}:t,c=n.type,l=n.experiment,o=void 0===l?[]:l,i=e.step,u=e.provided,f=e.isDragging,d=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,gt),p=Object(b.db)(c);if(!i)return null;var O=function(){return Object(r.createElement)(ht,{provided:u})};return Object(r.createElement)("div",wt({className:m()("bwf-st-c-wrap",{"is-dragging":f}),ref:u.innerRef},u.draggableProps),Object(r.createElement)("div",{className:"bwf-st-c"},0<Object(a.size)(o)&&Object(r.createElement)("div",{className:"bwf-ab-tag"},Object(r.createElement)("div",{className:"bwf-ab--text"},Object(s.__)("A/B","funnel-builder"))),function(){switch(c){case"wc_checkout":return Object(r.createElement)(Re,wt({step:i,title:null==p?void 0:p.title},d,{dragHandleController:O}));case"wc_native":return Object(r.createElement)(vt,wt({step:i,title:Object(s.__)("Checkout Page","funnel-builder")},d,{dragHandleController:O}));default:return Object(r.createElement)(ft,wt({step:i,title:null==p?void 0:p.title},d,{dragHandleController:O}))}}()))},Et=Object(q.b)(_t);function St(){return(St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var kt=Object(q.a)((function(e){var t=e.items,n=e.stepPromotions,c=e.provided,a=Object(D.b)().isLite,l=Object(D.b)("ul").isLite,o=!1,i=!1;return Object(r.createElement)("div",St({className:"bwf-f-steps",ref:c.innerRef},c.droppableProps),t.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-st-c-".concat(t)},Object(r.createElement)(Et,{key:"item-".concat(e.id),index:t,step:e,id:e.id,stepPos:t,isOBFake:!(!["wc_checkout","wc_native"].includes(e.type)||"yes"===n.bump)&&!(i||!a||Object(b.fb)("wc_order_bump")||(i=!0,0))}),["wc_checkout","wc_native"].includes(e.type)&&"yes"!==n.upsell&&(!o&&l?(o=!0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(V,{modalContent:{title:Object(s.__)("One Click Upsell Offer","funnel-builder"),content:{benefits:[Object(s.__)("Grab buyer's attention and make post purchase One Click Upsells based on items purchased. Let them accept offers with a single click.","funnel-builder")]},image:Object(b.T)()+"upsell.png",proLink:Object(b.U)(["One","Click","Upsell","Upgrade","Modal"])}}))):""))})))}));function Nt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pt=function(){var e=Object(D.b)().isBasic,t=function(){return Object(r.createElement)("div",{className:"bwf-st-c-wrap bwf-w-full"},Object(r.createElement)("div",{className:"bwf-st-c bwf-flex bwf-w-full",style:{padding:"10px 16px"}},Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(be.a,{h:16,w:16}),Object(r.createElement)("div",null,Object(r.createElement)(be.a,{h:16,w:80}),Object(r.createElement)(be.a,{h:16,w:250,mt:6}))),Object(r.createElement)("div",{className:"bwf-flex bwf--g16",style:{marginRight:150,marginLeft:"auto"}},e?null:Nt(Array(3)).map((function(e,t){return Object(r.createElement)("div",{key:"analytics-placeholder-".concat(t),style:{width:120}},Object(r.createElement)(be.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(be.a,{h:12,w:60,mt:4,ml:"auto",mr:"auto"}))}))),Object(r.createElement)(be.a,{h:30,w:172})))};return Object(r.createElement)("div",{className:"bwf-steps-container"},Object(r.createElement)("div",{className:"bwf-f-steps is-placeholder"},Nt(Array(4)).map((function(e,n){return Object(r.createElement)(r.Fragment,{key:"step-card-".concat(n)},t())}))))},xt=n(297),At=(n(665),n(14));function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e){return function(e){if(Array.isArray(e))return Ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||zt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Mt=function(e){var t=Lt(Object(r.useState)([]),2),n=t[0],c=t[1],l=Lt(Object(r.useState)([]),2),o=l[0],f=l[1],m=Lt(Object(r.useState)([]),2),p=m[0],y=m[1],v=Lt(Object(r.useState)(!1),2),w=v[0],h=v[1],_=Lt(Object(r.useState)(!1),2),E=_[0],S=_[1],k=Lt(Object(r.useState)(!0),2),N=k[0],C=k[1],P=Lt(Object(r.useState)([]),2),x=P[0],A=P[1],T=e.isOpen,I=e.onRequestClose,F=e.funnelID,B=(e.stepsListTypes,Object(D.c)().showSnackbar),L=j.a.getFunnel(),z=(j.a.getFunnelSteps(),Object(O.a)().setUpdateFunnel);Object(r.useEffect)((function(){var e=[];x.map((function(t){[0,"0"].includes(t.status)&&e.push({type:t.type,id:Number(t.id)}),Object(a.size)(t.subStep)&&t.subStep.map((function(n){[0,"0"].includes(n.status)&&e.push({type:n.type,id:Number(n.id),subParentId:Number(t.id)})}))})),y(e)}),[x]);Object(r.useEffect)((function(){if(Object(a.size)(L.steps)){var e=L.steps.map((function(e){var t,n,r,c,l;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(c=r.substeps)||void 0===c||null===(c=c.wc_order_bump)||void 0===c?void 0:c.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(l=r.substeps)||void 0===l||null===(l=l.offer)||void 0===l?void 0:l.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return[0,"0"].includes(e.status)||Object(a.size)(e.subStep)&&Object(a.size)(n)?e:void 0}));A(e)}}),[]);var U=function(e,t){c((function(e){return[].concat(It(e),[t])}));var n="";n="/funnel-".concat(e,"/save-state/").concat(t,"?funnel_id=").concat(F),i()({path:Object(b.y)(n),method:"POST",data:{status:!0}}).then((function(e){var n,r;e.success?(c((function(e){return[e.filter((function(e){return e!==t}))]})),f((function(e){return[].concat(It(e),[t])})),e.step_data.hasOwnProperty("upsell_id")&&(n=e.step_data.upsell_id,r="offer"),e.step_data.hasOwnProperty("checkout_id")&&(n=e.step_data.checkout_id,r="wc_order_bump"),function(e,t,n,r){var c=null==L?void 0:L.steps.map((function(c){if(n&&c.id===Number(n)){var a=c.substeps[r].map((function(e){var n=Ft(Ft({},e._data),{},{status:t.includes(e.id)?"1":e._data.status});return Ft(Ft({},e),{},{_data:n})})),l=Ft(Ft({},c.substeps),{},Bt({},r,a));return Ft(Ft({},c),{},{substeps:l})}if(t.includes(c.id)){var o=Ft(Ft({},c._data),{},{status:e?"1":"0"});return Ft(Ft({},c),{},{_data:o})}return c}));L.steps=c;var a=JSON.parse(JSON.stringify(L));z(a)}(!0,[t],n,r)):(e.message||e.msg)&&B(e.message||e.msg)})).catch((function(e){console.log(e),B(Object(s.__)("Status Updation Failed","funnel-builder"))}))},M=function(){h(!0);var e="/funnels/".concat(F,"/publish-all");i()({path:Object(b.y)(e),method:"POST",data:{steps:JSON.stringify(p)}}).then((function(e){e.status?(Object(a.size)(e.steps)&&p.map((function(e){var t=null==L?void 0:L.steps.map((function(t){if(t.id===e.subParentId){var n=t.substeps["Offer"===e.type?"offer":"wc_order_bump"].map((function(t){var n=Ft(Ft({},t._data),{},{status:Number(e.id)===Number(t.id)?"1":t._data.status});return Ft(Ft({},t),{},{_data:n})})),r=Ft(Ft({},t.substeps),{},Bt({},"Offer"===e.type?"offer":"wc_order_bump",n));return Ft(Ft({},t),{},{substeps:r})}if(Number(e.id)===Number(t.id)){var c=Ft(Ft({},t._data),{},{status:"1"});return Ft(Ft({},t),{},{_data:c})}return t}));L.steps=t;var n=JSON.parse(JSON.stringify(L));z(n)})),h(!1),S(!0)):(e.message||e.msg)&&B(e.message||e.msg)})).catch((function(e){console.log(e),B(Object(s.__)("Status Updation Failed","funnel-builder"))}))};return Object(r.useEffect)((function(){var e=0;x.map((function(t){[0,"0"].includes(t.status)&&(e+=1),t.subStep.map((function(t){[0,"0"].includes(t.status)&&(e+=1)}))})),e&&e<2&&C(!1)}),[x,L]),T&&Object(r.createElement)("div",null,Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-publish-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!0,onRequestClose:function(){return I()}},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(s.__)("Publish Steps","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},!E&&N&&Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return M()}},Object(r.createElement)("span",{style:Ft({},w&&{visibility:"hidden"})},Object(s.__)("Publish All","funnel-builder")),w&&Object(r.createElement)(g.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(s.__)("Close"),onClick:function(){return I()}},Object(r.createElement)(d.a,{icon:"close",height:20,width:20})))),Object(r.createElement)("div",{className:"bwf-info"},Object(s.__)("Following steps need to publish to make accessible to your customers:","funnel-builder")),x.map((function(e,t){var c;return Object(r.createElement)("div",{key:t,className:"bwf-draft-list"},Object(r.createElement)("div",{className:"bwf-title"},Object(W.decodeEntities)(e.title)),Object(r.createElement)(ne.c,{content:"wc_upsells"===e.type?Object(s.__)("One Click Upsell","funnel-builder"):Object(b.sb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary components-button bwf-ripple ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(g.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||o.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(d.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(s.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!o.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return U(e.type,e.id)}},Object(s.__)("Publish","funnel-builder")),Object(a.size)(e.subStep)&&Object(a.size)(null==e||null===(c=e.subStep)||void 0===c?void 0:c.filter((function(e){return[0,"0"].includes(e.status)})))?e.subStep.map((function(e,t){if([0,"0"].includes(e.status))return Object(r.createElement)(r.Fragment,{key:t},Object(r.createElement)("div",{className:"bwf-title bwf-sub-step"},Object(r.createElement)("span",null,Object(W.decodeEntities)(e.title))),Object(r.createElement)(ne.c,{content:Object(b.sb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary bwf-ripple components-button".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(g.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||o.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(d.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(s.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!o.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary bwf-ripple components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return U(e.type,e.id)}},Object(s.__)("Publish","funnel-builder")))})):null)}))))},Rt=n(163),qt=n(89),Gt=(n(666),n(85)),Jt=(n(667),n(288));function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$t(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||Wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){if(e){if("string"==typeof e)return Xt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(e,t):void 0}}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zt={bump:{texts:{heading:Object(s.__)("Maximize Your Checkout Revenue with an Order Bump!","funnel-builder"),description:Object(s.__)("Increase the overall value of your checkout by offering a new products as an order bump.","funnel-builder")},actions:[{label:Object(s.__)("Add Order Bump","funnel-builder"),key:"bump"}],icon:"order-bump",link:"https://funnelkit.com/woocommerce-order-bump/"},upsell:{texts:{heading:Object(s.__)("Offer More with a One-Click Upsell!","funnel-builder"),description:Object(s.__)("Let customers buy more products after they've made their purchase.","funnel-builder")},actions:[{label:Object(s.__)("Add One Click Upsell","funnel-builder"),key:"upsell"}],icon:"upsells",link:"https://funnelkit.com/woocommerce-one-click-upsells-upstroke/"},both:{texts:{heading:Object(s.__)("Maximize Your Revenue with an Order Bump and Upsell!","funnel-builder"),description:Object(s.__)("Increase the overall value of your orders by offering new products as an order bump or upsell offer.","funnel-builder")},actions:[{label:Object(s.__)("Add One Click Upsell","funnel-builder"),key:"upsell"},{label:Object(s.__)("Add Order Bump","funnel-builder"),key:"bump"}],icon:"order-bump"}},en="add_bump_upsell_notice",tn=function(e){var t=e.onRequestClose,n=e.onConfirm,c=(0,j.a.getFunnel)(),l=Vt(Object(r.useState)(null),2),o=l[0],i=l[1],b=Object(a.get)(c,"steps",[]).filter((function(e){return"wc_checkout"===e.type||"wc_native"===e.type})).map((function(e){return{label:"wc_native"===e.type?Object(s.__)("Checkout Page","funnel-builder"):Object(a.get)(e,"_data.title",""),key:e.id}})),f=Vt(Object(r.useState)(1===b.length?Object(a.get)(b,"[0].key",null):null),2),m=f[0],d=f[1];return Object(r.createElement)(u.Modal,{title:Object(s.__)("Create Order Bump","funnel-builder"),onRequestClose:t,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-create-order-bump-modal"},Object(r.createElement)(Jt.b,{label:Object(s.__)("Select Checkout","funnel-builder"),options:b,selected:m,onChange:function(e){o&&i(null),d(e)},className:"bwf-error-border",error:o}),Object(r.createElement)("div",{className:"bwf-flex bwf--justify-end bwf--g8"},Object(r.createElement)(At.a,{onClick:t,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(At.a,{isPrimary:!0,onClick:function(){null!==m?(i(null),n(m)):i(Object(s.__)("Please select a checkout step","funnel-builder"))}},Object(s.__)("Next","funnel-builder"))))},nn=function(e){var t=e.steps,n=t.some((function(e){return"wc_checkout"===e.type||"wc_native"===e.type})),c=t.some((function(e){var t;return"wc_upsells"===e.type&&!Object(a.isEmpty)(null==e||null===(t=e.substeps)||void 0===t?void 0:t.offer)})),l=t.some((function(e){var t;return("wc_checkout"===e.type||"wc_native"===e.type)&&!Object(a.isEmpty)(null==e||null===(t=e.substeps)||void 0===t?void 0:t.wc_order_bump)})),o=n&&!l,i=n&&!c,u=Zt[o&&i?"both":o?"bump":i?"upsell":""]||Zt.both,f=u.texts,m=u.actions,p=u.icon,j=u.link,v=Vt(Object(r.useState)(!1),2),g=v[0],w=v[1],_=Object(y.a)().setActiveGroup,E=Object(O.a)().startAddStep,S=Object(b.fb)("wc_order_bump"),N=Object(J.a)().setClosedNotices,C=(0,Object(k.a)().getClosedNotices)();return C.includes(en)||!o&&!i?null:Object(r.createElement)("div",{className:"bwf-add-bump-upsell-notice bwf-flex bwf--g16 bwf--space-between"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8  bwf--align-start"},Object(r.createElement)("div",{className:"bwf-add-bump-upsell-notice__icon"},Object(r.createElement)(d.a,{icon:p,size:32,color:$.TEXT_COLOR_2})),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-text-bold"},f.heading),Object(r.createElement)("br",null),Object(r.createElement)("span",null,f.description," ",j&&Object(r.createElement)("a",{href:j,className:"bwf-text-bold",target:"_blank",rel:"noopener noreferrer"},Object(s.__)("Learn More","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12"},m.map((function(e,t){return Object(r.createElement)(At.a,{key:t,className:"is-black is-small",onClick:function(){return function(e){if("upsell"===e)return _("upsell"),void Object(h.k)({importType:"step"});w(!0)}(e.key)}},e.label)}))),Object(r.createElement)(At.a,{className:"bwf-no-style-button",onClick:function(){Object(b.qb)(en).then((function(e){var t=[].concat(Ht(C),[en]);N(t)})).catch((function(e){console.log("Error deleting Notice: ",e)}))}},Object(r.createElement)(d.a,{icon:"cross",size:16}))),g&&Object(r.createElement)(tn,{onRequestClose:function(){return w(!1)},onConfirm:function(e){E(Yt(Yt({},S),{},{parent_id:parseInt(e),is_substep:!0,title:"Order Bump"}))}}))};function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var an=function(e){e.funnelId;var t=e.steps,n=rn(Object(r.useState)(!1),2),c=n[0],a=n[1],l=Object(D.c)().showSnackbar,o=Object(O.a)().setFunnelSteps;return Object(r.createElement)(u.Notice,{status:"info",isDismissible:!1,className:"bwf-component-notice bwf-store-checkout-header-error-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g4 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(d.a,{icon:"info",style:{margin:0},color:$.DANGER_COLOR})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(s.__)("Order bumps and One-click upsell offers will not work because your checkout is created using the","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)(" block editor. ","funnel-builder")),Object(s.__)("You need to create the checkout using FunnelKit.","funnel-builder"))),Object(r.createElement)(At.a,{className:"is-danger",onClick:function(){a(!0),i()({path:Object(b.y)("/notifications/wc_block_incompat"),method:"POST"}).then((function(e){if(!e.success)throw e;var n=t.map((function(e){return"wc_native"===e.type&&(e.is_checkout_block=!1),e}));o(n),a(!1)})).catch((function(e){console.log(e),a(!1),l(e.message)}))},isBusy:c,disabled:c,isSmall:!0},Object(s.__)("Switch to Classic Checkout","funnel-builder")))};function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.toStringTag||"@@toStringTag";function a(n,r,c,a){var i=r&&r.prototype instanceof o?r:o,u=Object.create(i.prototype);return un(u,"_invoke",function(n,r,c){var a,o,i,u=0,s=c||[],b=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,o=0,i=e,f.n=n,l}};function m(n,r){for(o=n,i=r,t=0;!b&&u&&!c&&t<s.length;t++){var c,a=s[t],m=f.p,d=a[2];n>3?(c=d===r)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=m&&((c=n<2&&m<a[1])?(o=0,f.v=r,f.n=a[1]):m<d&&(c=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,f.n=d,o=0))}if(c||n>1)return l;throw b=!0,r}return function(c,s,d){if(u>1)throw TypeError("Generator is already running");for(b&&1===s&&m(s,d),o=s,i=d;(t=o<2?e:i)||!b;){a||(o?o<3?(o>1&&(f.n=-1),m(o,i)):f.n=i:f.v=i);try{if(u=2,a){if(o||(c="next"),t=a[c]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+c+"' method"),o=1);a=e}else if((t=(b=f.n<0)?i:n.call(r,f))!==l)break}catch(t){a=e,o=1,i=t}finally{u=1}}return{value:t,done:b}}}(n,c,a),!0),u}var l={};function o(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(un(t={},r,(function(){return this})),t),b=u.prototype=o.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,un(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e}return i.prototype=u,un(b,"constructor",u),un(u,"constructor",i),i.displayName="GeneratorFunction",un(u,c,"GeneratorFunction"),un(b),un(b,c,"Generator"),un(b,r,(function(){return this})),un(b,"toString",(function(){return"[object Generator]"})),(on=function(){return{w:a,m:f}})()}function un(e,t,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}(un=function(e,t,n,r){if(t)c?c(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){un(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}})(e,t,n,r)}function sn(e,t,n,r,c,a,l){try{var o=e[a](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,c)}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ln(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ln(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(D.b)(),n=t.isProFeatureLocked,o=t.isLite,f=Object(c.useParams)(),m=f.id,p=f.builder,v=f.filter,g=e.funnelId,E=void 0===g?m:g,S=location&&location.search?Object(l.parse)(location.search.substring(1)):{},N=Object(Rt.a)().resetFlowData,C=Object(qt.a)().resetCanvasData,P=S.importType,x=Object(O.a)(),A=x.fetch,T=x.sortSteps,F=x.updateFunnelViewLink,B=x.setShowProModal,L=x.setShowAddStepModal,z=x.setIsFunnelEmpty,U=x.setFunnelSteps,q=x.setLoading,G=x.setLanguageData,J=x.fetchAnalytics,$=Object(r.useRef)(!0),H=j.a.getFunnelID,Q=j.a.getFunnel,Y=j.a.getFunnelLoading,K=j.a.getFunnelError,V=j.a.getShowProModal,W=j.a.getShowAddStepModal,X=j.a.getIsFunnelEmpty,Z=j.a.getAnalyticsLoaded,ee=j.a.getIsFunnelLoading,te=H(),ne=Q(),re=ee(),ce=Z(),ae=Y(),le=K(),oe=V(),ie=W(),se=X(),be=(0,Object(k.a)().getStepPromotion)(),fe=Object(ue.a)().setControlTitle,me=dn(Object(r.useState)(!1),2),de=me[0],pe=me[1],Oe=Object(D.c)(),je=Oe.showSnackbar,ye=(Oe.hideSnackbar,dn(Object(r.useState)(!1),2)),ve=ye[0],ge=ye[1],we=dn(Object(r.useState)(!1),2),he=we[0],_e=we[1],Ee=dn(Object(r.useState)(""),2),Se=Ee[0],ke=Ee[1],Ne=dn(Object(r.useState)([]),2),Pe=Ne[0],xe=Ne[1],Ae=dn(Object(r.useState)({}),2),Te=(Ae[0],Ae[1]),Ie=dn(Object(r.useState)([]),2),De=Ie[0],Fe=Ie[1],Be=Object(b.kb)(),Le=Object(y.a)().setActiveGroup,ze=Object(r.useRef)();Object(r.useEffect)((function(){var e=JSON.stringify(null==ne?void 0:ne.steps),t=ze.current;null!=ne&&ne.steps&&t&&e!==t&&G({isLoading:!0}),ze.current=e}),[null==ne?void 0:ne.steps]),Object(r.useEffect)((function(){(parseInt(te)!==parseInt(E)||Object(a.isEmpty)(ne))&&(q(!0),A(parseInt(E)))}),[]),Object(r.useEffect)((function(){n||Object(a.isEmpty)(null==ne?void 0:ne.steps)||ce||re||J(te)}),[re]),Object(r.useEffect)((function(){fe(null),ge(!1)}),[ae]);var Ue=function(e,t){return e.filter((function(e){return e.type===t}))},Me=function(){var e="";if(!Be&&!ae&&!de&&ne&&ne.steps&&ne.steps.length&&Array.isArray(ne.steps)){var t=Object(a.size)(Ue(ne.steps,"wc_checkout")),n=Ue(ne.steps,"wc_thankyou"),r=Ue(ne.steps,"wc_upsells");t?t&&(function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_upsells"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(ne.steps)||function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_thankyou"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(ne.steps)?(Object(a.size)(n)&&Object(a.size)(r)?e="".concat(Object(s.__)("Make sure that your <strong>Thank You</strong> step and <strong>One-Click Upsell offers</strong> step are placed below the <strong>checkout</strong> step.","funnel-builder")):Object(a.size)(n)?e="".concat(Object(s.__)("Make sure that your <strong>Thank You</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder")):Object(a.size)(r)&&(e="".concat(Object(s.__)("Make sure that your <strong>One-Click Upsell offers</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder"))),ke(e)):ke("")):function(e){var t=Ue(e,"wc_thankyou"),n=Ue(e,"wc_upsells"),r="";Object(a.size)(t)&&Object(a.size)(n)?r="".concat(Object(s.__)("To trigger <strong>Thank You</strong> and <strong>One Click Upsell offers</strong> steps, you need to create a <strong>Checkout step</strong>.","funnel-builder")):Object(a.size)(t)&&!Object(a.size)(n)?r="".concat(Object(s.__)("To trigger <strong>Thank You</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder")):!Object(a.size)(t)&&Object(a.size)(n)&&(r="".concat(Object(s.__)("To trigger <strong>One Click Upsell offers</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder"))),ke(r)}(ne.steps)}};Object(r.useEffect)((function(){"step"!==P&&Me()}),[ne,de,P]),Object(r.useEffect)((function(){return function(){se&&z(!1)}}),[]),Object(r.useEffect)((function(){P&&!Be&&(v?Le(v):"funnel"!==P||p?"step"===P&&!p&&$.current&&Le("wc_checkout"):Le("landing")),$.current&&($.current=!1)}),[P]);Object(r.useEffect)((function(){if(Object(a.size)(ne)){var e,t=null==ne||null===(e=ne.steps)||void 0===e?void 0:e.map((function(e){var t,n,r,c,l;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(c=r.substeps)||void 0===c||null===(c=c.wc_order_bump)||void 0===c?void 0:c.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(l=r.substeps)||void 0===l||null===(l=l.offer)||void 0===l?void 0:l.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return Object(a.size)(e.subStep)&&Object(a.size)(n)?e.subStep=n:[0,"0"].includes(e.status)?(e.subStep=[],e):void 0})),n=[];t.map((function(e){if("wc_checkout"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_checkout"),"wc_upsells"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_upsells"),"wc_checkout"===e.type&&Object(a.size)(e.subStep)){var t,r=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(a.size)(r)).fill("bump").forEach((function(){n.push("bump")}))}if("wc_upsells"===e.type&&Object(a.size)(e.subStep)){var c,l=null==e||null===(c=e.subStep)||void 0===c?void 0:c.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(a.size)(l)).fill("offer").forEach((function(){n.push("offer")}))}["wc_checkout","wc_upsells"].includes(e.type)||Object(a.size)(e.subStep)||n.push(e.type)}));var r=n.reduce((function(e,t){return fn(fn({},e),{},mn({},t,(e[t]||0)+1))}),{});Fe(n),Te(r),xe(t),N(),C(),he||U(null==ne?void 0:ne.steps)}}),[ne]);var Re=function(){var e,t=(e=on().m((function e(t){var n,r,c;return on().w((function(e){for(;;)switch(e.n){case 0:if(n=t.oldIndex,r=t.newIndex,n!==r){e.n=1;break}return e.a(2);case 1:return c=T(n,r),pe(!0),e.p=2,e.n=3,i()({path:Object(b.y)("/funnels/".concat(E)),method:"PUT",data:{steps:JSON.stringify(c.map((function(e){return{id:e.id,type:e.type}})))}});case 3:Object(b.kb)()||F(c.length>0?c[0]._data.view:""),je(Object(s.__)("Steps Updated","funnel-builder")),setTimeout((function(){return pe(!1)}),2e3),e.n=5;break;case 4:e.p=4,e.v,T(r,n),Object(b.kb)()||F(c.length>0?c[0]._data.view:""),je(Object(s.__)("Steps Updation Failed","funnel-builder")),setTimeout((function(){return pe(!1)}),2e3);case 5:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){sn(a,r,c,l,o,"next",e)}function o(e){sn(a,r,c,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(P&&!Be)return Object(r.createElement)(r.Fragment,null,"funnel"===P?Object(r.createElement)(_.default,{onImportComplete:function(){A(parseInt(E)),delete S.importType,delete S.group,Object(h.k)({},"/funnels/".concat(E),S)}}):Object(r.createElement)(w.a,{onImportComplete:function(){A(parseInt(E)),delete S.importType,delete S.group,Object(h.k)({},"/funnels/".concat(E),S)}}));if(!ve&&!ae&&!se&&le)return Object(r.createElement)(Gt.a,{errorMessage:le.hasOwnProperty("message")?le.message:Object(s.__)("Unable to load Funnel Steps","funnel-builder")});var qe=[{type:"icon",data:{content:Object(r.createElement)(d.a,{icon:"zero-step-alt",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(s.__)("Start building your funnel","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(s.__)("Add a new step or pick a pre-built funnel","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(s.__)("Add New Step","funnel-builder"),proCheck:!1,onClick:function(){Object(h.k)({importType:"step"}),Le("landing"),Be&&L(!0)}},{text:Object(s.__)("View Funnels","funnel-builder"),proCheck:!1,props:{isPrimary:!1,isSecondary:!0},onClick:function(){Be?(L(!0),Object(h.k)({importType:"wc_checkout"})):Object(h.k)({importType:"funnel"})}}]}}];if(!(ne&&ne.hasOwnProperty("steps")&&Object(a.isArray)(ne.steps)&&0!==Object(a.size)(ne.steps)||ae||ve))return Object(r.createElement)(xt.a,{data:qe});return Object(r.createElement)(r.Fragment,null,ve||ae?Object(r.createElement)(Pt,null):Object(r.createElement)(r.Fragment,null,function(){var e=null;if(Object(b.kb)()&&Object(a.some)(ne.steps,{type:"wc_native"}))if(Object(a.some)(ne.steps,(function(e){return"wc_native"===e.type&&e.is_checkout_block}))){var t=Object(a.some)(ne.steps,{type:"wc_upsells"}),n=Object(a.some)(ne.steps,(function(e){var t;return"wc_native"===e.type&&(null==e||null===(t=e.substeps)||void 0===t?void 0:t.wc_order_bump)}));(t||n)&&(e=Object(r.createElement)(an,{funnelId:E,steps:ne.steps}))}else e=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.Notice,{status:"warning",isDismissible:!1,className:"bwf-component-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(d.a,{icon:"shield",style:{margin:0}})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(s.__)("You are using the default WooCommerce checkout page. Order bumps, upsell & thank you pages will work with the default checkout page. However, we recommend adding an optimized checkout page from FunnelKit.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_clear_20"}));return e}(),Object(r.createElement)("div",{className:"bwf-steps-container"},!o&&Object(r.createElement)(nn,{steps:ne.steps}),Object(a.size)(Se)?Object(r.createElement)("div",{className:"bwf-publish-container bwf-no-action"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)(d.a,{icon:"info",size:16}),Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:Se}}))):null,Object(r.createElement)(kt,{items:ne.steps,onSortEnd:Re,helperClass:"bwf-steps-drag__helper",stepPromotions:be}))),Object(r.createElement)(M,{funnelId:E}),Object(r.createElement)(R.a,{funnelId:E}),oe&&Object(r.createElement)(Ce.a,{isOpen:oe,onRequestClose:function(){return B(!1)}}),Object(r.createElement)(I,{query:S,isOpen:ie,setModalOpenState:function(e){L(e)},hasCheckoutStep:ne&&ne.steps&&Object(a.isArray)(ne.steps)&&ne.steps.some((function(e){return"wc_checkout"===e.type})),funnelId:E}),he&&Object(r.createElement)(Mt,{isOpen:he,stepsList:Pe,funnelID:E,stepsListTypes:De,onRequestClose:function(){return _e(!1)}}))}},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(0),c=n(2),a=n(6),l=n.n(a),o=n(43),i=n(8),u=(n(4),n(1)),s=n(45);n(319);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t=e.label,n=void 0===t?"":t,a=e.id,f=void 0===a?"":a,m=e.value,d=e.onChange,p=void 0===d?c.noop:d,O=e.className,j=e.style,y=void 0===j?{}:j,v=e.isHover,g=e.hoverVal,w=void 0===g?"":g,h="inspector-color-".concat(Object(o.useInstanceId)(i.ColorPicker)),_=b(Object(r.useState)(!1),2),E=_[0],S=_[1],k=b(Object(r.useState)(),2),N=k[0],C=k[1],P=b(Object(r.useState)(0),2),x=P[0],A=P[1],T=v?Object(c.isArray)(m)?m:[m,w]:m,I=function(e){if(v){var t=T;return t[x]=e.hex,void p(t,{id:f})}p(e.hex,{id:f})},D=v?T[x]:T;return Object(r.createElement)("div",{className:l()("components-color-field",O),style:y},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:h},n),v&&Object(r.createElement)(i.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(i.Button,{className:l()("is-secondary-gray is-small",{"is-selected":0===x}),onClick:function(){return A(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(i.Button,{className:l()("is-secondary-gray is-small",{"is-selected":1===x}),onClick:function(){return A(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(i.ColorIndicator,{colorValue:D,ref:C,className:l()({"is-empty":Object(c.isEmpty)(D)})}),Object(r.createElement)("span",{className:"indicator-text"},D||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:N},Object(r.createElement)(i.ColorPicker,{color:D,onChangeComplete:I}),Object(r.createElement)(i.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},297:function(e,t,n){"use strict";var r=n(0),c=n(6),a=n.n(c),l=n(2),o=n(8),i=n(55),u=(n(304),n(5));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,c=e.className,f=e.center,m=void 0!==f&&f,d=e.isDismissive,p=void 0!==d&&d,O=e.onDismisal,j=void 0===O?function(){}:O,y=e.isProFeatureLocked;if(Object(l.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",c,{"bwf-block-t-center":m})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return j()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(i.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(i.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(i.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(i.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),y&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(i.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(o.Button,b({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:a()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&y&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},299:function(e,t,n){"use strict";var r=n(0),c=n(1),a=n(60),l=n(2),o=n(8);n(6),n(310);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.value,n=void 0===t?"":t,o=e.onChange,i=e.keyid,u=e.openMergeTagModal,b=e.customSettings,m=void 0===b?{}:b,d=e.toolbar,p=e.quicktags,O=void 0!==p&&p,j=Object(r.useRef)(!1),y=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(j.current){var e=window.tinymce.get("editor-bwf"+i);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),y.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,c=["lists","link"];Object(l.isEmpty)(r)||(c=[].concat(f(Object(l.isArray)(r)?r:r.split(",")),f(c))),wp.editor.initialize("editor-bwf"+i,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:d||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:f(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+i,plugins:c},m),quicktags:!!O&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(l.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,o(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){a.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==a.BACKSPACE&&t.keyCode!==a.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===a.F10&&t.stopPropagation()})),u&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(c.__)("Merge Tags","funnel-builder"),tooltip:Object(c.__)("Merge Tags","funnel-builder"),onclick:function(){u(!0)}}),e.on("init",(function(){null==e||e.setContent(y.current),n!==y.current&&o(y.current)}))}function r(){"complete"===document.readyState&&e()}return j.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+i)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+i,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){o(e.target.value)},onBlur:function(e){o(e.target.value)}}))};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,c=p(Object(r.useState)("visual"),2),a=c[0],l=(c[1],p(Object(r.useState)(),2)),i=l[0],u=l[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===a&&Object(r.createElement)(d,e),n&&"text"==a&&Object(r.createElement)(o.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:i,onChange:function(t){null!=e&&e.onChange(t)}}))))}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return f}));var r=n(0),c=n(292);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=function(e){return function(t){return Object(r.createElement)(c.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var c=Array.from(t.items),a=l(c.splice(r.index,1),1)[0];c.splice(n.index,0,a),t.onSortEnd&&t.onSortEnd({oldIndex:r.index,newIndex:n.index,items:c})}}},Object(r.createElement)(c.c,{droppableId:"droppable"},(function(n){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(e,a({},n.droppableProps,t,{provided:n})),n.placeholder)})))}},u=["id","index"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var b=function(e){return function(t){var n=t.id,a=t.index,l=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(t,u);return Object(r.createElement)(c.b,{draggableId:n.toString(),index:a,key:n},(function(t,n){return Object(r.createElement)(e,s({index:a,provided:t},l,{isDragging:n.isDragging}))}))}},f=function(e){return function(t){var n;return Object(r.createElement)("div",null===(n=t.provided)||void 0===n?void 0:n.dragHandleProps,Object(r.createElement)(e,t))}}},304:function(e,t,n){},310:function(e,t,n){},319:function(e,t,n){},328:function(e,t,n){"use strict";var r=n(8),c=n(0),a=n(6),l=n.n(a),o=n(302),i=n(82),u=n(288),s=n(2),b=n(339),f=["ajax_cb","options"];function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=n(299),j=["value","onChange","id","label","className"];function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var v=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,a=e.id,o=e.label,i=e.className,u=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,j);function s(e){r(e,a)}return Object(c.createElement)("div",{className:l()("components-richeditor",i)},o&&Object(c.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:a},o),Object(c.createElement)(O.a,y({content:n,value:n,setContent:s,onChange:s,keyid:a},u)))},g=n(5),w=function(e){var t=e.label,n=e.copy_text;return Object(c.createElement)("div",{className:l()("components-copier")},t&&Object(c.createElement)("label",{className:"components-label"},t),n&&Object(c.createElement)("div",{className:"bwf-display-flex"},Object(c.createElement)("span",{className:"bwf-copier-text"},n," "),Object(c.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(c.createElement)(g.a,{icon:"duplicate",size:20}),"Copy")))},h=n(291),_=n(295),E=n(1),S=(n(334),n(4)),k=n(289);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var n=e.split(" ");return T(T(T(T({},t.attrTop,Object(s.isEmpty)(n[0])?"0":n[0]),t.attrRight,Object(s.isEmpty)(n[1])?"0":n[1]),t.attrBottom,Object(s.isEmpty)(n[2])?"0":n[2]),t.attrLeft,Object(s.isEmpty)(n[3])?"0":n[3])}return T(T(T(T({},t.attrTop,"0"),t.attrRight,"0"),t.attrBottom,"0"),t.attrLeft,"0")},D={label:Object(E.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(E.__)("Top","funnel-builder"),labelRight:Object(E.__)("Right","funnel-builder"),labelBottom:Object(E.__)("Bottom","funnel-builder"),labelLeft:Object(E.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},F=Object(k.a)((function(e){var t=e.value,n=void 0===t?{}:t,a=e.label,o=e.type,i=e.onChange,u=void 0===i?s.noop:i,b=(e.defaultSync,I(n,e)),f="",m=x(Object(c.useState)(!Object(S.k)(Object.values(b))),2),d=m[0],p=m[1],O=x(Object(c.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,T(T(T(T({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),2),j=O[0],y=O[1];f=j&&j[e.attrUnit]?j[e.attrUnit]:"px",Object(c.useEffect)((function(){y(P(P({},j),I(n,e)))}),[n]),Object(c.useEffect)((function(){y(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,T(T(T(T({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),f=j&&j[e.attrUnit]?j[e.attrUnit]:"px"}),[]);var v=function(t,r){var c=t.target.value;if(d)!function(t){"padding"===o&&(t=t.toString().replace(/-/g,""));var r=P({},j);if(r[e.attrTop]=t,r[e.attrRight]=t,r[e.attrBottom]=t,r[e.attrLeft]=t,Object(s.isString)(n)){var c="".concat(r[e.attrTop]," ").concat(r[e.attrRight]," ").concat(r[e.attrBottom]," ").concat(r[e.attrLeft]);u(c)}else u(r)}(c);else{"padding"===o&&(c=c.toString().replace(/-/g,""));var a=P({},j);if(a[r]=c,Object(s.isString)(n)){var l="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);u(l)}else u(a)}};return Object(c.createElement)("div",{className:"bwf-dimensions-control-component"},a&&Object(c.createElement)("label",{className:"components-base-control__label"},a),Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(c.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return v(t,e.attrTop)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:j&&j[e.attrTop],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":o}),Object(c.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return v(t,e.attrRight)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:j&&j[e.attrRight],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":o}),Object(c.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return v(t,e.attrBottom)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:j&&j[e.attrBottom],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":o}),Object(c.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return v(t,e.attrLeft)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),a),value:j&&j[e.attrLeft],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":o}),Object(c.createElement)(r.Button,{className:l()("components-bwf-dimensions-control_reset",{"is-lock":d}),label:Object(E.__)("Reset","funnel-builder"),onClick:function(){return p((function(e){return!e}))},isSmall:!0},Object(c.createElement)(g.a,{icon:d?"lock":"unlock",size:"16"}))),Object(c.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(c.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(c.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(c.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(c.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(c.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),D),B=n(43);n(335);function L(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U=[{id:"h-offset",selectindex:0,label:Object(E.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(E.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(E.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(E.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(E.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(E.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],M=function(e){var t=e.typography,n=e.setTypography,r=e.settingOptions,a=e.label,l=Object(B.useInstanceId)(M,"bwf-field-item");return Object(c.createElement)(c.Fragment,null,Object(c.createElement)("div",{className:"bwf-box-shadow-control-component ",id:l},a&&Object(c.createElement)("label",{className:"components-base-control__label"},a),Object(c.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},r.map((function(e){return e.type?"color"===e.type?"":void 0:Object(c.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(c.createElement)("input",{type:"number",value:t[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(r){var c=r.target.value;c=e.hasOwnProperty("allownegative")&&e.allownegative?r.target.value:c<0?0:c;var a=L(t);a[e.selectindex]=c,n(a)}}),Object(c.createElement)("label",{htmlFor:e.id},e.label))})))),Object(c.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"}," ",Object(c.createElement)("label",{className:"components-base-control__label"},Object(E.__)("Shadow Color","funnel-builder")),Object(c.createElement)(_.a,{value:t[4],onChange:function(e){var r=L(t);r[4]=e,n(r)}})))},R=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,a=n.h_offset,l=void 0===a?"":a,o=n.v_offset,i=void 0===o?"":o,u=n.blur,s=void 0===u?"":u,b=n.spread,f=void 0===b?"":b,m=n.color,d=void 0===m?"":m,p=n.inset,O=[l,i,s,f,d,void 0===p?"":p];return Object(c.createElement)(c.Fragment,null,Object(c.createElement)(M,{typography:O,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:U,label:r}))};n(336);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.value,n=e.onChange,a=e.label,l=e.defaultCustomValue,o=G(Object(c.useState)(""),2),i=o[0],b=o[1],f=G(Object(c.useState)(""),2),m=f[0],d=f[1];return Object(c.useEffect)((function(){Object(s.isEmpty)(m)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(d("auto"),b("100%")):(d("custom"),b(t)))}),[t]),Object(c.createElement)(c.Fragment,null,a&&Object(c.createElement)("label",{className:"components-base-control__label"},a),Object(c.createElement)("div",{className:"bwf-width-control"},Object(c.createElement)(r.TextControl,q({value:i,onChange:function(e){n(e),b(e)},disabled:"auto"===m},"custom"===m&&{type:"number",min:"0"})),Object(c.createElement)(u.a,{options:[{key:"auto",label:Object(E.__)("Auto","funnel-builder")},{key:"custom",label:Object(E.__)("Custom","funnel-builder")}],selected:m,onChange:function(e){d(e),"auto"===e?(n(""),b("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?l:t),b(l))}})))},H=n(63),Q=["label","tooltip"];function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var Z={checkbox:i.a,radio:h.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:o.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,a=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,f),l=d(Object(c.useState)(r),2),o=l[0],i=l[1],u=d(Object(c.useState)(!1),2),p=u[0],O=u[1];Object(c.useEffect)((function(){Object(s.isEmpty)(o)&&j()}),[o]);var j=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),i(t),O(!0)}})}))};return Object(c.createElement)(c.Fragment,null,p?Object(c.createElement)(b.a,m({options:o},a)):Object(c.createElement)("div",{className:"setting-form-field"},Object(c.createElement)("div",{className:"is-placeholder long"})))},richeditor:v,richtext:v,copier:w,color:_.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,a=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,Q);return Object(c.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(c.createElement)("div",{className:"bwf-flex bwf--g4"},Object(c.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(c.createElement)(H.a,{toolTipText:n,size:280,position:"bottom right"},Object(c.createElement)(g.a,{icon:"info",size:16}))),Object(c.createElement)(r.ToggleControl,X({},a,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":F,"box-shadow":R,"bwf-label":function(e){var t=e.label,n=e.class;return Object(c.createElement)("span",{className:l()("bwf_label",n)},t)},width:$};t.a=function(e){var t=e.input,n=e.formProps,a=e.values,o=e.customMapField,i=void 0===o?{}:o,u=V(V({},Z),i),b=u.text;if(t.type.toLowerCase()in u&&(b=u[t.type.toLowerCase()]),t.ajax_cb&&(b=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(a)){var f=a[t.id];if(Object(s.isEmpty)(f))a[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof f[0]){var m=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&f.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},m.push(t)}else if("string"==typeof e.value.id&&f.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},m.push(n)}})),a[t.id]=m}}var d,p;return Object(c.createElement)("div",{className:l()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(c.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(c.createElement)(b,V(V({label:t.label},(d=t,p=Object.assign({},d.props),d.type.toLowerCase()in u||(p.type=d.type.toLowerCase()),p.placeholder=d.placeholder,p.options=d.options,d.checkboxlabel&&(p.checkboxlabel=d.checkboxlabel),d.multiple&&(p.multiple=d.multiple),d.ajax_cb&&(p.ajax_cb=d.ajax_cb),"copier"===d.type&&(p=d),"width"===d.type&&(p=d),"color"===d.type&&(p=d,d.isHover&&d.hoverKey&&(p.hoverVal=a[d.hoverKey])),"richeditor"!==d.type&&"richtext"!==d.type&&"textarea"!==d.type||(p=d),"number"===d.type&&(p.min=d.min,p.max=d.max),"select"===d.type&&(p.excludeSelectedOptions=!1,p.options&&(p.options=p.options.map((function(e){return"object"!==Y(e.value)&&(e.key="object"!==Y(e.value)?e.value:e.key,e.value={id:e.value}),e}))),d.multiple&&(p.excludeSelectedOptions=!0,p.inlineTags=!0)),"richeditor"===d.type&&(p.id=d.id),"bwf-toggle"===d.type&&(p.tooltip=d.tooltip),"input"!==d.type&&"text"!==d.type&&"textarea"!==d.type||(p.placeholder=Object(E.__)("Type here…","funnel-builder")),"text"===d.type&&d.disabled&&(p.disabled=d.disabled),"toggle"===d.type&&(p.className="bwf-tooglecontrol-advance",p.tooltip=d.tooltip,p.label=d.label),p.keyid=d.key,p)),n)),t.hint&&Object(c.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},350:function(e,t,n){"use strict";var r=n(0),c=n(126),a=n(2),l=n(1),o=n(376),i=n(298),u=n(81),s=n(312);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(i.a)(),n=t.getTemplates,b=t.getBuilders,m=t.getDefaultBuilder,d=t.templateLoading,O=t.getActiveBuilder,j=t.getActiveGroup,y=t.getCurrentTemplate,v=t.getActiveStep,g=t.getActiveSubFilter,w=e.onImportComplete,h=e.isStoreCheckout,_=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,k=e.stepId,N=e.funnelId,C=Object(u.a)(),P=C.setActiveGroup,x=(C.setActiveSubFilter,C.setCurrentTemplate),A=p(p({wc_checkout:Object(l.__)("Checkout","funnel-builder")},!h&&{landing:Object(l.__)("Sales","funnel-builder")}),{},{upsell:Object(l.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(l.__)("Thank You","funnel-builder")},!h&&{optin:Object(l.__)("Optin","funnel-builder"),optin_ty:Object(l.__)("Optin Confirmation","funnel-builder")}),T=Object(c.useParams)(),I=T.id,D=T.filter,F=T.builder,B=T.templateId,L=f(Object(r.useState)(!1),2),z=L[0],U=L[1],M=n();Object(r.useEffect)((function(){return F&&(P(D),x({id:B})),function(){P("funnel")}}),[]);var R=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(a.isEmpty)(M)&&!z&&F){var e=M[D][F][B];x({id:B,template:e}),U(!0)}}),[M]);var q=b(),G=m(),J=O(),$=d(),H=j(),Q=y(),Y=(v(),g()),K=function(){var e=G;return Object(a.isEmpty)(J)||(e=J),q&&q[H]&&!q[H][e]&&(e=q[H][G]?G:"elementor"),e},V=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&Y&&J?M[t][J][e].group_type[n||Y]:e},W=function(e){return"wc_checkout"===H?Y===e.no_steps:"optin"!==H||e.group.includes(Y)},X=function(e,t,n){var r="";return"landing"===H?r="sp":"optin"===H?r="op":"optin_ty"===H?r="op-confirmed":"wc_checkout"===H?r="checkouts":"upsell"===H?r="offer":"wc_thankyou"===H&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===H&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Z=h?"/store-checkout":0===I?"/templates":"/funnels/".concat(I);return Object(r.createElement)(o.a,{filters:s.e,templates:M,activeBuilder:K(),templateCards:function(){if(Object(a.isEmpty)(M)||Object(a.isEmpty)([H]))return{};var e=K(),t={};return M[H]&&M[H][e]&&(t=M[H][e]),t}(),editors:q,defaultBuilder:G,isTemplateLoading:$,activeTemplateGroup:H,templateGroup:A,previewData:function(){if(Object(a.isEmpty)(M)||"funnel"===H)return{};var e={},t=[],n=[];try{var r=K();for(var c in t=[],M[H][r]){var l=M[H][r][c];if(!l.build_from_scratch&&W(l)){var o={};if(o.id=c,o.funnel=l.group_type?l.group_type[Object.keys(l.group_type)[0]]:c,o.slug=c,o.name=l.name,o.thumbnail=l.thumbnail,o.template=null==Q?void 0:Q.id,o.pro=l.pro,o.group_type=l.group_type,o.type=H,o.preview=null==l?void 0:l.prevslug,t.push(o),l.group_type)Object.values(l.group_type).forEach((function(e){var t=M[H][r][e];n.push({id:null==t?void 0:t.prevslug,preview:X(0,t,r)})}));else n.push({id:null==l?void 0:l.prevslug,preview:X(0,l,r)})}}var i=M[H][r][V(null==Q?void 0:Q.id,H)];e.activeTemplate={thumbnail:V(null==Q?void 0:Q.id,H),preview:X(null==Q||Q.id,i,r),slug:V(null==Q?void 0:Q.id,H),name:null!=Q&&Q.id?M[H][r][null==Q?void 0:Q.id].name:"",pro:null!=Q&&Q.id?M[H][r][null==Q?void 0:Q.id].pro:"",tempPro:null!=Q&&Q.id?M[H][r][V(null==Q?void 0:Q.id,H,!("wc_checkout"!==H&&"optin"!==H||!R(Q.template))&&R(Q.template))].pro:"",group:H,filters:!!i.group_type&&Object.keys(i.group_type),type:H,funnelGroup:[H],prevId:i.prevslug},e.thumbnails=t,e.previews=n}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:k&&N?N:h&&_?_:I,onImportComplete:w,templateFilterCheck:function(e,t){return"wc_checkout"===H?t===e.no_steps:"optin"!==H||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:Y,showDefaultEditorNotice:!1,isStoreCheckout:h,parentRoute:Z,showTemplatesNav:!(k||h&&0===I),urlDependency:S,stepId:k,importApiPrefix:h?"store-checkout":"funnels"})}},366:function(e,t,n){"use strict";var r=n(0),c=n(2),a=n(1),l=n(8),o=n(406),i=n(14),u=n(291),s=n(59),b=n(20);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,m=e.onRequestClose,d=e.onCreationScreen,p=e.creationSuccess,O=e.clearAndCloseEverything,j=e.isBusy,y=e.errors,v=Object(b.b)(),g=v.isProFeatureLocked,w=v.isBasic,h=Object(b.b)("ck").isProFeatureLocked,_=w&&"wc_checkout"===(null==t?void 0:t.type)?h:g,E=f(Object(r.useState)(""),2),S=E[0],k=E[1],N=f(Object(r.useState)(""),2),C=N[0],P=N[1],x=f(Object(r.useState)(null),2),A=x[0],T=x[1],I=f(Object(r.useState)(null!=y?y:{}),2),D=I[0],F=I[1],B=f(Object(r.useState)("new"),2),L=B[0],z=B[1],U=f(Object(r.useState)(!1),2),M=U[0],R=U[1];Object(r.useEffect)((function(){F(y)}),[y]),Object(r.useEffect)((function(){var e;P(null==A||null===(e=A.step)||void 0===e?void 0:e.name),"new"===L&&Object(c.isEmpty)(S.trim())||"existing"===L&&Object(c.isEmpty)(C)?R(!0):R(!1)}),[L,A,S,C]);var q=function(){if(!M){var t=e.errors;A&&A.copyFrom&&!A.step&&(t.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(c.size)(t)?n({copyFrom:A&&A.hasOwnProperty("step")?A.step:null,title:"existing"===L?"".concat(C," Copy"):S}):F(t)}};return Object(r.createElement)(r.Fragment,null,D&&Object(c.size)(D)>0&&Object(r.createElement)(s.a,{status:"error",isDismissible:!0,onRemove:function(){return F({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(D).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},D[e])})))),j||!d||p?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){q(),e.preventDefault()}},Object(r.createElement)(u.a,{options:[{value:"new",label:Object(a.__)("Create New","funnel-builder")},{value:"existing",label:Object(a.__)("Clone Existing","funnel-builder"),isPro:_}],selected:L,onChange:function(e){z(e)},className:"bwf-add-bump_radio-items"}),"new"===L?Object(r.createElement)(l.TextControl,{label:Object(a.__)("Name","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return k(e)}}):null,"existing"===L?Object(r.createElement)(o.a,{step:t,onStepSelected:function(e){return T(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(i.a,{className:"bwf-modal-cancel-btn",onClick:m},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(i.a,{isPrimary:!0,onClick:q,disabled:M,isBusy:j,className:M?"bwf-no-ripple":""},Object(a.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(a.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(i.a,{isPrimary:!0,onClick:function(){m(),O()}},Object(a.__)("OK","funnel-builder")))))}},367:function(e,t,n){"use strict";var r=n(0),c=n(8),a=n(1),l=n(4),o=n(6),i=n.n(o),u=n(5),s=n(10),b=n.n(s),f=n(393),m=n(86);function d(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,o=p(Object(r.useState)({default_css:"",skin_all:{}}),2),s=o[0],O=o[1],j=p(Object(r.useState)(!0),2),y=j[0],v=j[1];return Object(r.useEffect)((function(){b()({path:Object(l.y)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&O({skin_all:e.skin_all,default_css:e.default_css}),v(!1)})).catch((function(e){v(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(c.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(a.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(m.a,{isPrimary:!0,proLink:Object(l.U)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(u.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:i()("bwf-ob-pro-modal-content",{"is-placeholder":y}),style:{paddingTop:"1px"}},y?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},d(new Array(8)).map((function(e,t){return Object(r.createElement)(f.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,s.default_css),Object.keys(s.skin_all).map((function(e){var t=s.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},393:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var r=n(0),c=n(328),a=n(4),l=n(2),o=n(433),i=n(6),u=n.n(i),s={image:o.a},b=function(e,t,n,a){return e.map((function(e,o){return"richeditor"===e.type&&(e.openMergeTagModal=a,e.id="richeditor-".concat(o),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:o},(Object(l.isEmpty)(e.toggler)||f(t,e.toggler,e))&&Object(r.createElement)(c.a,{input:e,formProps:n(e.key),values:t,customMapField:s}))}))},f=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var c=0;c<r.length;c++)if(t.value.indexOf(r[c])>-1){n=!0;break}}else Object(a.z)(r)==Object(a.z)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},m=function(e,t){if(e.selectors&&e.stylekey&&!Object(l.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,c="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(c)):t+="".concat(r,"{").concat(c,"}")}return t},d=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(c).addClass(e.contentClass):jQuery(c).show():e.contentClass?jQuery(c).removeClass(e.contentClass):jQuery(c).hide()}break;case"select":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(e.value&&Object(l.isArray)(e.allClasses)?(jQuery(a).removeClass(e.allClasses),jQuery(a).addClass(e.value)):r=m(e,r),e.classList){var o=Object.values(e.classList),i=e.classList[e.value];jQuery(a).removeClass(o).addClass(i)}}break;case"color":if(e.selectors){var u=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,s="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(u,"{").concat(s,"}"),"social_proof_tooltip_bg_color"===e.key&&(r+="".concat(u,"::after{ border-top-color: ").concat(e.value,"}"))}if(e.isHover&&e.hoverSelectors){var b=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,f="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(b,"{").concat(f,"}")}break;case"dimension-control":if(e.selectors){var d=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,p="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(d,"{").concat(p,"}"),r+="".concat(d,"{").concat(p,"}")}break;case"box-shadow":if(e.selectors){var O=e.value,j=O.h_offset,y=O.v_offset,v=O.blur,g=O.spread,w=O.color,h=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(l.isEmpty)(j)||Object(l.isEmpty)(y)||Object(l.isEmpty)(v)||Object(l.isEmpty)(g)||Object(l.isEmpty)(w))){var _="".concat(e.stylekey,":").concat(j,"px ").concat(y,"px ").concat(v,"px ").concat(g,"px ").concat(w,";");r+="".concat(h,"{").concat(_,"}")}}break;case"image":if(e.selectors){var E,S,k,N,C,P,x=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(l.isEmpty)(null==e||null===(E=e.value)||void 0===E?void 0:E.custom_url))if(jQuery(x+" img").length)jQuery(x+" img").attr("src",null==e||null===(C=e.value)||void 0===C?void 0:C.image_url);else jQuery(x).find("svg").remove(),jQuery(x).append('<img src="'+(null==e||null===(P=e.value)||void 0===P?void 0:P.image_url)+'" alt="order bump" />');else if(Object(l.isEmpty)(null==e||null===(S=e.value)||void 0===S?void 0:S.custom_url))jQuery(x+" img").attr("src","").attr("srcset","");else{var A,T;if(jQuery(x+" img").length)jQuery(x+" img").attr("src",null==e||null===(A=e.value)||void 0===A?void 0:A.custom_url).attr("srcset","");else jQuery(x).find("svg").remove(),jQuery(x).append('<img src="'+(null==e||null===(T=e.value)||void 0===T?void 0:T.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var I,D,F=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,B=null!==(I=null==e||null===(D=e.value)||void 0===D?void 0:D.position)&&void 0!==I?I:"left";if(null!=e&&e.alignmentClassList){var L=Object.values(null==e?void 0:e.alignmentClassList),z=null==e?void 0:e.alignmentClassList[B];jQuery(F).removeClass(L).addClass(z)}}var U=null!==(k=null==e||null===(N=e.value)||void 0===N?void 0:N.width)&&void 0!==k?k:"100";U&&(r+="".concat(x,"{max-width: ").concat(U,"px;}"))}break;default:r=m(e,r)}})),t(r)}))},p=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:u()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},415:function(e,t,n){"use strict";var r=n(0),c=n(8),a=n(1),l=n(2),o=(n(489),n(14));function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,u=e.title,s=e.updateDetail,b=e.isLoading,f=e.pageUrlSlug,m=i(Object(r.useState)(u),2),d=m[0],p=m[1],O=i(Object(r.useState)(f),2),j=O[0],y=O[1],v=i(Object(r.useState)(""),2),g=v[0],w=v[1],h=Object(l.isEmpty)(null==d?void 0:d.trim())||Object(l.isEmpty)(null==j?void 0:j.trim()),_=Object(r.useRef)();return Object(r.useEffect)((function(){var e,n=null==t?void 0:t.split("/");_.current=null==n||null===(e=n.slice(0,Object(l.isEmpty)(n[n.length-1])?-2:-1))||void 0===e?void 0:e.join("/"),w(t)}),[t]),Object(r.createElement)(c.Modal,{title:Object(a.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Name","funnel-builder")),Object(r.createElement)(c.TextControl,{value:d,onChange:function(e){p(e)},className:Object(l.size)(null==d?void 0:d.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(h)return;s(d,j)}}}),Object(l.size)(null==d?void 0:d.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(a.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(c.TextControl,{value:j,onChange:function(e){y(e.replace(/\s+/g,"-").toLocaleLowerCase()),w(_.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(l.size)(null==j?void 0:j.trim())?"":"bwf-error-border"}),Object(l.size)(null==j?void 0:j.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(a.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},g))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(o.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(o.a,{isPrimary:!0,onClick:function(){return s(d,j)},disabled:h,isBusy:b,className:h?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},433:function(e,t,n){"use strict";var r=n(0),c=n(6),a=n.n(c),l=n(2),o=n(8),i=n(43),u=n(1),s=n(288),b=(n(449),n(5));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y=[{label:Object(u.__)("Product","funnel-builder"),value:"product"},{label:Object(u.__)("Custom","funnel-builder"),value:"custom"}],v=function(e){var t,n=e.onChange,c=e.value,f=e.label,m=e.className,p=Object(i.useInstanceId)(v),j="inspector-bump-image-".concat(p),g=a()("components-bump-image",m),w=O(Object(r.useState)(c.type),2),h=w[0],_=w[1],E=O(Object(r.useState)(c.custom_url),2),S=E[0],k=E[1],N=Object(r.useRef)(document.body.classList.contains("modal-open")),C=function(e){n(e)},P=function(e,n){e.preventDefault(),t||((t=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();C(d(d({},c),{},{custom_url:e.url,type:"custom"})),k(e.url)})),t.on("close",(function(){N.current&&!document.body.classList.contains("modal-open")&&document.body.classList.add("modal-open")}))),t.open()};return Object(r.createElement)(o.BaseControl,{label:f,className:g,id:j},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(l.isEmpty)(y)&&Object(r.createElement)(o.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},y.map((function(e,t){return Object(r.createElement)(o.Button,{key:t,variant:e.value===h?"primary":"",onClick:function(){_(e.value),"product"===e.value?(delete c.custom_url,C(d(d({},c),{},{type:e.value}))):Object(l.isEmpty)(S)||C(d(d({},c),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===h?Object(r.createElement)("img",{src:null==c?void 0:c.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){k(""),C(d(d({},c),{},{type:"product",custom_url:""}))}},Object(r.createElement)(b.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:P},Object(r.createElement)(b.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:P},Object(r.createElement)(b.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(u.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(o.TextControl,{type:"number",label:Object(u.__)("Width (px)","funnel-builder"),max:400,value:null==c?void 0:c.width,onChange:function(e){C(d(d({},c),{},{width:e}))}}),Object(r.createElement)(s.b,{label:Object(u.__)("Image Position","funnel-builder"),options:[{label:Object(u.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(u.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(u.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==c?void 0:c.position,onChange:function(e){C(d(d({},c),{},{position:e}))}})))))};t.a=v},448:function(e,t,n){"use strict";var r=n(0),c=n(8),a=n(1),l=n(2),o=(n(530),n(14));function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,l,o=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw c}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.onclose,n=e.title,u=e.updateTitle,s=e.isLoading,b=e.renameTitle,f=i(Object(r.useState)(n),2),m=f[0],d=f[1],p=Object(l.isEmpty)(m.trim());return Object(r.createElement)(c.Modal,{title:b,className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Title","funnel-builder")),Object(r.createElement)(c.TextControl,{value:m,onChange:function(e){d(e)},className:p?"bwf-error-border":"",onKeyDown:function(e){if("Enter"===e.key){if(p)return;u(m)}}}),p?Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Title is required","funnel-builder")):null,Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions"},Object(r.createElement)(o.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(o.a,{isPrimary:!0,onClick:function(){return u(m)},disabled:p,isBusy:s,className:p?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},449:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(126),a=n(2),l=n(1),o=n(376),i=n(298),u=n(81),s=n(4),b=n(12),f=function(e){var t=Object(r.useRef)(!0),n=Object(i.a)(),c=n.getTemplates,l=n.getActiveBuilder,o=n.getActiveGroup,u=Object(a.isEmpty)(c()),s=o(),b=l();Object(r.useEffect)((function(){var n,r;t.current||!e.current||u||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[u,s,b]),Object(r.useEffect)((function(){t.current&&!Object(a.isEmpty)(b)&&(window.scrollTo(0,0),t.current=!1)}),[b])},m=n(20),d=n(312);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(m.b)("ul").isProFeatureLocked,n=Object(i.a)(),p=n.getTemplates,O=n.getBuilders,y=(n.getFilters,n.getDefaultBuilder),v=n.templateLoading,g=n.getActiveBuilder,w=n.getActiveSubFilter,h=n.getActiveGroup,_=n.getCurrentTemplate,E=Object(u.a)().setActiveGroup,S=e.onImportComplete,k=e.isStoreCheckout,N=void 0!==k&&k,C=e.scratchConfirmModalData,P=e.storeCheckoutId,x=e.isStoreChekoutExists,A=void 0!==x&&x,T=e.templateListNotice,I=e.showImportNotice,D=e.urlDependency,F=void 0===D||D,B=e.showEditors,L=void 0===B||B,z=e.showTemplatesNav,U=void 0===z||z,M=e.showBuildFromScratch,R=void 0===M||M,q=e.showSelectedTemplates,G=void 0!==q&&q,J=e.previewCustomizeEnabled,$=void 0!==J&&J,H=e.hideTabs,Q=void 0===H?[]:H,Y=Object(b.i)().importType,K=p(),V=O(),W=JSON.parse(JSON.stringify(V)),X=y(),Z=g(),ee=v(),te=w(),ne=_(),re=Object(c.useParams)(),ce=re.id,ae=void 0===ce?0:ce,le=re.filter,oe=void 0===le?"funnel":le,ie=re.builder,ue=re.templateId,se=re.step,be=Object(r.useRef)();f(!Object(s.kb)()&&be);var fe,me=F?ue:ne.id,de=F?se:ne.activeStep,pe=N&&P?P:ae,Oe=h(),je=pe||N||!F?Oe:oe,ye={funnel:Object(l.__)("All","funnel-builder"),wc_checkout:Object(l.__)("Checkout","funnel-builder"),landing:Object(l.__)("Sales Funnels","funnel-builder"),optin:Object(l.__)("Lead Funnels","funnel-builder")};((pe||A||Q.includes("wc_checkout"))&&delete ye.wc_checkout,A&&(ye.upsell&&delete ye.upsell,pe||(ye.wc_checkout=Object(l.__)("Checkout","funnel-builder"))),!t||pe||Q.includes("upsell")||(ye.upsell=Object(l.__)("One Click Upsell","funnel-builder")),W&&W.wc_checkout&&W.wc_checkout.customizer&&delete W.wc_checkout.customizer,"funnel"===Y)&&(null===(fe=W[je])||void 0===fe||delete fe.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var ve=function(){var e=ie||X;return Object(a.isEmpty)(Z)||(e=Z),W&&W[je]&&!W[je][e]&&(e=W[je][X]?X:"elementor"),e},ge=["1","2","3","inline","popup"],we=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&ge.includes(te)?K[t][Z][e].group_type[te]:e},he={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=he.hasOwnProperty(e)?he[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.kb)()?"/store-checkout":pe?"/funnels/".concat(pe):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.a,{filters:d.e,templates:K,activeBuilder:ve(),templateCards:function(){if(Object(a.isEmpty)(K)||Object(a.isEmpty)([je]))return{};var e,t=ve(),n={};if("upsell"===je)n=null===(e=K[je])||void 0===e?void 0:e[t];else if("funnel"===je){var r=K[je][t];for(var c in r){var l,o=r[c];if(r[c].hasOwnProperty("group")||G&&!G.includes(o.name))if(!(o.group.includes("sales")||o.group.includes("optin")||null!==(l=r[c])&&void 0!==l&&l.build_from_scratch))continue;n[c]=r[c]}}else for(var i in K.funnel[t]){var u=K.funnel[t][i];(!G||G&&G.includes(u.name))&&("landing"===je&&u.group.includes("sales")||"optin"===je&&u.group.includes("optin")||"wc_checkout"===je&&u.group.includes("wc_checkout"))&&(n[i]=u)}return n}(),editors:W,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:je,templateGroup:ye,previewData:function(){if(Object(a.isEmpty)(K)||!me)return{};var e={success:!0},t=[],n=[];try{var r=ve();if("upsell"===je){t=[];var c=r;for(var o in"oxy"===c&&(c="oxygen"),"customizer"===c&&(c="elementor"),K[je][r]){var i=K[je][r][o];if(!i.build_from_scratch){var u={};u.id=o,u.funnel=o,u.slug=o,u.name=i.name,u.thumbnail=i.thumbnail,u.template=me,u.pro=i.pro,u.preview="https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:o,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:me,thumbnail:me,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(K[je][r][me].prevslug,"/"),slug:me,prevId:me,name:K[je][r][me].name,pro:K[je][r][me].pro,tempPro:K[je][r][me].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(je){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var b=K.funnel[r][me];t=b.steps?b.steps.map((function(e){var t=K[e.type][r][we(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+we(e.slug,e.type));var c="";switch(e.type){case"landing":c=Object(l.__)("Sales Page","funnel-builder");break;case"wc_checkout":c=Object(l.__)("Checkout Page","funnel-builder");break;case"upsell":c=Object(l.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":c=Object(l.__)("Thank You Page","funnel-builder");break;case"optin":c=Object(l.__)("Optin Page","funnel-builder");break;case"optin_ty":c=Object(l.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var c=K[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(c.prevslug),preview:_e(e.type,c,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(me),slug:we(e.slug,e.type),funnel:me,step:e.type,name:c,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var f=b?b.steps.filter((function(e){return e.type===de})):[],m=K[f[0].type][r][we(f[0].slug,f[0].type)];e.activeTemplate={thumbnail:"".concat(de,"-").concat(me),prevId:"".concat(de,"-").concat(m.prevslug),preview:_e(f[0].type,m,r),slug:me,name:K.funnel[r][me].name,pro:K.funnel[r][me].pro,tempPro:K.funnel[r][me].pro,group:"funnel",filters:!!m.group_type&&Object.keys(m.group_type),type:de,funnelGroup:b.group,filter:"wc_checkout"===de?m.no_steps:m.group?m.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:pe,onImportComplete:S,templateFilterCheck:function(e){return!pe||"funnel"===Y||!1===te||!1===te||!(!pe||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:N,parentRoute:Ee,showTemplatesNav:U,showBuildFromScratch:!!R&&("funnel"!==Y||N&&!pe),funnelTitleModalData:j({},N&&{title:Object(l.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:C,importApiPrefix:N?"store-checkout":"funnels",templateListNotice:T,showImportNotice:I,urlDependency:F,showEditors:L,previewCustomizeEnabled:$,listRef:be}))}},489:function(e,t,n){},530:function(e,t,n){},663:function(e,t,n){},664:function(e,t,n){},665:function(e,t,n){},666:function(e,t,n){},667:function(e,t,n){}}]);