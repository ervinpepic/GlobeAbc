(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{291:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),c=n(2),l=n(6),o=n.n(l),a=n(43),i=(n(8),n(332),n(22)),u=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled","orientation"];function s(e){var t=e.label,n=e.className,l=e.selected,f=e.help,b=e.onChange,m=(e.hideLabelFromVision,e.options),p=void 0===m?[]:m,d=e.disabled,O=void 0!==d&&d,j=e.orientation,v=void 0===j?"horizontal":j,y=(function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}}(e,u),Object(a.useInstanceId)(s)),_="inspector-radio-control-".concat(y),h=function(e){return b(e.target.value)};return!Object(c.isEmpty)(p)&&Object(r.createElement)("div",{className:o()("components-base-control",n,"components-radio-control bwf-components-radio-control",v)},Object(r.createElement)("div",{className:"components-base-control__field"},t&&Object(r.createElement)("label",{className:"components-base-control__label",dangerouslySetInnerHTML:{__html:t}}),Object(r.createElement)("div",{className:"bwf-radio-control-inner"},p.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(_,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(_,"-").concat(t),className:"components-radio-control__input",type:"radio",name:_,value:e.value,onChange:h,checked:!O&&e.value===l,disabled:O||e.disabled||e.isPro,"aria-describedby":f?"".concat(_,"__help"):void 0}),e.isPro&&Object(r.createElement)(i.b,null),Object(r.createElement)("label",{htmlFor:"".concat(_,"-").concat(t)},e.label))})))))}},298:function(e,t,n){"use strict";var r=n(26);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["getStateProp"];function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return a(a({},function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,l)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},302:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(0),c=n(8),l=n(43),o=n(2),a=n(6),i=n.n(a),u=(n(349),n(63)),s=n(22),f=n(1);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function m(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=e.label,n=e.className,a=e.value,d=e.help,O=e.options,v=void 0===O?[]:O,y=e.onBlur,_=(void 0===y&&o.noop,e.onChange),h=void 0===_?o.noop:_,g=e.onFocus,w=(void 0===g&&o.noop,e.disabled),E=e.showtooltip,S=void 0!==E&&E,k=e.tooltipmsg,P=void 0===k?"":k,T=e.select_all,N=e.select_all_label,C=e.orientation,I=void 0===C?"vertical":C,F=p(Object(r.useState)(!0),2),A=F[0],x=F[1],L=Object(l.useInstanceId)(j);if(Object(o.isEmpty)(v))return null;var B="inspector-checklist-".concat(L);a=null!=a&&a?a:[];var D=i()("components-checklist",n),R=function(e){var t=m(a);!0===e.target.checked?a.includes(e.target.value)||t.push(e.target.value):t=a.filter((function(t){return t!==e.target.value})),h(t,{event:e}),x(!1)},G=v.map((function(e){return e.value}));return Object(r.createElement)(c.BaseControl,{label:t,id:B,help:d},Object(r.createElement)("div",{className:i()("component-checklist-option-wrap",D,I)},T&&Object(r.createElement)("div",{className:i()("bwf-checkbox-control select_all")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner")},Object(r.createElement)("input",{type:"checkbox",id:"checkbox_select_all",value:Object(o.isEmpty)(Object(o.difference)(G,a)),onChange:function(e){e.target.checked?h(G,{e:e}):h([],{e:e})},checked:Object(o.isEmpty)(Object(o.difference)(G,a)),className:i()({"bwf-no-animation":A})})),Object(r.createElement)("label",{htmlFor:"checkbox_select_all"},N||Object(f.__)("Select All","funnel-builder"))),v.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},P),visible:S&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(B,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(B,"-").concat(t),className:i()("bwf-checkbox-control")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",b({id:"".concat(B,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:R,checked:!e.isPro&&(n=a,c=e.value,!!Array.isArray(n)&&n.includes(c)),className:i()({"bwf-no-animation":A}),"aria-describedby":d?"".concat(B,"__help"):void 0},(w||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.b,null),Object(r.createElement)("label",{htmlFor:"".concat(B,"-").concat(t)},e.label)));var n,c}))))}},309:function(e,t,n){"use strict";var r=n(0),c=n(1),l=n(5);n(333);t.a=function(e){var t=e.onClose,n=e.title,o=e.isDismissible,a=void 0===o||o;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),a&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(l.a,{icon:"close",size:20})))}},312:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return d}));var r=n(0),c=(n(8),n(1)),l=n(12),o=n(4);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},b=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,a=e.importType,i=e.activeTemplateGroup;return u(u({title:!1===t?Object(c.__)("Templates are a PRO Feature","funnel-builder"):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(l.k)({},"/settings/")}}),{},{proLink:Object(o.U)([0===n||"funnel"===a?"Template":"Step",i,"Build","From","Scratch","Upgrade","Modal"])})},m=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,a=e.funnelId,i=e.activeGroup,s=e.activeStep;return u(u({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(c.__)(" is a PRO template","funnel-builder")):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(l.k)({},"/settings/")}}),{},{proLink:Object(o.U)([a?"Step":"Template",a?i:"upsell"===i?"upsell":s,t,"Upgrade","Modal"])})},p=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},d={optin:{inline:Object(c.__)("Inline","funnel-builder"),popup:Object(c.__)("Popup","funnel-builder")},wc_checkout:{1:Object(c.__)("One","funnel-builder"),2:Object(c.__)("Two","funnel-builder"),3:Object(c.__)("Three","funnel-builder")}}},332:function(e,t,n){},333:function(e,t,n){},349:function(e,t,n){},364:function(e,t,n){"use strict";var r=n(0),c=n(8),l=n(2),o=n(1),a=(n(412),n(15)),i=n.n(a),u=n(6),s=n.n(u),f=n(5),b=n(18),m=(n(42),n(289));function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.onSearch,n=e.isLoading,a=e.items,i=e.onItemClick,u=e.error,m=e.blurText,d=e.placeholder,O=void 0===d?Object(o.__)("Type to search","funnel-builder"):d,j=e.helpText,v=e.multiGroup,y=void 0!==v&&v,_=e.stepTitle,h=void 0===_?Object(o.__)("details","funnel-builder"):_,g=p(Object(r.useState)(""),2),w=g[0],E=g[1],S=p(Object(r.useState)(!1),2),k=S[0],P=S[1],T=Object(r.useRef)(null),N=function(e,t){i(e),P(!1),t.preventDefault()};Object(r.useEffect)((function(){m&&!k&&E(m)}),[m,k]);var C=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(C.current).find(e.target).length>0?P(!0):P(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":j}),ref:C},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(f.a,{icon:"search",height:"16",width:"16",color:b.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(f.a,{icon:Object(l.isArray)(a)&&a.length>0&&k?"angle-up":"angle-down",height:"12",width:"12",color:b.TEXT_COLOR_2})),Object(r.createElement)(c.TextControl,{autoComplete:"off",value:w,onChange:function(e){return E(n=e),T.current&&clearTimeout(T.current),void(T.current=setTimeout((function(){return t(n)}),500));var n},placeholder:O}),(!Object(l.isArray)(a)||!!u)&&k&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(l.isArray)(a)&&k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(o.__)("Fetching ".concat(h,"â€¦"),"funnel-builder")):Object(r.createElement)("ul",null,y?a.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&N(e,t)}},Object(r.createElement)("div",null,e.name))})))})):a.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&N(e,t)}},Object(r.createElement)("div",null,Object(o.__)(e.value,"funnel-builder")))}))))),j&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},j))};O.propTypes={onSearch:i.a.func,isLoading:i.a.bool,items:i.a.oneOfType([i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,value:i.a.string.isRequired})),i.a.array]),onItemClick:i.a.func,onChange:i.a.func,error:i.a.any},t.a=Object(m.a)(O,{onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null})},376:function(e,t,n){"use strict";n.d(t,"a",(function(){return it}));var r=n(0),c=n(2),l=n(15),o=n.n(l),a=n(126),i=n(10),u=n.n(i),s=n(1),f=n(12),b=n(6),m=n.n(b),p=n(8),d=(n(483),n(42));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function g(e,t,n){return t=w(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,t,[e])).state={isLoading:!0},n.iframeRef=Object(r.createRef)(),n.setLoaded=n.setLoaded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(l=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props,t=e.src,n=e.onLoad,r=void 0===n?c.noop:n;this.setState({isLoading:!1}),r(!!t)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,l=void 0===n?Object(r.createElement)(d.a,{size:"xl"}):n,o=e.src,a=e.title,i=this.state.isLoading,u=m()("wffn-web-preview",t,{"is-loading":i});return Object(r.createElement)("div",{className:u},(i||Object(c.isEmpty)(o))&&l,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:v({},Object(c.isEmpty)(o)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:a,src:o})))}}])&&_(n.prototype,l),o&&_(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,o}(r.Component);S.propTypes={className:o.a.string,loadingContent:o.a.node,onLoad:o.a.func,src:o.a.string.isRequired,title:o.a.string.isRequired};var k=S,P=n(309),T=n(86),N=n(4);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){var t={title:Object(s.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(s.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(s.__)("Upgrade to PRO Now","funnel-builder"),proLink:N.pb,action:!1},n=e.onRequestClose,c=void 0===n?function(){}:n,l=e.isOpen,o=void 0!==l&&l,a=e.children,i=void 0===a?null:a,u=e.className,f=e.module,b=(e.isTemplate,e.modalContent?F(F({},t),e.modalContent):t);return o?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Modal,{className:m()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",u),isDismissible:!1,onRequestClose:function(){return c()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(P.a,{title:Object(r.createElement)(r.Fragment,null,b.title),onClose:c}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof b.content?b.content.replace("{{feature_name}}",b.feature):b.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},b.demoLabel&&Object(r.createElement)(p.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return c()}},b.demoLabel),!b.demoLabel&&Object(r.createElement)(p.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return c()}},Object(s.__)("Cancel")),Object(r.createElement)(T.a,{module:f,isPrimary:!0,isTemplate:!0})),i)):null},L=n(44),B=n(298),D=(n(484),n(81)),R=n(30),G=n(312),U=(n(485),["src","onLoaded"]);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=e.src,n=e.onLoaded,l=void 0===n?c.noop:n,o=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,U),a=M(Object(r.useState)(!1),2),i=a[0],u=a[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),l(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",z({src:t},o)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},$=n(5),V=n(43),J=n(45),Y=n(413);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=e.label,n=void 0===t?"":t,l=e.id,o=void 0===l?"":l,a=e.value,i=e.onChange,u=void 0===i?c.noop:i,s=e.className,f="inspector-color-".concat(Object(V.useInstanceId)(p.ColorPicker)),b=H(Object(r.useState)(!1),2),d=b[0],O=b[1];return Object(r.createElement)("div",{className:m()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:f},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(p.ColorIndicator,{colorValue:a})),Object(r.createElement)(p.TextControl,{value:a||"#ffffff",className:"indicator-text"}),d&&Object(r.createElement)(J.a,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(p.ColorPicker,{color:a,onChangeComplete:function(e){u(e.hex,{id:o})},disableAlpha:!0}))))},Z=function(e){var t=e.setCustomizeVisible,n=H(Object(r.useState)(!1),2),c=n[0],l=n[1],o=H(Object(r.useState)(""),2),a=o[0],i=o[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(p.Button,{onClick:function(){return t(!1)}},Object(r.createElement)($.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),c?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:c,alt:"logo"}),Object(r.createElement)(p.Button,{className:"bwf-delete-btn",onClick:function(){return l(!1)}},Object(r.createElement)($.a,{icon:"trash",size:20})))):Object(r.createElement)(Y.a,{onFileSelected:function(e){l(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)($.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(K,{label:Object(s.__)("Color","funnel-builder"),value:a,onChange:function(e){return i(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(p.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(p.Button,null,Object(s.__)("Reset","funnel-builder"))))},X=n(20),ee=n(22);function te(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,l=e.funnelId,o=e.onClick,a=e.activeThumbnail,i=e.previewCustomizeEnabled,u=(e.tempPro,e.importType),f=Object(X.b)(),b=f.isProTemplatesLocked,d=f.isBasic,O=Object(X.b)("ck").isProTemplatesLocked,j=Object(X.b)("ul").isProTemplatesLocked,v=ne(Object(r.useState)(!1),2),y=v[0],_=v[1];return Object(c.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},te(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},y?Object(r.createElement)(Z,{setCustomizeVisible:_}):t&&t.map((function(e,t){var n="step"===u?null==e?void 0:e.type:null==e?void 0:e.step,c="upsell"===n,i=["wc_checkout","wc_thankyou"].includes(n);return Object(r.createElement)("label",{key:t,className:m()("wffn_template_page_options",{active_preview:e.id==a}),onClick:function(){return o(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},l?Object(r.createElement)(W,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(c?j:i||d?O:b)&&Object(r.createElement)(ee.b,null))})),i&&!y&&Object(r.createElement)(p.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return _(!0)}},Object(r.createElement)($.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},oe=function(e){var t=e.type,n=e.filters,l=e.FB_PRO_STATUS,o=e.activeSubFilter,a=e.onClick,i=e.activeTemplateFilters,u=e.tempPro,f=e.templateType,b=e.funnelId,p=e.funnelGroup,d=e.hasPRO,O=e.importType,j=Object(X.b)("ck").isProTemplatesLocked;if(!t)return null;var v=n[t];if(void 0===v||Object(c.isEmpty)(v))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var y=[],_=function(e){i.includes(e)&&y.push(Object(r.createElement)("div",{className:m()("template-filter",{"active-filter":o==e}),onClick:function(){return a(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,v[e]),!("wc_checkout"===f&&!j&&(!b||"step"!==O)&&p.includes("wc_checkout"))&&(d(u||"no")||["2","3"].includes(e)&&!0!==l||"popup"===e&&!0!==l)&&Object(r.createElement)(ee.b,null)))};for(var h in v)_(h);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(s.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(s.__)("Optin Form","funnel-builder"):Object(s.__)("Type","funnel-builder"),":"),y))},ae=n(69),ie=function(e){var t=e.funnelId,n=e.activeGroup,c=e.activeSubFilter,l=e.activeStep,o=e.templateName,a=e.isTemplatePro,i=e.funnelGroup,u=e.hasPRO,f=e.importType,b=Object(X.b)("ck").isProTemplatesLocked,m=Object(X.b)("ul").isProTemplatesLocked,p=Object(X.b)(),d=p.isProTemplatesLocked,O=p.isBasic,j=u("status");if("upsell"===n&&!0!==j)return m&&Object(r.createElement)(ae.a,{dismissable:!1,proLink:Object(N.U)([t?"Step":"Template","upsell",o,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===f?n:l){case"upsell":if(!0!==j)return m&&Object(r.createElement)(ae.a,{dismissable:!1,proLink:Object(N.U)([t?"Step":"Template","upsell",o,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((b||t&&"step"===f||!i.includes("wc_checkout"))&&(u(a)||["2","3"].includes(c)&&!0!==j))return Object(r.createElement)(ae.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&"ck",proLink:Object(N.U)([t?"Step":"Template","upsell",o,"Notice","Bar"]),isTemplate:!0});break;case"optin":if(u(a||"no")||"popup"===c&&!0!==j){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==c&&Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},c),Object(s.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(ae.a,{dismissable:!1,proLink:Object(N.U)([t?"Step":"Template","upsell",o,"Notice","Bar"]),isTemplate:!0})}}var v=t&&"step"===f?n:l;return"yes"===a&&("upsell"===v?m:["wc_checkout","wc_thankyou"].includes(v)||O?b:d)?Object(r.createElement)(ae.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&("wc_checkout"===v||"wc_thankyou"===v)&&"ck",proLink:Object(N.U)([t?"Step":"Template","upsell",o,"Notice","Bar"]),isTemplate:!0}):""},ue=n(14),se=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},fe=se.logo?se.logo:"",be=function(e){var t,n,l=e.viewport,o=e.setviewport,a=e.templateName,i=e.isTemplatePro,u=e.onRequestClose,f=e.importing,b=e.onClick,p=e.onClickPro,d=e.activeGroup,O=e.isCheckoutPro,j=e.isOptinPro,v=e.activeStep,y=e.funnelId,_=e.importType,h=(e.templateGroup,e.hasPRO),g=e.stepId,w=Object(X.b)("ul").isProTemplatesLocked,E=Object(B.a)().getImportBtnLabel(),S=Object(c.isEmpty)(E)?"upsell"===d||y&&"step"===_?Object(s.__)("Import This Template","funnel-builder"):Object(s.__)("Import This Funnel","funnel-builder"):E,k=h("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:fe,alt:Object(s.__)("Funnel Builder for WordPress","funnel-builder"),width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},a)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:m()("wffn_viewport_icons",{active:"desktop"===l}),onClick:function(){return o("desktop")},title:Object(s.__)("Desktop Viewport","funnel-builder")},Object(r.createElement)($.a,{icon:"desktop",color:"desktop"===l&&"#fff"})),Object(r.createElement)("span",{className:m()("wffn_viewport_icons",{active:"tablet"===l}),onClick:function(){return o("tablet")},title:Object(s.__)("Tablet Viewport","funnel-builder")},Object(r.createElement)($.a,{icon:"tablet",color:"tablet"===l&&"#fff"})),Object(r.createElement)("span",{className:m()("wffn_viewport_icons",{active:"mobile"===l}),onClick:function(){return o("mobile")},title:Object(s.__)("Mobile Viewport","funnel-builder")},Object(r.createElement)($.a,{icon:"mobile",color:"mobile"===l&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},(t=(!!g||"funnel"===_)&&y&&f&&f.group===d,n=f&&f.group===d,Object(r.createElement)(r.Fragment,null,h(i||"no")||!0!==k&&(O||j||"upsell"===v)||"upsell"===v&&w?Object(r.createElement)(ue.a,{disabled:n,isBusy:t,isPrimary:!0,onClick:p},S):Object(r.createElement)(ue.a,{isPrimary:!0,onClick:b,disabled:n,isBusy:t},S)))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(ue.a,{onClick:u},Object(r.createElement)($.a,{icon:"close",size:"24"}))))};function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function je(e){var t=e.isOpen,n=e.onRequestClose,l=e.activeGroup,o=e.activeEditor,i=e.importing,u=e.filters,b=e.hasPRO,d=e.previewData,O=e.isTemplateLoading,j=e.activeFilter,v=e.setPreviewErr,y=e.parentRoute,_=e.funnelId,h=e.importType,g=e.updateQueryString,w=e.previewCustomizeEnabled,E=e.urlDependency,S=e.stepId,P=e.onImport,C=e.children,I=Object(f.i)(),F=Object(X.b)().isBasic,A=Object(X.b)("ck").isProFeatureLocked,U=d(),z=U.thumbnails,M=U.activeTemplate,q=U.previews,W=void 0===q?[]:q,$=Object(a.useParams)().step,V=R.a.getFunnel(),J=!(!M||!M.type)&&M.type,Y=E?$:null==M?void 0:M.type;Object(r.useEffect)((function(){_||(U.success?v(!1):!1===U.success&&v(!0))}),[U.success]),Object(r.useEffect)((function(){if(J)if("wc_checkout"===J||"optin"===J){var e=!(!M||!M.filters)&&M.filters[0];I.group&&("wc_checkout"===J&&["1","2","3"].includes(I.group)||"optin"===J&&["inline","popup"].includes(I.group))?Q(I.group):(Q(e),g({group:e}))}else I.group&&(delete I.group,g({},Object(f.g)(),I))}),[I.group,J]),Object(r.useEffect)((function(){!Object(c.isEmpty)(null==V?void 0:V.steps)&&"funnel"===h&&_&&g({},"/funnels/".concat(V.id))}),[V]);var H=Object(D.a)(),Q=H.setActiveSubFilter,K=H.setCurrentTemplate,Z=(0,Object(B.a)().getCurrentTemplate)(),ee=de(Object(r.useState)(!1),2),te=(ee[0],ee[1]),ne=b("status"),re=de(Object(r.useState)("desktop"),2),ce=re[0],ae=re[1],ue=de(Object(r.useState)(!1),2),se=ue[0],fe=ue[1],me=de(Object(r.useState)(!1),2),Oe=me[0],je=me[1],ve=de(Object(r.useState)(!_),2),ye=ve[0],_e=ve[1],he=de(Object(r.useState)([]),2),ge=he[0],we=he[1];Object(r.useEffect)((function(){if(te(!1),M&&!ge.includes(M.prevId)){var e=JSON.parse(JSON.stringify(ge));e.push(M.prevId),we(e)}}),[null==M?void 0:M.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(z&&!_&&ye){var e=z||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&_e(!1)}}))}}),[z]);var Ee=("wc_checkout"===l||Y&&"wc_checkout"===Y)&&"1"!==j,Se=("optin"===l||Y&&"optin"===Y)&&"inline"!==j;return U?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(be,pe(pe(pe(pe({viewport:ce,setviewport:ae,onRequestClose:n,importing:i,activeGroup:l,isCheckoutPro:Ee,isOptinPro:Se,activeStep:Y,funnelId:_,importType:h,hasPRO:b,stepId:S,onClickPro:function(){!1===ne&&"yes"!==(null==M?void 0:M.tempPro)&&(Ee||Se||"upsell"===Y)||"upsell"===Y&&F&&!A?je(!0):fe(!0)},onClick:function(){return P()}},"onRequestClose",(function(){_?g({},"".concat(y)):(g({},"".concat(y,"/").concat(l)),Q(!1)),n()})),"templateName",null==M?void 0:M.name),"isTemplatePro",null==M?void 0:M.tempPro),"templateGroup",null==M?void 0:M.funnelGroup)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:m()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(oe,{type:null==M?void 0:M.type,filters:u,FB_PRO_STATUS:ne,activeSubFilter:j,onClick:function(e){if(Q(e),g({group:e}),_){var t=Z.template,n=(void 0===t?{}:t).group_type;Object(c.isEmpty)(n)||K({id:n[e],template:{group_type:n},steps:z.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==M?void 0:M.filters,hasPRO:b,tempPro:null==M?void 0:M.tempPro,templateType:null==M?void 0:M.type,funnelId:_,funnelGroup:null==M?void 0:M.funnelGroup,importType:h}),!O&&Object(r.createElement)(ie,{funnelId:_,activeGroup:l,activeSubFilter:j,activeStep:Y,hasPRO:b,templateName:null==M?void 0:M.name,isTemplatePro:null==M?void 0:M.pro,funnelGroup:null==M?void 0:M.funnelGroup,importType:h}),Object(c.isEmpty)(W)||Object(c.isEmpty)(ge)?"":W.map((function(e,t){var n=(null==e?void 0:e.preview)||"",c=(null==e?void 0:e.id)||"";return Object(r.createElement)(k,{key:t,className:m()("wffn_template_preview_frame",ce,{"hide-preview":e.id!==M.prevId}),title:"Funnel Template",src:ge.includes(c)?n:"",onLoad:function(e){if(te(!0),e&&W[t+1]){var n=JSON.parse(JSON.stringify(ge));n.push(W[t+1].id),we(n)}}})}))),Object(r.createElement)(le,{thumbnailsData:z,hasPlaceholder:ye,funnelId:_,previewCustomizeEnabled:w,importType:h,tempPro:null==M?void 0:M.tempPro,onClick:function(e){K({id:e.funnel,template:e,activeStep:e.step,steps:z.map((function(e){return{type:e.step,slug:e.lug}}))}),g({},_&&"step"===h?"".concat(y,"/templates/").concat(l,"/").concat(o,"/preview/").concat(e.funnel):_&&"funnel"===h?"".concat(y,"/templates/").concat(l,"/").concat(o,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===l?"".concat(y,"/").concat(l,"/").concat(o,"/preview/").concat(e.funnel):"".concat(y,"/").concat(l,"/").concat(o,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==M?void 0:M.thumbnail}))),C,Object(r.createElement)(x,{isOpen:se,onRequestClose:function(){return fe(!1)},modalContent:Object(G.c)({templateName:null==M?void 0:M.name,FB_PRO_STATUS:ne,funnelId:_,activeGroup:l,activeStep:Y}),module:["wc_checkout","wc_thankyou"].includes(l)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(b((null==M?void 0:M.pro)||"no")||"yes"!==(null==M?void 0:M.pro)&&(Ee||Se||"upsell"===Y)||"upsell"===Y&&F&&!A)&&Object(r.createElement)(L.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(s.sprintf)(Object(s.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==M?void 0:M.name),Object(r.createElement)("mark",null,Object(s.__)("Two Step","funnel-builder")),Object(s.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(s.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(T.a,{module:A&&["wc_checkout","wc_thankyou"].includes(l)&&"ck",isPrimary:!0}),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===ne?g({},"/settings/"):window.open(Object(N.U)([_?"Step":"Template",_?l:"upsell"===l?"upsell":Y,null==M?void 0:M.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){S||"funnel"===h&&"wc_checkout"===h||P();var e="1";if("optin"===l||"optin"===Y?(Q("inline"),g({group:"inline"}),e="inline"):(Q("1"),g({group:"1"})),_){var t=Z.template,n=(void 0===t?{}:t).group_type;Object(c.isEmpty)(n)||K({id:n[e],template:{group_type:n},steps:z.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){je(!1)},isOpen:Oe,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))):""}n(391);var ve=n(29),ye=n(58),_e=n(405),he=n(31),ge=n(406),we=n(288),Ee=n(291),Se=(n(18),n(85));function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Fe=function(e){var t,n,l,o=e.onCloseModal,a=e.onComplete,i=e.isWorking,u=e.activeTemplateGroup,f=(e.showCloneOption,e.templateGroup),b=e.className,d=e.children,O=Ce(Object(r.useState)(""),2),j=O[0],v=O[1],y=Ce(Object(r.useState)({}),2),_=(y[0],y[1]),h=Ce(Object(r.useState)(""),2),g=h[0],w=h[1],E=Ce(Object(r.useState)(null),2),S=E[0],k=E[1],P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $((function(r){return n?(delete r[t],r):Te(Te({},r),{},Ne({},e,t))}))},T=Ce(Object(r.useState)((function(){return u})),2),C=T[0],I=(T[1],R.a.getSteps()),F=Object(B.a)(),A=F.getScratchTemplateType,x=F.getCurrentTemplate,L=F.getImportOffer,D=A(),G=x(),U=L();Object(r.useEffect)((function(){_({})}),[]);var z=function(){var e;v(""),a("upsell"===C?W:"new"===D?{title:g}:{title:"".concat(null==S||null===(e=S.step)||void 0===e?void 0:e.name," Copy")},C,!(!S||!S.copyFrom)&&S.step)},M=(Object(r.useMemo)((function(){return Object.keys(f).map((function(e){return{key:e,label:f[e]}}))}),[f]),function(){return I.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(he.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),q=Ce(Object(r.useState)(Te({type:0===M().length?"new":"existing"},!Object(c.isNull)(U)&&{title:U.parent_title,insert_into:U.parent_id})),2),W=q[0],$=q[1],V=function(){if("upsell"===C){var e,t,n,r,l,o;if("new"===D)return"existing"===W.type?Object(c.isEmpty)(null===(n=W.offer_title)||void 0===n?void 0:n.trim())||!W.insert_into:Object(c.isEmpty)(null===(e=W.title)||void 0===e?void 0:e.trim())||Object(c.isEmpty)(null===(t=W.offer_title)||void 0===t?void 0:t.trim());if("existing"===D)return"existing"===W.type?!W.insert_into||Object(c.isNull)(S):Object(c.isEmpty)(null===(r=W.title)||void 0===r?void 0:r.trim())||Object(c.isNull)(S);if(!G.isBuildFromScratch)return Object(c.isEmpty)(null===(l=W.title)||void 0===l?void 0:l.trim())||Object(c.isEmpty)(null===(o=W.offer_title)||void 0===o?void 0:o.trim())}return"new"!==D&&G.isBuildFromScratch?"existing"===D?Object(c.isNull)(S):void 0:Object(c.isEmpty)(g.trim())},J=("new"===W.type||!Object(c.isNull)(U))&&Object(r.createElement)(p.TextControl,{placeholder:Object(s.__)("Type hereâ€¦","funnel-builder"),label:Object(s.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(he.decodeEntities)(W.title))&&void 0!==t?t:"",onChange:function(e){return P("title",e)},disabled:!Object(c.isNull)(U)||i});return Object(r.useEffect)((function(){1===M().length&&P("insert_into",M()[0].key)}),[]),Object(r.createElement)(p.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(s.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",N.tb[C],")")),className:m()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",b),onRequestClose:function(){return o()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},d,j&&Object(r.createElement)(Se.a,{errorMessage:j}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||V()||i||z()},role:"main"},"upsell"===C&&"new"!==W.type&&!Object(c.isNull)(U)&&J,"existing"===D&&G.isBuildFromScratch&&Object(r.createElement)(ge.a,{step:{type:"upsell"===C?"offer":C,title:f[C],is_substep:"upsell"===C},onStepSelected:function(e){k(e)},key:"bwf-clone-step-".concat(C)}),"upsell"===C?Object(r.createElement)(r.Fragment,null,!Object(c.isEmpty)(M())&&Object(c.isNull)(U)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(s.__)("Add Offers","funnel-builder")),Object(r.createElement)(Ee.a,{options:[{value:"existing",label:Object(s.__)("To Existing Upsell","funnel-builder"),disabled:0===M().length},{value:"new",label:Object(s.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=W.type)&&void 0!==n?n:0===M().length?"new":"existing",onChange:function(e){P("inherit_from","",!0),P("type",e)}})),"existing"===W.type&&Object(c.isNull)(U)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(we.b,{label:Object(s.__)("Select Upsell","funnel-builder"),options:M(),selected:1===M().length?M()[0].key:W.insert_into,onChange:function(e){P("insert_into",e)}})),"new"===W.type&&Object(c.isNull)(U)&&J,"new"===D&&Object(r.createElement)(p.TextControl,{placeholder:Object(s.__)("Type hereâ€¦","funnel-builder"),label:Object(s.__)("Offer Name","funnel-builder"),value:null!==(l=W.offer_title)&&void 0!==l?l:"",onChange:function(e){return P("offer_title",e)},disabled:i})):"new"===D?Object(r.createElement)(p.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Step Name","funnel-builder"),value:null!=g?g:"",onChange:function(e){return w(e)},disabled:i}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(ue.a,{onClick:o,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(ue.a,{isPrimary:!0,disabled:V()||i,isBusy:i,onClick:z,className:V()?"bwf-no-ripple":"",name:"add-funnel"},Object(s.__)("Add","funnel-builder")))))},Ae=n(55);n(486);function xe(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Be=function(e){var t=e.showTemplatesNav;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},t&&Object(r.createElement)(Ae.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder",style:{marginBottom:"0"}},xe(Array(5)).map((function(e,t){return Object(r.createElement)(Ae.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},xe(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},De=n(50),Re=n(3),Ge=function(e){var t=e.editorList,n=e.activeEditor,l=e.onChange,o=Object(B.a)().getDefaultBuilder,a=Object(D.a)().setActiveBuilder,i=o(),u=Object(N.l)()||"wp_editor"===i||"customizer"===i;if(Object(Re.useEffect)((function(){Object(c.isEmpty)(i)&&u?a("gutenberg"):Object(c.isEmpty)(i)?a("elementor"):a(i)}),[]),!Object(c.isEmpty)(i)&&"customizer"!==i&&"wp_editor"!==i)return null;var f=Object.keys(t).filter((function(e){return!u||["gutenberg","customizer","wp_editor"].includes(e)})).map((function(e){return{value:e,label:u?"gutenberg"===e?Object(s.__)("Pre-Built","funnel-builder"):"wp_editor"===e?Object(s.__)("Custom (Using Shortcodes)","funnel-builder"):t[e]:t[e]}}));return Object(r.createElement)(Ae.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(Ee.a,{options:f,selected:n,onChange:function(e){return l(e)}}))},Ue=n(25),ze=n(63),Me=n(23),qe=["edit"];var We=function(e){var t=e.funnelId,n=e.disabledNavs,c=e.activeTemplateGroup,l=e.templateGroup,o=e.onClick,i=e.urlDependency,u=Object(X.b)("ul").isProTemplatesLocked,s=Object(a.useParams)().importType,b={},p=window.location&&window.location.search?Object(Ue.parse)(window.location.search.substring(1)):{},d=(p.edit,function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(p,qe));for(var O in l)"funnel"===s&&"upsell"===O||(b[O]={},b[O].name=l[O],b[O].isExclusive="upsell"===O,b[O].link=decodeURIComponent(Object(f.f)({},"/templates/".concat(O),d)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(Ae.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(b).map((function(e,l){var a=e===c,s=n.find((function(t){return t.key===e}));return Object(r.createElement)(Ae.c,{key:"bwf-temp-nav-".concat(l)},0===t&&i?Object(r.createElement)(Me.a,{className:m()("bwf-template-nav-item",{"is-selected":p.path==="/templates/"+e||"/templates"===p.path&&"funnel"===e}),href:b[e].link},b[e].name,b[e].isExclusive&&Object(r.createElement)(ee.b,null)):Object(r.createElement)(ze.a,{toolTipText:s&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},s.message),visible:s||!1,size:366},Object(r.createElement)("div",{className:m()("bwf-template-nav-item",{"is-selected":a&&!s},{"is-disabled":s}),onClick:function(){s||o(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,b[e].name),u&&b[e].isExclusive&&Object(r.createElement)(ee.b,null))))}))))},$e=n(54);function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e){var t=e.importBuildFromScratch,n=e.activeTemplateGroup,c=e.templateID,l=void 0===c?"scratch":c,o=e.importType,a=e.stepId,i=e.importing,u=e.allowNew,f=void 0===u||u,b=Ve(Object(r.useState)({status:!1}),2),m=b[0],p=b[1],d=Object(X.b)(),O=d.isProFeatureLocked,j=d.isBasicFeatureLocked||"upsell"===n&&O,v=Object(X.b)("ul").isProFeatureLocked,y=Object(D.a)().setScratchTemplateType;Object(r.useEffect)((function(){return function(){y("new")}}),[]);var _;return Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)($.a,{icon:"add-page",width:"48",height:"48",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,(_="step"===o?Object(s.__)("You can quickly add step","funnel-builder"):Object(s.__)("You can design the funnel from blank","funnel-builder"),Object(r.createElement)("div",{className:"wffn_import_description"},_)),f?Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){v&&"upsell"===n?p(Qe):(y("new"),t(l,e))},isBusy:!!a&&i},Object(s.__)("Start from Blank","funnel-builder"),v&&"upsell"===n&&Object(r.createElement)(ee.b,null)):null,"step"===o?null:Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){y("json"),t(l,e)}},Object(s.__)("Import","funnel-builder")),a?null:Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){j?p(He):(y("existing"),t(l,e))}},Object(s.__)("Clone","funnel-builder"),j&&Object(r.createElement)(ee.b,null)))))))),Object(r.createElement)($e.a,{isOpen:!!m.status,onRequestClose:function(){return p({status:!1})},modalContent:m,type:2}))}var He={status:!0,feature:Object(s.__)("Cloning","funnel-builder"),proLink:Object(N.U)(["Template","Clone","Upgrade","Modal"])},Qe={status:!0,feature:Object(s.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(N.U)(["Upsell","Templates","Upgrade","Modal"])},Ke=n(392),Ze=(n(59),{optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"}),Xe=function(e){var t=e.templateFilterCheck,n=e.templateCards,l=e.showBuildFromScratch,o=e.importBuildFromScratch,a=e.activeTemplateGroup,i=e.activeEditor,u=e.onPreview,f=e.funnelId,b=e.importType,d=e.stepId,O=e.importing,j=Object(X.b)("ul").isProTemplatesLocked,v=Object(X.b)(),y=v.isProTemplatesLocked,_=v.isLite,h=v.isBasic,g=Object(X.b)("ck").isProTemplatesLocked,w=Object(D.a)().setScratchTemplateType,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)(Ye,{importBuildFromScratch:o,getRibbonName:G.b,activeTemplateGroup:a,templateID:e,importType:b,stepId:d,importing:O,allowNew:t})},S=[],k=function(e){var c=n[e];if(t(c,!!c.group_type&&Object.keys(c.group_type)[0])&&(!(c.build_from_scratch&&d&&c.hasOwnProperty("allow_new"))||c.allow_new)&&(l||!c.build_from_scratch)){var o,i=((null==c?void 0:c.group)||[]).includes("upsell")||"upsell"===a,f=(null==c||null===(o=c.group)||void 0===o?void 0:o.some((function(e){return"wc_checkout"===e||"wc_thankyou"===e})))||["wc_checkout","wc_thankyou"].includes(a);S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},c.build_from_scratch?E(c.slug?c.slug:e,c.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===c.pro&&(i?j:f||h?g:y)&&Object(r.createElement)(ee.b,null),Object(r.createElement)("div",{className:c.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},c.thumbnail&&Object(r.createElement)(W,{src:c.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(p.Button,{onClick:function(t){w("new"),u(t,e,c)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},c.name),"funnel"===a&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Ze[null==c?void 0:c.group[0]]&&Ze[null==c?void 0:c.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},c.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",c.steps.length,"funel-builder"),c.steps.length)):null)))))}};for(var P in n)k(P);return"wp_editor"===i&&Object(c.isEmpty)(S)&&S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},E("upsell"===a?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===i&&S.push(Object(r.createElement)(Ke.a,{key:"other-builder-notice",type:a})),!_||h||"wp_editor"===i&&!f&&"funnel"!==b||S.push(Object(r.createElement)("div",{className:"bwf-templates-upgrde-pro-notice",key:"upgrade-pro-notice"},Object(r.createElement)("div",null,Object(r.createElement)("strong",null,Object(s.__)("Browse our library of ready-made templates","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("span",null,Object(s.__)("Never start from scratch again! While Funnelkit Lite lets you create any template, save even more time with Funnelkit Pro. Upgrade now to access all templates.","funnel-builder"))),Object(r.createElement)(T.a,{isPrimary:!0,size:"md",proLink:Object(N.U)(["Template","Cards","Notice"])}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:m()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!f})},S))},et=function(e){var t=e.editors,n=e.activeTemplateGroup,l=e.activeEditor,o=e.defaultBuilder,a=Object(D.a)().makeDefaultEditor,i=Object(N.l)()||"wp_editor"===o||"customizer"===o;return"customizer"===l||i||!Object(c.isEmpty)(o)&&"wp_editor"!==o||o===l?null:Object(r.createElement)("div",{className:"bwf-templates-default-editor-notice"},Object(s.sprintf)(/* Translators: %s is the name of the page builder */
Object(s.__)("Want to make %s as default page builder?","funnel-builder"),Object(c.get)(t,"".concat(n,".").concat(l))||Object(s.__)("this","funnel-builder")),Object(r.createElement)(ue.a,{className:"bwf-no-style-btn",onClick:function(){return a(e=l),void u()({path:Object(N.y)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(e){e.success||console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)}));var e}},Object(s.__)("Yes","funnel-builder")))};function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var at=function(e){var t=e.activeFilter,n=e.defaultBuilder,l=e.filters,o=e.editors,i=e.templates,b=e.isTemplateLoading,p=e.activeBuilder,d=e.activeTemplateGroup,O=e.templateGroup,j=void 0===O?[]:O,v=e.funnelId,y=void 0===v?0:v,_=(e.showDefaultEditorNotice,e.templateCards),h=void 0===_?{}:_,g=e.previewData,w=e.onImportComplete,E=e.templateFilterCheck,S=e.showTemplatesNav,k=e.parentRoute,P=e.disabledNavs,T=void 0===P?[]:P,C=e.showBuildFromScratch,I=void 0===C||C,F=e.funnelTitleModalData,A=void 0===F?{}:F,U=e.scratchConfirmModalData,z=e.importApiPrefix,M=void 0===z?"funnels":z,q=e.templateListNotice,W=e.showImportNotice,$=void 0===W?"":W,V=e.urlDependency,J=void 0===V||V,Y=e.showEditors,H=void 0===Y||Y,Q=e.previewCustomizeEnabled,K=void 0!==Q&&Q,Z=e.listRef,ee=e.stepId,te=Object(f.i)(),ne=Object(X.b)("ck").isProTemplatesLocked,re=Object(X.b)("ul").isProTemplatesLocked,ce=Object(X.b)(),le=ce.isProTemplatesLocked,oe=ce.isBasic,ae=Object(De.a)().updateStatus,ie=y,ue=Object(X.c)(),se=ue.showSnackbar,fe=ue.hideSnackbar,be=lt(Object(r.useState)(!1),2),me=be[0],pe=be[1],de=lt(Object(r.useState)(!1),2),Oe=de[0],he=de[1],ge=function(){if(J)return f.k.apply(void 0,arguments)},we=Object(ye.a)().unsetTabData,Ee=(0,R.a.getFunnel)(),Se=Object(D.a)(),ke=Se.fetch,Pe=Se.setActiveBuilder,Te=Se.setActiveGroup,Ne=Se.setCurrentTemplate,Ce=Se.setActiveStep,Ie=Se.setActiveSubFilter,Ae=Se.setImportOffer,xe=(0,Object(B.a)().getCurrentTemplate)(),Le=Object(a.useParams)(),Re=Le.builder,Ue=Le.templateId,ze=Le.filter,Me=void 0===ze?d:ze,qe=Object(f.i)().importType,$e=ee?"step":"wc_checkout"===qe?"funnel":qe,Ve=Object(ve.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(c.isEmpty)(h)&&ke(),function(){Ae(null),fe()}}),[]),Object(r.useEffect)((function(){var e,t;Re&&!b&&Ue&&h[Ue]&&Ne({id:Ue,template:h[Ue],steps:h[Ue].steps,activeStep:null!==(e=h[Ue])&&void 0!==e&&e.steps?null===(t=h[Ue])||void 0===t?void 0:t.steps[0].type:""})}),[Re,Ue,b]),Object(N.m)(Object(s.__)("Import Funnel","funnel-builder"));var Je=lt(Object(r.useState)(!1),2),Ye=Je[0],He=Je[1],Qe=lt(Object(r.useState)(!1),2),Ke=Qe[0],Ze=Qe[1],tt=lt(Object(r.useState)(!1),2),nt=tt[0],ct=tt[1],ot=lt(Object(r.useState)({}),2),at=ot[0],it=ot[1];Object(r.useEffect)((function(){Ue&&Ne({id:Ue,template:{}})}),[]),Object(r.useEffect)((function(){Oe&&(ge({},"/templates"),se(Object(s.__)("Template not found for requested URL. Please select from the list.")))}),[Oe]);var ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.noop;try{it((function(e){return rt(rt({},e),{},{disableConfirm:!0,cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(N.y)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&(r(),it({status:!1}))})).catch((function(e){it({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.builders_options,c=e.builders_texts,l=n,o=null==xe?void 0:xe.isBuildFromScratch,a=!0,i=null==xe?void 0:xe.id;if("wp_editor"!==p&&"customizer"!==p&&void 0!==l&&l.status&&"activated"!==l.status||a){var u=c,f=u.text;"gutenberg"===p&&o&&(f=Object(s.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var b={key:"pluginActivation",status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:f}}),closeIcon:!0};b.confirmButtonText=u.ButtonText,"yes"===u.show_cancel_btn&&(b.cancelButtonText="Cancel"),"gutenberg"===p&&o&&(b.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),it(rt(rt({},b),{},{onConfirm:function(){if(u.builder_link&&"install"===l.status&&"yes"===u.noInstall)return window.open(u.builder_link,"_blank"),void it({status:!1});"yes"!==u.show_cancel_btn&&it({status:!1}),ut(l.slug,l.init,l.status,i,t)},onCancel:function(){pe(!1),Ze(!1),it({status:!1})}})),Ze(!1)}else t()},ft=function(e){var n=Object(G.a)(p,d),r="/funnel-offer/".concat(ee,'/design?design={"builder":"').concat(n,'","template":"').concat(e,'"}'),c="/funnel-".concat(d,"/").concat(ee,'/design?design={"builder":"').concat(n,'","template":"').concat(e,'"}');u()({path:Object(N.y)("".concat("upsell"===d?r:c)),method:"POST"}).then((function(n){if(n.success)w();else{if(!n.hasOwnProperty("builders_options"))throw it({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:n.message||n.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:n.error}),Ze(!1),n;st(n,(function(){Ze({id:e,group:d,filter:t}),ft(e)}))}})).catch((function(e){throw e}))},bt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var l=n[0],o=n[1],a=n[2],i=n[3],f=a||d;Ze({id:l,group:f,filter:t});var b=!0;try{if(ee)return void ft(l);var m=Object.create({});m.template=l,m.builder=Object(G.a)(p,f);var O=Object.create({});if(ie&&"step"===$e){var j=i&&i.hasOwnProperty("id")?i.id:0;i?(m.title=o.title,m.inherit_from=j,m.type=f,delete m.template,delete m.builder):(m.funnel_id=ie,m.type=f,m.title=o.title,m.template_type=t),"upsell"===f&&("new"===o.type?(delete m.inherit_from,i&&(m.offer_inherit=j),Object(c.size)(o.offer_title)?m.offer_title=o.offer_title:m.offer_title=i.name):Object(c.size)(o.offer_title)?m.title=o.offer_title:m.title="".concat(i.name," Copy")),m.insert_into=o.insert_into}else{var v=g().thumbnails;v.forEach((function(e){O["upsell"===e.step?"wc_upsells":e.step]=e.slug})),m.steps=JSON.stringify(O),ie&&"funnel"===$e?m.funnel_id=Number(ie):m.title=o.title}var y=0!==ie&&"step"===$e?"upsell"===f&&"existing"===o.type?Object(N.y)("/funnel-upsell/".concat(o.insert_into,"/offers")):Object(N.y)("/funnels/".concat(ie,"/steps")):Object(N.y)("/".concat(M,"/import_template"));u()({method:"POST",data:m,path:y}).then((function(e){if(e.hasOwnProperty("builders_options"))st(e,(function(){bt.apply(void 0,n)}));else if(e.status&&!0===e.status){if(e.setup&&ae(e.setup),b=!1,ie||(e.funnel_id?mt(e.funnel_id):it({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==ie&&w){if("funnel"===$e&&Ve(!1),"upsell"===f&&o.hasOwnProperty("insert_into")&&""!==o.insert_into&&Ee.steps){var t=Ee.steps.findIndex((function(e){return parseInt(e.id)===parseInt(o.insert_into)})),r=Ee.steps[t].substeps;r.hasOwnProperty("offer")&&r.offer.length>0&&r.offer.map((function(e){we("offer",e.id,"products",e.id)}))}w(e)}}else it({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),pe(!1)})).catch((function(e){it({status:!0,error:e.message||e.msg}),pe(!1)})).finally((function(){b&&Ze(!1)}))}catch(e){console.log(e),Ze(!1)}},mt=function(e){try{u()({path:Object(N.y)("/funnels/".concat(e,"/import-status"))}).then((function(t){!0===t.status?w?(He(!1),w({funnel_id:e})):(delete te.group,ge({},"/funnels/".concat(e),te)):!1===t.status&&setTimeout((function(){mt(e)}),2e3)}))}catch(e){}},pt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var l=n[0],o=n[1],a=n[2];if(Ze({id:"scratch",group:d,filter:t}),a)u()({path:Object(N.y)("".concat("wc_checkout"===d?"/store-checkout":"/funnels","/duplicate/").concat(a)),method:"wc_checkout"===d?"POST":"GET"}).then((function(e){e.status&&(Object(N.kb)()||e.funnel_id)?w?w({funnel_id:e.funnel_id}):ge({},"/funnels/".concat(e.funnel_id),te):e.builders_options?st(e,(function(){pt.apply(void 0,n)})):it({status:!0,modalTitle:Object(s.__)("Clone Funnel"),error:e.message||e.msg||Object(s.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:e.error}),Ze(!1)})).catch((function(e){Ze(!1),console.log(e)}));else{var i={funnel_name:l,template:"scratch"};a&&(i.inherit_from=a),o&&!Object(c.isEmpty)(o)&&(i.funnel_steps=o.join(",")),i.builder=p,"wc_checkout"===d&&(i.default_step="yes",i.template=null==xe?void 0:xe.id);try{u()({method:"POST",data:i,path:Object(N.y)("/".concat(M))}).then((function(e){if(e.builders_options)st(e,(function(){pt.apply(void 0,n)}));else if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id;e.setup&&ae(e.setup),"funnels"===M?(delete te.group,Object(f.k)({},"/funnels/".concat(t),te)):w({funnel_id:e.funnel.id})}else!1===e.status&&(it({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),pe(!1),Ze(!1))}))}catch(e){console.log(e),Ze(!1)}}},dt=function(e){var t=!1,n="upsell"===Me?!re:["wc_checkout","wc_thankyou"].includes(Me)||oe?!ne:!le;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},Ot=dt("status"),jt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(U&&!n)it(rt(rt({},U),{},{onConfirm:function(){return jt(e,t,!0)},onCancel:function(){return it({status:!1})}}));else{if(Ke)return!1;"upsell"===d&&dt()?ct(!0):(Ne({id:e,isBuildFromScratch:!0,template:{name:j[d]}}),$?$():ee||"funnel"===$e&&y?bt(e):pe(!0),ie||Ve(!0))}},vt=function(){return Object(r.createElement)(L.a,{className:"bwf-admin-modal-squeezy "+at.className,isLoading:at.loading,successMessage:at.success,errorMessage:at.error,isOpen:at.status,autoHide:8e3,content:at.content,confirmText:at.confirmText,confirmButtonText:at.confirmButtonText,cancelButtonText:at.cancelButtonText,onConfirm:at.onConfirm,onCancel:at.onCancel,modalTitle:at.modalTitle,disableConfirm:at.disableConfirm,closeIcon:at.closeIcon,onRequestClose:function(){return it({status:!1})}})},yt=function(){return Object(r.createElement)(r.Fragment,null,!me&&vt(),Object(r.createElement)(x,{isOpen:nt,onRequestClose:function(){return ct(!1)},modalContent:Object(G.d)({FB_PRO_STATUS:Ot,funnelId:y,importType:$e,activeTemplateGroup:d}),className:"bwf-templates-pro-modal"}),me&&(0===y?Object(r.createElement)(_e.b,{onCloseModal:function(){pe(!1)},isWorking:Ke,onComplete:function(e,t,n){xe.isBuildFromScratch?pt(e,t,n):bt(xe.id,{title:e})},modalTitle:A.title,className:m()({"bwf-visibility-hidden":"pluginActivation"===at.key})},vt()):Object(r.createElement)(Fe,{onCloseModal:function(){pe(!1)},isWorking:Ke,activeTemplateGroup:d,templateGroup:j,showCloneOption:xe.isBuildFromScratch,onComplete:function(e,t,n){var r=xe.id;if(t!==d){var l=Object(c.get)(i,"".concat(t,".").concat(p)),o=l&&Object.keys(l).find((function(e){var t;return!0===(null===(t=l[e])||void 0===t?void 0:t.build_from_scratch)}));o&&(r=l[o].slug)}bt(r,e,t,n)},className:m()({"bwf-visibility-hidden":"pluginActivation"===at.key})},vt())))};return Object(r.createElement)(r.Fragment,null,b?Object(r.createElement)(Be,{showEditors:H,showTemplatesNav:H}):Object(r.createElement)("div",{className:"wffn_template_wrap"},(S||H)&&Object(r.createElement)("div",{className:"bwf-template-list-header"},Object(r.createElement)("div",null,S&&Object(r.createElement)(We,{funnelId:y,disabledNavs:T,activeTemplateGroup:d,templateGroup:j,onClick:function(e){return Te(e)},urlDependency:J}),H&&Object(r.createElement)(Ge,{editorList:o[d],onChange:function(e){Pe(e)},activeEditor:p})),Object(r.createElement)(et,{editors:o,activeTemplateGroup:d,activeEditor:p,defaultBuilder:n})),Object(r.createElement)("div",{id:"wffn_design_container",ref:Z},Object(r.createElement)("div",{className:"wffn_tab_container"},q,Object(r.createElement)(Xe,{templateFilterCheck:E,templateCards:h,showBuildFromScratch:I,importBuildFromScratch:jt,activeTemplateGroup:d,activeEditor:p,onPreview:function(e,t,n){e.preventDefault(),n.group_type?Ie(Object.keys(n.group_type)[0]):0!==y&&"funnel"!==$e||"optin"!==d&&"wc_checkout"!==d||Ie("optin"===d?"inline":"wc_checkout"===d&&"1"),Ne({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),He(!0),"upsell"===d&&0===y?ge({},"".concat(k,"/").concat(d,"/").concat(p,"/preview/").concat(t)):0===y?ge({},"".concat(k,"/").concat(d,"/").concat(p,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===$e&&ge({},"".concat(k,"/templates/").concat(d,"/").concat(p,"/preview/").concat(t,"/").concat(n.steps[0].type)),Ce(n.steps[0].type)):ge({},"".concat(k,"/templates/").concat(d,"/").concat(p,"/preview/").concat(t))},funnelId:y,importType:$e,stepId:ee,importing:Ke})))),(Re||Ye)&&Object(r.createElement)(je,{isOpen:Ye||Re,onRequestClose:function(){He(!1),Ie(!1),te.group&&(delete te.group,ge({},Object(f.g)(),te))},onImport:function(){$?$():ee||"funnel"===$e&&y?bt(xe.id):pe(!0)},templateGroup:j,activeGroup:d,templateID:xe.id,template:xe.template,activeEditor:p,importing:Ke,templateList:i,filters:l,templates:i,hasPRO:dt,previewData:g,isTemplateLoading:b,activeFilter:t,setPreviewErr:he,parentRoute:k,funnelId:y,importType:$e,updateQueryString:ge,previewCustomizeEnabled:K,urlDependency:J,stepId:ee},yt()),!(Re||Ye)&&yt())};at.prototype={filters:o.a.object.isRequired,templates:o.a.object.isRequired,editors:o.a.object.isRequired,defaultBuilder:o.a.object.isRequired,templateLoading:o.a.func.isRequired,activeTemplateGroup:o.a.string.isRequired,templateGroup:o.a.object.isRequired};var it=at},391:function(e,t,n){},392:function(e,t,n){"use strict";var r=n(0),c=n(6),l=n.n(c),o=(n(487),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:l()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(o.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(o.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(o.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(o.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(o.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(o.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},405:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(0),c=n(2),l=n(8),o=n(1),a=n(10),i=n.n(a),u=n(14),s=n(302),f=n(4),b=n(364),m=n(22),p=n(85),d=n(298),O=n(20),j=n(312),v=n(6),y=n.n(v),_=n(436),h=n(24),g=n(12),w=n(469);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.toStringTag||"@@toStringTag";function l(n,r,c,l){var i=r&&r.prototype instanceof a?r:a,u=Object.create(i.prototype);return N(u,"_invoke",function(n,r,c){var l,a,i,u=0,s=c||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return l=t,a=0,i=e,b.n=n,o}};function m(n,r){for(a=n,i=r,t=0;!f&&u&&!c&&t<s.length;t++){var c,l=s[t],m=b.p,p=l[2];n>3?(c=p===r)&&(i=l[(a=l[4])?5:(a=3,3)],l[4]=l[5]=e):l[0]<=m&&((c=n<2&&m<l[1])?(a=0,b.v=r,b.n=l[1]):m<p&&(c=n<3||l[0]>r||r>p)&&(l[4]=n,l[5]=r,b.n=p,a=0))}if(c||n>1)return o;throw f=!0,r}return function(c,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),a=s,i=p;(t=a<2?e:i)||!f;){l||(a?a<3?(a>1&&(b.n=-1),m(a,i)):b.n=i:b.v=i);try{if(u=2,l){if(a||(c="next"),t=l[c]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=l.return)&&t.call(l),a<2&&(i=TypeError("The iterator does not provide a '"+c+"' method"),a=1);l=e}else if((t=(f=b.n<0)?i:n.call(r,b))!==o)break}catch(t){l=e,a=1,i=t}finally{u=1}}return{value:t,done:f}}}(n,c,l),!0),u}var o={};function a(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(N(t={},r,(function(){return this})),t),f=u.prototype=a.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,N(e,c,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=u,N(f,"constructor",u),N(u,"constructor",i),i.displayName="GeneratorFunction",N(u,c,"GeneratorFunction"),N(f),N(f,c,"Generator"),N(f,r,(function(){return this})),N(f,"toString",(function(){return"[object Generator]"})),(T=function(){return{w:l,m:b}})()}function N(e,t,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}(N=function(e,t,n,r){if(t)c?c(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){N(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function C(e,t,n,r,c,l,o){try{var a=e[l](o),i=a.value}catch(e){return void n(e)}a.done?t(i):Promise.resolve(i).then(r,c)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.b=function(e){var t,n=e.onCloseModal,a=e.onComplete,i=e.isWorking,b=e.className,v=e.children,E=(Object(g.i)(),I(Object(r.useState)(""),2)),S=E[0],k=E[1],P=I(Object(r.useState)(""),2),N=P[0],F=P[1],x=I(Object(r.useState)([]),2),L=x[0],B=x[1],D=I(Object(r.useState)(!1),2),R=D[0],G=D[1],U=Object(O.b)("ul").isProFeatureLocked,z=Object(h.a)().setGlobalCheckout,M=(Object(w.a)().fetch,Object(d.a)()),q=M.getCurrentTemplate,W=M.getScratchTemplateType,$=M.getActiveGroup,V=M.getActiveSubFilter,J=q(),Y=W(),H=$(),Q=V();if(J.isBuildFromScratch&&"json"===Y)return Object(r.createElement)(_.a,{modalTitle:Object(f.kb)()?Object(o.__)("Import Store Checkout","funnel-builder"):Object(o.__)("Import Funnel","funnel-builder"),apiPath:Object(f.kb)()?"/store-checkout/import":"/funnels/import",onRequestClose:function(){return n()},onSuccess:function(e){var t=Array.isArray(e.funnel_id)?e.funnel_id[0]:e.funnel_id;t&&(Object(f.kb)()?(z({funnel_id:t,funnel_status:!1}),Object(g.k)({},"/store-checkout",{})):Object(g.k)({},"/funnels/".concat(t),{}))}});var K=Object(r.createElement)(r.Fragment,null,"wc_checkout"===H?Object(o.__)("Create Store Checkout","funnel-builder"):Object(o.__)("Create Funnel","funnel-builder")),Z=function(){var e,t=(e=T().m((function e(){return T().w((function(e){for(;;)switch(e.n){case 0:if("new"!==Y&&J.isBuildFromScratch||N){e.n=1;break}return k("Funnel title is required field"),e.a(2);case 1:k(""),a&&a(N,L,J.isBuildFromScratch&&"new"!==Y&&R);case 2:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,c){var l=e.apply(t,n);function o(e){C(l,r,c,o,a,"next",e)}function a(e){C(l,r,c,o,a,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),X=function(){return J.isBuildFromScratch?"new"===Y?Object(c.isEmpty)(N.trim())||!1===H&&Object(c.isEmpty)(L):Object(c.isEmpty)(R):Object(c.isEmpty)(N.trim())},ee=function(e){return"wc_checkout"===e.type&&Q&&j.e.hasOwnProperty(e.type)&&j.e[e.type].hasOwnProperty(Q)?" - ".concat(j.e[e.type][Q]," ")+Object(o.__)("Step","funnel-builder"):""};return Object(r.createElement)(l.Modal,{title:K,className:y()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",b),onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},v,S&&Object(r.createElement)(p.a,{errorMessage:S}),(!J.isBuildFromScratch||"existing"!==Y)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(X()||Z())}},Object(r.createElement)(l.TextControl,{placeholder:Object(o.__)("Enter funnel name","funnel-builder"),label:Object(o.__)("Name","funnel-builder"),value:N,onChange:function(e){return F(e)},disabled:i})),J.isBuildFromScratch&&("new"===Y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===H?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(o.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(m.c,{content:Object(o.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(m.c,{content:Object(o.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(o.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(o.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(s.a,{value:L,onChange:function(e){B(e)},options:Object.keys(f.tb).map((function(e){return{value:e,label:f.tb[e],isPro:U&&"upsell"===e}})),disabled:i})))):Object(r.createElement)(A,{onSelect:function(e){return G(e)},activeGroup:H})),!J.isBuildFromScratch&&J.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(o.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=J.steps)||void 0===t?void 0:t.filter((function(e){return!U||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(m.c,{content:f.tb[e.type]+ee(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:i},Object(o.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,disabled:X()||i,isBusy:i,onClick:Z,className:X()?"bwf-no-ripple":"",name:"add-funnel"},Object(o.__)("Done","funnel-builder"))))};var A=function(e){var t=e.onSelect,n=e.activeGroup,l=e.label,a=void 0===l?Object(o.__)("Funnel","funnel-builder"):l,u=I(Object(r.useState)([]),2),s=u[0],p=u[1],d=I(Object(r.useState)(""),2),O=d[0],j=d[1],v=I(Object(r.useState)({}),2),y=v[0],_=v[1],h=I(Object(r.useState)([]),2),g=h[0],w=h[1],E=I(Object(r.useState)(!0),2),S=E[0],P=E[1],T=function(e){P(!0),i()({path:Object(f.y)("/funnels".concat(Object(f.x)(k({},e))))}).then((function(e){e.status?(p(e.items),Object(c.size)(e.items)?w(e.items.map((function(e){return{key:e.id,value:e.title}}))):w([{key:"no-data",value:"No Data Found"}])):e.items||w([]),P(!1)})).catch((function(e){console.log(e),P(!1)}))};Object(r.useEffect)((function(){Object(c.isEmpty)(O)?T({limit:10,need_steps_data:!0}):T({limit:10,s:O,need_steps_data:!0})}),[O]);var N=Object(r.useMemo)((function(){var e;if(Object(c.isEmpty)(s))return[];var t=null===(e=s.find((function(e){return e.id===y.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(c.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[y]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,a),Object(r.createElement)(b.a,{onSearch:function(e){return j(e)},isLoading:S,items:g,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),_(e)},blurText:y.value,placeholder:Object(o.__)("Searchâ€¦","funnel-builder"),helpText:Object(o.__)("Search and select a Funnel to import steps","funnel-builder")}),!Object(c.isEmpty)(y)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(o.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(c.isEmpty)(N)?Object(r.createElement)(m.c,{content:Object(o.__)("No Steps","funnel-builder"),border:!0}):N.map((function(e,t){return Object(r.createElement)(m.c,{content:Object(f.sb)(e),border:!0,key:"steps-".concat(t)})})))))}},406:function(e,t,n){"use strict";var r=n(0),c=n(2),l=n(8),o=n(1),a=n(10),i=n.n(a),u=n(31),s=n(4),f=n(364);function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",c=n.toStringTag||"@@toStringTag";function l(n,r,c,l){var i=r&&r.prototype instanceof a?r:a,u=Object.create(i.prototype);return p(u,"_invoke",function(n,r,c){var l,a,i,u=0,s=c||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return l=t,a=0,i=e,b.n=n,o}};function m(n,r){for(a=n,i=r,t=0;!f&&u&&!c&&t<s.length;t++){var c,l=s[t],m=b.p,p=l[2];n>3?(c=p===r)&&(i=l[(a=l[4])?5:(a=3,3)],l[4]=l[5]=e):l[0]<=m&&((c=n<2&&m<l[1])?(a=0,b.v=r,b.n=l[1]):m<p&&(c=n<3||l[0]>r||r>p)&&(l[4]=n,l[5]=r,b.n=p,a=0))}if(c||n>1)return o;throw f=!0,r}return function(c,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),a=s,i=p;(t=a<2?e:i)||!f;){l||(a?a<3?(a>1&&(b.n=-1),m(a,i)):b.n=i:b.v=i);try{if(u=2,l){if(a||(c="next"),t=l[c]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=l.return)&&t.call(l),a<2&&(i=TypeError("The iterator does not provide a '"+c+"' method"),a=1);l=e}else if((t=(f=b.n<0)?i:n.call(r,b))!==o)break}catch(t){l=e,a=1,i=t}finally{u=1}}return{value:t,done:f}}}(n,c,l),!0),u}var o={};function a(){}function i(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(p(t={},r,(function(){return this})),t),f=u.prototype=a.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,p(e,c,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=u,p(f,"constructor",u),p(u,"constructor",i),i.displayName="GeneratorFunction",p(u,c,"GeneratorFunction"),p(f),p(f,c,"Generator"),p(f,r,(function(){return this})),p(f,"toString",(function(){return"[object Generator]"})),(m=function(){return{w:l,m:b}})()}function p(e,t,n,r){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}(p=function(e,t,n,r){if(t)c?c(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var l=function(t,n){p(e,t,(function(e){return this._invoke(t,n,e)}))};l("next",0),l("throw",1),l("return",2)}})(e,t,n,r)}function d(e,t,n,r,c,l,o){try{var a=e[l](o),i=a.value}catch(e){return void n(e)}a.done?t(i):Promise.resolve(i).then(r,c)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,a=t.title,p=t.is_substep,j=void 0!==p&&p,v=e.onStepSelected,y=e.label,_=void 0===y?Object(o.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):y,h=e.showCheckbox,g=void 0!==h&&h,w=O(Object(r.useState)(!g),2),E=w[0],S=(w[1],O(Object(r.useState)(!1),2)),k=S[0],P=S[1],T=O(Object(r.useState)(null),2),N=T[0],C=T[1],I=O(Object(r.useState)(!1),2),F=I[0],A=I[1],x=O(Object(r.useState)(null),2),L=x[0],B=x[1],D=Object(r.useRef)(new AbortController),R=F&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(l.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(o.__)("".concat(a," not found"),"funnel-builder")))),G=function(){var e,t=(e=m().m((function e(t){var r,l,o;return m().w((function(e){for(;;)switch(e.n){case 0:return P(!0),e.p=1,r=j&&!0===j?"&is_substep=true":"",e.n=2,i()({path:Object(s.y)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:D.current.signal});case 2:l=e.v,C(l||null),Object(c.isEmpty)(l.steps)&&Object(c.isEmpty)(l.pages)?A(!0):A(!1),e.n=4;break;case 3:e.p=3,"AbortError"===(o=e.v).name?console.log(o):(C(null),A(!0));case 4:P(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var l=e.apply(t,n);function o(e){d(l,r,c,o,a,"next",e)}function a(e){d(l,r,c,o,a,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return G(""),function(){D.current.abort()}}),[]);var U=Object(c.isObject)(N)&&!Object(c.isNull)(N)?b(Object(c.isEmpty)(N)?[]:N):Object(c.isArray)(N)&&!Object(c.isEmpty)(N)?N.map((function(e){return{key:e.id,value:e.name}})):[],z=L&&L.hasOwnProperty("name")?Object(u.decodeEntities)(L.name):"";return Object(r.createElement)(r.Fragment,null,E&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},_),Object(r.createElement)(f.a,{onSearch:function(e){return G(e)},isLoading:k,items:U,multiGroup:Object(c.isObject)(N),error:R,onItemClick:function(e){B(e),v({step:e,copyFrom:E})},blurText:z,placeholder:Object(o.__)("Searchâ€¦","funnel-builder"),stepTitle:a,helpText:["offer","wc_order_bump"].includes(n)?null:Object(o.__)("Search and select a page from a Funnel, Post or a Page.","funnel-builder")})))}},412:function(e,t,n){},413:function(e,t,n){"use strict";var r=n(0),c=n(1),l=(n(447),n(8)),o=n(5),a=n(20);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),i=(e.btnLabel,e.dropZoneContent),u=Object(a.c)().showSnackbar,s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):u(Object(c.__)("Uploaded file is not valid.","funnel-builder")):u(Object(c.__)("Uploaded file not found","funnel-builder"))},f=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(l.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(l.FormFileUpload,{isSecondary:!0,accept:f,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},i||null,"application/json"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(c.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(c.__)("(Maximum file size allowed 10 MB)","funnel-builder"))))}}),Object(r.createElement)(l.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},436:function(e,t,n){"use strict";var r=n(0),c=n(2),l=n(1),o=n(10),a=n.n(o),i=n(8),u=n(4),s=n(413),f=(n(481),n(5)),b=(n(482),n(6)),m=n.n(b),p=n(18),d=function(e){var t=e.value,n=void 0===t?0:t,c=e.content,l=void 0===c?"":c,o=e.isLoading,a=e.error;return Object(r.createElement)("div",{className:"bwf-circular-progress-bar"},Object(r.createElement)("div",{className:m()("bwf-circular-progress-bar__circle",{"is-loading":o,"is-complete":!o&&!a,"is-danger":a}),role:"progressbar","aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100",style:{"--value":n,"--pg-bar-color":a?p.DANGER_COLOR:p.BLUE_BASE}}),Object(r.createElement)("div",{className:"bwf-circular-progress-bar__content"},a?Object(r.createElement)(f.a,{icon:"cross",size:"72",color:"#ffffff"}):o?l:Object(r.createElement)(f.a,{icon:"tick",size:"72",color:"#ffffff"})))},O=n(20),j=n(50),v=n(291),y=n(405),_=n(24),h=n(14);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,l,o,a=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){u=!0,c=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw c}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=Object(r.createElement)(r.Fragment,null,Object(l.__)("It seems there was an issue during the import. Please contact","funnel-builder"),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Funnel+Import+Failed&utm_campaign=FB+Lite+Plugin",target:"_blank",rel:"noopener noreferrer"},Object(l.__)(" support ","funnel-builder")),Object(l.__)("with JSON for a review.","funnle-builder"));t.a=function(e){e.isOpen;var t=e.onRequestClose,n=e.onSuccess,o=void 0===n?c.noop:n,b=e.modalTitle,m=e.apiPath,p=e.showSuccessState,g=void 0===p||p,w=e.extraParams,S=void 0===w?{}:w,P=e.enableClone,N=void 0!==P&&P,C=Object(O.b)().isBasicFeatureLocked,I=k(Object(r.useState)({status:!1,modalTitle:b||Object(l.__)("Import Funnel","funnel-builder")}),2),F=I[0],A=I[1],x=k(Object(r.useState)(null),2),L=x[0],B=x[1],D=k(Object(r.useState)("json"),2),R=D[0],G=D[1],U=k(Object(r.useState)(0),2),z=U[0],M=U[1],q=k(Object(r.useState)(!1),2),W=q[0],$=q[1],V=Object(O.c)().showSnackbar,J=Object(j.a)().updateStatus,Y=Object(_.a)().setGlobalCheckout,H=Object(r.useRef)(new AbortController),Q=function(e){if(o(e),e.setup&&J(e.setup),Object(u.kb)()&&z&&Y({funnel_id:e.funnel_id,funnel_name:"",funnel_status:!1}),"json"===R){if(!g)return void t(!0);A(E(E({},F),{},{status:!0,title:Object(l.__)("Sucessfully Imported","funnel-builder"),loading:!1,message:Object(l.__)("Successfully Imported and added in your FunnelKit.","funnel-builder")}))}else t(!0)},K=function(){A(E(E({},F),{},{status:!1,loading:!1,error:!0,title:Object(l.__)("Importing Failed","funnel-builder"),message:T})),B(null)};Object(r.useEffect)((function(){L&&function(){A(E(E({},F),{},{title:Object(l.__)("Please waitâ€¦","funnel-builder"),loading:!0,message:Object(r.createElement)(r.Fragment,null,Object(l.__)("Please wait! We are importing ")+(null==L?void 0:L.name)+Object(l.__)(" data."))}));try{var e=new FormData;if(e.append("files",L),!Object(c.isEmpty)(S))for(var t=0,n=Object.entries(S);t<n.length;t++){var o=k(n[t],2),i=o[0],s=o[1];e.append(i,s)}a()({method:"POST",body:e,path:Object(u.y)(m||"/funnels/import"),signal:H.current.signal}).then((function(e){1==e.status?Q(e):K()})).catch((function(){K()}))}catch(e){console.log(e),K()}}()}),[L]);var Z=function(){var e;null===(e=H.current)||void 0===e||e.abort(),t(F.status)},X=function(){switch(R){case"json":return!L;case"existing":return!z;default:return!1}};return Object(r.createElement)(i.Modal,{className:"bwf-admin-modal bwf-admin-modal-small bwf-import-funnel-modal",title:F.modalTitle,onRequestClose:Z,shouldCloseOnClickOutside:!W},F.title&&Object(r.createElement)("div",{className:"bwf-import-modal-content"},Object(r.createElement)(d,{value:"100",content:Object(r.createElement)(f.a,{icon:"import-file",size:"56"}),isLoading:F.loading,error:F.error}),Object(r.createElement)("div",{className:"bwf-drop-import-content bwf-mt-10"},F.message),(!0===F.status||F.error)&&Object(r.createElement)(h.a,{isPrimary:!0,onClick:Z,className:"bwf-import-modal-close-btn"},Object(l.__)("Close","funnel-builder"))),!F.title&&Object(r.createElement)(r.Fragment,null,N&&Object(r.createElement)(v.a,{options:[{value:"json",label:Object(l.__)("Upload JSON","funnel-builder")},{value:"existing",label:Object(l.__)("Clone Funnel","funnel-builder"),isPro:C}],selected:R,onChange:function(e){G(e)},className:""}),"json"===R?Object(r.createElement)(s.a,{onFileSelected:function(e){return B(e)},filetypeArray:["application/json"]}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,{activeGroup:Object(u.kb)()?"wc_checkout":"",onSelect:function(e){return M(e)}}),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(h.a,{onClick:t,className:"bwf-modal-cancel-btn"},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(h.a,{isPrimary:!0,disabled:X()||W,isBusy:W,onClick:function(){$(!0),a()({path:Object(u.y)("".concat(Object(u.kb)()?"/store-checkout":"/funnels","/duplicate/").concat(z)),method:Object(u.kb)()?"POST":"GET"}).then((function(e){e.status?Q(e):V(e.msg),$(!1)})).catch((function(e){V(e.msg),$(!1)}))},className:X()?"bwf-no-ripple":"",name:"add-funnel"},Object(l.__)("Done","funnel-builder"))))))}},447:function(e,t,n){},469:function(e,t,n){"use strict";var r=n(2),c=n(19),l=n(4),o=n(122),a=n(10),i=n.n(a);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=["state","fetch","setStateProp"],f=["s","page","filter","path"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}t.a=function(){var e=Object(c.a)("funnelList"),t=e.state,n=e.fetch,a=e.setStateProp,u=d(e,s),b=(0,Object(o.a)().getFunnels)();return m(m({},u),{},{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=e.query,o=e.offset,i=e.limit,u=e.search,s=e.getDraft,b=void 0!==s&&s,p=e.getSteps,O=void 0!==p&&p,j=e.categories,v=e.signal,y=(c.s,c.page,c.filter,c.path,d(c,f)),_=m(m(m(m({offset:o,limit:i},u&&{s:u}),{},{filters:y},b&&{need_draft_count:""}),O&&{need_steps_data:!0}),!Object(r.isEmpty)(j)&&{categories:j.map((function(e){return e.id})).join(",")});u&&!Object(r.isEmpty)(u)?a("search",u):t.search&&a("search",null),a("analyticsLoading",!0),n("GET",Object(l.y)("/funnels"),_,{signal:v})},fetchAnalytics:function(e){a("analyticsLoading",!0);var t=Object(r.cloneDeep)(b),n=t.map((function(e){return e.id}));i()({path:Object(l.y)("/funnels/funnel-list/revenue"),method:"POST",data:{funnel_ids:n},signal:e}).then((function(e){e.status&&e.funnels&&(t=t.map((function(t){return e.funnels[parseInt(t.id)]?m(m({},t),{},{stats:e.funnels[t.id]}):t})),a("funnels",t),a("analyticsLoaded",!0)),a("analyticsLoading",!1)})).catch((function(e){"AbortError"!==e.name&&console.log(e),a("analyticsLoading",!1)}))},setFunnelListValues:function(e,t){a(e,t)},updateFunnelInList:function(e,t){var n=b.map((function(n){return n.id===e?m(m({},n),t):n}));a("funnels",n)},setSearchText:function(e){a("search",e)}})}},481:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){}}]);