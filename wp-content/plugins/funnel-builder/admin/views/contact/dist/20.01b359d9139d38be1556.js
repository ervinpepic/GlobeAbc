(window.webpackJsonp=window.webpackJsonp||[]).push([[20,22],{1214:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(25),c=n(2),a=n(13),i=n.n(a),l=n(1),u=n(10),s=n.n(u),f=n(8),b=n(75),p=n(65),d=n(55),m=n(44),O=n(5),y=n(7),g=n(3),j=n.n(g),v=n(33),h=n(11),w=n(17),_=n(178),E=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}Object(w.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(y.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(_.b)();this.currentResult=Object(y.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;v.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(56).a),P=n(278);var S=n(360),C=n(4),k=n(39),A=n(50),N=n(14),T=n(82);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=e.title,n=e.selectedItemsCount,o=e.onBackupChange,c=x(Object(r.useState)(!0),2),a=c[0],i=c[1];Object(r.useEffect)((function(){o(!0)}),[]);var u=Object(r.createElement)(T.a,{type:"checkbox",checked:a,onChange:function(e){i(e),o(e)},label:Object(l.__)("Download this complete funnel before deletion.","funnel-builder"),className:"bwf-mt-16"});return n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,n)," ",Object(l._n)("funnel","funnels",n,"funnel-builder"),Object(l.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")),u):t?Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,t),Object(l.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),u):Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to delete funnel. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),u)},M=n(20),D=["override_global_checkout"];function R(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return B(u,"_invoke",function(n,r,o){var c,i,l,u=0,s=o||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,a}};function p(n,r){for(i=n,l=r,t=0;!f&&u&&!o&&t<s.length;t++){var o,c=s[t],p=b.p,d=c[2];n>3?(o=d===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,b.v=r,b.n=c[1]):p<d&&(o=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),i=s,l=d;(t=i<2?e:l)||!f;){c||(i?i<3?(i>1&&(b.n=-1),p(i,l)):b.n=l:b.v=l);try{if(u=2,c){if(i||(o="next"),t=c[o]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==a)break}catch(t){c=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,o,c),!0),u}var a={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(B(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,B(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,B(f,"constructor",u),B(u,"constructor",l),l.displayName="GeneratorFunction",B(u,o,"GeneratorFunction"),B(f),B(f,o,"Generator"),B(f,r,(function(){return this})),B(f,"toString",(function(){return"[object Generator]"})),(R=function(){return{w:c,m:b}})()}function B(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(B=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var c=function(t,n){B(e,t,(function(e){return this._invoke(t,n,e)}))};c("next",0),c("throw",1),c("return",2)}})(e,t,n,r)}function L(e,t,n,r,o,c,a){try{var i=e[c](a),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,o=e.resetSelection,c=e.onSuccess,a=e.deleteModal,i=e.setDeleteModal,u=e.exportAction,f=e.setExportLoader,b=z(Object(r.useState)([]),2),p=b[0],d=b[1],O=z(Object(r.useState)(0),2),g=O[0],w=O[1],_=Object(r.useRef)(!0),S=Object(M.c)().showSnackbar,T=Object(A.a)().updateStatus,x=function(){o&&o(),d([]),setTimeout((function(){B.reset()}),2100)},I=(0,Object(k.a)().getModalData)(),B=function(e,t,n){var r=j.a.useRef(!1),o=j.a.useState(0)[1],c=Object(h.k)(e,t,n),a=Object(P.b)(),i=j.a.useRef();i.current?i.current.setOptions(c):i.current=new E(a,c);var l=i.current.getCurrentResult();j.a.useEffect((function(){r.current=!0;var e=i.current.subscribe(v.a.batchCalls((function(){r.current&&o((function(e){return e+1}))})));return function(){r.current=!1,e()}}),[]);var u=j.a.useCallback((function(e,t){i.current.mutate(e,t).catch(h.i)}),[]);if(l.error&&i.current.options.useErrorBoundary)throw l.error;return Object(y.a)({},l,{mutate:u,mutateAsync:l.mutate})}(function(){var e,t=(e=R().m((function e(t){return R().w((function(e){for(;;)switch(e.n){case 0:if(!_.current){e.n=1;break}return f(Object(l.sprintf)(/* translators: %1$s: number of funnels, %2$s: 'Funnels' or 'Funnel' depending on count */
Object(l.__)("We're backing up and deleting %1$s %2$s","funnel-builder"),p.length,p.length>1?Object(l.__)("Funnels","funnel-builder"):Object(l.__)("Funnel","funnel-builder"))),e.n=1,u(p.join(","),"");case 1:return e.n=2,s()({path:Object(C.y)("/funnels"),method:"DELETE",data:t});case 2:return e.a(2,e.v)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){L(c,r,o,a,i,"next",e)}function i(e){L(c,r,o,a,i,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(e){if(e.setup){var t=e.setup,n=(t.override_global_checkout,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,D));T(n)}S(Object(l.sprintf)(/* translators: %1$s: number of funnels, %2$s: 'Funnels' or 'Funnel' depending on count */
Object(l.__)("%1$s %2$s deleted successfully","funnel-builder"),p.length,p.length>1?Object(l.__)("funnels","funnel-builder"):Object(l.__)("funnel","funnel-builder"))),x(),c&&c(),i(!1)},onError:x});Object(r.useEffect)((function(){if(a){var e=[];Object.keys(n.selected).forEach((function(t){n.selected[t]&&e.push(t)})),d(e)}}),[a]);return Object(r.useEffect)((function(){var e=n.selected,t=Object.keys(e).reduce((function(t,n){return e[n]?t+1:t}),0);w(t)}),[n]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,{className:"bwf-admin-modal-small",modalTitle:I&&1<I.count?Object(l.__)("Delete Funnels","funnel-builder"):Object(l.__)("Delete Funnel","funnel-builder"),content:!B.isError&&Object(r.createElement)(F,{onBackupChange:function(e){return _.current=e},selectedItemsCount:g}),cancelButtonText:Object(l.__)("Cancel","funnel-builder"),confirmButton:Object(r.createElement)(N.a,{className:"is-danger",disabled:B.isLoading,isBusy:B.isLoading,onClick:function(){var e={id:p.map((function(e){return e})).toString()};B.mutate(e)}},Object(l.__)("Delete","funnel-builder")),errorMessage:B.isError&&(B.error&&B.error.message?B.error.message:Object(l.__)("Unable to delete Funnels","funnel-builder")),onRequestClose:function(){return i(!1)},isOpen:a,confirmDescription:Object(l.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))},$=n(405),q=n(168),Y=n(122),V=n(469),W=n(12),J=n(64),H=n(436),K=n(29),Q=n(34),X=n(525),Z=n(22),ee=(n(935),n(463)),te=n(131);function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oe=function(e){var t=e.onclose,n=e.title,o=e.desc,a=e.updateFunnel,i=e.isLoading,u=e.renameTitle,s=ne(Object(r.useState)(n),2),b=s[0],p=s[1],d=ne(Object(r.useState)(o),2),m=d[0],O=d[1],y=Object(c.isEmpty)(b.trim());return Object(r.createElement)(f.Modal,{title:Object(l.__)("Edit ".concat(u),"funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(l.__)("Title","funnel-builder")),Object(r.createElement)(f.TextControl,{value:b,onChange:function(e){p(e)},onKeyDown:function(e){if("Enter"===e.key){if(y)return;a(b,m)}},className:Object(c.size)(b.trim())?"":"bwf-error-border"}),Object(c.size)(b.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(l.__)("Title is required","funnel-builder")),Object(r.createElement)(f.TextareaControl,{label:Object(l.__)("Description","funnel-builder"),className:"bwf-description bwf-mt-24",value:m,onChange:function(e){O(e)}}),Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions bwf-mt-24"},Object(r.createElement)(N.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(N.a,{isPrimary:!0,onClick:function(){return a(b,m)},disabled:y,isBusy:i,className:y?"bwf-no-ripple":""},Object(l.__)("Update","funnel-builder"))))},ce=n(28);function ae(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(){return Object(r.createElement)(d.a,null,Object(r.createElement)(d.c,{className:"bwf-w-1/3"},Object(r.createElement)(d.a,{justify:"flex-start",gap:6},Object(r.createElement)(d.c,null,Object(r.createElement)(ce.a,{h:18,w:18,br:3})),Object(r.createElement)(d.c,null,Object(r.createElement)(ce.a,{h:20,w:200}),Object(r.createElement)(ce.a,{h:16,w:240,mt:6})))),Object(r.createElement)(d.c,{className:"bwf-w-2/5"},Object(r.createElement)(d.a,{gap:2},ae(Array(4)).map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"analytics-".concat(t)},Object(r.createElement)(d.c,null,Object(r.createElement)(ce.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(ce.a,{h:12,w:60,mt:4})))})))),Object(r.createElement)(d.c,null,Object(r.createElement)(d.a,{gap:3},ae(Array(2)).map((function(e,t){return Object(r.createElement)(d.c,{key:"action-btn-".concat(t)},Object(r.createElement)(ce.a,{h:30,w:0==t?94:30,br:8}))})))))},ue=n(30),se=n(85),fe=n(23),be=n(54),pe=n(40),de=n(18);n(63);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Oe=["override_global_checkout"];function ye(){return(ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function ge(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function je(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return ve(u,"_invoke",function(n,r,o){var c,i,l,u=0,s=o||[],f=!1,b={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,a}};function p(n,r){for(i=n,l=r,t=0;!f&&u&&!o&&t<s.length;t++){var o,c=s[t],p=b.p,d=c[2];n>3?(o=d===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=p&&((o=n<2&&p<c[1])?(i=0,b.v=r,b.n=c[1]):p<d&&(o=n<3||c[0]>r||r>d)&&(c[4]=n,c[5]=r,b.n=d,i=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),i=s,l=d;(t=i<2?e:l)||!f;){c||(i?i<3?(i>1&&(b.n=-1),p(i,l)):b.n=l:b.v=l);try{if(u=2,c){if(i||(o="next"),t=c[o]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==a)break}catch(t){c=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,o,c),!0),u}var a={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ve(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ve(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,ve(f,"constructor",u),ve(u,"constructor",l),l.displayName="GeneratorFunction",ve(u,o,"GeneratorFunction"),ve(f),ve(f,o,"Generator"),ve(f,r,(function(){return this})),ve(f,"toString",(function(){return"[object Generator]"})),(je=function(){return{w:c,m:b}})()}function ve(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(ve=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var c=function(t,n){ve(e,t,(function(e){return this._invoke(t,n,e)}))};c("next",0),c("throw",1),c("return",2)}})(e,t,n,r)}function he(e,t,n,r,o,c,a){try{var i=e[c](a),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){he(c,r,o,a,i,"next",e)}function i(e){he(c,r,o,a,i,"throw",e)}a(void 0)}))}}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(M.b)(),n=t.isBasicFeatureLocked,a=t.isProFeatureLocked,u=location&&location.search?Object(o.parse)(location.search.substring(1)):{};u.s;Object(C.m)(Object(l.__)("Funnels","funnel-builder"));var y=Object(V.a)(),g=y.fetch,j=y.setFunnelListValues,v=y.updateFunnelInList,h=y.setLoading,w=y.setSearchText,_=y.fetchAnalytics,E=Object(Y.a)(),P=E.getFunnels,N=E.getPageNumber,x=E.getPerPageCount,I=E.getTotalCount,D=E.getOffset,R=E.getLoadingStatus,B=E.getMessage,L=E.getCountData,z=E.getError,U=E.getSearch,ne=E.isLoadingAnalytics,re=Object(K.a)().setFunnelTitle,ae=Object(M.c)().showSnackbar,ie=Se(Object(r.useState)(!1),2),me=ie[0],ve=ie[1],he=Se(Object(r.useState)(!1),2),_e=he[0],Pe=he[1],ke=Se(Object(r.useState)(!1),2),Ae=ke[0],Ne=ke[1],Te=Se(Object(r.useState)({loading:!1,status:!1}),2),xe=Te[0],Ie=Te[1],Fe=Se(Object(r.useState)(!1),2),Me=Fe[0],De=Fe[1],Re=Se(Object(r.useState)({id:0,title:"",desc:""}),2),Be=Re[0],Le=Re[1],ze=Se(Object(r.useState)(!1),2),Ue=ze[0],Ge=ze[1],$e=Se(Object(r.useState)(""),2),qe=$e[0],Ye=$e[1],Ve=Object(r.useRef)(),We=P(),Je=D(),He=x(),Ke=R(),Qe=I(),Xe=N(),Ze=(B(),L()),et=(ue.a.getIsFunnelLoading(),Object(pe.a)().setPreviousStep),tt=Object(k.a)().getPageCountData,nt=Object(J.a)().setPageCountData,rt=tt(),ot=Object(C.A)(),ct=Object(M.a)({type:"funnels",fetch:function(e){return Dt({categories:e})}}),at=ct.setAssignCategoryItems,it=ct.renderCategoryColumn,lt=ct.renderCategorySelector,ut=ct.renderAssignCategoryModal,st=ct.renderCategoryTags,ft=ct.selectedCategories,bt=ct.refreshCategory,pt=ct.renderProModal,dt=ct.setShowProModal,mt=ct.renderAssignCategoryButton;Object(r.useEffect)((function(){nt(Ee(Ee({},rt),Ze))}),[Ze]),Object(r.useEffect)((function(){qe&&(ae(qe),Object(c.delay)(Ye,3e3,""),Ye(""))}),[qe]);var Ot=Se(Object(r.useState)(!1),2),yt=Ot[0],gt=Ot[1],jt=Object(A.a)().updateStatus,vt=Object(Q.a)(),ht=vt.getFirstFunnel,wt=vt.isStatusLoading,_t=ht(),Et=z(),Pt=U(),St=Object(r.useRef)(!0),Ct=Object(r.useRef)(new AbortController),kt=Object(r.useRef)(new AbortController);Object(r.useEffect)((function(){_t?Dt():wt||h(!1)}),[Je,He,_t,wt]),Object(r.useEffect)((function(){var e;Ke||!_t||Object(c.isEmpty)(We)||_(null==kt||null===(e=kt.current)||void 0===e?void 0:e.signal)}),[Ke]),Object(r.useEffect)((function(){return window.scrollTo(0,0),function(){_t&&h(!0),w(null),et("")}}),[]);var At=function(){var e,t=null===(e=Ve.current)||void 0===e?void 0:e.getClientRects()[0].top;t&&Ve.current&&t<168.7&&window.scrollTo(0,60)},Nt=Object(r.useMemo)((function(){var e={};if(Array.isArray(We)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw c}}}}(We);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[We]),Tt=Object(S.b)(Nt),xt=Tt.singleSelectProps,It=Tt.floatingBarProps,Ft=Tt.resetSelection,Mt=function(e){e!==He&&(j("limit",e),At())},Dt=function(e){var t,n;null===(t=Ct.current)||void 0===t||t.abort(),null===(n=kt.current)||void 0===n||n.abort(),h(!0),Ct.current=new AbortController,kt.current=new AbortController,g(Ee({query:u,offset:Je,limit:He,search:Pt,getDraft:!0,getSteps:!1,categories:ft,signal:Ct.current.signal},e))},Rt=function(){var e=we(je().m((function e(t,n){var r,o;return je().w((function(e){for(;;)switch(e.n){case 0:return r=parseInt(t)>0?Object(C.y)("/funnels/export/?ids=".concat(t)):Object(C.y)("/funnels/export/"),e.p=1,e.n=2,s()({path:r,method:"GET"});case 2:return o=e.v,Array.isArray(o)&&(Object(C.r)(o,"FunnelKit-"+n),Ie({status:!1})),e.a(2,o);case 3:throw e.p=3,e.v;case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}(),Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(l.__)("We are exporting the funnel.","funnel-builder");Ie({status:!0,loading:!0,className:"bwf-admin-modal-no-header",content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"}," ",Object(l.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-light"},e))})},Lt=function(){var e=we(je().m((function e(){var t,n,r,o=arguments;return je().w((function(e){for(;;)switch(e.n){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:0,n=o.length>1&&void 0!==o[1]?o[1]:"funnel",o.length>2&&void 0!==o[2]&&o[2]?Bt():Ie((function(e){return Ee(Ee({},e),{},{loadingButtonText:"",disableConfirm:!0})})),e.p=1,e.n=2,Rt(t,n);case 2:e.n=4;break;case 3:e.p=3,r=e.v,Ie({status:!0,error:r.message});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),zt=function(){var e=we(je().m((function e(t){var n;return je().w((function(e){for(;;)switch(e.n){case 0:return Ie({status:!0,loading:!0,className:"bwf-admin-modal-no-header",content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(l.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(l.__)("We are duplicating the funnel.","funnel-builder")))}),e.p=1,e.n=2,s()({path:Object(C.y)("/funnels/duplicate/".concat(t)),method:"GET"}).then((function(e){!0===e.status?(Dt({offset:0}),Ie({status:!1}),bt(!0)):Ie({status:!0,error:Object(l.__)("Something went wrong, Please check your response","funnel-builder")})}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,Ie({status:!0,error:n.message});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=we(je().m((function e(t,n){var r;return je().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,!St.current){e.n=1;break}return Bt(Object(l.__)("We're downloading funnel before deletion","funnel-builder")),e.n=1,Rt(t,n);case 1:s()({path:Object(C.y)("/funnels"),method:"DELETE",data:{id:t.toString()}}).then((function(e){if(!0===e.status){if(Dt({offset:0}),Ie({status:!1}),e.setup){var t=e.setup,n=(t.override_global_checkout,ge(t,Oe));jt(n)}Ye(Object(l.__)("Funnel deleted successfully","funnel-builder")),bt(!0)}else Ie({status:!0,error:Object(l.__)("Something went wrong.","funnel-builder")})})).catch((function(e){Ie({status:!0,error:e.message})})),e.n=3;break;case 2:e.p=2,r=e.v,Ie({status:!0,error:r.message});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,n){return e.apply(this,arguments)}}();Object(q.a)("funnels",Object(l.__)("All","funnel-builder"),!1,!1,!1,Ue,Ge);var Gt=[{key:"conversion",label:function(e){return Object(l._n)("Conversion","Conversions",e,"funnel-builder")}},{key:"total",label:Object(l.__)("Revenue","funnel-builder"),isCurrency:!0},{key:"bump_total",label:Object(l.__)("Order Bumps","funnel-builder"),isCurrency:!0,isPro:!0},{key:"offer_total",label:Object(l.__)("One Click Upsells","funnel-builder"),isCurrency:!0,isPro:!0}],$t=function(e,t,n){var r=Object(c.find)(We,{id:e}),o=Object(c.get)(r,"stats.".concat(t),0);return n?ot.formatAmount(o):o},qt=function(e){return Object(r.createElement)(d.c,{className:"bwf-funnel-list__analytics"},Gt.map((function(t,n){var o=t.key,i=t.label,l=t.isCurrency,u=t.isPro,s=$t(e.id,o,l),f=Object(c.isFunction)(i)?i($t(e.id,o)):i;return Object(r.createElement)("span",{key:"funnel-an-".concat(n)},ne?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ce.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(ce.a,{h:12,w:60,mt:4})):Object(r.createElement)(r.Fragment,null,u&&a?Object(r.createElement)(O.a,{icon:"king",color:de.NOTICE_YELLOW,size:16}):s,Object(r.createElement)("br",null),Object(r.createElement)("span",null,f)))})))},Yt=We?We.map((function(e,t){var o,i;return{content:Object(r.createElement)(d.a,{justify:"space-between",className:"bwf-flex-wrap",align:"center"},Object(r.createElement)(d.c,{className:"bwf-w-1/3"},Object(r.createElement)(d.a,{justify:"flex-start",gap:6,key:"bwf-funnel-list-".concat(t)},Object(r.createElement)(d.c,{className:"bwf-funnel-list-card__checkbox-wrap",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)(T.a,ye({type:"checkbox",checked:!1,onChange:function(){}},xt[e.id]))),Object(r.createElement)(d.c,{className:"bwf-funnel-list__funnel-name-wrap"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-flex-wrap"},Object(r.createElement)(fe.a,{href:Object(C.L)("/funnels/".concat(e.id)),className:"bwf-funnel-list__funnel-name"},e.title,Object(r.createElement)(Z.c,{content:Object(l.sprintf)(/* translators: %s: Step Count. */
Object(l.__)("%1$s %2$s","funnel-builder"),0===parseInt(e.steps)?"No":parseInt(e.steps),1===parseInt(e.steps)?"Step":"Steps")})),it(e.categories),e.hasOwnProperty("draft_count")&&0!==parseInt(e.draft_count)&&Object(r.createElement)(Z.c,{content:Object(l.sprintf)(/* translators: %d: Draft Count. */
Object(l.__)("%1$d Draft","funnel-builder"),e.draft_count,e.draft_count>1?"s":""),type:"warning"})),Object(r.createElement)("div",{className:"bwf-funnel-list__funnel-desc"},e.desc),Object(r.createElement)(d.a,{justify:"flex-start",className:"bwf-funnel-list__funnel-time"},Object(r.createElement)(d.c,{title:Object(C.F)(e.date_added,!0)},Object(l.__)("Created","funnel-builder")," ",Object(C.M)(e.date_added).fromNow()),!Object(c.isEmpty)(e.last_update)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.c,{className:"bwf-dot"},Object(r.createElement)("svg",{width:"4",height:"4",viewBox:"0 0 4 4",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)("circle",{cx:"2",cy:"2",r:"2",fill:"#82838E"}))),Object(r.createElement)(d.c,{title:Object(C.F)(e.last_update,!0)},Object(l.__)("Last Edited","funnel-builder")," ",Object(C.M)(e.last_update).fromNow())))))),qt(e),Object(r.createElement)(d.c,null,(i=e,Object(r.createElement)("div",{className:"bwf-funnel-list__actions"},Object(r.createElement)(d.a,{gap:3,justify:"flex-end"},Object(r.createElement)(d.c,null,i.hasOwnProperty("view_link")&&""!==i.view_link?Object(r.createElement)("a",{href:i.view_link,target:"__blank",className:"bwf-btn-gray components-button has-icon has-text is-secondary is-small is-preview",onClick:function(e){e.stopPropagation()}},Object(r.createElement)(O.a,{color:"#353030",icon:"view",size:"16"}),Object(l.__)("Preview","funnel-builder")):Object(r.createElement)(f.Button,{isSecondary:!0,isSmall:!0,className:"bwf-btn-gray is-preview",onClick:function(e){e.stopPropagation(),Ie({status:!0,modalTitle:Object(l.__)("Alert","funnel-builder"),content:Object(l.__)("Please create steps to preview the funnel.","funnel-builder"),closeIcon:!1,buttonConfirm:Object(l.__)("Close","funnel-builder"),onConfirm:function(){return Ie({status:!1})}})}},Object(r.createElement)(O.a,{color:"#353030",icon:"view",size:"16"}),Object(l.__)("Preview","funnel-builder"))),Object(r.createElement)(d.c,null,Object(r.createElement)(b.a,{menuPosition:"bottom left",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){Le({id:i.id,title:i.title,desc:i.desc}),t()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(l.__)("Edit","funnel-builder")))),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){n?gt(!0):(zt(i.id),t())}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(l.__)("Duplicate","funnel-builder")),n&&Object(r.createElement)(d.c,null,Object(r.createElement)(Z.b,null)))),mt({children:Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){a?dt(!0):(at(i.id),t())}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(l.__)("Assign Category","funnel-builder")),a&&Object(r.createElement)(d.c,null,Object(r.createElement)(Z.b,null))))}),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){Lt(i.id,i.title,!0),t()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(l.__)("Export","funnel-builder")))),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){var e={status:!0,modalTitle:Object(l.__)("Delete Funnel","funnel-builder"),content:Object(r.createElement)(F,{title:i.title,onBackupChange:function(e){St.current=e}}),buttonConfirm:Object(l.__)("Delete","funnel-builder"),buttonCancel:Object(l.__)("Cancel","funnel-builder"),confirmButtonClass:"is-danger"};Ie(Ee(Ee({},e),{},{onConfirm:function(){Ie(Ee(Ee({},e),{},{disableConfirm:!0})),Ut(i.id,i.title)}})),t()},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(l.__)("Delete","funnel-builder")))))}}))))))),onClick:function(){re(e.hasOwnProperty("title")?e.title:""),Object(W.k)({},"/funnels/".concat(e.id))},className:null!==(o=xt[e.id])&&void 0!==o&&o.checked?"is-selected":""}})):[],Vt=Object.keys(It.selected).reduce((function(e,t){return It.selected[t]?e+1:e}),0);if(Et)return Object(r.createElement)(se.a,{errorMessage:Et.hasOwnProperty("message")?Et.message:Object(l.__)("Unable to load funnels","funnel-builder")});var Wt=function(e){switch(e){case"delete":De(!0);break;case"assign_category":if(a)dt(!0);else{var t=[];Object.keys(It.selected).forEach((function(e){It.selected[e]&&t.push(e)})),at(1===t.length?t[0]:t)}}},Jt=function(e,t){Ie({status:!0,loading:!1,modalTitle:Object(l.__)("Export Funnels","funnel-builder"),className:"bwf-funnel-export-modal",content:Object(r.createElement)("div",null,Object(l.__)("You are about to export ","funnel-builder")," ",Object(r.createElement)("strong",null,t)," ",Object(l._n)("funnel","funnels",t,"funnel-builder"),"."),buttonConfirm:Object(l.__)("Export All","funnel-builder"),onConfirm:function(){return Lt(e,"")}})},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&Vt){var t=[];Object.keys(It.selected).forEach((function(e){It.selected[e]&&t.push(e)})),Jt(t.join(","),Vt)}else Jt(0,Object(l.__)("all","funnel-builder"))},Kt=(!Ke&&!wt&&!Pt&&Object(c.isEmpty)(We),!Ke&&!wt&&!Pt&&Object(c.isEmpty)(We)&&!_t),Qt=function(){return Object(r.createElement)(ee.default,{urlDependency:!1,onImportComplete:function(e){var t=e.funnel_id;Object(W.k)({},"/funnels/".concat(t))},hideTabs:["wc_checkout","upsell"]})};return Object(r.createElement)(r.Fragment,null,Ue?Qt():Object(r.createElement)(r.Fragment,null,me&&Object(r.createElement)($.b,{onCloseModal:function(){return ve(!1)}}),Kt||me?Qt():Object(r.createElement)(r.Fragment,null,Object(r.createElement)(X.a,{data:Yt,query:Ee(Ee({},u),{},{paged:Xe,s:Pt,categories:ft}),onPageChange:function(e,t){j("offset",(e-1)*He),At()},onQueryChange:function(e){return"per_page"!==e?function(){}:Mt},totalRows:Qe,rowsPerPage:He,classNames:"bwf-funnel-card-list",isLoading:Ke,placeholder:Object(r.createElement)(le,null),action:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Vt?Object(r.createElement)("div",{className:"bwf-selected-count-wrap"},Vt," ",Object(l._n)("item","items",Vt,"funnel-builder"),Object(l.__)(" selected in the list","funnel-builder")," ",Object(r.createElement)(f.Button,{isLink:!0,onClick:function(){return Ft()}},Object(r.createElement)(O.a,{icon:"cross",height:"12",width:"12",color:"#0073aa"})," ",Object(l.__)("Clear All","funnel-builder"))," "):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(te.a,{query:u,isLoading:Ke,totalRows:Qe,setSearchData:function(e){if(0!==parseInt(Je))return w(e),void j("offset",0);Dt({offset:0,search:e}),At()}}),lt({disabled:Ke})),Vt>0&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.Button,{isSecondary:!0,className:" bwf-btn-gray bwf-export-icon",onClick:function(){Ht()},icon:Object(r.createElement)(O.a,{icon:"export",size:16}),disabled:!Yt.length,iconSize:16,isSmall:!0},Object(l.__)("Export","funnel-builder")),mt({children:Object(r.createElement)(f.Button,{isSecondary:!0,className:"bwf-btn-gray",onClick:function(){Wt("assign_category")},icon:Object(r.createElement)(O.a,{icon:"add-circle",size:16}),iconSize:16,isSmall:!0},Object(l.__)("Assign Category","funnel-builder"))}),Object(r.createElement)(f.Button,{isSecondary:!0,className:"bwf-btn-gray",onClick:function(){Wt("delete")},icon:Object(r.createElement)(O.a,{icon:"trash",size:16}),iconSize:16,isSmall:!0},Object(l.__)("Delete","funnel-builder")))),Object(r.createElement)("div",{className:"bwf-funnel-list-action-right"},Object(r.createElement)(f.Button,{isSecondary:!0,className:" bwf-btn-gray bwf-export-icon",onClick:function(){Ht(!0)},icon:Object(r.createElement)(O.a,{icon:"export",size:16}),disabled:!Yt.length,iconSize:16,isSmall:!0},Object(l.__)("Export All","funnel-builder")),Object(r.createElement)(f.Button,{isSecondary:!0,className:" bwf-btn-gray bwf-export-icon",onClick:function(){Pe(!0)},icon:Object(r.createElement)(O.a,{icon:"import",size:16}),disabled:!Yt.length,iconSize:16,isSmall:!0},Object(l.__)("Import","funnel-builder")))),actionMeta:st(),ref:Ve})),Object(r.createElement)(G,{floatingBarProps:It,resetSelection:Ft,onSuccess:function(){Dt({offset:0}),bt(!0)},deleteModal:Me,setDeleteModal:De,exportAction:Rt,setExportLoader:Bt}),Be.id>0&&Object(r.createElement)(oe,{renameTitle:Object(l.__)("Funnel","funnel-builder"),title:Be.title,desc:Be.desc,onclose:function(){return Le({id:0})},updateFunnel:function(e,t){return function(e,t){Be.title!==e||Be.desc!==t?(Ne(!0),s()({path:Object(C.y)("/funnels/".concat(Be.id)),method:"POST",data:{title:e,description:t,funnel_id:Be.id}}).then((function(n){n.id&&v(Be.id,{title:e,desc:t,last_update:i()().format("YYYY-MM-DD HH:mm:ss")}),Le({id:0}),Ne(!1)})).catch((function(e){console.log(e),Le({id:0}),Ne(!1)}))):Le({id:0})}(e,t)},isLoading:Ae}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-small "+xe.className,confirmText:xe.confirmText,modalTitle:xe.modalTitle,confirmButtonText:xe.buttonConfirm,confirmButtonClass:xe.confirmButtonClass,cancelButtonText:xe.buttonCancel,onConfirm:xe.onConfirm,isLoading:xe.loading,successMessage:xe.success,errorMessage:xe.error,content:xe.content,onRequestClose:function(){return Ie({status:!1})},isOpen:xe.status,closeIcon:!xe.hasOwnProperty("closeIcon")||xe.closeIcon,disableConfirm:xe.disableConfirm}),_e&&Object(r.createElement)(H.a,{onRequestClose:function(){return Pe(!1)},onSuccess:Dt})),Object(r.createElement)(be.a,{isOpen:!!yt,onRequestClose:function(){return gt(!1)},modalContent:{feature:Object(l.__)("Duplicate Funnel","funnel-builder"),proLink:Object(C.U)(["Funnel","Duplicate","Upgrade","Modal"])},type:2}),ut({items:We}),pt({proLink:Object(C.U)(["Funnel","Categories","Upgrade","Modal"])}))}},345:function(e,t,n){"use strict";var r=n(0),o=n(1),c=n(8),a=n(6),i=n.n(a),l=n(15),u=n.n(l),s=n(2),f=(n(348),n(5)),b=n(288),p=n(289);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function j(e,t,n){return t=v(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w=[10,25,50,75,100],_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e])).state={inputValue:n.props.page},n.previousPage=n.previousPage.bind(n),n.nextPage=n.nextPage.bind(n),n.onInputChange=n.onInputChange.bind(n),n.onInputBlur=n.onInputBlur.bind(n),n.perPageChange=n.perPageChange.bind(n),n.selectInputValue=n.selectInputValue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(a=[{key:"getPerPageOptions",value:function(){var e=this.props.perPageOptions;return[].concat(m(void 0===e?[]:e),w).sort((function(e,t){return e-t}))}},{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,o=t.total,c=t.page;n(parseInt(e,10));var a=Math.ceil(o/parseInt(e,10));c>a&&r(a)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,o=parseInt(e.target.value,10);o!==r&&Number.isFinite(o)&&o>0&&this.pageCount&&this.pageCount>=o&&n(o,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var a=i()("bwf-pagination-link",{"is-active":t>1}),l=i()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(o.sprintf)(Object(o.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(c.Button,{className:a,disabled:!(t>1),onClick:this.previousPage,label:Object(o.__)("Previous Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-left",width:16})),Object(r.createElement)(c.Button,{className:l,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(o.__)("Next Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=this.getPerPageOptions().map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(b.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(r.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(o.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,o=e.className,c=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var a=i()("bwf-pagination",o);return this.pageCount<=1?t>this.getPerPageOptions()[0]&&Object(r.createElement)("div",{className:a},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:a},this.renderPageArrows(),c&&this.renderPerPagePicker())}}])&&y(n.prototype,a),l&&y(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,l}(r.Component);_.propTypes={page:u.a.number.isRequired,onPageChange:u.a.func,perPage:u.a.number.isRequired,onPerPageChange:u.a.func,total:u.a.oneOfType([u.a.number,u.a.string]).isRequired,className:u.a.string,showPagePicker:u.a.bool,showPerPagePicker:u.a.bool,showPageArrowsLabel:u.a.bool};var E={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0};t.a=Object(p.a)(_,E)},348:function(e,t,n){},360:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return g}));var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t=l(Object(r.useState)({}),2),n=t[0],o=t[1],c=Object.keys(n).length>0&&Object.keys(n).reduce((function(e,t){return e&&n[t]}),!0);Object(r.useEffect)((function(){var t={};if(e)for(var n in e)t[n]=!1;o(t)}),[e]);var u=Object(r.useCallback)((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=a(a({},n),{},i({},e,t));o(r)}}),[n]),s=Object(r.useMemo)((function(){var e={};for(var t in n){var r={selected:n[t],checked:n[t],onChange:u(t)};e[t]=r}return e}),[n]),f=Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!c;o(e)}),[n,c]);return{singleSelectProps:s,selectAllProps:{selected:c,checked:c,onChange:f},floatingBarProps:{items:e,selected:n},resetSelection:Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!1;o(e)}),[n])}},f=n(8),b=n(1),p=n(5),d=(n(410),n(411),function(e){var t=e.number,n=void 0===t?0:t;return Object(r.createElement)("span",{className:"bwf-count-badge"},n)}),m=n(64);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.selected,n=void 0===t?{}:t,o=e.items,c=void 0===o?{}:o,a=e.actions,i=void 0===a?[]:a,l=e.onAction,u=O(Object(r.useState)(!1),2),s=u[0],y=u[1],g=function(e){return e.length>0?{gridTemplateColumns:e.reduce((function(e){return"".concat(e," auto")}),"")}:{}}(i),j=Object(m.a)().setModalData,v=Object.keys(n).reduce((function(e,t){return n[t]?e+1:e}),0);Object(r.useEffect)((function(){y(v>0)}),[v]);var h=Object.keys(c).filter((function(e){return n[e]})).map((function(e){return c[e]})),w=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d,{number:v}),Object(r.createElement)("b",{style:{marginLeft:"5px"}},Object(b.__)("Items Selected","funnel-builder")));return s&&Object(r.createElement)("div",{className:"bwf-floating-action-bar-outer"},Object(r.createElement)("div",{className:"bwf-floating-action-bar"},Object(r.createElement)("div",{className:"bwf-floating-action-bar-wrapper"},Object(r.createElement)("span",{className:"bwf-floating-action-bar-count"},w),Object(r.createElement)("div",{className:"bwf-floating-action-bar-actions",style:g},i.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)("span",{key:"bulk-action-".concat(t),title:e.hint?e.hint:"",onClick:function(){if(l){if("delete"===e.id){var t=h.length,n=1===h.length?h[0].title:"";j({title:n,count:t})}l(e.id,h)}}},Object(r.createElement)(p.a,{icon:e.icon}))}))),Object(r.createElement)(f.Button,{isSecondary:!0,onClick:function(){return y(!1)}},Object(b.__)("Close","funnel-builder")))))}},410:function(e,t,n){},411:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(126),c=n(2),a=n(1),i=n(376),l=n(298),u=n(81),s=n(4),f=n(12),b=function(e){var t=Object(r.useRef)(!0),n=Object(l.a)(),o=n.getTemplates,a=n.getActiveBuilder,i=n.getActiveGroup,u=Object(c.isEmpty)(o()),s=i(),f=a();Object(r.useEffect)((function(){var n,r;t.current||!e.current||u||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[u,s,f]),Object(r.useEffect)((function(){t.current&&!Object(c.isEmpty)(f)&&(window.scrollTo(0,0),t.current=!1)}),[f])},p=n(20),d=n(312);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(p.b)("ul").isProFeatureLocked,n=Object(l.a)(),m=n.getTemplates,O=n.getBuilders,g=(n.getFilters,n.getDefaultBuilder),j=n.templateLoading,v=n.getActiveBuilder,h=n.getActiveSubFilter,w=n.getActiveGroup,_=n.getCurrentTemplate,E=Object(u.a)().setActiveGroup,P=e.onImportComplete,S=e.isStoreCheckout,C=void 0!==S&&S,k=e.scratchConfirmModalData,A=e.storeCheckoutId,N=e.isStoreChekoutExists,T=void 0!==N&&N,x=e.templateListNotice,I=e.showImportNotice,F=e.urlDependency,M=void 0===F||F,D=e.showEditors,R=void 0===D||D,B=e.showTemplatesNav,L=void 0===B||B,z=e.showBuildFromScratch,U=void 0===z||z,G=e.showSelectedTemplates,$=void 0!==G&&G,q=e.previewCustomizeEnabled,Y=void 0!==q&&q,V=e.hideTabs,W=void 0===V?[]:V,J=Object(f.i)().importType,H=m(),K=O(),Q=JSON.parse(JSON.stringify(K)),X=g(),Z=v(),ee=j(),te=h(),ne=_(),re=Object(o.useParams)(),oe=re.id,ce=void 0===oe?0:oe,ae=re.filter,ie=void 0===ae?"funnel":ae,le=re.builder,ue=re.templateId,se=re.step,fe=Object(r.useRef)();b(!Object(s.kb)()&&fe);var be,pe=M?ue:ne.id,de=M?se:ne.activeStep,me=C&&A?A:ce,Oe=w(),ye=me||C||!M?Oe:ie,ge={funnel:Object(a.__)("All","funnel-builder"),wc_checkout:Object(a.__)("Checkout","funnel-builder"),landing:Object(a.__)("Sales Funnels","funnel-builder"),optin:Object(a.__)("Lead Funnels","funnel-builder")};((me||T||W.includes("wc_checkout"))&&delete ge.wc_checkout,T&&(ge.upsell&&delete ge.upsell,me||(ge.wc_checkout=Object(a.__)("Checkout","funnel-builder"))),!t||me||W.includes("upsell")||(ge.upsell=Object(a.__)("One Click Upsell","funnel-builder")),Q&&Q.wc_checkout&&Q.wc_checkout.customizer&&delete Q.wc_checkout.customizer,"funnel"===J)&&(null===(be=Q[ye])||void 0===be||delete be.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var je=function(){var e=le||X;return Object(c.isEmpty)(Z)||(e=Z),Q&&Q[ye]&&!Q[ye][e]&&(e=Q[ye][X]?X:"elementor"),e},ve=["1","2","3","inline","popup"],he=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&ve.includes(te)?H[t][Z][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.kb)()?"/store-checkout":me?"/funnels/".concat(me):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(i.a,{filters:d.e,templates:H,activeBuilder:je(),templateCards:function(){if(Object(c.isEmpty)(H)||Object(c.isEmpty)([ye]))return{};var e,t=je(),n={};if("upsell"===ye)n=null===(e=H[ye])||void 0===e?void 0:e[t];else if("funnel"===ye){var r=H[ye][t];for(var o in r){var a,i=r[o];if(r[o].hasOwnProperty("group")||$&&!$.includes(i.name))if(!(i.group.includes("sales")||i.group.includes("optin")||null!==(a=r[o])&&void 0!==a&&a.build_from_scratch))continue;n[o]=r[o]}}else for(var l in H.funnel[t]){var u=H.funnel[t][l];(!$||$&&$.includes(u.name))&&("landing"===ye&&u.group.includes("sales")||"optin"===ye&&u.group.includes("optin")||"wc_checkout"===ye&&u.group.includes("wc_checkout"))&&(n[l]=u)}return n}(),editors:Q,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:ye,templateGroup:ge,previewData:function(){if(Object(c.isEmpty)(H)||!pe)return{};var e={success:!0},t=[],n=[];try{var r=je();if("upsell"===ye){t=[];var o=r;for(var i in"oxy"===o&&(o="oxygen"),"customizer"===o&&(o="elementor"),H[ye][r]){var l=H[ye][r][i];if(!l.build_from_scratch){var u={};u.id=i,u.funnel=i,u.slug=i,u.name=l.name,u.thumbnail=l.thumbnail,u.template=pe,u.pro=l.pro,u.preview="https://templates-".concat(o,".funnelswp.com/offer/").concat(null==l?void 0:l.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:i,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(null==l?void 0:l.prevslug,"/")})}}e.activeTemplate={id:pe,thumbnail:pe,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(H[ye][r][pe].prevslug,"/"),slug:pe,prevId:pe,name:H[ye][r][pe].name,pro:H[ye][r][pe].pro,tempPro:H[ye][r][pe].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(ye){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=H.funnel[r][pe];t=f.steps?f.steps.map((function(e){var t=H[e.type][r][he(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+he(e.slug,e.type));var o="";switch(e.type){case"landing":o=Object(a.__)("Sales Page","funnel-builder");break;case"wc_checkout":o=Object(a.__)("Checkout Page","funnel-builder");break;case"upsell":o=Object(a.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":o=Object(a.__)("Thank You Page","funnel-builder");break;case"optin":o=Object(a.__)("Optin Page","funnel-builder");break;case"optin_ty":o=Object(a.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var o=H[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(o.prevslug),preview:_e(e.type,o,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(pe),slug:he(e.slug,e.type),funnel:pe,step:e.type,name:o,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var b=f?f.steps.filter((function(e){return e.type===de})):[],p=H[b[0].type][r][he(b[0].slug,b[0].type)];e.activeTemplate={thumbnail:"".concat(de,"-").concat(pe),prevId:"".concat(de,"-").concat(p.prevslug),preview:_e(b[0].type,p,r),slug:pe,name:H.funnel[r][pe].name,pro:H.funnel[r][pe].pro,tempPro:H.funnel[r][pe].pro,group:"funnel",filters:!!p.group_type&&Object.keys(p.group_type),type:de,funnelGroup:f.group,filter:"wc_checkout"===de?p.no_steps:p.group?p.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:me,onImportComplete:P,templateFilterCheck:function(e){return!me||"funnel"===J||!1===te||!1===te||!(!me||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:C,parentRoute:Ee,showTemplatesNav:L,showBuildFromScratch:!!U&&("funnel"!==J||C&&!me),funnelTitleModalData:y({},C&&{title:Object(a.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:k,importApiPrefix:C?"store-checkout":"funnels",templateListNotice:x,showImportNotice:I,urlDependency:M,showEditors:R,previewCustomizeEnabled:Y,listRef:fe}))}},525:function(e,t,n){"use strict";var r=n(0),o=n(6),c=n.n(o),a=n(345),i=(n(526),n(2)),l=n(5);function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(r.forwardRef)((function(e,t){var n=e.data,o=e.rowsPerPage,s=void 0===o?10:o,f=e.totalRows,b=e.onQueryChange,p=e.query,d=void 0===p?{}:p,m=e.onPageChange,O=e.action,y=e.classNames,g=e.isLoading,j=e.placeholder,v=e.actionMeta,h=!(Object(i.isEmpty)(null==d?void 0:d.s)&&Object(i.isEmpty)(null==d?void 0:d.categories)||g||n.length);return Object(r.createElement)("div",{ref:t,className:c()("bwf-card-list-wrap",y,{"no-search-result":h,"is-loading":g})},O&&Object(r.createElement)("div",{className:"bwf-card-list__header"},O),v,Object(r.createElement)("div",{className:"bwf-card-list__list"},g?u(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-card-list__card",key:"bwf-card-item-".concat(t)},j)})):n.length?n.map((function(e,t){var n=e.content,o=e.onClick,a=e.className;return Object(r.createElement)("div",{className:c()("bwf-card-list__card",a,{"is-clickable":!!o}),onClick:o,key:"bwf-card-item-".concat(t)},n)})):h&&Object(r.createElement)(l.a,{icon:"no-search-result",width:"206",height:"190"})),!Object(i.isEmpty)(d)&&!g&&n.length>0&&Object(r.createElement)(a.a,{key:parseInt(d.paged,10)||1,page:parseInt(d.paged,10)||1,perPage:s,total:f,onPageChange:m,onPerPageChange:b&&b("per_page")}))}))},526:function(e,t,n){},935:function(e,t,n){}}]);